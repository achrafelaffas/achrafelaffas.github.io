(self.webpackChunkblood_donation=self.webpackChunkblood_donation||[]).push([[179],{2011:(Tt,Ue,W)=>{"use strict";W.d(Ue,{Dh:()=>Se,GT:()=>Te,cc:()=>qe,hO:()=>it,on:()=>J,pX:()=>ye,xv:()=>Re});var f=W(4650),G=W(9260),V=W(2122);Tt=W.hmd(Tt);const pe=["ngOnDestroy"],ye=(Be,je,Ze,Ye={})=>new Proxy(Be,{get:($e,ze)=>Ze.runOutsideAngular(()=>{var st;if(Be[ze])return!(null===(st=Ye?.spy)||void 0===st)&&st.get&&Ye.spy.get(ze,Be[ze]),Be[ze];if(pe.indexOf(ze)>-1)return()=>{};const z=je.toPromise().then(Ee=>{const Me=Ee&&Ee[ze];return"function"==typeof Me?Me.bind(Ee):Me&&Me.then?Me.then(oe=>Ze.run(()=>oe)):Ze.run(()=>Me)});return new Proxy(()=>{},{get:(Ee,Me)=>z[Me],apply:(Ee,Me,oe)=>z.then(re=>{var fe;const me=re&&re(...oe);return!(null===(fe=Ye?.spy)||void 0===fe)&&fe.apply&&Ye.spy.apply(ze,oe,me),me})})})}),Te=(Be,je)=>{je.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Ye=>{Object.defineProperty(Be.prototype,Ye,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Ye))})})};class Ne{constructor(je){return je}}const Se=new f.OlP("angularfire2.app.options"),Re=new f.OlP("angularfire2.app.name");function J(Be,je,Ze){const $e="object"==typeof Ze&&Ze||{};$e.name=$e.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const st=G.Z.apps.filter(z=>z&&z.name===$e.name)[0]||je.runOutsideAngular(()=>G.Z.initializeApp(Be,$e));try{JSON.stringify(Be)!==JSON.stringify(st.options)&&ee("error",`${st.name} Firebase App already initialized with different options${Tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ne(st)}const ee=(Be,...je)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Be](...je)},ae={provide:Ne,useFactory:J,deps:[Se,f.R0b,[new f.FiY,Re]]};let it=(()=>{class Be{constructor(Ze){G.Z.registerVersion("angularfire",V.q4.full,"core"),G.Z.registerVersion("angularfire",V.q4.full,"app-compat"),G.Z.registerVersion("angular",f.q4F.full,Ze.toString())}static initializeApp(Ze,Ye){return{ngModule:Be,providers:[{provide:Se,useValue:Ze},{provide:Re,useValue:Ye}]}}}return Be.\u0275fac=function(Ze){return new(Ze||Be)(f.LFG(f.Lbi))},Be.\u0275mod=f.oAB({type:Be}),Be.\u0275inj=f.cJS({providers:[ae]}),Be})();function qe(Be,je,Ze,Ye,$e){const[,ze,st]=globalThis.\u0275AngularfireInstanceCache.find(z=>z[0]===Be)||[];if(ze)return function ct(Be,je){try{return Be.toString()===je.toString()}catch{return Be===je}}($e,st)||(ke("error",`${je} was already initialized on the ${Ze} Firebase App with different settings.${bt?" You may need to reload as Firebase is not HMR aware.":""}`),ke("warn",{is:$e,was:st})),ze;{const z=Ye();return globalThis.\u0275AngularfireInstanceCache.push([Be,z,$e]),z}}const bt=!!Tt.hot,ke=(Be,...je)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Be](...je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Tt,Ue,W)=>{"use strict";W.d(Ue,{q4:()=>Yc,iC:()=>yr,fc:()=>ld,HU:()=>Un,vb:()=>Dr,JM:()=>Zi});var f=W(4650),G=W(259),V=W(5861),pe=W(9681),ye=W(2090),Te=W(4859),Ne=W(1877),Se=W(8766);const Re="@firebase/installations",J="0.6.1",ae=`w:${J}`,it="FIS_v2",je=new ye.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(A){return A instanceof ye.ZR&&A.code.includes("request-failed")}function Ye({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function $e(A){return{token:A.token,requestStatus:2,expiresIn:re(A.expiresIn),creationTime:Date.now()}}function ze(A,M){return st.apply(this,arguments)}function st(){return(st=(0,V.Z)(function*(A,M){const Y=(yield M.json()).error;return je.create("request-failed",{requestName:A,serverCode:Y.code,serverMessage:Y.message,serverStatus:Y.status})})).apply(this,arguments)}function z({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function Ee(A,{refreshToken:M}){const L=z(A);return L.append("Authorization",function fe(A){return`${it} ${A}`}(M)),L}function Me(A){return oe.apply(this,arguments)}function oe(){return(oe=(0,V.Z)(function*(A){const M=yield A();return M.status>=500&&M.status<600?A():M})).apply(this,arguments)}function re(A){return Number(A.replace("s","000"))}function me(A,M){return tt.apply(this,arguments)}function tt(){return(tt=(0,V.Z)(function*({appConfig:A,heartbeatServiceProvider:M},{fid:L}){const Y=Ye(A),de=z(A),be=M.getImmediate({optional:!0});if(be){const Ot=yield be.getHeartbeatsHeader();Ot&&de.append("x-firebase-client",Ot)}const nt={method:"POST",headers:de,body:JSON.stringify({fid:L,authVersion:it,appId:A.appId,sdkVersion:ae})},Ht=yield Me(()=>fetch(Y,nt));if(Ht.ok){const Ot=yield Ht.json();return{fid:Ot.fid||L,registrationStatus:2,refreshToken:Ot.refreshToken,authToken:$e(Ot.authToken)}}throw yield ze("Create Installation",Ht)})).apply(this,arguments)}function Xe(A){return new Promise(M=>{setTimeout(M,A)})}const _n=/^[cdef][\w-]{21}$/;function St(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const L=function Gt(A){return function At(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return _n.test(L)?L:""}catch{return""}}function Ut(A){return`${A.appName}!${A.appId}`}const an=new Map;function Qn(A,M){const L=Ut(A);Sr(L,M),function Wr(A,M){const L=function qn(){return!Or&&"BroadcastChannel"in self&&(Or=new BroadcastChannel("[Firebase] FID Change"),Or.onmessage=A=>{Sr(A.data.key,A.data.fid)}),Or}();L&&L.postMessage({key:A,fid:M}),function oi(){0===an.size&&Or&&(Or.close(),Or=null)}()}(L,M)}function Sr(A,M){const L=an.get(A);if(L)for(const Y of L)Y(M)}let Or=null;const Bn="firebase-installations-store";let ue=null;function le(){return ue||(ue=(0,Se.X3)("firebase-installations-database",1,{upgrade:(A,M)=>{0===M&&A.createObjectStore(Bn)}})),ue}function we(A,M){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,V.Z)(function*(A,M){const L=Ut(A),de=(yield le()).transaction(Bn,"readwrite"),be=de.objectStore(Bn),Je=yield be.get(L);return yield be.put(M,L),yield de.done,(!Je||Je.fid!==M.fid)&&Qn(A,M.fid),M})).apply(this,arguments)}function xe(A){return ut.apply(this,arguments)}function ut(){return(ut=(0,V.Z)(function*(A){const M=Ut(A),Y=(yield le()).transaction(Bn,"readwrite");yield Y.objectStore(Bn).delete(M),yield Y.done})).apply(this,arguments)}function En(A,M){return ht.apply(this,arguments)}function ht(){return(ht=(0,V.Z)(function*(A,M){const L=Ut(A),de=(yield le()).transaction(Bn,"readwrite"),be=de.objectStore(Bn),Je=yield be.get(L),nt=M(Je);return void 0===nt?yield be.delete(L):yield be.put(nt,L),yield de.done,nt&&(!Je||Je.fid!==nt.fid)&&Qn(A,nt.fid),nt})).apply(this,arguments)}function Ft(A){return fn.apply(this,arguments)}function fn(){return(fn=(0,V.Z)(function*(A){let M;const L=yield En(A.appConfig,Y=>{const de=Nt(Y),be=ft(A,de);return M=be.registrationPromise,be.installationEntry});return""===L.fid?{installationEntry:yield M}:{installationEntry:L,registrationPromise:M}})).apply(this,arguments)}function Nt(A){return Zn(A||{fid:St(),registrationStatus:0})}function ft(A,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(je.create("app-offline"))};const L={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},Y=function wt(A,M){return Nn.apply(this,arguments)}(A,L);return{installationEntry:L,registrationPromise:Y}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:In(A)}:{installationEntry:M}}function Nn(){return(Nn=(0,V.Z)(function*(A,M){try{const L=yield me(A,M);return we(A.appConfig,L)}catch(L){throw Ze(L)&&409===L.customData.serverCode?yield xe(A.appConfig):yield we(A.appConfig,{fid:M.fid,registrationStatus:0}),L}})).apply(this,arguments)}function In(A){return ln.apply(this,arguments)}function ln(){return(ln=(0,V.Z)(function*(A){let M=yield Pn(A.appConfig);for(;1===M.registrationStatus;)yield Xe(100),M=yield Pn(A.appConfig);if(0===M.registrationStatus){const{installationEntry:L,registrationPromise:Y}=yield Ft(A);return Y||L}return M})).apply(this,arguments)}function Pn(A){return En(A,M=>{if(!M)throw je.create("installation-not-found");return Zn(M)})}function Zn(A){return function ai(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function Kt(A,M){return fi.apply(this,arguments)}function fi(){return(fi=(0,V.Z)(function*({appConfig:A,heartbeatServiceProvider:M},L){const Y=cn(A,L),de=Ee(A,L),be=M.getImmediate({optional:!0});if(be){const Ot=yield be.getHeartbeatsHeader();Ot&&de.append("x-firebase-client",Ot)}const nt={method:"POST",headers:de,body:JSON.stringify({installation:{sdkVersion:ae,appId:A.appId}})},Ht=yield Me(()=>fetch(Y,nt));if(Ht.ok)return $e(yield Ht.json());throw yield ze("Generate Auth Token",Ht)})).apply(this,arguments)}function cn(A,{fid:M}){return`${Ye(A)}/${M}/authTokens:generate`}function li(A){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,V.Z)(function*(A,M=!1){let L;const Y=yield En(A.appConfig,be=>{if(!yn(be))throw je.create("not-registered");const Je=be.authToken;if(!M&&te(Je))return be;if(1===Je.requestStatus)return L=ot(A,M),be;{if(!navigator.onLine)throw je.create("app-offline");const nt=ie(be);return L=$t(A,nt),nt}});return L?yield L:Y.authToken})).apply(this,arguments)}function ot(A,M){return He.apply(this,arguments)}function He(){return(He=(0,V.Z)(function*(A,M){let L=yield mt(A.appConfig);for(;1===L.authToken.requestStatus;)yield Xe(100),L=yield mt(A.appConfig);const Y=L.authToken;return 0===Y.requestStatus?li(A,M):Y})).apply(this,arguments)}function mt(A){return En(A,M=>{if(!yn(M))throw je.create("not-registered");return function K(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function $t(A,M){return jt.apply(this,arguments)}function jt(){return(jt=(0,V.Z)(function*(A,M){try{const L=yield Kt(A,M),Y=Object.assign(Object.assign({},M),{authToken:L});return yield we(A.appConfig,Y),L}catch(L){if(!Ze(L)||401!==L.customData.serverCode&&404!==L.customData.serverCode){const Y=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield we(A.appConfig,Y)}else yield xe(A.appConfig);throw L}})).apply(this,arguments)}function yn(A){return void 0!==A&&2===A.registrationStatus}function te(A){return 2===A.requestStatus&&!function Q(A){const M=Date.now();return M<A.creationTime||A.creationTime+A.expiresIn<M+36e5}(A)}function ie(A){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:M})}function Z(){return(Z=(0,V.Z)(function*(A){const M=A,{installationEntry:L,registrationPromise:Y}=yield Ft(M);return Y?Y.catch(console.error):li(M).catch(console.error),L.fid})).apply(this,arguments)}function Ge(){return(Ge=(0,V.Z)(function*(A,M=!1){const L=A;return yield Dt(L),(yield li(L,M)).token})).apply(this,arguments)}function Dt(A){return dt.apply(this,arguments)}function dt(){return(dt=(0,V.Z)(function*(A){const{registrationPromise:M}=yield Ft(A);M&&(yield M)})).apply(this,arguments)}function Ul(A){return je.create("missing-app-config-values",{valueName:A})}const Bl="installations",Go=A=>{const M=A.getProvider("app").getImmediate(),L=function tn(A){if(!A||!A.options)throw Ul("App Configuration");if(!A.name)throw Ul("App Name");const M=["projectId","apiKey","appId"];for(const L of M)if(!A.options[L])throw Ul(L);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(M);return{app:M,appConfig:L,heartbeatServiceProvider:(0,pe._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},Nc=A=>{const M=A.getProvider("app").getImmediate(),L=(0,pe._getProvider)(M,Bl).getImmediate();return{getId:()=>function U(A){return Z.apply(this,arguments)}(L),getToken:de=>function De(A){return Ge.apply(this,arguments)}(L,de)}};(function jl(){(0,pe._registerComponent)(new Te.wA(Bl,Go,"PUBLIC")),(0,pe._registerComponent)(new Te.wA("installations-internal",Nc,"PRIVATE"))})(),(0,pe.registerVersion)(Re,J),(0,pe.registerVersion)(Re,J,"esm2017");const qo="@firebase/remote-config",mr=new ye.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class gs{constructor(M,L,Y,de){this.client=M,this.storage=L,this.storageCache=Y,this.logger=de}isCachedDataFresh(M,L){if(!L)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Y=Date.now()-L,de=Y<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Y}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${de}.`),de}fetch(M){var L=this;return(0,V.Z)(function*(){const[Y,de]=yield Promise.all([L.storage.getLastSuccessfulFetchTimestampMillis(),L.storage.getLastSuccessfulFetchResponse()]);if(de&&L.isCachedDataFresh(M.cacheMaxAgeMillis,Y))return de;M.eTag=de&&de.eTag;const be=yield L.client.fetch(M),Je=[L.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===be.status&&Je.push(L.storage.setLastSuccessfulFetchResponse(be)),yield Promise.all(Je),be})()}}function gi(A=navigator){return A.languages&&A.languages[0]||A.language}class $i{constructor(M,L,Y,de,be,Je){this.firebaseInstallations=M,this.sdkVersion=L,this.namespace=Y,this.projectId=de,this.apiKey=be,this.appId=Je}fetch(M){var L=this;return(0,V.Z)(function*(){const[Y,de]=yield Promise.all([L.firebaseInstallations.getId(),L.firebaseInstallations.getToken()]),Je=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${L.projectId}/namespaces/${L.namespace}:fetch?key=${L.apiKey}`,nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},Ht={sdk_version:L.sdkVersion,app_instance_id:Y,app_instance_id_token:de,app_id:L.appId,language_code:gi()},Ot={method:"POST",headers:nt,body:JSON.stringify(Ht)},qt=fetch(Je,Ot),he=new Promise((Ki,Hs)=>{M.signal.addEventListener(()=>{const ac=new Error("The operation was aborted.");ac.name="AbortError",Hs(ac)})});let tr;try{yield Promise.race([qt,he]),tr=yield qt}catch(Ki){let Hs="fetch-client-network";throw"AbortError"===Ki?.name&&(Hs="fetch-timeout"),mr.create(Hs,{originalErrorMessage:Ki?.message})}let j=tr.status;const Ri=tr.headers.get("ETag")||void 0;let Qc,El;if(200===tr.status){let Ki;try{Ki=yield tr.json()}catch(Hs){throw mr.create("fetch-client-parse",{originalErrorMessage:Hs?.message})}Qc=Ki.entries,El=Ki.state}if("INSTANCE_STATE_UNSPECIFIED"===El?j=500:"NO_CHANGE"===El?j=304:("NO_TEMPLATE"===El||"EMPTY_CONFIG"===El)&&(Qc={}),304!==j&&200!==j)throw mr.create("fetch-status",{httpStatus:j});return{status:j,eTag:Ri,config:Qc}})()}}class Er{constructor(M,L){this.client=M,this.storage=L}fetch(M){var L=this;return(0,V.Z)(function*(){const Y=(yield L.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return L.attemptFetch(M,Y)})()}attemptFetch(M,{throttleEndTimeMillis:L,backoffCount:Y}){var de=this;return(0,V.Z)(function*(){yield function Hl(A,M){return new Promise((L,Y)=>{const de=Math.max(M-Date.now(),0),be=setTimeout(L,de);A.addEventListener(()=>{clearTimeout(be),Y(mr.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,L);try{const be=yield de.client.fetch(M);return yield de.storage.deleteThrottleMetadata(),be}catch(be){if(!function er(A){if(!(A instanceof ye.ZR&&A.customData))return!1;const M=Number(A.customData.httpStatus);return 429===M||500===M||503===M||504===M}(be))throw be;const Je={throttleEndTimeMillis:Date.now()+(0,ye.$s)(Y),backoffCount:Y+1};return yield de.storage.setThrottleMetadata(Je),de.attemptFetch(M,Je)}})()}}class nl{constructor(M,L,Y,de,be){this.app=M,this._client=L,this._storageCache=Y,this._storage=de,this._logger=be,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ks(A,M){const L=A.target.error||void 0;return mr.create(M,{originalErrorMessage:L&&L?.message})}const Ar="app_namespace_store";class Ai{constructor(M,L,Y,de=function xi(){return new Promise((A,M)=>{try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=Y=>{M(ks(Y,"storage-open"))},L.onsuccess=Y=>{A(Y.target.result)},L.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(Ar,{keyPath:"compositeKey"})}}catch(L){M(mr.create("storage-open",{originalErrorMessage:L?.message}))}})}()){this.appId=M,this.appName=L,this.namespace=Y,this.openDbPromise=de}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var L=this;return(0,V.Z)(function*(){const Y=yield L.openDbPromise;return new Promise((de,be)=>{const nt=Y.transaction([Ar],"readonly").objectStore(Ar),Ht=L.createCompositeKey(M);try{const Ot=nt.get(Ht);Ot.onerror=qt=>{be(ks(qt,"storage-get"))},Ot.onsuccess=qt=>{const he=qt.target.result;de(he?he.value:void 0)}}catch(Ot){be(mr.create("storage-get",{originalErrorMessage:Ot?.message}))}})})()}set(M,L){var Y=this;return(0,V.Z)(function*(){const de=yield Y.openDbPromise;return new Promise((be,Je)=>{const Ht=de.transaction([Ar],"readwrite").objectStore(Ar),Ot=Y.createCompositeKey(M);try{const qt=Ht.put({compositeKey:Ot,value:L});qt.onerror=he=>{Je(ks(he,"storage-set"))},qt.onsuccess=()=>{be()}}catch(qt){Je(mr.create("storage-set",{originalErrorMessage:qt?.message}))}})})()}delete(M){var L=this;return(0,V.Z)(function*(){const Y=yield L.openDbPromise;return new Promise((de,be)=>{const nt=Y.transaction([Ar],"readwrite").objectStore(Ar),Ht=L.createCompositeKey(M);try{const Ot=nt.delete(Ht);Ot.onerror=qt=>{be(ks(qt,"storage-delete"))},Ot.onsuccess=()=>{de()}}catch(Ot){be(mr.create("storage-delete",{originalErrorMessage:Ot?.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class Rs{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,V.Z)(function*(){const L=M.storage.getLastFetchStatus(),Y=M.storage.getLastSuccessfulFetchTimestampMillis(),de=M.storage.getActiveConfig(),be=yield L;be&&(M.lastFetchStatus=be);const Je=yield Y;Je&&(M.lastSuccessfulFetchTimestampMillis=Je);const nt=yield de;nt&&(M.activeConfig=nt)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function ch(){return rl.apply(this,arguments)}function rl(){return(rl=(0,V.Z)(function*(){if(!(0,ye.hl)())return!1;try{return yield(0,ye.eu)()}catch{return!1}})).apply(this,arguments)}!function Da(){(0,pe._registerComponent)(new Te.wA("remote-config",function A(M,{instanceIdentifier:L}){const Y=M.getProvider("app").getImmediate(),de=M.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw mr.create("registration-window");if(!(0,ye.hl)())throw mr.create("indexed-db-unavailable");const{projectId:be,apiKey:Je,appId:nt}=Y.options;if(!be)throw mr.create("registration-project-id");if(!Je)throw mr.create("registration-api-key");if(!nt)throw mr.create("registration-app-id");const Ht=new Ai(nt,Y.name,L=L||"firebase"),Ot=new Rs(Ht),qt=new Ne.Yd(qo);qt.logLevel=Ne.in.ERROR;const he=new $i(de,pe.SDK_VERSION,L,be,Je,nt),tr=new Er(he,Ht),j=new gs(tr,Ht,Ot,qt),Ri=new nl(Y,j,Ot,Ht,qt);return function Jn(A){const M=(0,ye.m9)(A);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(Ri),Ri},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(qo,"0.4.1"),(0,pe.registerVersion)(qo,"0.4.1","esm2017")}();const Ps="/firebase-messaging-sw.js",Ko="/firebase-cloud-messaging-push-scope",Ta="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Wl="google.c.a.c_id",dh="google.c.a.c_l",Vu="google.c.a.ts",Sa="google.c.a.e";var ms=(()=>{return(A=ms||(ms={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",ms;var A})();function zi(A){const M=new Uint8Array(A);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hh(A){const L=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Y=atob(L),de=new Uint8Array(Y.length);for(let be=0;be<Y.length;++be)de[be]=Y.charCodeAt(be);return de}const il="fcm_token_details_db",sl="fcm_token_object_Store";function Lc(A){return ol.apply(this,arguments)}function ol(){return ol=(0,V.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(be=>be.name).includes(il))return null;let M=null;return(yield(0,Se.X3)(il,5,{upgrade:(Y=(0,V.Z)(function*(de,be,Je,nt){var Ht;if(be<2||!de.objectStoreNames.contains(sl))return;const Ot=nt.objectStore(sl),qt=yield Ot.index("fcmSenderId").get(A);if(yield Ot.clear(),qt)if(2===be){const he=qt;if(!he.auth||!he.p256dh||!he.endpoint)return;M={token:he.fcmToken,createTime:null!==(Ht=he.createTime)&&void 0!==Ht?Ht:Date.now(),subscriptionOptions:{auth:he.auth,p256dh:he.p256dh,endpoint:he.endpoint,swScope:he.swScope,vapidKey:"string"==typeof he.vapidKey?he.vapidKey:zi(he.vapidKey)}}}else if(3===be){const he=qt;M={token:he.fcmToken,createTime:he.createTime,subscriptionOptions:{auth:zi(he.auth),p256dh:zi(he.p256dh),endpoint:he.endpoint,swScope:he.swScope,vapidKey:zi(he.vapidKey)}}}else if(4===be){const he=qt;M={token:he.fcmToken,createTime:he.createTime,subscriptionOptions:{auth:zi(he.auth),p256dh:zi(he.p256dh),endpoint:he.endpoint,swScope:he.swScope,vapidKey:zi(he.vapidKey)}}}}),function(be,Je,nt,Ht){return Y.apply(this,arguments)})})).close(),yield(0,Se.Lj)(il),yield(0,Se.Lj)("fcm_vapid_details_db"),yield(0,Se.Lj)("undefined"),Fc(M)?M:null;var Y}),ol.apply(this,arguments)}function Fc(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:M}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const Js="firebase-messaging-store";let vo=null;function wo(){return vo||(vo=(0,Se.X3)("firebase-messaging-database",1,{upgrade:(A,M)=>{0===M&&A.createObjectStore(Js)}})),vo}function al(A){return bo.apply(this,arguments)}function bo(){return(bo=(0,V.Z)(function*(A){const M=Eo(A),Y=yield(yield wo()).transaction(Js).objectStore(Js).get(M);if(Y)return Y;{const de=yield Lc(A.appConfig.senderId);if(de)return yield _s(A,de),de}})).apply(this,arguments)}function _s(A,M){return ll.apply(this,arguments)}function ll(){return(ll=(0,V.Z)(function*(A,M){const L=Eo(A),de=(yield wo()).transaction(Js,"readwrite");return yield de.objectStore(Js).put(M,L),yield de.done,M})).apply(this,arguments)}function cl(A){return xa.apply(this,arguments)}function xa(){return(xa=(0,V.Z)(function*(A){const M=Eo(A),Y=(yield wo()).transaction(Js,"readwrite");yield Y.objectStore(Js).delete(M),yield Y.done})).apply(this,arguments)}function Eo({appConfig:A}){return A.appId}const _r=new ye.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Aa(A,M){return sr.apply(this,arguments)}function sr(){return(sr=(0,V.Z)(function*(A,M){const L=yield Os(A),Y=dl(M),de={method:"POST",headers:L,body:JSON.stringify(Y)};let be;try{be=yield(yield fetch(ul(A.appConfig),de)).json()}catch(Je){throw _r.create("token-subscribe-failed",{errorInfo:Je?.toString()})}if(be.error)throw _r.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw _r.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function Gl(A,M){return eo.apply(this,arguments)}function eo(){return(eo=(0,V.Z)(function*(A,M){const L=yield Os(A),Y=dl(M.subscriptionOptions),de={method:"PATCH",headers:L,body:JSON.stringify(Y)};let be;try{be=yield(yield fetch(`${ul(A.appConfig)}/${M.token}`,de)).json()}catch(Je){throw _r.create("token-update-failed",{errorInfo:Je?.toString()})}if(be.error)throw _r.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw _r.create("token-update-no-token");return be.token})).apply(this,arguments)}function Vr(A,M){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,V.Z)(function*(A,M){const Y={method:"DELETE",headers:yield Os(A)};try{const be=yield(yield fetch(`${ul(A.appConfig)}/${M}`,Y)).json();if(be.error)throw _r.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(de){throw _r.create("token-unsubscribe-failed",{errorInfo:de?.toString()})}})).apply(this,arguments)}function ul({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function Os(A){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,V.Z)(function*({appConfig:A,installations:M}){const L=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${L}`})})).apply(this,arguments)}function dl({p256dh:A,auth:M,endpoint:L,vapidKey:Y}){const de={web:{endpoint:L,auth:M,p256dh:A}};return Y!==Ta&&(de.web.applicationPubKey=Y),de}const ys=6048e5;function Bu(A){return es.apply(this,arguments)}function es(){return(es=(0,V.Z)(function*(A){const M=yield Uc(A.swRegistration,A.vapidKey),L={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:M.endpoint,auth:zi(M.getKey("auth")),p256dh:zi(M.getKey("p256dh"))},Y=yield al(A.firebaseDependencies);if(Y){if(Bc(Y.subscriptionOptions,L))return Date.now()>=Y.createTime+ys?rn(A,{token:Y.token,createTime:Date.now(),subscriptionOptions:L}):Y.token;try{yield Vr(A.firebaseDependencies,Y.token)}catch(de){console.warn(de)}return ju(A.firebaseDependencies,L)}return ju(A.firebaseDependencies,L)})).apply(this,arguments)}function ql(A){return ts.apply(this,arguments)}function ts(){return(ts=(0,V.Z)(function*(A){const M=yield al(A.firebaseDependencies);M&&(yield Vr(A.firebaseDependencies,M.token),yield cl(A.firebaseDependencies));const L=yield A.swRegistration.pushManager.getSubscription();return!L||L.unsubscribe()})).apply(this,arguments)}function rn(A,M){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,V.Z)(function*(A,M){try{const L=yield Gl(A.firebaseDependencies,M),Y=Object.assign(Object.assign({},M),{token:L,createTime:Date.now()});return yield _s(A.firebaseDependencies,Y),L}catch(L){throw yield ql(A),L}})).apply(this,arguments)}function ju(A,M){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,V.Z)(function*(A,M){const Y={token:yield Aa(A,M),createTime:Date.now(),subscriptionOptions:M};return yield _s(A,Y),Y.token})).apply(this,arguments)}function Uc(A,M){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,V.Z)(function*(A,M){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hh(M)})})).apply(this,arguments)}function Bc(A,M){return M.vapidKey===A.vapidKey&&M.endpoint===A.endpoint&&M.auth===A.auth&&M.p256dh===A.p256dh}function Zl(A){const M={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function Hu(A,M){if(!M.notification)return;A.notification={};const L=M.notification.title;L&&(A.notification.title=L);const Y=M.notification.body;Y&&(A.notification.body=Y);const de=M.notification.image;de&&(A.notification.image=de);const be=M.notification.icon;be&&(A.notification.icon=be)}(M,A),function Le(A,M){M.data&&(A.data=M.data)}(M,A),function Cn(A,M){var L,Y,de,be,Je;if(!(M.fcmOptions||null!==(L=M.notification)&&void 0!==L&&L.click_action))return;A.fcmOptions={};const nt=null!==(de=null===(Y=M.fcmOptions)||void 0===Y?void 0:Y.link)&&void 0!==de?de:null===(be=M.notification)||void 0===be?void 0:be.click_action;nt&&(A.fcmOptions.link=nt);const Ht=null===(Je=M.fcmOptions)||void 0===Je?void 0:Je.analytics_label;Ht&&(A.fcmOptions.analyticsLabel=Ht)}(M,A),M}function $u(A){return"object"==typeof A&&!!A&&Wl in A}function jc(A,M){const L=[];for(let Y=0;Y<A.length;Y++)L.push(A.charAt(Y)),Y<M.length&&L.push(M.charAt(Y));return L.join("")}function Kl(A){return _r.create("missing-app-config-values",{valueName:A})}jc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),jc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Jo{constructor(M,L,Y){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const de=function kr(A){if(!A||!A.options)throw Kl("App Configuration Object");if(!A.name)throw Kl("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:L}=A;for(const Y of M)if(!L[Y])throw Kl(Y);return{appName:A.name,projectId:L.projectId,apiKey:L.apiKey,appId:L.appId,senderId:L.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:de,installations:L,analyticsProvider:Y}}_delete(){return Promise.resolve()}}function ns(A){return Co.apply(this,arguments)}function Co(){return(Co=(0,V.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(Ps,{scope:Ko}),A.swRegistration.update().catch(()=>{})}catch(M){throw _r.create("failed-service-worker-registration",{browserErrorMessage:M?.message})}})).apply(this,arguments)}function hl(A,M){return ka.apply(this,arguments)}function ka(){return(ka=(0,V.Z)(function*(A,M){if(!M&&!A.swRegistration&&(yield ns(A)),M||!A.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw _r.create("invalid-sw-registration");A.swRegistration=M}})).apply(this,arguments)}function zu(A,M){return ea.apply(this,arguments)}function ea(){return(ea=(0,V.Z)(function*(A,M){M?A.vapidKey=M:A.vapidKey||(A.vapidKey=Ta)})).apply(this,arguments)}function Yr(){return(Yr=(0,V.Z)(function*(A,M){if(!navigator)throw _r.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw _r.create("permission-blocked");return yield zu(A,M?.vapidKey),yield hl(A,M?.serviceWorkerRegistration),Bu(A)})).apply(this,arguments)}function ta(A,M,L){return rs.apply(this,arguments)}function rs(){return(rs=(0,V.Z)(function*(A,M,L){const Y=Ns(M);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(Y,{message_id:L[Wl],message_name:L[dh],message_time:L[Vu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ns(A){switch(A){case ms.NOTIFICATION_CLICKED:return"notification_open";case ms.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function to(){return(to=(0,V.Z)(function*(A,M){const L=M.data;if(!L.isFirebaseMessaging)return;A.onMessageHandler&&L.messageType===ms.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(Zl(L)):A.onMessageHandler.next(Zl(L)));const Y=L.data;$u(Y)&&"1"===Y[Sa]&&(yield ta(A,L.messageType,Y))})).apply(this,arguments)}const Ql="@firebase/messaging",no=A=>{const M=new Jo(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",L=>function Yl(A,M){return to.apply(this,arguments)}(M,L)),M},ro=A=>{const M=A.getProvider("messaging").getImmediate();return{getToken:Y=>function Kr(A,M){return Yr.apply(this,arguments)}(M,Y)}};function Xl(){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,V.Z)(function*(){try{yield(0,ye.eu)()}catch{return!1}return typeof window<"u"&&(0,ye.hl)()&&(0,ye.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Gu(){(0,pe._registerComponent)(new Te.wA("messaging",no,"PUBLIC")),(0,pe._registerComponent)(new Te.wA("messaging-internal",ro,"PRIVATE")),(0,pe.registerVersion)(Ql,"0.12.1"),(0,pe.registerVersion)(Ql,"0.12.1","esm2017")}();const zc="analytics",mi="firebase_id",fl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ku="https://www.googletagmanager.com/gtag/js",Qr=new Ne.Yd("@firebase/analytics");function Yu(A){return Promise.all(A.map(M=>M.catch(L=>L)))}function Wc(A,M){const L=document.createElement("script");L.src=`${Ku}?l=${A}&id=${M}`,L.async=!0,document.head.appendChild(L)}function Pa(A,M,L,Y,de,be){return na.apply(this,arguments)}function na(){return(na=(0,V.Z)(function*(A,M,L,Y,de,be){const Je=Y[de];try{if(Je)yield M[Je];else{const Ht=(yield Yu(L)).find(Ot=>Ot.measurementId===de);Ht&&(yield M[Ht.appId])}}catch(nt){Qr.error(nt)}A("config",de,be)})).apply(this,arguments)}function Fs(A,M,L,Y,de){return vs.apply(this,arguments)}function vs(){return(vs=(0,V.Z)(function*(A,M,L,Y,de){try{let be=[];if(de&&de.send_to){let Je=de.send_to;Array.isArray(Je)||(Je=[Je]);const nt=yield Yu(L);for(const Ht of Je){const Ot=nt.find(he=>he.measurementId===Ht),qt=Ot&&M[Ot.appId];if(!qt){be=[];break}be.push(qt)}}0===be.length&&(be=Object.values(M)),yield Promise.all(be),A("event",Y,de||{})}catch(be){Qr.error(be)}})).apply(this,arguments)}function ra(A){const M=window.document.getElementsByTagName("script");for(const L of Object.values(M))if(L.src&&L.src.includes(Ku)&&L.src.includes(A))return L;return null}const D=new ye.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),We=new class X{constructor(M={},L=1e3){this.throttleMetadata=M,this.intervalMillis=L}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,L){this.throttleMetadata[M]=L}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function Ct(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function lr(A){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,V.Z)(function*(A){var M;const{appId:L,apiKey:Y}=A,de={method:"GET",headers:Ct(Y)},be=fl.replace("{app-id}",L),Je=yield fetch(be,de);if(200!==Je.status&&304!==Je.status){let nt="";try{const Ht=yield Je.json();null!==(M=Ht.error)&&void 0!==M&&M.message&&(nt=Ht.error.message)}catch{}throw D.create("config-fetch-failed",{httpStatus:Je.status,responseMessage:nt})}return Je.json()})).apply(this,arguments)}function cr(A){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,V.Z)(function*(A,M=We,L){const{appId:Y,apiKey:de,measurementId:be}=A.options;if(!Y)throw D.create("no-app-id");if(!de){if(be)return{measurementId:be,appId:Y};throw D.create("no-api-key")}const Je=M.getThrottleMetadata(Y)||{backoffCount:0,throttleEndTimeMillis:Date.now()},nt=new Jl;return setTimeout((0,V.Z)(function*(){nt.abort()}),void 0!==L?L:6e4),Do({appId:Y,apiKey:de,measurementId:be},Je,nt,M)})).apply(this,arguments)}function Do(A,M,L){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,V.Z)(function*(A,{throttleEndTimeMillis:M,backoffCount:L},Y,de=We){var be;const{appId:Je,measurementId:nt}=A;try{yield Qu(Y,M)}catch(Ht){if(nt)return Qr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${Ht?.message}]`),{appId:Je,measurementId:nt};throw Ht}try{const Ht=yield lr(A);return de.deleteThrottleMetadata(Je),Ht}catch(Ht){const Ot=Ht;if(!Xu(Ot)){if(de.deleteThrottleMetadata(Je),nt)return Qr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${Ot?.message}]`),{appId:Je,measurementId:nt};throw Ht}const qt=503===Number(null===(be=Ot?.customData)||void 0===be?void 0:be.httpStatus)?(0,ye.$s)(L,de.intervalMillis,30):(0,ye.$s)(L,de.intervalMillis),he={throttleEndTimeMillis:Date.now()+qt,backoffCount:L+1};return de.setThrottleMetadata(Je,he),Qr.debug(`Calling attemptFetch again in ${qt} millis`),Do(A,he,Y,de)}})).apply(this,arguments)}function Qu(A,M){return new Promise((L,Y)=>{const de=Math.max(M-Date.now(),0),be=setTimeout(L,de);A.addEventListener(()=>{clearTimeout(be),Y(D.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function Xu(A){if(!(A instanceof ye.ZR&&A.customData))return!1;const M=Number(A.customData.httpStatus);return 429===M||500===M||503===M||504===M}class Jl{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}let Ju,_l;function gl(){return(gl=(0,V.Z)(function*(A,M,L,Y,de){if(de&&de.global)A("event",L,Y);else{const be=yield M;A("event",L,Object.assign(Object.assign({},Y),{send_to:be}))}})).apply(this,arguments)}function ed(A){_l=A}function ec(A){Ju=A}function vh(){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,V.Z)(function*(){if(!(0,ye.hl)())return Qr.warn(D.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ye.eu)()}catch(A){return Qr.warn(D.create("indexeddb-unavailable",{errorInfo:A?.toString()}).message),!1}return!0})).apply(this,arguments)}function yl(){return(yl=(0,V.Z)(function*(A,M,L,Y,de,be,Je){var nt;const Ht=cr(A);Ht.then(j=>{L[j.measurementId]=j.appId,A.options.measurementId&&j.measurementId!==A.options.measurementId&&Qr.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${j.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(j=>Qr.error(j)),M.push(Ht);const Ot=vh().then(j=>{if(j)return Y.getId()}),[qt,he]=yield Promise.all([Ht,Ot]);ra(be)||Wc(be,qt.measurementId),_l&&(de("consent","default",_l),ed(void 0)),de("js",new Date);const tr=null!==(nt=Je?.config)&&void 0!==nt?nt:{};return tr.origin="firebase",tr.update=!0,null!=he&&(tr[mi]=he),de("config",qt.measurementId,tr),Ju&&(de("set",Ju),ec(void 0)),qt.measurementId})).apply(this,arguments)}class Bf{constructor(M){this.app=M}_delete(){return delete Us[this.app.options.appId],Promise.resolve()}}let Us={},td=[];const tc={};let nd,qi,Bs="dataLayer",oa=!1;function vl(A,M,L){!function rd(){const A=[];if((0,ye.ru)()&&A.push("This is a browser extension environment."),(0,ye.zI)()||A.push("Cookies are not available."),A.length>0){const M=A.map((Y,de)=>`(${de+1}) ${Y}`).join(" "),L=D.create("invalid-analytics-context",{errorInfo:M});Qr.warn(L.message)}}();const Y=A.options.appId;if(!Y)throw D.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw D.create("no-api-key");Qr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Us[Y])throw D.create("already-exists",{id:Y});if(!oa){!function Io(A){let M=[];Array.isArray(window[A])?M=window[A]:window[A]=M}(Bs);const{wrappedGtag:be,gtagCore:Je}=function pl(A,M,L,Y,de){let be=function(...Je){window[Y].push(arguments)};return window[de]&&"function"==typeof window[de]&&(be=window[de]),window[de]=function Gc(A,M,L,Y){function be(){return(be=(0,V.Z)(function*(Je,nt,Ht){try{"event"===Je?yield Fs(A,M,L,nt,Ht):"config"===Je?yield Pa(A,M,L,Y,nt,Ht):"consent"===Je?A("consent","update",Ht):A("set",nt)}catch(Ot){Qr.error(Ot)}})).apply(this,arguments)}return function de(Je,nt,Ht){return be.apply(this,arguments)}}(be,A,M,L),{gtagCore:be,wrappedGtag:window[de]}}(Us,td,tc,Bs,"gtag");qi=be,nd=Je,oa=!0}return Us[Y]=function wh(A,M,L,Y,de,be,Je){return yl.apply(this,arguments)}(A,td,tc,M,nd,Bs,L),new Bf(A)}function id(){return Na.apply(this,arguments)}function Na(){return(Na=(0,V.Z)(function*(){if((0,ye.ru)()||!(0,ye.zI)()||!(0,ye.hl)())return!1;try{return yield(0,ye.eu)()}catch{return!1}})).apply(this,arguments)}const Dn="@firebase/analytics";!function Ch(){(0,pe._registerComponent)(new Te.wA(zc,(M,{options:L})=>vl(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),L),"PUBLIC")),(0,pe._registerComponent)(new Te.wA("analytics-internal",function A(M){try{const L=M.getProvider(zc).getImmediate();return{logEvent:(Y,de,be)=>function zf(A,M,L,Y){A=(0,ye.m9)(A),function Oa(A,M,L,Y,de){return gl.apply(this,arguments)}(qi,Us[A.app.options.appId],M,L,Y).catch(de=>Qr.error(de))}(L,Y,de,be)}}catch(L){throw D.create("interop-component-reg-failed",{reason:L})}},"PRIVATE")),(0,pe.registerVersion)(Dn,"0.9.1"),(0,pe.registerVersion)(Dn,"0.9.1","esm2017")}();var Ih=W(4408),Dh=W(7565);const yv=new class qf extends Dh.v{}(class sd extends Ih.o{constructor(M,L){super(M,L),this.scheduler=M,this.work=L}schedule(M,L=0){return L>0?super.schedule(M,L):(this.delay=L,this.state=M,this.scheduler.flush(this),this)}execute(M,L){return L>0||this.closed?super.execute(M,L):this._execute(M,L)}requestAsyncId(M,L,Y=0){return null!=Y&&Y>0||null==Y&&this.delay>0?super.requestAsyncId(M,L,Y):(M.flush(this),0)}});var vv=W(4986),rc=W(8505),Ir=W(5363),Th=W(9468);const Yc=new f.GfV("7.5.0"),od="__angularfire_symbol__analyticsIsSupportedValue",ki="__angularfire_symbol__analyticsIsSupported",To="__angularfire_symbol__remoteConfigIsSupportedValue",ad="__angularfire_symbol__remoteConfigIsSupported",ic="__angularfire_symbol__messagingIsSupportedValue",aa="__angularfire_symbol__messagingIsSupported";function Zi(A,M,L){if(M){if(1===M.length)return M[0];const be=M.filter(Je=>Je.app===L);if(1===be.length)return be[0]}return L.container.getProvider(A).getImmediate({optional:!0})}globalThis[ki]||(globalThis[ki]=id().then(A=>globalThis[od]=A).catch(()=>globalThis[od]=!1)),globalThis[aa]||(globalThis[aa]=Xl().then(A=>globalThis[ic]=A).catch(()=>globalThis[ic]=!1)),globalThis[ad]||(globalThis[ad]=ch().then(A=>globalThis[To]=A).catch(()=>globalThis[To]=!1));const Dr=(A,M)=>{const L=M?[M]:(0,G.C6)(),Y=[];return L.forEach(de=>{de.container.getProvider(A).instances.forEach(Je=>{Y.includes(Je)||Y.push(Je)})}),Y};function di(){}class js{constructor(M,L=yv){this.zone=M,this.delegate=L}now(){return this.delegate.now()}schedule(M,L,Y){const de=this.zone;return this.delegate.schedule(function(Je){de.runGuarded(()=>{M.apply(this,[Je])})},L,Y)}}class la{constructor(M){this.zone=M,this.task=null}call(M,L){const Y=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",di,{},di,di)),L.pipe((0,rc.b)({next:Y,complete:Y,error:Y})).subscribe(M).add(Y)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Un=(()=>{class A{constructor(L){this.ngZone=L,this.outsideAngular=L.runOutsideAngular(()=>new js(Zone.current)),this.insideAngular=L.run(()=>new js(Zone.current,vv.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(L){return new(L||A)(f.LFG(f.R0b))},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Et(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function ld(A){return A.pipe((0,Ir.Q)(Et().outsideAngular))}function yr(A){return Et(),function ur(A){return function(L){return(L=L.lift(new la(A.ngZone))).pipe((0,Th.R)(A.outsideAngular),(0,Ir.Q)(A.insideAngular))}}(Et())(A)}},1808:(Tt,Ue,W)=>{"use strict";W.d(Ue,{$:()=>ul,A:()=>ee,B:()=>qe,G:()=>Nc,H:()=>vn,J:()=>Er,L:()=>te,M:()=>rl,N:()=>uh,P:()=>vv,Q:()=>Wl,R:()=>Eh,T:()=>dh,U:()=>Ta,V:()=>ms,W:()=>zi,X:()=>Lc,Y:()=>ui,Z:()=>Aa,_:()=>Gl,a:()=>O,a0:()=>Bu,a1:()=>ql,a2:()=>rn,a3:()=>ju,a4:()=>Uc,a5:()=>Bc,a6:()=>Hu,a7:()=>Le,a8:()=>$u,a9:()=>jc,aA:()=>Q,aB:()=>Ht,aC:()=>ld,aD:()=>xt,aE:()=>Lr,aI:()=>Ct,aL:()=>Sa,aa:()=>ns,ab:()=>hl,ac:()=>zu,af:()=>ta,ag:()=>Ns,ah:()=>Yl,ak:()=>Js,al:()=>Ra,an:()=>Ku,ao:()=>na,ap:()=>Me,aq:()=>Pt,ar:()=>Dt,as:()=>Ze,at:()=>cd,au:()=>Ki,av:()=>Wn,aw:()=>Ye,ax:()=>z,ay:()=>j,az:()=>re,b:()=>D,c:()=>ic,d:()=>wv,e:()=>Sh,f:()=>ur,g:()=>Y,h:()=>A,i:()=>Zc,j:()=>Je,k:()=>mm,l:()=>Gf,m:()=>ym,n:()=>tp,o:()=>Se,r:()=>Ih,s:()=>Wf,u:()=>yv});var f=W(5861),G=W(2090),V=W(9681),pe=W(1877),ye=W(655),Te=W(4859);const Se={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ee={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const qe=function ae(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ct=function it(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},bt=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Be=new pe.Yd("@firebase/auth");function je(E,..._){Be.logLevel<=pe.in.ERROR&&Be.error(`Auth (${V.SDK_VERSION}): ${E}`,..._)}function Ze(E,..._){throw st(E,..._)}function Ye(E,..._){return st(E,..._)}function $e(E,_,v){const I=Object.assign(Object.assign({},ct()),{[_]:v});return new G.LL("auth","Firebase",I).create(_,{appName:E.name})}function ze(E,_,v){if(!(_ instanceof v))throw v.name!==_.constructor.name&&Ze(E,"argument-error"),$e(E,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function st(E,..._){if("string"!=typeof E){const v=_[0],I=[..._.slice(1)];return I[0]&&(I[0].appName=E.name),E._errorFactory.create(v,...I)}return bt.create(E,..._)}function z(E,_,...v){if(!E)throw st(_,...v)}function Ee(E){const _="INTERNAL ASSERTION FAILED: "+E;throw je(_),new Error(_)}function Me(E,_){E||Ee(_)}const oe=new Map;function re(E){Me(E instanceof Function,"Expected a class definition");let _=oe.get(E);return _?(Me(_ instanceof E,"Instance stored in cache mismatched with class"),_):(_=new E,oe.set(E,_),_)}function tt(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Xe(){return"http:"===At()||"https:"===At()}function At(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class St{constructor(_,v){this.shortDelay=_,this.longDelay=v,Me(v>_,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function _n(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xe()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gt(E,_){Me(E.emulator,"Emulator should always be set here");const{url:v}=E.emulator;return _?`${v}${_.startsWith("/")?_.slice(1):_}`:v}class Ut{static initialize(_,v,I){this.fetchImpl=_,v&&(this.headersImpl=v),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const an={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qn=new St(3e4,6e4);function sn(E,_){return E.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:E.tenantId}):_}function Rt(E,_,v,I){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,f.Z)(function*(E,_,v,I,N={}){return Wr(E,N,(0,f.Z)(function*(){let $={},ge={};I&&("GET"===_?ge=I:$={body:JSON.stringify(I)});const Ke=(0,G.xO)(Object.assign({key:E.config.apiKey},ge)).slice(1),It=yield E._getAdditionalHeaders();return It["Content-Type"]="application/json",E.languageCode&&(It["X-Firebase-Locale"]=E.languageCode),Ut.fetch()(Gr(E,E.config.apiHost,v,Ke),Object.assign({method:_,headers:It,referrerPolicy:"no-referrer"},$))}))})).apply(this,arguments)}function Wr(E,_,v){return Or.apply(this,arguments)}function Or(){return(Or=(0,f.Z)(function*(E,_,v){E._canInitEmulator=!1;const I=Object.assign(Object.assign({},an),_);try{const N=new Di(E),$=yield Promise.race([v(),N.promise]);N.clearNetworkTimeout();const ge=yield $.json();if("needConfirmation"in ge)throw Bn(E,"account-exists-with-different-credential",ge);if($.ok&&!("errorMessage"in ge))return ge;{const Ke=$.ok?ge.errorMessage:ge.error.message,[It,Vt]=Ke.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===It)throw Bn(E,"credential-already-in-use",ge);if("EMAIL_EXISTS"===It)throw Bn(E,"email-already-in-use",ge);if("USER_DISABLED"===It)throw Bn(E,"user-disabled",ge);const wn=I[It]||It.toLowerCase().replace(/[_\s]+/g,"-");if(Vt)throw $e(E,wn,Vt);Ze(E,wn)}}catch(N){if(N instanceof G.ZR)throw N;Ze(E,"network-request-failed")}})).apply(this,arguments)}function qn(E,_,v,I){return oi.apply(this,arguments)}function oi(){return(oi=(0,f.Z)(function*(E,_,v,I,N={}){const $=yield Rt(E,_,v,I,N);return"mfaPendingCredential"in $&&Ze(E,"multi-factor-auth-required",{_serverResponse:$}),$})).apply(this,arguments)}function Gr(E,_,v,I){const N=`${_}${v}?${I}`;return E.config.emulator?Gt(E.config,N):`${E.config.apiScheme}://${N}`}class Di{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((v,I)=>{this.timer=setTimeout(()=>I(Ye(this.auth,"network-request-failed")),Qn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bn(E,_,v){const I={appName:E.name};v.email&&(I.email=v.email),v.phoneNumber&&(I.phoneNumber=v.phoneNumber);const N=Ye(E,_,I);return N.customData._tokenResponse=v,N}function le(){return(le=(0,f.Z)(function*(E,_){return Rt(E,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function we(E,_){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,f.Z)(function*(E,_){return Rt(E,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function xe(E,_){return ut.apply(this,arguments)}function ut(){return(ut=(0,f.Z)(function*(E,_){return Rt(E,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function En(E){if(E)try{const _=new Date(Number(E));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function fn(){return(fn=(0,f.Z)(function*(E,_=!1){const v=(0,G.m9)(E),I=yield v.getIdToken(_),N=ft(I);z(N&&N.exp&&N.auth_time&&N.iat,v.auth,"internal-error");const $="object"==typeof N.firebase?N.firebase:void 0,ge=$?.sign_in_provider;return{claims:N,token:I,authTime:En(Nt(N.auth_time)),issuedAtTime:En(Nt(N.iat)),expirationTime:En(Nt(N.exp)),signInProvider:ge||null,signInSecondFactor:$?.sign_in_second_factor||null}})).apply(this,arguments)}function Nt(E){return 1e3*Number(E)}function ft(E){const[_,v,I]=E.split(".");if(void 0===_||void 0===v||void 0===I)return je("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,G.tV)(v);return N?JSON.parse(N):(je("Failed to decode base64 JWT payload"),null)}catch(N){return je("Caught error parsing JWT payload as JSON",N?.toString()),null}}function Nn(E,_){return In.apply(this,arguments)}function In(){return(In=(0,f.Z)(function*(E,_,v=!1){if(v)return _;try{return yield _}catch(I){throw I instanceof G.ZR&&ln(I)&&E.auth.currentUser===E&&(yield E.auth.signOut()),I}})).apply(this,arguments)}function ln({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Pn{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var v;if(_){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const N=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,N)}}schedule(_=!1){var v=this;if(!this.isRunning)return;const I=this.getInterval(_);this.timerId=setTimeout((0,f.Z)(function*(){yield v.iteration()}),I)}iteration(){var _=this;return(0,f.Z)(function*(){try{yield _.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&_.schedule(!0))}_.schedule()})()}}class Zn{constructor(_,v){this.createdAt=_,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=En(this.lastLoginAt),this.creationTime=En(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ai(E){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,f.Z)(function*(E){var _;const v=E.auth,I=yield E.getIdToken(),N=yield Nn(E,xe(v,{idToken:I}));z(N?.users.length,v,"internal-error");const $=N.users[0];E._notifyReloadListener($);const ge=null!==(_=$.providerUserInfo)&&void 0!==_&&_.length?Mt($.providerUserInfo):[],Ke=li(E.providerData,ge),wn=!!E.isAnonymous&&!(E.email&&$.passwordHash||Ke?.length),or={uid:$.localId,displayName:$.displayName||null,photoURL:$.photoUrl||null,email:$.email||null,emailVerified:$.emailVerified||!1,phoneNumber:$.phoneNumber||null,tenantId:$.tenantId||null,providerData:Ke,metadata:new Zn($.createdAt,$.lastLoginAt),isAnonymous:wn};Object.assign(E,or)})).apply(this,arguments)}function cn(){return(cn=(0,f.Z)(function*(E){const _=(0,G.m9)(E);yield ai(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function li(E,_){return[...E.filter(I=>!_.some(N=>N.providerId===I.providerId)),..._]}function Mt(E){return E.map(_=>{var{providerId:v}=_,I=(0,ye._T)(_,["providerId"]);return{providerId:v,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function He(){return(He=(0,f.Z)(function*(E,_){const v=yield Wr(E,{},(0,f.Z)(function*(){const I=(0,G.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:N,apiKey:$}=E.config,ge=Gr(E,N,"/v1/token",`key=${$}`),Ke=yield E._getAdditionalHeaders();return Ke["Content-Type"]="application/x-www-form-urlencoded",Ut.fetch()(ge,{method:"POST",headers:Ke,body:I})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class mt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){z(_.idToken,"internal-error"),z(typeof _.idToken<"u","internal-error"),z(typeof _.refreshToken<"u","internal-error");const v="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function wt(E){const _=ft(E);return z(_,"internal-error"),z(typeof _.exp<"u","internal-error"),z(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,v)}getToken(_,v=!1){var I=this;return(0,f.Z)(function*(){return z(!I.accessToken||I.refreshToken,_,"user-token-expired"),v||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(_,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,v){var I=this;return(0,f.Z)(function*(){const{accessToken:N,refreshToken:$,expiresIn:ge}=yield function ot(E,_){return He.apply(this,arguments)}(_,v);I.updateTokensAndExpiration(N,$,Number(ge))})()}updateTokensAndExpiration(_,v,I){this.refreshToken=v||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(_,v){const{refreshToken:I,accessToken:N,expirationTime:$}=v,ge=new mt;return I&&(z("string"==typeof I,"internal-error",{appName:_}),ge.refreshToken=I),N&&(z("string"==typeof N,"internal-error",{appName:_}),ge.accessToken=N),$&&(z("number"==typeof $,"internal-error",{appName:_}),ge.expirationTime=$),ge}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new mt,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function $t(E,_){z("string"==typeof E||typeof E>"u","internal-error",{appName:_})}class jt{constructor(_){var{uid:v,auth:I,stsTokenManager:N}=_,$=(0,ye._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=I,this.stsTokenManager=N,this.accessToken=N.accessToken,this.displayName=$.displayName||null,this.email=$.email||null,this.emailVerified=$.emailVerified||!1,this.phoneNumber=$.phoneNumber||null,this.photoURL=$.photoURL||null,this.isAnonymous=$.isAnonymous||!1,this.tenantId=$.tenantId||null,this.providerData=$.providerData?[...$.providerData]:[],this.metadata=new Zn($.createdAt||void 0,$.lastLoginAt||void 0)}getIdToken(_){var v=this;return(0,f.Z)(function*(){const I=yield Nn(v,v.stsTokenManager.getToken(v.auth,_));return z(I,v.auth,"internal-error"),v.accessToken!==I&&(v.accessToken=I,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),I})()}getIdTokenResult(_){return function Ft(E){return fn.apply(this,arguments)}(this,_)}reload(){return function fi(E){return cn.apply(this,arguments)}(this)}_assign(_){this!==_&&(z(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(v=>Object.assign({},v)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){return new jt(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(_){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,v=!1){var I=this;return(0,f.Z)(function*(){let N=!1;_.idToken&&_.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(_),N=!0),v&&(yield ai(I)),yield I.auth._persistUserIfCurrent(I),N&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var _=this;return(0,f.Z)(function*(){const v=yield _.getIdToken();return yield Nn(_,function ue(E,_){return le.apply(this,arguments)}(_.auth,{idToken:v})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,v){var I,N,$,ge,Ke,It,Vt,wn;const or=null!==(I=v.displayName)&&void 0!==I?I:void 0,bs=null!==(N=v.email)&&void 0!==N?N:void 0,oo=null!==($=v.phoneNumber)&&void 0!==$?$:void 0,dd=null!==(ge=v.photoURL)&&void 0!==ge?ge:void 0,cc=null!==(Ke=v.tenantId)&&void 0!==Ke?Ke:void 0,Jc=null!==(It=v._redirectEventId)&&void 0!==It?It:void 0,np=null!==(Vt=v.createdAt)&&void 0!==Vt?Vt:void 0,wm=null!==(wn=v.lastLoginAt)&&void 0!==wn?wn:void 0,{uid:hd,emailVerified:rp,isAnonymous:ip,providerData:Rh,stsTokenManager:bm}=v;z(hd&&bm,_,"internal-error");const Iv=mt.fromJSON(this.name,bm);z("string"==typeof hd,_,"internal-error"),$t(or,_.name),$t(bs,_.name),z("boolean"==typeof rp,_,"internal-error"),z("boolean"==typeof ip,_,"internal-error"),$t(oo,_.name),$t(dd,_.name),$t(cc,_.name),$t(Jc,_.name),$t(np,_.name),$t(wm,_.name);const sp=new jt({uid:hd,auth:_,email:bs,emailVerified:rp,displayName:or,isAnonymous:ip,photoURL:dd,phoneNumber:oo,tenantId:cc,stsTokenManager:Iv,createdAt:np,lastLoginAt:wm});return Rh&&Array.isArray(Rh)&&(sp.providerData=Rh.map(Em=>Object.assign({},Em))),Jc&&(sp._redirectEventId=Jc),sp}static _fromIdTokenResponse(_,v,I=!1){return(0,f.Z)(function*(){const N=new mt;N.updateFromServerResponse(v);const $=new jt({uid:v.localId,auth:_,stsTokenManager:N,isAnonymous:I});return yield ai($),$})()}}const te=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(v,I){var N=this;return(0,f.Z)(function*(){N.storage[v]=I})()}_get(v){var I=this;return(0,f.Z)(function*(){const N=I.storage[v];return void 0===N?null:N})()}_remove(v){var I=this;return(0,f.Z)(function*(){delete I.storage[v]})()}_addListener(v,I){}_removeListener(v,I){}}return E.type="NONE",E})();function Q(E,_,v){return`firebase:${E}:${_}:${v}`}class ie{constructor(_,v,I){this.persistence=_,this.auth=v,this.userKey=I;const{config:N,name:$}=this.auth;this.fullUserKey=Q(this.userKey,N.apiKey,$),this.fullPersistenceKey=Q("persistence",N.apiKey,$),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,f.Z)(function*(){const v=yield _.persistence._get(_.fullUserKey);return v?jt._fromJSON(_.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var v=this;return(0,f.Z)(function*(){if(v.persistence===_)return;const I=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=_,I?v.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,v,I="authUser"){return(0,f.Z)(function*(){if(!v.length)return new ie(re(te),_,I);const N=(yield Promise.all(v.map(function(){var Vt=(0,f.Z)(function*(wn){if(yield wn._isAvailable())return wn});return function(wn){return Vt.apply(this,arguments)}}()))).filter(Vt=>Vt);let $=N[0]||re(te);const ge=Q(I,_.config.apiKey,_.name);let Ke=null;for(const Vt of v)try{const wn=yield Vt._get(ge);if(wn){const or=jt._fromJSON(_,wn);Vt!==$&&(Ke=or),$=Vt;break}}catch{}const It=N.filter(Vt=>Vt._shouldAllowMigration);return $._shouldAllowMigration&&It.length?($=It[0],Ke&&(yield $._set(ge,Ke.toJSON())),yield Promise.all(v.map(function(){var Vt=(0,f.Z)(function*(wn){if(wn!==$)try{yield wn._remove(ge)}catch{}});return function(wn){return Vt.apply(this,arguments)}}())),new ie($,_,I)):new ie($,_,I)})()}}function K(E){const _=E.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(Ge(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(U(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(dt(_))return"Blackberry";if(en(_))return"Webos";if(Z(_))return"Safari";if((_.includes("chrome/")||De(_))&&!_.includes("edge/"))return"Chrome";if(Dt(_))return"Android";{const I=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function U(E=(0,G.z$)()){return/firefox\//i.test(E)}function Z(E=(0,G.z$)()){const _=E.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function De(E=(0,G.z$)()){return/crios\//i.test(E)}function Ge(E=(0,G.z$)()){return/iemobile/i.test(E)}function Dt(E=(0,G.z$)()){return/android/i.test(E)}function dt(E=(0,G.z$)()){return/blackberry/i.test(E)}function en(E=(0,G.z$)()){return/webos/i.test(E)}function Pt(E=(0,G.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function Wn(E=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function ci(E=(0,G.z$)()){return Pt(E)||Dt(E)||en(E)||dt(E)||/windows phone/i.test(E)||Ge(E)}function tn(E,_=[]){let v;switch(E){case"Browser":v=K((0,G.z$)());break;case"Worker":v=`${K((0,G.z$)())}-${E}`;break;default:v=E}const I=_.length?_.join(","):"FirebaseCore-web";return`${v}/JsCore/${V.SDK_VERSION}/${I}`}class Ul{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,v){const I=$=>new Promise((ge,Ke)=>{try{ge(_($))}catch(It){Ke(It)}});I.onAbort=v,this.queue.push(I);const N=this.queue.length-1;return()=>{this.queue[N]=()=>Promise.resolve()}}runMiddleware(_){var v=this;return(0,f.Z)(function*(){if(v.auth.currentUser===_)return;const I=[];try{for(const N of v.queue)yield N(_),N.onAbort&&I.push(N.onAbort)}catch(N){I.reverse();for(const $ of I)try{$()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:N?.message})}})()}}class Bl{constructor(_,v,I){this.app=_,this.heartbeatServiceProvider=v,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Go(this),this.idTokenSubscription=new Go(this),this.beforeStateQueue=new Ul(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(_,v){var I=this;return v&&(this._popupRedirectResolver=re(v)),this._initializationPromise=this.queue((0,f.Z)(function*(){var N,$;if(!I._deleted&&(I.persistenceManager=yield ie.create(I,_),!I._deleted)){if(null!==(N=I._popupRedirectResolver)&&void 0!==N&&N._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(v),I.lastNotifiedUid=(null===($=I.currentUser)||void 0===$?void 0:$.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,f.Z)(function*(){if(_._deleted)return;const v=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||v){if(_.currentUser&&v&&_.currentUser.uid===v.uid)return _._currentUser._assign(v),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(v,!0)}})()}initializeCurrentUser(_){var v=this;return(0,f.Z)(function*(){var I;const N=yield v.assertedPersistence.getCurrentUser();let $=N,ge=!1;if(_&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const Ke=null===(I=v.redirectUser)||void 0===I?void 0:I._redirectEventId,It=$?._redirectEventId,Vt=yield v.tryRedirectSignIn(_);(!Ke||Ke===It)&&Vt?.user&&($=Vt.user,ge=!0)}if(!$)return v.directlySetCurrentUser(null);if(!$._redirectEventId){if(ge)try{yield v.beforeStateQueue.runMiddleware($)}catch(Ke){$=N,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(Ke))}return $?v.reloadAndSetCurrentUserOrClear($):v.directlySetCurrentUser(null)}return z(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===$._redirectEventId?v.directlySetCurrentUser($):v.reloadAndSetCurrentUserOrClear($)})()}tryRedirectSignIn(_){var v=this;return(0,f.Z)(function*(){let I=null;try{I=yield v._popupRedirectResolver._completeRedirectFn(v,_,!0)}catch{yield v._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(_){var v=this;return(0,f.Z)(function*(){try{yield ai(_)}catch(I){if("auth/network-request-failed"!==I?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function Rn(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var _=this;return(0,f.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var v=this;return(0,f.Z)(function*(){const I=_?(0,G.m9)(_):null;return I&&z(I.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(I&&I._clone(v))})()}_updateCurrentUser(_,v=!1){var I=this;return(0,f.Z)(function*(){if(!I._deleted)return _&&z(I.tenantId===_.tenantId,I,"tenant-id-mismatch"),v||(yield I.beforeStateQueue.runMiddleware(_)),I.queue((0,f.Z)(function*(){yield I.directlySetCurrentUser(_),I.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,f.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var v=this;return this.queue((0,f.Z)(function*(){yield v.assertedPersistence.setPersistence(re(_))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new G.LL("auth","Firebase",_())}onAuthStateChanged(_,v,I){return this.registerStateListener(this.authStateSubscription,_,v,I)}beforeAuthStateChanged(_,v){return this.beforeStateQueue.pushCallback(_,v)}onIdTokenChanged(_,v,I){return this.registerStateListener(this.idTokenSubscription,_,v,I)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,v){var I=this;return(0,f.Z)(function*(){const N=yield I.getOrInitRedirectPersistenceManager(v);return null===_?N.removeCurrentUser():N.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var v=this;return(0,f.Z)(function*(){if(!v.redirectPersistenceManager){const I=_&&re(_)||v._popupRedirectResolver;z(I,v,"argument-error"),v.redirectPersistenceManager=yield ie.create(v,[re(I._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(_){var v=this;return(0,f.Z)(function*(){var I,N;return v._isInitialized&&(yield v.queue((0,f.Z)(function*(){}))),(null===(I=v._currentUser)||void 0===I?void 0:I._redirectEventId)===_?v._currentUser:(null===(N=v.redirectUser)||void 0===N?void 0:N._redirectEventId)===_?v.redirectUser:null})()}_persistUserIfCurrent(_){var v=this;return(0,f.Z)(function*(){if(_===v.currentUser)return v.queue((0,f.Z)(function*(){return v.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(v=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,v,I,N){if(this._deleted)return()=>{};const $="function"==typeof v?v:v.next.bind(v),ge=this._isInitialized?Promise.resolve():this._initializationPromise;return z(ge,this,"internal-error"),ge.then(()=>$(this.currentUser)),"function"==typeof v?_.addObserver(v,I,N):_.addObserver(v)}directlySetCurrentUser(_){var v=this;return(0,f.Z)(function*(){v.currentUser&&v.currentUser!==_&&v._currentUser._stopProactiveRefresh(),_&&v.isProactiveRefreshEnabled&&_._startProactiveRefresh(),v.currentUser=_,_?yield v.assertedPersistence.setCurrentUser(_):yield v.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=tn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,f.Z)(function*(){var v;const I={"X-Client-Version":_.clientVersion};_.app.options.appId&&(I["X-Firebase-gmpid"]=_.app.options.appId);const N=yield null===(v=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return N&&(I["X-Firebase-Client"]=N),I})()}}function Lr(E){return(0,G.m9)(E)}class Go{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,G.ne)(v=>this.observer=v)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Nc(E,_,v){const I=Lr(E);z(I._canInitEmulator,I,"emulator-config-failed"),z(/^https?:\/\//.test(_),I,"invalid-emulator-scheme");const N=!!v?.disableWarnings,$=jl(_),{host:ge,port:Ke}=function qo(E){const _=jl(E),v=/(\/\/)?([^?#/]+)/.exec(E.substr(_.length));if(!v)return{host:"",port:null};const I=v[2].split("@").pop()||"",N=/^(\[[^\]]+\])(:|$)/.exec(I);if(N){const $=N[1];return{host:$,port:fs(I.substr($.length+1))}}{const[$,ge]=I.split(":");return{host:$,port:fs(ge)}}}(_);I.config.emulator={url:`${$}//${ge}${null===Ke?"":`:${Ke}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ge,port:Ke,protocol:$.replace(":",""),options:Object.freeze({disableWarnings:N})}),N||function An(){function E(){const _=document.createElement("p"),v=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function jl(E){const _=E.indexOf(":");return _<0?"":E.substr(0,_+1)}function fs(E){if(!E)return null;const _=Number(E);return isNaN(_)?null:_}class vn{constructor(_,v){this.providerId=_,this.signInMethod=v}toJSON(){return Ee("not implemented")}_getIdTokenResponse(_){return Ee("not implemented")}_linkToIdToken(_,v){return Ee("not implemented")}_getReauthenticationResolver(_){return Ee("not implemented")}}function qr(E,_){return mr.apply(this,arguments)}function mr(){return(mr=(0,f.Z)(function*(E,_){return Rt(E,"POST","/v1/accounts:resetPassword",sn(E,_))})).apply(this,arguments)}function pi(E,_){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,f.Z)(function*(E,_){return Rt(E,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function yt(E,_){return nn.apply(this,arguments)}function nn(){return(nn=(0,f.Z)(function*(E,_){return Rt(E,"POST","/v1/accounts:update",sn(E,_))})).apply(this,arguments)}function Zr(){return(Zr=(0,f.Z)(function*(E,_){return qn(E,"POST","/v1/accounts:signInWithPassword",sn(E,_))})).apply(this,arguments)}function Ji(E,_){return xr.apply(this,arguments)}function xr(){return(xr=(0,f.Z)(function*(E,_){return Rt(E,"POST","/v1/accounts:sendOobCode",sn(E,_))})).apply(this,arguments)}function Hi(E,_){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(E,_){return Ji(E,_)})).apply(this,arguments)}function Ja(E,_){return Si.apply(this,arguments)}function Si(){return(Si=(0,f.Z)(function*(E,_){return Ji(E,_)})).apply(this,arguments)}function un(E,_){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,f.Z)(function*(E,_){return Ji(E,_)})).apply(this,arguments)}function Zo(E,_){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,f.Z)(function*(E,_){return Ji(E,_)})).apply(this,arguments)}function ir(){return(ir=(0,f.Z)(function*(E,_){return qn(E,"POST","/v1/accounts:signInWithEmailLink",sn(E,_))})).apply(this,arguments)}function gs(){return(gs=(0,f.Z)(function*(E,_){return qn(E,"POST","/v1/accounts:signInWithEmailLink",sn(E,_))})).apply(this,arguments)}class gi extends vn{constructor(_,v,I,N=null){super("password",I),this._email=_,this._password=v,this._tenantId=N}static _fromEmailAndPassword(_,v){return new gi(_,v,"password")}static _fromEmailAndCode(_,v,I=null){return new gi(_,v,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(_){var v=this;return(0,f.Z)(function*(){switch(v.signInMethod){case"password":return function rr(E,_){return Zr.apply(this,arguments)}(_,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function ps(E,_){return ir.apply(this,arguments)}(_,{email:v._email,oobCode:v._password});default:Ze(_,"internal-error")}})()}_linkToIdToken(_,v){var I=this;return(0,f.Z)(function*(){switch(I.signInMethod){case"password":return pi(_,{idToken:v,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function el(E,_){return gs.apply(this,arguments)}(_,{idToken:v,email:I._email,oobCode:I._password});default:Ze(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function $i(E,_){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,f.Z)(function*(E,_){return qn(E,"POST","/v1/accounts:signInWithIdp",sn(E,_))})).apply(this,arguments)}class Er extends vn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const v=new Er(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(v.idToken=_.idToken),_.accessToken&&(v.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(v.nonce=_.nonce),_.pendingToken&&(v.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(v.accessToken=_.oauthToken,v.secret=_.oauthTokenSecret):Ze("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_,{providerId:I,signInMethod:N}=v,$=(0,ye._T)(v,["providerId","signInMethod"]);if(!I||!N)return null;const ge=new Er(I,N);return ge.idToken=$.idToken||void 0,ge.accessToken=$.accessToken||void 0,ge.secret=$.secret,ge.nonce=$.nonce,ge.pendingToken=$.pendingToken||null,ge}_getIdTokenResponse(_){return $i(_,this.buildRequest())}_linkToIdToken(_,v){const I=this.buildRequest();return I.idToken=v,$i(_,I)}_getReauthenticationResolver(_){const v=this.buildRequest();return v.autoCreate=!1,$i(_,v)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),_.postBody=(0,G.xO)(v)}return _}}function $l(E,_){return tl.apply(this,arguments)}function tl(){return(tl=(0,f.Z)(function*(E,_){return Rt(E,"POST","/v1/accounts:sendVerificationCode",sn(E,_))})).apply(this,arguments)}function ks(){return(ks=(0,f.Z)(function*(E,_){return qn(E,"POST","/v1/accounts:signInWithPhoneNumber",sn(E,_))})).apply(this,arguments)}function Mr(){return(Mr=(0,f.Z)(function*(E,_){const v=yield qn(E,"POST","/v1/accounts:signInWithPhoneNumber",sn(E,_));if(v.temporaryProof)throw Bn(E,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const lh={USER_NOT_FOUND:"user-not-found"};function Ai(){return(Ai=(0,f.Z)(function*(E,_){return qn(E,"POST","/v1/accounts:signInWithPhoneNumber",sn(E,Object.assign(Object.assign({},_),{operation:"REAUTH"})),lh)})).apply(this,arguments)}class Rs extends vn{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,v){return new Rs({verificationId:_,verificationCode:v})}static _fromTokenResponse(_,v){return new Rs({phoneNumber:_,temporaryProof:v})}_getIdTokenResponse(_){return function nl(E,_){return ks.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,v){return function Ar(E,_){return Mr.apply(this,arguments)}(_,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function xi(E,_){return Ai.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:v,verificationId:I,verificationCode:N}=this.params;return _&&v?{temporaryProof:_,phoneNumber:v}:{sessionInfo:I,code:N}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:v,verificationCode:I,phoneNumber:N,temporaryProof:$}=_;return I||v||N||$?new Rs({verificationId:v,verificationCode:I,phoneNumber:N,temporaryProof:$}):null}}class Fr{constructor(_){var v,I,N,$,ge,Ke;const It=(0,G.zd)((0,G.pd)(_)),Vt=null!==(v=It.apiKey)&&void 0!==v?v:null,wn=null!==(I=It.oobCode)&&void 0!==I?I:null,or=function Da(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(N=It.mode)&&void 0!==N?N:null);z(Vt&&wn&&or,"argument-error"),this.apiKey=Vt,this.operation=or,this.code=wn,this.continueUrl=null!==($=It.continueUrl)&&void 0!==$?$:null,this.languageCode=null!==(ge=It.languageCode)&&void 0!==ge?ge:null,this.tenantId=null!==(Ke=It.tenantId)&&void 0!==Ke?Ke:null}static parseLink(_){const v=function zl(E){const _=(0,G.zd)((0,G.pd)(E)).link,v=_?(0,G.zd)((0,G.pd)(_)).deep_link_id:null,I=(0,G.zd)((0,G.pd)(E)).deep_link_id;return(I?(0,G.zd)((0,G.pd)(I)).link:null)||I||v||_||E}(_);try{return new Fr(v)}catch{return null}}}let rl=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(v,I){return gi._fromEmailAndPassword(v,I)}static credentialWithLink(v,I){const N=Fr.parseLink(I);return z(N,"argument-error"),gi._fromEmailAndCode(v,N.code,N.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Ps{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class Ko extends Ps{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class Ta extends Ko{static credentialFromJSON(_){const v="string"==typeof _?JSON.parse(_):_;return z("providerId"in v&&"signInMethod"in v,"argument-error"),Er._fromParams(v)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return z(_.idToken||_.accessToken,"argument-error"),Er._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return Ta.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return Ta.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:v,oauthAccessToken:I,oauthTokenSecret:N,pendingToken:$,nonce:ge,providerId:Ke}=_;if(!I&&!N&&!v&&!$||!Ke)return null;try{return new Ta(Ke)._credential({idToken:v,accessToken:I,nonce:ge,pendingToken:$})}catch{return null}}}let uh=(()=>{class E extends Ko{constructor(){super("facebook.com")}static credential(v){return Er._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return E.credential(v.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Wl=(()=>{class E extends Ko{constructor(){super("google.com"),this.addScope("profile")}static credential(v,I){return Er._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:I})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:I,oauthAccessToken:N}=v;if(!I&&!N)return null;try{return E.credential(I,N)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),dh=(()=>{class E extends Ko{constructor(){super("github.com")}static credential(v){return Er._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return E.credential(v.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Sa extends vn{constructor(_,v){super(_,_),this.pendingToken=v}_getIdTokenResponse(_){return $i(_,this.buildRequest())}_linkToIdToken(_,v){const I=this.buildRequest();return I.idToken=v,$i(_,I)}_getReauthenticationResolver(_){const v=this.buildRequest();return v.autoCreate=!1,$i(_,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_,{providerId:I,signInMethod:N,pendingToken:$}=v;return I&&N&&$&&I===N?new Sa(I,$):null}static _create(_,v){return new Sa(_,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ms extends Ps{constructor(_){z(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return ms.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return ms.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const v=Sa.fromJSON(_);return z(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:v,providerId:I}=_;if(!v||!I)return null;try{return Sa._create(I,v)}catch{return null}}}let zi=(()=>{class E extends Ko{constructor(){super("twitter.com")}static credential(v,I){return Er._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:I})}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:I,oauthTokenSecret:N}=v;if(!I||!N)return null;try{return E.credential(I,N)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function hh(E,_){return il.apply(this,arguments)}function il(){return(il=(0,f.Z)(function*(E,_){return qn(E,"POST","/v1/accounts:signUp",sn(E,_))})).apply(this,arguments)}class Wi{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,v,I,N=!1){return(0,f.Z)(function*(){const $=yield jt._fromIdTokenResponse(_,I,N),ge=sl(I);return new Wi({user:$,providerId:ge,_tokenResponse:I,operationType:v})})()}static _forOperation(_,v,I){return(0,f.Z)(function*(){yield _._updateTokensIfNecessary(I,!0);const N=sl(I);return new Wi({user:_,providerId:N,_tokenResponse:I,operationType:v})})()}}function sl(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Lc(E){return ol.apply(this,arguments)}function ol(){return(ol=(0,f.Z)(function*(E){var _;const v=Lr(E);if(yield v._initializationPromise,null!==(_=v.currentUser)&&void 0!==_&&_.isAnonymous)return new Wi({user:v.currentUser,providerId:null,operationType:"signIn"});const I=yield hh(v,{returnSecureToken:!0}),N=yield Wi._fromIdTokenResponse(v,"signIn",I,!0);return yield v._updateCurrentUser(N.user),N})).apply(this,arguments)}class Fc extends G.ZR{constructor(_,v,I,N){var $;super(v.code,v.message),this.operationType=I,this.user=N,Object.setPrototypeOf(this,Fc.prototype),this.customData={appName:_.name,tenantId:null!==($=_.tenantId)&&void 0!==$?$:void 0,_serverResponse:v.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(_,v,I,N){return new Fc(_,v,I,N)}}function Vc(E,_,v,I){return("reauthenticate"===_?v._getReauthenticationResolver(E):v._getIdTokenResponse(E)).catch($=>{throw"auth/multi-factor-auth-required"===$.code?Fc._fromErrorAndOperation(E,$,_,I):$})}function yo(E){return new Set(E.map(({providerId:_})=>_).filter(_=>!!_))}function Js(E,_){return vo.apply(this,arguments)}function vo(){return(vo=(0,f.Z)(function*(E,_){const v=(0,G.m9)(E);yield bo(!0,v,_);const{providerUserInfo:I}=yield we(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[_]}),N=yo(I||[]);return v.providerData=v.providerData.filter($=>N.has($.providerId)),N.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function wo(E,_){return al.apply(this,arguments)}function al(){return(al=(0,f.Z)(function*(E,_,v=!1){const I=yield Nn(E,_._linkToIdToken(E.auth,yield E.getIdToken()),v);return Wi._forOperation(E,"link",I)})).apply(this,arguments)}function bo(E,_,v){return _s.apply(this,arguments)}function _s(){return(_s=(0,f.Z)(function*(E,_,v){yield ai(_);const N=!1===E?"provider-already-linked":"no-such-provider";z(yo(_.providerData).has(v)===E,_.auth,N)})).apply(this,arguments)}function ll(E,_){return cl.apply(this,arguments)}function cl(){return(cl=(0,f.Z)(function*(E,_,v=!1){const{auth:I}=E,N="reauthenticate";try{const $=yield Nn(E,Vc(I,N,_,E),v);z($.idToken,I,"internal-error");const ge=ft($.idToken);z(ge,I,"internal-error");const{sub:Ke}=ge;return z(E.uid===Ke,I,"user-mismatch"),Wi._forOperation(E,N,$)}catch($){throw"auth/user-not-found"===$?.code&&Ze(I,"user-mismatch"),$}})).apply(this,arguments)}function xa(E,_){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,f.Z)(function*(E,_,v=!1){const I="signIn",N=yield Vc(E,I,_),$=yield Wi._fromIdTokenResponse(E,I,N);return v||(yield E._updateCurrentUser($.user)),$})).apply(this,arguments)}function ui(E,_){return _r.apply(this,arguments)}function _r(){return(_r=(0,f.Z)(function*(E,_){return xa(Lr(E),_)})).apply(this,arguments)}function Aa(E,_){return sr.apply(this,arguments)}function sr(){return(sr=(0,f.Z)(function*(E,_){const v=(0,G.m9)(E);return yield bo(!1,v,_.providerId),wo(v,_)})).apply(this,arguments)}function Gl(E,_){return eo.apply(this,arguments)}function eo(){return(eo=(0,f.Z)(function*(E,_){return ll((0,G.m9)(E),_)})).apply(this,arguments)}function Vr(E,_){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,f.Z)(function*(E,_){return qn(E,"POST","/v1/accounts:signInWithCustomToken",sn(E,_))})).apply(this,arguments)}function ul(E,_){return Os.apply(this,arguments)}function Os(){return(Os=(0,f.Z)(function*(E,_){const v=Lr(E),I=yield Vr(v,{token:_,returnSecureToken:!0}),N=yield Wi._fromIdTokenResponse(v,"signIn",I);return yield v._updateCurrentUser(N.user),N})).apply(this,arguments)}class Cr{constructor(_,v){this.factorId=_,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(_,v){return"phoneInfo"in v?dl._fromServerResponse(_,v):Ze(_,"internal-error")}}class dl extends Cr{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,v){return new dl(v)}}function ys(E,_,v){var I;z((null===(I=v.url)||void 0===I?void 0:I.length)>0,E,"invalid-continue-uri"),z(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),_.continueUrl=v.url,_.dynamicLinkDomain=v.dynamicLinkDomain,_.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(z(v.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),_.iOSBundleId=v.iOS.bundleId),v.android&&(z(v.android.packageName.length>0,E,"missing-android-pkg-name"),_.androidInstallApp=v.android.installApp,_.androidMinimumVersionCode=v.android.minimumVersion,_.androidPackageName=v.android.packageName)}function Bu(E,_,v){return es.apply(this,arguments)}function es(){return(es=(0,f.Z)(function*(E,_,v){const I=(0,G.m9)(E),N={requestType:"PASSWORD_RESET",email:_};v&&ys(I,N,v),yield Ja(I,N)})).apply(this,arguments)}function ql(E,_,v){return ts.apply(this,arguments)}function ts(){return(ts=(0,f.Z)(function*(E,_,v){yield qr((0,G.m9)(E),{oobCode:_,newPassword:v})})).apply(this,arguments)}function rn(E,_){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,f.Z)(function*(E,_){yield yt((0,G.m9)(E),{oobCode:_})})).apply(this,arguments)}function ju(E,_){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,f.Z)(function*(E,_){const v=(0,G.m9)(E),I=yield qr(v,{oobCode:_}),N=I.requestType;switch(z(N,v,"internal-error"),N){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(I.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(I.mfaInfo,v,"internal-error");default:z(I.email,v,"internal-error")}let $=null;return I.mfaInfo&&($=Cr._fromServerResponse(Lr(v),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:$},operation:N}})).apply(this,arguments)}function Uc(E,_){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,f.Z)(function*(E,_){const{data:v}=yield ju((0,G.m9)(E),_);return v.email})).apply(this,arguments)}function Bc(E,_,v){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,f.Z)(function*(E,_,v){const I=Lr(E),N=yield hh(I,{returnSecureToken:!0,email:_,password:v}),$=yield Wi._fromIdTokenResponse(I,"signIn",N);return yield I._updateCurrentUser($.user),$})).apply(this,arguments)}function Hu(E,_,v){return ui((0,G.m9)(E),rl.credential(_,v))}function Le(E,_,v){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,f.Z)(function*(E,_,v){const I=(0,G.m9)(E),N={requestType:"EMAIL_SIGNIN",email:_};z(v.handleCodeInApp,I,"argument-error"),v&&ys(I,N,v),yield un(I,N)})).apply(this,arguments)}function $u(E,_){return"EMAIL_SIGNIN"===Fr.parseLink(_)?.operation}function jc(E,_,v){return kr.apply(this,arguments)}function kr(){return(kr=(0,f.Z)(function*(E,_,v){const I=(0,G.m9)(E),N=rl.credentialWithLink(_,v||tt());return z(N._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),ui(I,N)})).apply(this,arguments)}function Kl(E,_){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,f.Z)(function*(E,_){return Rt(E,"POST","/v1/accounts:createAuthUri",sn(E,_))})).apply(this,arguments)}function ns(E,_){return Co.apply(this,arguments)}function Co(){return(Co=(0,f.Z)(function*(E,_){const I={identifier:_,continueUri:Xe()?tt():"http://localhost"},{signinMethods:N}=yield Kl((0,G.m9)(E),I);return N||[]})).apply(this,arguments)}function hl(E,_){return ka.apply(this,arguments)}function ka(){return(ka=(0,f.Z)(function*(E,_){const v=(0,G.m9)(E),N={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};_&&ys(v.auth,N,_);const{email:$}=yield Hi(v.auth,N);$!==E.email&&(yield E.reload())})).apply(this,arguments)}function zu(E,_,v){return ea.apply(this,arguments)}function ea(){return(ea=(0,f.Z)(function*(E,_,v){const I=(0,G.m9)(E),$={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:_};v&&ys(I.auth,$,v);const{email:ge}=yield Zo(I.auth,$);ge!==E.email&&(yield E.reload())})).apply(this,arguments)}function Kr(E,_){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,f.Z)(function*(E,_){return Rt(E,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function ta(E,_){return rs.apply(this,arguments)}function rs(){return(rs=(0,f.Z)(function*(E,{displayName:_,photoURL:v}){if(void 0===_&&void 0===v)return;const I=(0,G.m9)(E),$={idToken:yield I.getIdToken(),displayName:_,photoUrl:v,returnSecureToken:!0},ge=yield Nn(I,Kr(I.auth,$));I.displayName=ge.displayName||null,I.photoURL=ge.photoUrl||null;const Ke=I.providerData.find(({providerId:It})=>"password"===It);Ke&&(Ke.displayName=I.displayName,Ke.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ge)})).apply(this,arguments)}function Ns(E,_){return to((0,G.m9)(E),_,null)}function Yl(E,_){return to((0,G.m9)(E),null,_)}function to(E,_,v){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,f.Z)(function*(E,_,v){const{auth:I}=E,$={idToken:yield E.getIdToken(),returnSecureToken:!0};_&&($.email=_),v&&($.password=v);const ge=yield Nn(E,pi(I,$));yield E._updateTokensIfNecessary(ge,!0)})).apply(this,arguments)}class no{constructor(_,v,I={}){this.isNewUser=_,this.providerId=v,this.profile=I}}class ro extends no{constructor(_,v,I,N){super(_,v,I),this.username=N}}class Gu extends no{constructor(_,v){super(_,"facebook.com",v)}}class Xl extends ro{constructor(_,v){super(_,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class Hc extends no{constructor(_,v){super(_,"google.com",v)}}class qu extends ro{constructor(_,v,I){super(_,"twitter.com",v,I)}}function Ra(E){const{user:_,_tokenResponse:v}=E;return _.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Wu(E){var _,v;if(!E)return null;const{providerId:I}=E,N=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},$=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!I&&E?.idToken){const ge=null===(v=null===(_=ft(E.idToken))||void 0===_?void 0:_.firebase)||void 0===v?void 0:v.sign_in_provider;if(ge)return new no($,"anonymous"!==ge&&"custom"!==ge?ge:null)}if(!I)return null;switch(I){case"facebook.com":return new Gu($,N);case"github.com":return new Xl($,N);case"google.com":return new Hc($,N);case"twitter.com":return new qu($,N,E.screenName||null);case"custom":case"anonymous":return new no($,null);default:return new no($,I,N)}}(v)}class Vn{constructor(_,v,I){this.type=_,this.credential=v,this.auth=I}static _fromIdtoken(_,v){return new Vn("enroll",_,v)}static _fromMfaPendingCredential(_){return new Vn("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var v,I;if(_?.multiFactorSession){if(null!==(v=_.multiFactorSession)&&void 0!==v&&v.pendingCredential)return Vn._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(I=_.multiFactorSession)&&void 0!==I&&I.idToken)return Vn._fromIdtoken(_.multiFactorSession.idToken)}return null}}class fl{constructor(_,v,I){this.session=_,this.hints=v,this.signInResolver=I}static _fromError(_,v){const I=Lr(_),N=v.customData._serverResponse,$=(N.mfaInfo||[]).map(Ke=>Cr._fromServerResponse(I,Ke));z(N.mfaPendingCredential,I,"internal-error");const ge=Vn._fromMfaPendingCredential(N.mfaPendingCredential);return new fl(ge,$,function(){var Ke=(0,f.Z)(function*(It){const Vt=yield It._process(I,ge);delete N.mfaInfo,delete N.mfaPendingCredential;const wn=Object.assign(Object.assign({},N),{idToken:Vt.idToken,refreshToken:Vt.refreshToken});switch(v.operationType){case"signIn":const or=yield Wi._fromIdTokenResponse(I,v.operationType,wn);return yield I._updateCurrentUser(or.user),or;case"reauthenticate":return z(v.user,I,"internal-error"),Wi._forOperation(v.user,v.operationType,wn);default:Ze(I,"internal-error")}});return function(It){return Ke.apply(this,arguments)}}())}resolveSignIn(_){var v=this;return(0,f.Z)(function*(){return v.signInResolver(_)})()}}function Ku(E,_){var v;const I=(0,G.m9)(E),N=_;return z(_.customData.operationType,I,"argument-error"),z(null===(v=N.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,I,"argument-error"),fl._fromError(I,N)}function Qr(E,_){return Rt(E,"POST","/v2/accounts/mfaEnrollment:start",sn(E,_))}class Io{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(I=>Cr._fromServerResponse(_.auth,I)))})}static _fromUser(_){return new Io(_)}getSession(){var _=this;return(0,f.Z)(function*(){return Vn._fromIdtoken(yield _.user.getIdToken(),_.user.auth)})()}enroll(_,v){var I=this;return(0,f.Z)(function*(){const N=_,$=yield I.getSession(),ge=yield Nn(I.user,N._process(I.user.auth,$,v));return yield I.user._updateTokensIfNecessary(ge),I.user.reload()})()}unenroll(_){var v=this;return(0,f.Z)(function*(){const I="string"==typeof _?_:_.uid,N=yield v.user.getIdToken(),$=yield Nn(v.user,function Wc(E,_){return Rt(E,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(E,_))}(v.user.auth,{idToken:N,mfaEnrollmentId:I}));v.enrolledFactors=v.enrolledFactors.filter(({uid:ge})=>ge!==I),yield v.user._updateTokensIfNecessary($);try{yield v.user.reload()}catch(ge){if("auth/user-token-expired"!==ge?.code)throw ge}})()}}const Pa=new WeakMap;function na(E){const _=(0,G.m9)(E);return Pa.has(_)||Pa.set(_,Io._fromUser(_)),Pa.get(_)}const Fs="__sak";class vs{constructor(_,v){this.storageRetriever=_,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(Fs,"1"),this.storage.removeItem(Fs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,v){return this.storage.setItem(_,JSON.stringify(v)),Promise.resolve()}_get(_){const v=this.storage.getItem(_);return Promise.resolve(v?JSON.parse(v):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const D=(()=>{class E extends vs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,I)=>this.onStorageEvent(v,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Gc(){const E=(0,G.z$)();return Z(E)||Pt(E)}()&&function Vl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ci(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const I of Object.keys(this.listeners)){const N=this.storage.getItem(I),$=this.localCache[I];N!==$&&v(I,$,N)}}onStorageEvent(v,I=!1){if(!v.key)return void this.forAllChangedKeys((Ke,It,Vt)=>{this.notifyListeners(Ke,Vt)});const N=v.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ke=this.storage.getItem(N);if(v.newValue!==Ke)null!==v.newValue?this.storage.setItem(N,v.newValue):this.storage.removeItem(N);else if(this.localCache[N]===v.newValue&&!I)return}const $=()=>{const Ke=this.storage.getItem(N);!I&&this.localCache[N]===Ke||this.notifyListeners(N,Ke)},ge=this.storage.getItem(N);!function Yt(){return(0,G.w1)()&&10===document.documentMode}()||ge===v.newValue||v.newValue===v.oldValue?$():setTimeout($,10)}notifyListeners(v,I){this.localCache[v]=I;const N=this.listeners[v];if(N)for(const $ of Array.from(N))$(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,I,N)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:I,newValue:N}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(I)}_removeListener(v,I){this.listeners[v]&&(this.listeners[v].delete(I),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,I){var N=()=>super._set,$=this;return(0,f.Z)(function*(){yield N().call($,v,I),$.localCache[v]=JSON.stringify(I)})()}_get(v){var I=()=>super._get,N=this;return(0,f.Z)(function*(){const $=yield I().call(N,v);return N.localCache[v]=JSON.stringify($),$})()}_remove(v){var I=()=>super._remove,N=this;return(0,f.Z)(function*(){yield I().call(N,v),delete N.localCache[v]})()}}return E.type="LOCAL",E})(),O=(()=>{class E extends vs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,I){}_removeListener(v,I){}}return E.type="SESSION",E})();let We=(()=>{class E{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const I=this.receivers.find($=>$.isListeningto(v));if(I)return I;const N=new E(v);return this.receivers.push(N),N}isListeningto(v){return this.eventTarget===v}handleEvent(v){var I=this;return(0,f.Z)(function*(){const N=v,{eventId:$,eventType:ge,data:Ke}=N.data,It=I.handlersMap[ge];if(!It?.size)return;N.ports[0].postMessage({status:"ack",eventId:$,eventType:ge});const Vt=Array.from(It).map(function(){var or=(0,f.Z)(function*(bs){return bs(N.origin,Ke)});return function(bs){return or.apply(this,arguments)}}()),wn=yield function X(E){return Promise.all(E.map(function(){var _=(0,f.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(I){return{fulfilled:!1,reason:I}}});return function(v){return _.apply(this,arguments)}}()))}(Vt);N.ports[0].postMessage({status:"done",eventId:$,eventType:ge,response:wn})})()}_subscribe(v,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(I)}_unsubscribe(v,I){this.handlersMap[v]&&I&&this.handlersMap[v].delete(I),(!I||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Ct(E="",_=10){let v="";for(let I=0;I<_;I++)v+=Math.floor(10*Math.random());return E+v}class lr{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,v,I=50){var N=this;return(0,f.Z)(function*(){const $=typeof MessageChannel<"u"?new MessageChannel:null;if(!$)throw new Error("connection_unavailable");let ge,Ke;return new Promise((It,Vt)=>{const wn=Ct("",20);$.port1.start();const or=setTimeout(()=>{Vt(new Error("unsupported_event"))},I);Ke={messageChannel:$,onMessage(bs){const oo=bs;if(oo.data.eventId===wn)switch(oo.data.status){case"ack":clearTimeout(or),ge=setTimeout(()=>{Vt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ge),It(oo.data.response);break;default:clearTimeout(or),clearTimeout(ge),Vt(new Error("invalid_response"))}}},N.handlers.add(Ke),$.port1.addEventListener("message",Ke.onMessage),N.target.postMessage({eventType:_,eventId:wn,data:v},[$.port2])}).finally(()=>{Ke&&N.removeMessageHandler(Ke)})})()}}function Mn(){return window}function Gi(){return typeof Mn().WorkerGlobalScope<"u"&&"function"==typeof Mn().importScripts}function Vs(){return(Vs=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Jl="firebaseLocalStorageDb",Oa="firebaseLocalStorage",gl="fbase_key";class so{constructor(_){this.request=_}toPromise(){return new Promise((_,v)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function ml(E,_){return E.transaction([Oa],_?"readwrite":"readonly").objectStore(Oa)}function ia(){const E=indexedDB.open(Jl,1);return new Promise((_,v)=>{E.addEventListener("error",()=>{v(E.error)}),E.addEventListener("upgradeneeded",()=>{const I=E.result;try{I.createObjectStore(Oa,{keyPath:gl})}catch(N){v(N)}}),E.addEventListener("success",(0,f.Z)(function*(){const I=E.result;I.objectStoreNames.contains(Oa)?_(I):(I.close(),yield function qc(){const E=indexedDB.deleteDatabase(Jl);return new so(E).toPromise()}(),_(yield ia()))}))})}function _h(E,_,v){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,f.Z)(function*(E,_,v){const I=ml(E,!0).put({[gl]:_,value:v});return new so(I).toPromise()})).apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(E,_){const v=ml(E,!1).get(_),I=yield new so(v).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function _l(E,_){const v=ml(E,!0).delete(_);return new so(v).toPromise()}const Zc=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,f.Z)(function*(){return v.db||(v.db=yield ia()),v.db})()}_withRetries(v){var I=this;return(0,f.Z)(function*(){let N=0;for(;;)try{const $=yield I._openDb();return yield v($)}catch($){if(N++>3)throw $;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,f.Z)(function*(){return Gi()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,f.Z)(function*(){v.receiver=We._getInstance(function Xu(){return Gi()?self:null}()),v.receiver._subscribe("keyChanged",function(){var I=(0,f.Z)(function*(N,$){return{keyProcessed:(yield v._poll()).includes($.key)}});return function(N,$){return I.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var I=(0,f.Z)(function*(N,$){return["keyChanged"]});return function(N,$){return I.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,f.Z)(function*(){var I,N;if(v.activeServiceWorker=yield function Do(){return Vs.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new lr(v.activeServiceWorker);const $=yield v.sender._send("ping",{},800);$&&null!==(I=$[0])&&void 0!==I&&I.fulfilled&&null!==(N=$[0])&&void 0!==N&&N.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var I=this;return(0,f.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Qu(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:v},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const v=yield ia();return yield _h(v,Fs,"1"),yield _l(v,Fs),!0}catch{}return!1})()}_withPendingWrite(v){var I=this;return(0,f.Z)(function*(){I.pendingWrites++;try{yield v()}finally{I.pendingWrites--}})()}_set(v,I){var N=this;return(0,f.Z)(function*(){return N._withPendingWrite((0,f.Z)(function*(){return yield N._withRetries($=>_h($,v,I)),N.localCache[v]=I,N.notifyServiceWorker(v)}))})()}_get(v){var I=this;return(0,f.Z)(function*(){const N=yield I._withRetries($=>function yh(E,_){return sa.apply(this,arguments)}($,v));return I.localCache[v]=N,N})()}_remove(v){var I=this;return(0,f.Z)(function*(){return I._withPendingWrite((0,f.Z)(function*(){return yield I._withRetries(N=>_l(N,v)),delete I.localCache[v],I.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,f.Z)(function*(){const I=yield v._withRetries(ge=>{const Ke=ml(ge,!1).getAll();return new so(Ke).toPromise()});if(!I)return[];if(0!==v.pendingWrites)return[];const N=[],$=new Set;for(const{fbase_key:ge,value:Ke}of I)$.add(ge),JSON.stringify(v.localCache[ge])!==JSON.stringify(Ke)&&(v.notifyListeners(ge,Ke),N.push(ge));for(const ge of Object.keys(v.localCache))v.localCache[ge]&&!$.has(ge)&&(v.notifyListeners(ge,null),N.push(ge));return N})()}notifyListeners(v,I){this.localCache[v]=I;const N=this.listeners[v];if(N)for(const $ of Array.from(N))$(I)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(I)}_removeListener(v,I){this.listeners[v]&&(this.listeners[v].delete(I),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function wh(E,_){return Rt(E,"POST","/v2/accounts/mfaSignIn:start",sn(E,_))}function Us(){return(Us=(0,f.Z)(function*(E){return(yield Rt(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function tc(E){return new Promise((_,v)=>{const I=document.createElement("script");I.setAttribute("src",E),I.onload=_,I.onerror=N=>{const $=Ye("internal-error");$.customData=N,v($)},I.type="text/javascript",I.charset="UTF-8",function td(){var E,_;return null!==(_=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==_?_:document}().appendChild(I)})}function Bs(E){return`__${E}${Math.floor(1e6*Math.random())}`}const qi=1e12;class oa{constructor(_){this.auth=_,this.counter=qi,this._widgets=new Map}render(_,v){const I=this.counter;return this._widgets.set(I,new jf(_,this.auth.name,v||{})),this.counter++,I}reset(_){var v;const I=_||qi;null===(v=this._widgets.get(I))||void 0===v||v.delete(),this._widgets.delete(I)}getResponse(_){var v;return(null===(v=this._widgets.get(_||qi))||void 0===v?void 0:v.getResponse())||""}execute(_){var v=this;return(0,f.Z)(function*(){var I;return null===(I=v._widgets.get(_||qi))||void 0===I||I.execute(),""})()}}class jf{constructor(_,v,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const N="string"==typeof _?document.getElementById(_):_;z(N,"argument-error",{appName:v}),this.container=N,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function rd(E){const _=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<E;I++)_.push(v.charAt(Math.floor(Math.random()*v.length)));return _.join("")}(50);const{callback:_,"expired-callback":v}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const vl=Bs("rcb"),sm=new St(3e4,6e4);class id{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=Mn().grecaptcha)||void 0===_||!_.render)}load(_,v=""){return z(function Na(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(v),_,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(Mn().grecaptcha):new Promise((I,N)=>{const $=Mn().setTimeout(()=>{N(Ye(_,"network-request-failed"))},sm.get());Mn()[vl]=()=>{Mn().clearTimeout($),delete Mn()[vl];const Ke=Mn().grecaptcha;if(!Ke)return void N(Ye(_,"internal-error"));const It=Ke.render;Ke.render=(Vt,wn)=>{const or=It(Vt,wn);return this.counter++,or},this.hostLanguage=v,I(Ke)},tc(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:vl,render:"explicit",hl:v})}`).catch(()=>{clearTimeout($),N(Ye(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var v;return!(null===(v=Mn().grecaptcha)||void 0===v||!v.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nc{load(_){return(0,f.Z)(function*(){return new oa(_)})()}clearedOneInstance(){}}const La="recaptcha",$f={theme:"light",type:"image"};class Eh{constructor(_,v=Object.assign({},$f),I){this.parameters=v,this.type=La,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Lr(I),this.isInvisible="invisible"===this.parameters.size,z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const N="string"==typeof _?document.getElementById(_):_;z(N,this.auth,"argument-error"),this.container=N,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nc:new id,this.validateStartingState()}verify(){var _=this;return(0,f.Z)(function*(){_.assertNotDestroyed();const v=yield _.render(),I=_.getAssertedRecaptcha();return I.getResponse(v)||new Promise($=>{const ge=Ke=>{Ke&&(_.tokenChangeListeners.delete(ge),$(Ke))};_.tokenChangeListeners.add(ge),_.isInvisible&&I.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return v=>{if(this.tokenChangeListeners.forEach(I=>I(v)),"function"==typeof _)_(v);else if("string"==typeof _){const I=Mn()[_];"function"==typeof I&&I(v)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,f.Z)(function*(){if(yield _.init(),!_.widgetId){let v=_.container;if(!_.isInvisible){const I=document.createElement("div");v.appendChild(I),v=I}_.widgetId=_.getAssertedRecaptcha().render(v,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,f.Z)(function*(){z(Xe()&&!Gi(),_.auth,"internal-error"),yield function Kc(){let E=null;return new Promise(_=>{"complete"!==document.readyState?(E=()=>_(),window.addEventListener("load",E)):_()}).catch(_=>{throw E&&window.removeEventListener("load",E),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const v=yield function Bf(E){return Us.apply(this,arguments)}(_.auth);z(v,_.auth,"internal-error"),_.parameters.sitekey=v})()}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class zf{constructor(_,v){this.verificationId=_,this.onConfirmation=v}confirm(_){const v=Rs._fromVerification(this.verificationId,_);return this.onConfirmation(v)}}function Wf(E,_,v){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,f.Z)(function*(E,_,v){const I=Lr(E),N=yield Dh(I,_,(0,G.m9)(v));return new zf(N,$=>ui(I,$))})).apply(this,arguments)}function Gf(E,_,v){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,f.Z)(function*(E,_,v){const I=(0,G.m9)(E);yield bo(!1,I,"phone");const N=yield Dh(I.auth,_,(0,G.m9)(v));return new zf(N,$=>Aa(I,$))})).apply(this,arguments)}function Ih(E,_,v){return sd.apply(this,arguments)}function sd(){return(sd=(0,f.Z)(function*(E,_,v){const I=(0,G.m9)(E),N=yield Dh(I.auth,_,(0,G.m9)(v));return new zf(N,$=>Gl(I,$))})).apply(this,arguments)}function Dh(E,_,v){return qf.apply(this,arguments)}function qf(){return(qf=(0,f.Z)(function*(E,_,v){var I;const N=yield v.verify();try{let $;if(z("string"==typeof N,E,"argument-error"),z(v.type===La,E,"argument-error"),$="string"==typeof _?{phoneNumber:_}:_,"session"in $){const ge=$.session;if("phoneNumber"in $)return z("enroll"===ge.type,E,"internal-error"),(yield Qr(E,{idToken:ge.credential,phoneEnrollmentInfo:{phoneNumber:$.phoneNumber,recaptchaToken:N}})).phoneSessionInfo.sessionInfo;{z("signin"===ge.type,E,"internal-error");const Ke=(null===(I=$.multiFactorHint)||void 0===I?void 0:I.uid)||$.multiFactorUid;return z(Ke,E,"missing-multi-factor-info"),(yield wh(E,{mfaPendingCredential:ge.credential,mfaEnrollmentId:Ke,phoneSignInInfo:{recaptchaToken:N}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ge}=yield $l(E,{phoneNumber:$.phoneNumber,recaptchaToken:N});return ge}}finally{v._reset()}})).apply(this,arguments)}function yv(E,_){return wl.apply(this,arguments)}function wl(){return(wl=(0,f.Z)(function*(E,_){yield wo((0,G.m9)(E),_)})).apply(this,arguments)}let vv=(()=>{class E{constructor(v){this.providerId=E.PROVIDER_ID,this.auth=Lr(v)}verifyPhoneNumber(v,I){return Dh(this.auth,v,(0,G.m9)(I))}static credential(v,I){return Rs._fromVerification(v,I)}static credentialFromResult(v){return E.credentialFromTaggedObject(v)}static credentialFromError(v){return E.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:I,temporaryProof:N}=v;return I&&N?Rs._fromTokenResponse(I,N):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function rc(E,_){return _?re(_):(z(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Ir extends vn{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return $i(_,this._buildIdpRequest())}_linkToIdToken(_,v){return $i(_,this._buildIdpRequest(v))}_getReauthenticationResolver(_){return $i(_,this._buildIdpRequest())}_buildIdpRequest(_){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(v.idToken=_),v}}function Th(E){return xa(E.auth,new Ir(E),E.bypassAuthState)}function Yc(E){const{auth:_,user:v}=E;return z(v,_,"internal-error"),ll(v,new Ir(E),E.bypassAuthState)}function od(E){return ki.apply(this,arguments)}function ki(){return(ki=(0,f.Z)(function*(E){const{auth:_,user:v}=E;return z(v,_,"internal-error"),wo(v,new Ir(E),E.bypassAuthState)})).apply(this,arguments)}class To{constructor(_,v,I,N,$=!1){this.auth=_,this.resolver=I,this.user=N,this.bypassAuthState=$,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var _=this;return new Promise(function(){var v=(0,f.Z)(function*(I,N){_.pendingPromise={resolve:I,reject:N};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch($){_.reject($)}});return function(I,N){return v.apply(this,arguments)}}())}onAuthEvent(_){var v=this;return(0,f.Z)(function*(){const{urlResponse:I,sessionId:N,postBody:$,tenantId:ge,error:Ke,type:It}=_;if(Ke)return void v.reject(Ke);const Vt={auth:v.auth,requestUri:I,sessionId:N,tenantId:ge||void 0,postBody:$||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(It)(Vt))}catch(wn){v.reject(wn)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return Th;case"linkViaPopup":case"linkViaRedirect":return od;case"reauthViaPopup":case"reauthViaRedirect":return Yc;default:Ze(this.auth,"internal-error")}}resolve(_){Me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){Me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ad=new St(2e3,1e4);function ic(E,_,v){return aa.apply(this,arguments)}function aa(){return(aa=(0,f.Z)(function*(E,_,v){const I=Lr(E);ze(E,_,Ps);const N=rc(I,v);return new Zi(I,"signInViaPopup",_,N).executeNotNull()})).apply(this,arguments)}function Sh(E,_,v){return om.apply(this,arguments)}function om(){return(om=(0,f.Z)(function*(E,_,v){const I=(0,G.m9)(E);ze(I.auth,_,Ps);const N=rc(I.auth,v);return new Zi(I.auth,"reauthViaPopup",_,N,I).executeNotNull()})).apply(this,arguments)}function wv(E,_,v){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,f.Z)(function*(E,_,v){const I=(0,G.m9)(E);ze(I.auth,_,Ps);const N=rc(I.auth,v);return new Zi(I.auth,"linkViaPopup",_,N,I).executeNotNull()})).apply(this,arguments)}let Zi=(()=>{class E extends To{constructor(v,I,N,$,ge){super(v,I,$,ge),this.provider=N,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var v=this;return(0,f.Z)(function*(){const I=yield v.execute();return z(I,v.auth,"internal-error"),I})()}onExecution(){var v=this;return(0,f.Z)(function*(){Me(1===v.filter.length,"Popup operations only handle one event");const I=Ct();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],I),v.authWindow.associatedEvent=I,v.resolver._originValidation(v.auth).catch(N=>{v.reject(N)}),v.resolver._isIframeWebStorageSupported(v.auth,N=>{N||v.reject(Ye(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const v=()=>{var I,N;this.pollId=null!==(N=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==N&&N.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,ad.get())};v()}}return E.currentPopupAction=null,E})();const di=new Map;class js extends To{constructor(_,v,I=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,I),this.eventId=null}execute(){var _=()=>super.execute,v=this;return(0,f.Z)(function*(){let I=di.get(v.auth._key());if(!I){try{const $=(yield function la(E,_){return Un.apply(this,arguments)}(v.resolver,v.auth))?yield _().call(v):null;I=()=>Promise.resolve($)}catch(N){I=()=>Promise.reject(N)}di.set(v.auth._key(),I)}return v.bypassAuthState||di.set(v.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(_){var v=()=>super.onAuthEvent,I=this;return(0,f.Z)(function*(){if("signInViaRedirect"===_.type)return v().call(I,_);if("unknown"!==_.type){if(_.eventId){const N=yield I.auth._redirectUserForId(_.eventId);if(N)return I.user=N,v().call(I,_);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Un(){return(Un=(0,f.Z)(function*(E,_){const v=yr(_),I=oc(E);if(!(yield I._isAvailable()))return!1;const N="true"===(yield I._get(v));return yield I._remove(v),N})).apply(this,arguments)}function Et(E,_){return sc.apply(this,arguments)}function sc(){return(sc=(0,f.Z)(function*(E,_){return oc(E)._set(yr(_),"true")})).apply(this,arguments)}function xt(){di.clear()}function ld(E,_){di.set(E._key(),_)}function oc(E){return re(E._redirectPersistence)}function yr(E){return Q("pendingRedirect",E.config.apiKey,E.name)}function ur(E,_,v){return function dr(E,_,v){return bl.apply(this,arguments)}(E,_,v)}function bl(){return(bl=(0,f.Z)(function*(E,_,v){const I=Lr(E);ze(E,_,Ps),yield I._initializationPromise;const N=rc(I,v);return yield Et(N,I),N._openRedirect(I,_,"signInViaRedirect")})).apply(this,arguments)}function A(E,_,v){return function M(E,_,v){return L.apply(this,arguments)}(E,_,v)}function L(){return(L=(0,f.Z)(function*(E,_,v){const I=(0,G.m9)(E);ze(I.auth,_,Ps),yield I.auth._initializationPromise;const N=rc(I.auth,v);yield Et(N,I.auth);const $=yield qt(I);return N._openRedirect(I.auth,_,"reauthViaRedirect",$)})).apply(this,arguments)}function Y(E,_,v){return function de(E,_,v){return be.apply(this,arguments)}(E,_,v)}function be(){return(be=(0,f.Z)(function*(E,_,v){const I=(0,G.m9)(E);ze(I.auth,_,Ps),yield I.auth._initializationPromise;const N=rc(I.auth,v);yield bo(!1,I,_.providerId),yield Et(N,I.auth);const $=yield qt(I);return N._openRedirect(I.auth,_,"linkViaRedirect",$)})).apply(this,arguments)}function Je(E,_){return nt.apply(this,arguments)}function nt(){return(nt=(0,f.Z)(function*(E,_){return yield Lr(E)._initializationPromise,Ht(E,_,!1)})).apply(this,arguments)}function Ht(E,_){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,f.Z)(function*(E,_,v=!1){const I=Lr(E),N=rc(I,_),ge=yield new js(I,N,v).execute();return ge&&!v&&(delete ge.user._redirectEventId,yield I._persistUserIfCurrent(ge.user),yield I._setRedirectUser(null,_)),ge})).apply(this,arguments)}function qt(E){return he.apply(this,arguments)}function he(){return(he=(0,f.Z)(function*(E){const _=Ct(`${E.uid}:::`);return E._redirectEventId=_,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),_})).apply(this,arguments)}class j{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let v=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(_,I)&&(v=!0,this.sendToConsumer(_,I),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function El(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qc(E);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=_,v=!0)),v}sendToConsumer(_,v){var I;if(_.error&&!Qc(_)){const N=(null===(I=_.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";v.onError(Ye(this.auth,N))}else v.onAuthEvent(_)}isEventForConsumer(_,v){const I=null===v.eventId||!!_.eventId&&_.eventId===v.eventId;return v.filter.includes(_.type)&&I}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ri(_))}saveEventToCache(_){this.cachedEventUids.add(Ri(_)),this.lastProcessedEventTime=Date.now()}}function Ri(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(_=>_).join("-")}function Qc({type:E,error:_}){return"unknown"===E&&"auth/no-auth-event"===_?.code}function Ki(E){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,f.Z)(function*(E,_={}){return Rt(E,"GET","/v1/projects",_)})).apply(this,arguments)}const ac=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,am=/^https?/;function ca(){return(ca=(0,f.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:_}=yield Ki(E);for(const v of _)try{if(cm(v))return}catch{}Ze(E,"unauthorized-domain")})).apply(this,arguments)}function cm(E){const _=tt(),{protocol:v,hostname:I}=new URL(_);if(E.startsWith("chrome-extension://")){const ge=new URL(E);return""===ge.hostname&&""===I?"chrome-extension:"===v&&E.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===v&&ge.hostname===I}if(!am.test(v))return!1;if(ac.test(E))return I===E;const N=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+N+"|"+N+")$","i").test(I)}const lc=new St(3e4,6e4);function um(){const E=Mn().___jsl;if(E?.H)for(const _ of Object.keys(E.H))if(E.H[_].r=E.H[_].r||[],E.H[_].L=E.H[_].L||[],E.H[_].r=[...E.H[_].L],E.CP)for(let v=0;v<E.CP.length;v++)E.CP[v]=null}let Cl=null;function Fa(E){return Cl=Cl||function dm(E){return new Promise((_,v)=>{var I,N,$;function ge(){um(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{um(),v(Ye(E,"network-request-failed"))},timeout:lc.get()})}if(null!==(N=null===(I=Mn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==N&&N.Iframe)_(gapi.iframes.getContext());else{if(null===($=Mn().gapi)||void 0===$||!$.load){const Ke=Bs("iframefcb");return Mn()[Ke]=()=>{gapi.load?ge():v(Ye(E,"network-request-failed"))},tc(`https://apis.google.com/js/api.js?onload=${Ke}`).catch(It=>v(It))}ge()}}).catch(_=>{throw Cl=null,_})}(E),Cl}const bv=new St(5e3,15e3),xh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Va(E){const _=E.config;z(_.authDomain,E,"auth-domain-config-required");const v=_.emulator?Gt(_,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,I={apiKey:_.apiKey,appName:E.name,v:V.SDK_VERSION},N=hm.get(E.config.apiHost);N&&(I.eid=N);const $=E._getFrameworks();return $.length&&(I.fw=$.join(",")),`${v}?${(0,G.xO)(I).slice(1)}`}function fm(){return fm=(0,f.Z)(function*(E){const _=yield Fa(E),v=Mn().gapi;return z(v,E,"internal-error"),_.open({where:document.body,url:Va(E),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xh,dontclear:!0},I=>new Promise(function(){var N=(0,f.Z)(function*($,ge){yield I.restyle({setHideOnLeave:!1});const Ke=Ye(E,"network-request-failed"),It=Mn().setTimeout(()=>{ge(Ke)},bv.get());function Vt(){Mn().clearTimeout(It),$(I)}I.ping(Vt).then(Vt,()=>{ge(Ke)})});return function($,ge){return N.apply(this,arguments)}}()))}),fm.apply(this,arguments)}const Ah={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kf{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cd(E,_,v,I,N,$){z(E.config.authDomain,E,"auth-domain-config-required"),z(E.config.apiKey,E,"invalid-api-key");const ge={apiKey:E.config.apiKey,appName:E.name,authType:v,redirectUrl:I,v:V.SDK_VERSION,eventId:N};if(_ instanceof Ps){_.setDefaultLanguage(E.languageCode),ge.providerId=_.providerId||"",(0,G.xb)(_.getCustomParameters())||(ge.customParameters=JSON.stringify(_.getCustomParameters()));for(const[It,Vt]of Object.entries($||{}))ge[It]=Vt}if(_ instanceof Ko){const It=_.getScopes().filter(Vt=>""!==Vt);It.length>0&&(ge.scopes=It.join(","))}E.tenantId&&(ge.tid=E.tenantId);const Ke=ge;for(const It of Object.keys(Ke))void 0===Ke[It]&&delete Ke[It];return`${function Qf({config:E}){return E.emulator?Gt(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,G.xO)(Ke).slice(1)}`}const Xf="webStorageSupport",mm=class Cv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O,this._completeRedirectFn=Ht,this._overrideRedirectResult=ld}_openPopup(_,v,I,N){var $=this;return(0,f.Z)(function*(){var ge;Me(null===(ge=$.eventManagers[_._key()])||void 0===ge?void 0:ge.manager,"_initialize() not called before _openPopup()");const Ke=cd(_,v,I,tt(),N);return function ws(E,_,v,I=500,N=600){const $=Math.max((window.screen.availHeight-N)/2,0).toString(),ge=Math.max((window.screen.availWidth-I)/2,0).toString();let Ke="";const It=Object.assign(Object.assign({},Ah),{width:I.toString(),height:N.toString(),top:$,left:ge}),Vt=(0,G.z$)().toLowerCase();v&&(Ke=De(Vt)?"_blank":v),U(Vt)&&(_=_||"http://localhost",It.scrollbars="yes");const wn=Object.entries(It).reduce((bs,[oo,dd])=>`${bs}${oo}=${dd},`,"");if(function Nr(E=(0,G.z$)()){var _;return Pt(E)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(Vt)&&"_self"!==Ke)return function Yf(E,_){const v=document.createElement("a");v.href=E,v.target=_;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(I)}(_||"",Ke),new Kf(null);const or=window.open(_||"",Ke,wn);z(or,E,"popup-blocked");try{or.focus()}catch{}return new Kf(or)}(_,Ke,Ct())})()}_openRedirect(_,v,I,N){var $=this;return(0,f.Z)(function*(){return yield $._originValidation(_),function cr(E){Mn().location.href=E}(cd(_,v,I,tt(),N)),new Promise(()=>{})})()}_initialize(_){const v=_._key();if(this.eventManagers[v]){const{manager:N,promise:$}=this.eventManagers[v];return N?Promise.resolve(N):(Me($,"If manager is not set, promise should be"),$)}const I=this.initAndGetManager(_);return this.eventManagers[v]={promise:I},I.catch(()=>{delete this.eventManagers[v]}),I}initAndGetManager(_){var v=this;return(0,f.Z)(function*(){const I=yield function is(E){return fm.apply(this,arguments)}(_),N=new j(_);return I.register("authEvent",$=>(z($?.authEvent,_,"invalid-auth-event"),{status:N.onEvent($.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[_._key()]={manager:N},v.iframes[_._key()]=I,N})()}_isIframeWebStorageSupported(_,v){this.iframes[_._key()].send(Xf,{type:Xf},N=>{var $;const ge=null===($=N?.[0])||void 0===$?void 0:$[Xf];void 0!==ge&&v(!!ge),Ze(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const v=_._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function lm(E){return ca.apply(this,arguments)}(_)),this.originValidationPromises[v]}get _shouldInitProactively(){return ci()||Z()||Pt()}};class _m{constructor(_){this.factorId=_}_process(_,v,I){switch(v.type){case"enroll":return this._finalizeEnroll(_,v.credential,I);case"signin":return this._finalizeSignIn(_,v.credential);default:return Ee("unexpected MultiFactorSessionType")}}}class Jf extends _m{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new Jf(_)}_finalizeEnroll(_,v,I){return function Yu(E,_){return Rt(E,"POST","/v2/accounts/mfaEnrollment:finalize",sn(E,_))}(_,{idToken:v,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,v){return function yl(E,_){return Rt(E,"POST","/v2/accounts/mfaSignIn:finalize",sn(E,_))}(_,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ym=(()=>{class E{constructor(){}static assertion(v){return Jf._fromCredential(v)}}return E.FACTOR_ID="phone",E})();var Jr="@firebase/auth";class Xc{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var v=this;return(0,f.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const v=this.auth.onIdTokenChanged(I=>{_(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(_,v),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const v=this.internalListeners.get(_);v&&(this.internalListeners.delete(_),v(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ud=(0,G.Pz)("authIdTokenMaxAge")||300;let kh=null;const vm=E=>function(){var _=(0,f.Z)(function*(v){const I=v&&(yield v.getIdTokenResult()),N=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(N&&N>ud)return;const $=I?.token;kh!==$&&(kh=$,yield fetch(E,{method:$?"POST":"DELETE",headers:$?{Authorization:`Bearer ${$}`}:{}}))});return function(v){return _.apply(this,arguments)}}();function tp(E=(0,V.getApp)()){const _=(0,V._getProvider)(E,"auth");if(_.isInitialized())return _.getImmediate();const v=function fe(E,_){const v=(0,V._getProvider)(E,"auth");if(v.isInitialized()){const N=v.getImmediate(),$=v.getOptions();if((0,G.vZ)($,_??{}))return N;Ze(N,"already-initialized")}return v.initialize({options:_})}(E,{popupRedirectResolver:mm,persistence:[Zc,D,O]}),I=(0,G.Pz)("authTokenSyncURL");if(I){const $=vm(I);(function gh(E,_,v){(0,G.m9)(E).beforeAuthStateChanged(_,v)})(v,$,()=>$(v.currentUser)),function ph(E,_,v,I){(0,G.m9)(E).onIdTokenChanged(_,v,I)}(v,ge=>$(ge))}const N=(0,G.q4)("auth");return N&&Nc(v,`http://${N}`),v}!function Yi(E){(0,V._registerComponent)(new Te.wA("auth",(_,{options:v})=>{const I=_.getProvider("app").getImmediate(),N=_.getProvider("heartbeat"),{apiKey:$,authDomain:ge}=I.options;return((Ke,It)=>{z($&&!$.includes(":"),"invalid-api-key",{appName:Ke.name}),z(!ge?.includes(":"),"argument-error",{appName:Ke.name});const Vt={apiKey:$,authDomain:ge,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tn(E)},wn=new Bl(Ke,It,Vt);return function me(E,_){const v=_?.persistence||[],I=(Array.isArray(v)?v:[v]).map(re);_?.errorMap&&E._updateErrorMap(_.errorMap),E._initializeWithPersistence(I,_?.popupRedirectResolver)}(wn,v),wn})(I,N)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,v,I)=>{_.getProvider("auth-internal").initialize()})),(0,V._registerComponent)(new Te.wA("auth-internal",_=>{const v=Lr(_.getProvider("auth").getImmediate());return new Xc(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,V.registerVersion)(Jr,"0.21.1",function ep(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,V.registerVersion)(Jr,"0.21.1","esm2017")}("Browser")},2090:(Tt,Ue,W)=>{"use strict";W.d(Ue,{$s:()=>mt,BH:()=>$e,DV:()=>Bn,Dv:()=>In,G6:()=>At,GJ:()=>Gr,L:()=>Se,LL:()=>an,Pz:()=>Ye,Sg:()=>ze,UG:()=>Ee,UI:()=>le,US:()=>Te,Wj:()=>Zn,Wl:()=>Sr,Yr:()=>Xe,ZB:()=>ee,ZR:()=>Ut,aH:()=>Ze,b$:()=>re,cI:()=>Rt,dS:()=>Kt,eu:()=>Rn,g5:()=>V,gK:()=>ln,gQ:()=>Ft,h$:()=>Ne,hl:()=>_n,hu:()=>G,jU:()=>Me,lb:()=>ai,m9:()=>yn,ne:()=>fn,p$:()=>J,pd:()=>ht,q4:()=>Be,r3:()=>Di,ru:()=>oe,tV:()=>Re,uI:()=>z,ug:()=>fi,vZ:()=>we,w1:()=>me,w9:()=>oi,xO:()=>ut,xb:()=>ue,z$:()=>st,zI:()=>St,zd:()=>En});const G=function(te,Q){if(!te)throw V(Q)},V=function(te){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+te)},pe=function(te){const Q=[];let ie=0;for(let K=0;K<te.length;K++){let U=te.charCodeAt(K);U<128?Q[ie++]=U:U<2048?(Q[ie++]=U>>6|192,Q[ie++]=63&U|128):55296==(64512&U)&&K+1<te.length&&56320==(64512&te.charCodeAt(K+1))?(U=65536+((1023&U)<<10)+(1023&te.charCodeAt(++K)),Q[ie++]=U>>18|240,Q[ie++]=U>>12&63|128,Q[ie++]=U>>6&63|128,Q[ie++]=63&U|128):(Q[ie++]=U>>12|224,Q[ie++]=U>>6&63|128,Q[ie++]=63&U|128)}return Q},Te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(te,Q){if(!Array.isArray(te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ie=Q?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let U=0;U<te.length;U+=3){const Z=te[U],De=U+1<te.length,Ge=De?te[U+1]:0,Dt=U+2<te.length,dt=Dt?te[U+2]:0;let Wn=(15&Ge)<<2|dt>>6,Nr=63&dt;Dt||(Nr=64,De||(Wn=64)),K.push(ie[Z>>2],ie[(3&Z)<<4|Ge>>4],ie[Wn],ie[Nr])}return K.join("")},encodeString(te,Q){return this.HAS_NATIVE_SUPPORT&&!Q?btoa(te):this.encodeByteArray(pe(te),Q)},decodeString(te,Q){return this.HAS_NATIVE_SUPPORT&&!Q?atob(te):function(te){const Q=[];let ie=0,K=0;for(;ie<te.length;){const U=te[ie++];if(U<128)Q[K++]=String.fromCharCode(U);else if(U>191&&U<224){const Z=te[ie++];Q[K++]=String.fromCharCode((31&U)<<6|63&Z)}else if(U>239&&U<365){const Dt=((7&U)<<18|(63&te[ie++])<<12|(63&te[ie++])<<6|63&te[ie++])-65536;Q[K++]=String.fromCharCode(55296+(Dt>>10)),Q[K++]=String.fromCharCode(56320+(1023&Dt))}else{const Z=te[ie++],De=te[ie++];Q[K++]=String.fromCharCode((15&U)<<12|(63&Z)<<6|63&De)}}return Q.join("")}(this.decodeStringToByteArray(te,Q))},decodeStringToByteArray(te,Q){this.init_();const ie=Q?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let U=0;U<te.length;){const Z=ie[te.charAt(U++)],Ge=U<te.length?ie[te.charAt(U)]:0;++U;const dt=U<te.length?ie[te.charAt(U)]:64;++U;const Pt=U<te.length?ie[te.charAt(U)]:64;if(++U,null==Z||null==Ge||null==dt||null==Pt)throw Error();K.push(Z<<2|Ge>>4),64!==dt&&(K.push(Ge<<4&240|dt>>2),64!==Pt&&K.push(dt<<6&192|Pt))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let te=0;te<this.ENCODED_VALS.length;te++)this.byteToCharMap_[te]=this.ENCODED_VALS.charAt(te),this.charToByteMap_[this.byteToCharMap_[te]]=te,this.byteToCharMapWebSafe_[te]=this.ENCODED_VALS_WEBSAFE.charAt(te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[te]]=te,te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(te)]=te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(te)]=te)}}},Ne=function(te){const Q=pe(te);return Te.encodeByteArray(Q,!0)},Se=function(te){return Ne(te).replace(/\./g,"")},Re=function(te){try{return Te.decodeString(te,!0)}catch(Q){console.error("base64Decode failed: ",Q)}return null};function J(te){return ee(void 0,te)}function ee(te,Q){if(!(Q instanceof Object))return Q;switch(Q.constructor){case Date:return new Date(Q.getTime());case Object:void 0===te&&(te={});break;case Array:te=[];break;default:return Q}for(const ie in Q)!Q.hasOwnProperty(ie)||!ae(ie)||(te[ie]=ee(te[ie],Q[ie]));return te}function ae(te){return"__proto__"!==te}const ke=()=>{try{return function it(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const te=process.env.__FIREBASE_DEFAULTS__;return te?JSON.parse(te):void 0})()||(()=>{if(typeof document>"u")return;let te;try{te=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Q=te&&Re(te[1]);return Q&&JSON.parse(Q)})()}catch(te){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${te}`)}},Be=te=>{var Q,ie;return null===(ie=null===(Q=ke())||void 0===Q?void 0:Q.emulatorHosts)||void 0===ie?void 0:ie[te]},Ze=()=>{var te;return null===(te=ke())||void 0===te?void 0:te.config},Ye=te=>{var Q;return null===(Q=ke())||void 0===Q?void 0:Q[`_${te}`]};class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Q,ie)=>{this.resolve=Q,this.reject=ie})}wrapCallback(Q){return(ie,K)=>{ie?this.reject(ie):this.resolve(K),"function"==typeof Q&&(this.promise.catch(()=>{}),1===Q.length?Q(ie):Q(ie,K))}}}function ze(te,Q){if(te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=Q||"demo-project",U=te.iat||0,Z=te.sub||te.user_id;if(!Z)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const De=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:U,exp:U+3600,auth_time:U,sub:Z,user_id:Z,firebase:{sign_in_provider:"custom",identities:{}}},te);return[Se(JSON.stringify({alg:"none",type:"JWT"})),Se(JSON.stringify(De)),""].join(".")}function st(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function z(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(st())}function Ee(){var te;const Q=null===(te=ke())||void 0===te?void 0:te.forceEnvironment;if("node"===Q)return!0;if("browser"===Q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Me(){return"object"==typeof self&&self.self===self}function oe(){const te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof te&&void 0!==te.id}function re(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function me(){const te=st();return te.indexOf("MSIE ")>=0||te.indexOf("Trident/")>=0}function Xe(){return!1}function At(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _n(){try{return"object"==typeof indexedDB}catch{return!1}}function Rn(){return new Promise((te,Q)=>{try{let ie=!0;const K="validate-browser-context-for-indexeddb-analytics-module",U=self.indexedDB.open(K);U.onsuccess=()=>{U.result.close(),ie||self.indexedDB.deleteDatabase(K),te(!0)},U.onupgradeneeded=()=>{ie=!1},U.onerror=()=>{var Z;Q((null===(Z=U.error)||void 0===Z?void 0:Z.message)||"")}}catch(ie){Q(ie)}})}function St(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ut extends Error{constructor(Q,ie,K){super(ie),this.code=Q,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,Ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,an.prototype.create)}}class an{constructor(Q,ie,K){this.service=Q,this.serviceName=ie,this.errors=K}create(Q,...ie){const K=ie[0]||{},U=`${this.service}/${Q}`,Z=this.errors[Q],De=Z?function Qn(te,Q){return te.replace(sn,(ie,K)=>{const U=Q[K];return null!=U?String(U):`<${K}?>`})}(Z,K):"Error";return new Ut(U,`${this.serviceName}: ${De} (${U}).`,K)}}const sn=/\{\$([^}]+)}/g;function Rt(te){return JSON.parse(te)}function Sr(te){return JSON.stringify(te)}const Wr=function(te){let Q={},ie={},K={},U="";try{const Z=te.split(".");Q=Rt(Re(Z[0])||""),ie=Rt(Re(Z[1])||""),U=Z[2],K=ie.d||{},delete ie.d}catch{}return{header:Q,claims:ie,data:K,signature:U}},oi=function(te){const ie=Wr(te).claims;return!!ie&&"object"==typeof ie&&ie.hasOwnProperty("iat")},Gr=function(te){const Q=Wr(te).claims;return"object"==typeof Q&&!0===Q.admin};function Di(te,Q){return Object.prototype.hasOwnProperty.call(te,Q)}function Bn(te,Q){if(Object.prototype.hasOwnProperty.call(te,Q))return te[Q]}function ue(te){for(const Q in te)if(Object.prototype.hasOwnProperty.call(te,Q))return!1;return!0}function le(te,Q,ie){const K={};for(const U in te)Object.prototype.hasOwnProperty.call(te,U)&&(K[U]=Q.call(ie,te[U],U,te));return K}function we(te,Q){if(te===Q)return!0;const ie=Object.keys(te),K=Object.keys(Q);for(const U of ie){if(!K.includes(U))return!1;const Z=te[U],De=Q[U];if(Oe(Z)&&Oe(De)){if(!we(Z,De))return!1}else if(Z!==De)return!1}for(const U of K)if(!ie.includes(U))return!1;return!0}function Oe(te){return null!==te&&"object"==typeof te}function ut(te){const Q=[];for(const[ie,K]of Object.entries(te))Array.isArray(K)?K.forEach(U=>{Q.push(encodeURIComponent(ie)+"="+encodeURIComponent(U))}):Q.push(encodeURIComponent(ie)+"="+encodeURIComponent(K));return Q.length?"&"+Q.join("&"):""}function En(te){const Q={};return te.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[U,Z]=K.split("=");Q[decodeURIComponent(U)]=decodeURIComponent(Z)}}),Q}function ht(te){const Q=te.indexOf("?");if(!Q)return"";const ie=te.indexOf("#",Q);return te.substring(Q,ie>0?ie:void 0)}class Ft{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Q=1;Q<this.blockSize;++Q)this.pad_[Q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Q,ie){ie||(ie=0);const K=this.W_;if("string"==typeof Q)for(let Pt=0;Pt<16;Pt++)K[Pt]=Q.charCodeAt(ie)<<24|Q.charCodeAt(ie+1)<<16|Q.charCodeAt(ie+2)<<8|Q.charCodeAt(ie+3),ie+=4;else for(let Pt=0;Pt<16;Pt++)K[Pt]=Q[ie]<<24|Q[ie+1]<<16|Q[ie+2]<<8|Q[ie+3],ie+=4;for(let Pt=16;Pt<80;Pt++){const Wn=K[Pt-3]^K[Pt-8]^K[Pt-14]^K[Pt-16];K[Pt]=4294967295&(Wn<<1|Wn>>>31)}let dt,en,U=this.chain_[0],Z=this.chain_[1],De=this.chain_[2],Ge=this.chain_[3],Dt=this.chain_[4];for(let Pt=0;Pt<80;Pt++){Pt<40?Pt<20?(dt=Ge^Z&(De^Ge),en=1518500249):(dt=Z^De^Ge,en=1859775393):Pt<60?(dt=Z&De|Ge&(Z|De),en=2400959708):(dt=Z^De^Ge,en=3395469782);const Wn=(U<<5|U>>>27)+dt+Dt+en+K[Pt]&4294967295;Dt=Ge,Ge=De,De=4294967295&(Z<<30|Z>>>2),Z=U,U=Wn}this.chain_[0]=this.chain_[0]+U&4294967295,this.chain_[1]=this.chain_[1]+Z&4294967295,this.chain_[2]=this.chain_[2]+De&4294967295,this.chain_[3]=this.chain_[3]+Ge&4294967295,this.chain_[4]=this.chain_[4]+Dt&4294967295}update(Q,ie){if(null==Q)return;void 0===ie&&(ie=Q.length);const K=ie-this.blockSize;let U=0;const Z=this.buf_;let De=this.inbuf_;for(;U<ie;){if(0===De)for(;U<=K;)this.compress_(Q,U),U+=this.blockSize;if("string"==typeof Q){for(;U<ie;)if(Z[De]=Q.charCodeAt(U),++De,++U,De===this.blockSize){this.compress_(Z),De=0;break}}else for(;U<ie;)if(Z[De]=Q[U],++De,++U,De===this.blockSize){this.compress_(Z),De=0;break}}this.inbuf_=De,this.total_+=ie}digest(){const Q=[];let ie=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let U=this.blockSize-1;U>=56;U--)this.buf_[U]=255&ie,ie/=256;this.compress_(this.buf_);let K=0;for(let U=0;U<5;U++)for(let Z=24;Z>=0;Z-=8)Q[K]=this.chain_[U]>>Z&255,++K;return Q}}function fn(te,Q){const ie=new Nt(te,Q);return ie.subscribe.bind(ie)}class Nt{constructor(Q,ie){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ie,this.task.then(()=>{Q(this)}).catch(K=>{this.error(K)})}next(Q){this.forEachObserver(ie=>{ie.next(Q)})}error(Q){this.forEachObserver(ie=>{ie.error(Q)}),this.close(Q)}complete(){this.forEachObserver(Q=>{Q.complete()}),this.close()}subscribe(Q,ie,K){let U;if(void 0===Q&&void 0===ie&&void 0===K)throw new Error("Missing Observer.");U=function wt(te,Q){if("object"!=typeof te||null===te)return!1;for(const ie of Q)if(ie in te&&"function"==typeof te[ie])return!0;return!1}(Q,["next","error","complete"])?Q:{next:Q,error:ie,complete:K},void 0===U.next&&(U.next=Nn),void 0===U.error&&(U.error=Nn),void 0===U.complete&&(U.complete=Nn);const Z=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?U.error(this.finalError):U.complete()}catch{}}),this.observers.push(U),Z}unsubscribeOne(Q){void 0===this.observers||void 0===this.observers[Q]||(delete this.observers[Q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Q){if(!this.finalized)for(let ie=0;ie<this.observers.length;ie++)this.sendOne(ie,Q)}sendOne(Q,ie){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Q])try{ie(this.observers[Q])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(Q){this.finalized||(this.finalized=!0,void 0!==Q&&(this.finalError=Q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nn(){}const In=function(te,Q,ie,K){let U;if(K<Q?U="at least "+Q:K>ie&&(U=0===ie?"none":"no more than "+ie),U)throw new Error(te+" failed: Was called with "+K+(1===K?" argument.":" arguments.")+" Expects "+U+".")};function ln(te,Q){return`${te} failed: ${Q} argument `}function Zn(te,Q,ie,K){if((!K||ie)&&"function"!=typeof ie)throw new Error(ln(te,Q)+"must be a valid function.")}function ai(te,Q,ie,K){if((!K||ie)&&("object"!=typeof ie||null===ie))throw new Error(ln(te,Q)+"must be a valid context object.")}const Kt=function(te){const Q=[];let ie=0;for(let K=0;K<te.length;K++){let U=te.charCodeAt(K);if(U>=55296&&U<=56319){const Z=U-55296;K++,G(K<te.length,"Surrogate pair missing trail surrogate."),U=65536+(Z<<10)+(te.charCodeAt(K)-56320)}U<128?Q[ie++]=U:U<2048?(Q[ie++]=U>>6|192,Q[ie++]=63&U|128):U<65536?(Q[ie++]=U>>12|224,Q[ie++]=U>>6&63|128,Q[ie++]=63&U|128):(Q[ie++]=U>>18|240,Q[ie++]=U>>12&63|128,Q[ie++]=U>>6&63|128,Q[ie++]=63&U|128)}return Q},fi=function(te){let Q=0;for(let ie=0;ie<te.length;ie++){const K=te.charCodeAt(ie);K<128?Q++:K<2048?Q+=2:K>=55296&&K<=56319?(Q+=4,ie++):Q+=3}return Q};function mt(te,Q=1e3,ie=2){const K=Q*Math.pow(ie,te),U=Math.round(.5*K*(Math.random()-.5)*2);return Math.min(144e5,K+U)}function yn(te){return te&&te._delegate?te._delegate:te}},825:(Tt,Ue,W)=>{"use strict";var f=W(4650);let G=null;function V(){return G}class ye{}const Te=new f.OlP("DocumentToken");let Ne=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Se(){return(0,f.LFG)(J)}()},providedIn:"platform"}),n})();const Re=new f.OlP("Location Initialized");let J=(()=>{class n extends Ne{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){ee()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){ee()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Te))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ae(){return new J((0,f.LFG)(Te))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function it(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function qe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ct(n){return n&&"?"!==n[0]?"?"+n:n}let bt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Be)},providedIn:"root"}),n})();const ke=new f.OlP("appBaseHref");let Be=(()=>{class n extends bt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(Te).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return it(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ct(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+ct(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+ct(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ne),f.LFG(ke,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),je=(()=>{class n extends bt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=it(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ct(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ct(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ne),f.LFG(ke,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ze=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function st(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(qe(ze(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ct(r))}normalize(t){return n.stripTrailingSlash(function $e(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ct(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ct(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ct,n.joinWithSlash=it,n.stripTrailingSlash=qe,n.\u0275fac=function(t){return new(t||n)(f.LFG(bt))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ye(){return new Ze((0,f.LFG)(bt))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}class xr{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Hi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new xr(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const u=r.get(s);r.move(u,o),Jn(u,i)}});for(let i=0,s=r.length;i<s;i++){const u=r.get(i).context;u.index=i,u.count=s,u.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Jn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Jn(n,e){n.context.$implicit=e.item}let Si=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new un,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ca("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ca("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class un{constructor(){this.$implicit=null,this.ngIf=null}}function Ca(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let il=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Vc(n){return"server"===n}let wo=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new al((0,f.LFG)(Te),window)}),n})();class al{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function _s(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=bo(this.window.history)||bo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function bo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class na extends ye{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Fs extends na{static makeCurrent(){!function pe(n){G||(G=n)}(new Fs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Gc(){return vs=vs||document.querySelector("base"),vs?vs.getAttribute("href"):null}();return null==t?null:function ra(n){pl=pl||document.createElement("a"),pl.setAttribute("href",n);const e=pl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){vs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function pi(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let pl,vs=null;const io=new f.OlP("TRANSITION_ID"),S=[{provide:f.ip1,useFactory:function D(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=V(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[io,Te,f.zs3],multi:!0}];let X=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const We=new f.OlP("EventManagerPlugins");let Ct=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(We),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class lr{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=V().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Mn=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),cr=(()=>{class n extends Mn{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Gi),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Gi))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Te))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Gi(n){V().remove(n)}const Do={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vs=/%COMP%/g;function so(n,e){return e.flat(100).map(t=>t.replace(Vs,n))}function ml(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let qc=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ia(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new sa(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case f.ifc.ShadowDom:return new _l(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=so(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ct),f.LFG(cr),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class ia{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Do[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(yh(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yh(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Do[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Do[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ml(r)):this.eventManager.addEventListener(e,t,ml(r))}}function yh(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class sa extends ia{constructor(e,t,r,i){super(e),this.component=r;const s=so(i+"-"+r.id,r.styles);t.addStyles(s),this.contentAttr=function Oa(n){return"_ngcontent-%COMP%".replace(Vs,n)}(i+"-"+r.id),this.hostAttr=function gl(n){return"_nghost-%COMP%".replace(Vs,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class _l extends ia{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=so(i.id,i.styles);for(let o=0;o<s.length;o++){const u=document.createElement("style");u.textContent=s[o],this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ed=(()=>{class n extends lr{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Te))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ec=["alt","control","meta","shift"],vh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wh=(()=>{class n extends lr{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),o="code."),ec.forEach(g=>{const y=r.indexOf(g);y>-1&&(r.splice(y,1),o+=g+".")}),o+=s,0!=r.length||0===s.length)return null;const h={};return h.domEventName=i,h.fullKey=o,h}static matchEventFullKeyCode(t,r){let i=vh[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ec.forEach(o=>{o!==i&&(0,Zc[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Te))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const oa=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Bs(){Fs.makeCurrent()},multi:!0},{provide:Te,useFactory:function nd(){return(0,f.RDi)(document),document},deps:[]}]),jf=new f.OlP(""),rd=[{provide:f.rWj,useClass:class O{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let s=i.length,o=!1;const u=function(h){o=o||h,s--,0==s&&r(o)};i.forEach(function(h){h.whenStable(u)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],vl=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function bh(){return new f.qLn},deps:[]},{provide:We,useClass:ed,multi:!0,deps:[Te,f.R0b,f.Lbi]},{provide:We,useClass:wh,multi:!0,deps:[Te]},{provide:qc,useClass:qc,deps:[Ct,cr,f.AFp]},{provide:f.FYo,useExisting:qc},{provide:Mn,useExisting:cr},{provide:cr,useClass:cr,deps:[Te]},{provide:Ct,useClass:Ct,deps:[We,f.R0b]},{provide:class cl{},useClass:X,deps:[]},[]];let sm=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:io,useExisting:f.AFp},S]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(jf,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...vl,...rd],imports:[il,f.hGG]}),n})(),La=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Te))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function nc(){return new La((0,f.LFG)(Te))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Dr=W(2011),di=W(4986),js=W(9751),la=W(7669),Un=W(8996);function Et(...n){const e=(0,la.yG)(n);return(0,Un.D)(n,e)}var sc=W(6451),xt=W(4004),ld=W(3099),oc=W(8421),yr=W(4482),ur=W(5403);function dr(n,e){return(0,yr.e)((t,r)=>{let i=null,s=0,o=!1;const u=()=>o&&!i&&r.complete();t.subscribe((0,ur.x)(r,h=>{i?.unsubscribe();let g=0;const y=s++;(0,oc.Xf)(n(h,y)).subscribe(i=(0,ur.x)(r,b=>r.next(e?e(h,b,y,g++):b),()=>{i=null,u()}))},()=>{o=!0,u()}))})}function bl(n,e,t,r,i){return(s,o)=>{let u=t,h=e,g=0;s.subscribe((0,ur.x)(o,y=>{const b=g++;h=u?n(h,y,b):(u=!0,y),r&&o.next(h)},i&&(()=>{u&&o.next(h),o.complete()})))}}function A(n,e){return(0,yr.e)(bl(n,e,arguments.length>=2,!0))}var M=W(4671);function L(n,e=M.y){return n=n??Y,(0,yr.e)((t,r)=>{let i,s=!0;t.subscribe((0,ur.x)(r,o=>{const u=e(o);(s||!n(i,u))&&(s=!1,i=u,r.next(o))}))})}function Y(n,e){return n===e}var de=W(5032),nt=W(2122),Ot=(W(9568),W(3942)),qt=W(4859),he=W(5861),tr=W(9681),j=W(2090),Ri=W(1877);const Qc="@firebase/database";let Ki="";function Hs(n){Ki=n}class ac{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,j.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,j.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class am{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,j.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const lm=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ac(e)}}catch{}return new am},ca=lm("localStorage"),cm=lm("sessionStorage"),lc=new Ri.Yd("@firebase/database"),um=function(){let n=1;return function(){return n++}}(),dm=function(n){const e=(0,j.dS)(n),t=new j.gQ;t.update(e);const r=t.digest();return j.US.encodeByteArray(r)},Cl=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Cl.apply(null,r):e+="object"==typeof r?(0,j.Wl)(r):r,e+=" "}return e};let Fa=null,bv=!0;const Ev=function(n,e){(0,j.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(lc.logLevel=Ri.in.VERBOSE,Fa=lc.log.bind(lc),e&&cm.set("logging_enabled",!0)):"function"==typeof n?Fa=n:(Fa=null,cm.remove("logging_enabled"))},Xr=function(...n){if(!0===bv&&(bv=!1,null===Fa&&!0===cm.get("logging_enabled")&&Ev(!0)),Fa){const e=Cl.apply(null,n);Fa(e)}},xh=function(n){return function(...e){Xr(n,...e)}},hm=function(...n){const e="FIREBASE INTERNAL ERROR: "+Cl(...n);lc.error(e)},Va=function(...n){const e=`FIREBASE FATAL ERROR: ${Cl(...n)}`;throw lc.error(e),new Error(e)},is=function(...n){const e="FIREBASE WARNING: "+Cl(...n);lc.warn(e)},Ah=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ua="[MIN_NAME]",da="[MAX_NAME]",Il=function(n,e){if(n===e)return 0;if(n===ua||e===da)return-1;if(e===ua||n===da)return 1;{const t=ym(n),r=ym(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Kf=function(n,e){return n===e?0:n<e?-1:1},ws=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,j.Wl)(e))},Yf=function(n){if("object"!=typeof n||null===n)return(0,j.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,j.Wl)(e[r]),t+=":",t+=Yf(n[e[r]]);return t+="}",t},gm=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function _i(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const cd=function(n){(0,j.hu)(!Ah(n),"Invalid JSON number");const r=1023;let i,s,o,u,h;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(u=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=u+r,o=Math.round(n*Math.pow(2,52-u)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const g=[];for(h=52;h;h-=1)g.push(o%2?1:0),o=Math.floor(o/2);for(h=11;h;h-=1)g.push(s%2?1:0),s=Math.floor(s/2);g.push(i?1:0),g.reverse();const y=g.join("");let b="";for(h=0;h<64;h+=8){let T=parseInt(y.substr(h,8),2).toString(16);1===T.length&&(T="0"+T),b+=T}return b.toLowerCase()},mm=new RegExp("^-?(0*)\\d{1,10}$"),ym=function(n){if(mm.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Jr=function(n){try{n()}catch(e){setTimeout(()=>{throw is("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Xc=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class ep{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Yi{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Xr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',is(e)}}let Ua=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const _=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,N="ac",$="websocket",ge="long_polling";class Ke{constructor(e,t,r,i,s=!1,o="",u=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ca.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ca.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Vt(n,e,t){let r;if((0,j.hu)("string"==typeof e,"typeof type must == string"),(0,j.hu)("object"==typeof t,"typeof params must == object"),e===$)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==ge)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function It(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return _i(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class wn{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,j.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,j.p$)(this.counters_)}}const or={},bs={};function oo(n){const e=n.toString();return or[e]||(or[e]=new wn),or[e]}class cc{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Jr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class uc{constructor(e,t,r,i,s,o,u){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xh(e),this.stats_=oo(t),this.urlFn=h=>(this.appCheckToken&&(h[N]=this.appCheckToken),Vt(t,ge,h))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new cc(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,j.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new dc((...s)=>{const[o,u,h,g,y]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=u,this.password=h;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,u]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,u)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r[N]=this.appCheckToken),typeof location<"u"&&location.hostname&&_.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){uc.forceAllow_=!0}static forceDisallow(){uc.forceDisallow_=!0}static isAvailable(){return!((0,j.Yr)()||!uc.forceAllow_&&(uc.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,j.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,j.h$)(t),i=gm(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,j.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,j.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class dc{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,j.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=um(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=dc.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){Xr("frame writing exception"),u.stack&&Xr(u.stack),Xr(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Xr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,j.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Xr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Im=null;typeof MozWebSocket<"u"?Im=MozWebSocket:typeof WebSocket<"u"&&(Im=WebSocket);let op=(()=>{class n{constructor(t,r,i,s,o,u,h){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xh(this.connId),this.stats_=oo(r),this.connURL=n.connectionURL_(r,u,h,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const u={v:"5"};return!(0,j.Yr)()&&typeof location<"u"&&location.hostname&&_.test(location.hostname)&&(u.r="f"),r&&(u.s=r),i&&(u.ls=i),s&&(u[N]=s),o&&(u.p=o),Vt(t,$,u)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ca.set("previous_websocket_failure",!0);try{let i;if((0,j.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Ki}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,u=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;u&&(i.proxy={origin:u})}this.mySock=new Im(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Im&&!n.forceDisallow_}static previouslyFailed(){return ca.isInMemoryStorage||!0===ca.get("previous_websocket_failure")}markConnectionHealthy(){ca.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,j.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,j.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,j.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=gm(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),ap=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[uc,op]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=op&&op.isAvailable();let i=r&&!op.previouslyFailed();if(t.webSocketOnly&&(r||is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[op];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class xv{constructor(e,t,r,i,s,o,u,h,g,y){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=h,this.onKill_=g,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xh("c:"+this.id+":"),this.transportManager_=new ap(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Xc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ws("t",e),r=ws("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ws("t",e),r=ws("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ws("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?hm("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):hm("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Xc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Xc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ca.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class pC{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class gC{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,j.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,j.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Am extends gC{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,j.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Am}getInitialEvent(e){return(0,j.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Gn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function jn(){return new Gn("")}function dn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function eu(n){return n.pieces_.length-n.pieceNum_}function hr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Gn(n.pieces_,e)}function mC(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function fd(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function _C(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Gn(e,0)}function Tr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Gn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Gn(t,0)}function bn(n){return n.pieceNum_>=n.pieces_.length}function ss(n,e){const t=dn(n),r=dn(e);if(null===t)return e;if(t===r)return ss(hr(n),hr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function yC(n,e){const t=fd(n,0),r=fd(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Il(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function Mm(n,e){if(eu(n)!==eu(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function So(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(eu(n)>eu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class vC{constructor(e,t){this.errorPrefix_=t,this.parts_=fd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,j.ug)(this.parts_[r]);wC(this)}}function wC(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+pd(n))}function pd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class kv extends gC{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new kv}getInitialEvent(e){return(0,j.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ha=1e3;let Rm,Oh=(()=>{class n extends pC{constructor(t,r,i,s,o,u,h,g){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=u,this.appCheckTokenProvider_=h,this.authOverride_=g,this.id=n.nextPersistentConnectionId_++,this.log_=xh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ha,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g&&!(0,j.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kv.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Am.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,j.Wl)(o)),(0,j.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new j.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:u=>{const h=u.d;"ok"===u.s?r.resolve(h):r.reject(h)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,u=t._path.toString();this.log_("Listen called for "+u+" "+o),this.listens.has(u)||this.listens.set(u,new Map),(0,j.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,j.hu)(!this.listens.get(u).has(o),"listen() called twice for same path/queryId.");const h={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(u).set(o,h),this.connected_&&this.sendListen_(h)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,h=>{const g=h.d,y=h.s;n.warnOnListenWarnings_(g,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",h),"ok"!==y&&this.removeListen_(i,s),t.onComplete&&t.onComplete(y,g))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,j.r3)(t,"w")){const i=(0,j.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,j.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,j.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,u=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,j.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,u=>{s&&setTimeout(()=>{s(u.s,u.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const u={p:r,d:i};void 0!==o&&(u.h=o),this.outstandingPuts_.push({action:t,request:u,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,j.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):hm("Unrecognized action received from server: "+(0,j.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,j.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ha,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ha,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ha),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,he.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,u=t.lastSessionId;let h=!1,g=null;const y=function(){g?g.close():(h=!0,s())};t.realtime_={close:y,sendRequest:function(k){(0,j.hu)(g,"sendRequest call when we're not connected not allowed."),g.sendRequest(k)}};const T=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[k,P]=yield Promise.all([t.authTokenProvider_.getToken(T),t.appCheckTokenProvider_.getToken(T)]);h?Xr("getToken() completed but was canceled"):(Xr("getToken() completed. Creating connection."),t.authToken_=k&&k.accessToken,t.appCheckToken_=P&&P.token,g=new xv(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,B=>{is(B+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},u))}catch(k){t.log_("Failed to get token: "+k),h||(t.repoInfo_.nodeAdmin&&is(k),y())}}})()}interrupt(t){Xr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Xr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,j.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ha,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>Yf(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Gn(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Xr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Xr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,j.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Ki.replace(/\./g,"-")]=1,(0,j.uI)()?t["framework.cordova"]=1:(0,j.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Am.getInstance().currentlyOnline();return(0,j.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class kn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new kn(e,t)}}class km{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new kn(ua,e),i=new kn(ua,t);return 0!==this.compare(r,i)}minPost(){return kn.MIN}}class EC extends km{static get __EMPTY_NODE(){return Rm}static set __EMPTY_NODE(e){Rm=e}compare(e,t){return Il(e.name,t.name)}isDefinedOn(e){throw(0,j.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return kn.MIN}maxPost(){return new kn(da,Rm)}makePost(e,t){return(0,j.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new kn(e,Rm)}toString(){return".key"}}const Dl=new EC;class Nh{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let IC,Pi=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??$s.EMPTY_NODE,this.right=o??$s.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return $s.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return $s.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class $s{constructor(e,t=$s.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new $s(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Pi.BLACK,null,null))}remove(e){return new $s(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pi.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Nh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Nh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Nh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Nh(this.root_,null,this.comparator_,!0,e)}}function CC(n,e){return Il(n.name,e.name)}function Pm(n,e){return Il(n,e)}$s.EMPTY_NODE=new class dp{copy(e,t,r,i,s){return this}insert(e,t,r){return new Pi(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const wA=function(n){return"number"==typeof n?"number:"+cd(n):"string:"+n},Om=function(n){if(n.isLeafNode()){const e=n.val();(0,j.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,j.r3)(e,".sv"),"Priority must be a string or number.")}else(0,j.hu)(n===IC||n.isEmpty(),"priority of unexpected type.");(0,j.hu)(n===IC||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Nm,bA,Rv,hp=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,j.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Om(this.priorityNode_)}static set __childrenNodeConstructor(t){Nm=t}static get __childrenNodeConstructor(){return Nm}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return bn(t)?this:".priority"===dn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=dn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,j.hu)(".priority"!==i||1===eu(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(hr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+wA(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?cd(this.value_):this.value_,this.lazyHash_=dm(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,j.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,j.hu)(s>=0,"Unknown leaf type: "+r),(0,j.hu)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const vr=new class IA extends km{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Il(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return kn.MIN}maxPost(){return new kn(da,new hp("[PRIORITY-POST]",Rv))}makePost(e,t){const r=bA(e);return new kn(t,new hp("[PRIORITY-POST]",r))}toString(){return".priority"}},DC=Math.log(2);class Lm{constructor(e){this.count=parseInt(Math.log(e+1)/DC,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fm=function(n,e,t,r){n.sort(e);const i=function(h,g){const y=g-h;let b,T;if(0===y)return null;if(1===y)return b=n[h],T=t?t(b):b,new Pi(T,b.node,Pi.BLACK,null,null);{const k=parseInt(y/2,10)+h,P=i(h,k),B=i(k+1,g);return b=n[k],T=t?t(b):b,new Pi(T,b.node,Pi.BLACK,P,B)}},u=function(h){let g=null,y=null,b=n.length;const T=function(P,B){const H=b-P,ne=b;b-=P;const ce=i(H+1,ne),ve=n[H],Ie=t?t(ve):ve;k(new Pi(Ie,ve.node,B,null,ce))},k=function(P){g?(g.left=P,g=P):(y=P,g=P)};for(let P=0;P<h.count;++P){const B=h.nextBitIsOne(),H=Math.pow(2,h.count-(P+1));B?T(H,Pi.BLACK):(T(H,Pi.BLACK),T(H,Pi.RED))}return y}(new Lm(n.length));return new $s(r||e,u)};let fp;const Lh={};class ar{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,j.hu)(Lh&&vr,"ChildrenNode.ts has not been loaded"),fp=fp||new ar({".priority":Lh},{".priority":vr}),fp}get(e){const t=(0,j.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof $s?t:null}hasIndex(e){return(0,j.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,j.hu)(e!==Dl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(kn.Wrap);let u,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();u=i?Fm(r,e.getCompare()):Lh;const h=e.toString(),g=Object.assign({},this.indexSet_);g[h]=e;const y=Object.assign({},this.indexes_);return y[h]=u,new ar(y,g)}addToIndexes(e,t){const r=(0,j.UI)(this.indexes_,(i,s)=>{const o=(0,j.DV)(this.indexSet_,s);if((0,j.hu)(o,"Missing index implementation for "+s),i===Lh){if(o.isDefinedOn(e.node)){const u=[],h=t.getIterator(kn.Wrap);let g=h.getNext();for(;g;)g.name!==e.name&&u.push(g),g=h.getNext();return u.push(e),Fm(u,o.getCompare())}return Lh}{const u=t.get(e.name);let h=i;return u&&(h=h.remove(new kn(e.name,u))),h.insert(e,e.node)}});return new ar(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,j.UI)(this.indexes_,i=>{if(i===Lh)return i;{const s=t.get(e.name);return s?i.remove(new kn(e.name,s)):i}});return new ar(r,this.indexSet_)}}let pp,pn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Om(this.priorityNode_),this.children_.isEmpty()&&(0,j.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pp||(pp=new n(new $s(Pm),null,ar.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pp}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?pp:r}}getChild(t){const r=dn(t);return null===r?this:this.getImmediateChild(r).getChild(hr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,j.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new kn(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const u=s.isEmpty()?pp:this.priorityNode_;return new n(s,u,o)}}updateChild(t,r){const i=dn(t);if(null===i)return r;{(0,j.hu)(".priority"!==dn(t)||1===eu(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(hr(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(vr,(u,h)=>{r[u]=h.val(t),i++,o&&n.INTEGER_REGEXP_.test(u)?s=Math.max(s,Number(u)):o=!1}),!t&&o&&s<2*i){const u=[];for(const h in r)u[h]=r[h];return u}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+wA(this.getPriority().val())+":"),this.forEachChild(vr,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":dm(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new kn(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new kn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new kn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,kn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,kn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Fh?-1:0}withIndex(t){if(t===Dl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Dl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(vr),s=r.getIterator(vr);let o=i.getNext(),u=s.getNext();for(;o&&u;){if(o.name!==u.name||!o.node.equals(u.node))return!1;o=i.getNext(),u=s.getNext()}return null===o&&null===u}return!1}return!1}}resolveIndex_(t){return t===Dl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Fh=new class Pv extends pn{constructor(){super(new $s(Pm),pn.EMPTY_NODE,ar.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pn.EMPTY_NODE}isEmpty(){return!1}};function Ur(n,e=null){if(null===n)return pn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,j.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new hp(n,Ur(e));if(n instanceof Array){let t=pn.EMPTY_NODE;return _i(n,(r,i)=>{if((0,j.r3)(n,r)&&"."!==r.substring(0,1)){const s=Ur(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Ur(e))}{const t=[];let r=!1;if(_i(n,(o,u)=>{if("."!==o.substring(0,1)){const h=Ur(u);h.isEmpty()||(r=r||!h.getPriority().isEmpty(),t.push(new kn(o,h)))}}),0===t.length)return pn.EMPTY_NODE;const s=Fm(t,CC,o=>o.name,Pm);if(r){const o=Fm(t,vr.getCompare());return new pn(s,Ur(e),new ar({".priority":o},{".priority":vr}))}return new pn(s,Ur(e),ar.Default)}}Object.defineProperties(kn,{MIN:{value:new kn(ua,pn.EMPTY_NODE)},MAX:{value:new kn(da,Fh)}}),EC.__EMPTY_NODE=pn.EMPTY_NODE,hp.__childrenNodeConstructor=pn,function QN(n){IC=n}(Fh),function CA(n){Rv=n}(Fh),function EA(n){bA=n}(Ur);class Ov extends km{constructor(e){super(),this.indexPath_=e,(0,j.hu)(!bn(e)&&".priority"!==dn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Il(e.name,t.name):s}makePost(e,t){const r=Ur(e),i=pn.EMPTY_NODE.updateChild(this.indexPath_,r);return new kn(t,i)}maxPost(){const e=pn.EMPTY_NODE.updateChild(this.indexPath_,Fh);return new kn(da,e)}toString(){return fd(this.indexPath_,0).join("/")}}const Vm=new class TA extends km{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Il(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return kn.MIN}maxPost(){return kn.MAX}makePost(e,t){const r=Ur(e);return new kn(t,r)}toString(){return".value"}};function SA(n){return{type:"value",snapshotNode:n}}function gp(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function hc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function gd(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Um{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){(0,j.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=e.getImmediateChild(t);return u.getChild(i).equals(r.getChild(i))&&u.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(hc(t,u)):(0,j.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?o.trackChildChange(gp(t,r)):o.trackChildChange(gd(t,r,u))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(vr,(i,s)=>{t.hasChild(i)||r.trackChildChange(hc(i,s))}),t.isLeafNode()||t.forEachChild(vr,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(gd(i,s,o))}else r.trackChildChange(gp(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?pn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Vh{constructor(e){this.indexedFilter_=new Um(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Vh.getStartPost_(e),this.endPost_=Vh.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new kn(t,r))||(r=pn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=pn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(pn.EMPTY_NODE);const s=this;return t.forEachChild(vr,(o,u)=>{s.matches(new kn(o,u))||(i=i.updateImmediateChild(o,pn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class XN{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Vh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new kn(t,r))||(r=pn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=pn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=pn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const u=s.getNext();if(this.withinDirectionalStart(u)){if(!this.withinDirectionalEnd(u))break;i=i.updateImmediateChild(u.name,u.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(pn.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const u=s.getNext();o<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?o++:i=i.updateImmediateChild(u.name,pn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const b=this.index_.getCompare();o=(T,k)=>b(k,T)}else o=this.index_.getCompare();const u=e;(0,j.hu)(u.numChildren()===this.limit_,"");const h=new kn(t,r),g=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),y=this.rangedFilter_.matches(h);if(u.hasChild(t)){const b=u.getImmediateChild(t);let T=i.getChildAfterChild(this.index_,g,this.reverse_);for(;null!=T&&(T.name===t||u.hasChild(T.name));)T=i.getChildAfterChild(this.index_,T,this.reverse_);const k=null==T?1:o(T,h);if(y&&!r.isEmpty()&&k>=0)return s?.trackChildChange(gd(t,r,b)),u.updateImmediateChild(t,r);{s?.trackChildChange(hc(t,b));const B=u.updateImmediateChild(t,pn.EMPTY_NODE);return null!=T&&this.rangedFilter_.matches(T)?(s?.trackChildChange(gp(T.name,T.node)),B.updateImmediateChild(T.name,T.node)):B}}return r.isEmpty()?e:y&&o(g,h)>=0?(null!=s&&(s.trackChildChange(hc(g.name,g.node)),s.trackChildChange(gp(t,r))),u.updateImmediateChild(t,r).updateImmediateChild(g.name,pn.EMPTY_NODE)):e}}class Bm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,j.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,j.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ua}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,j.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,j.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:da}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,j.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vr}copy(){const e=new Bm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function AC(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Fv(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function mp(n,e){const t=n.copy();return t.index_=e,t}function Uv(n){const e={};if(n.isDefault())return e;let t;if(n.index_===vr?t="$priority":n.index_===Vm?t="$value":n.index_===Dl?t="$key":((0,j.hu)(n.index_ instanceof Ov,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,j.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,j.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,j.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,j.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,j.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function tu(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==vr&&(e.i=n.index_.toString()),e}class jm extends pC{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=xh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,j.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=jm.getListenId_(e,r),u={};this.listens_[o]=u;const h=Uv(e._queryParams);this.restRequest_(s+".json",h,(g,y)=>{let b=y;if(404===g&&(b=null,g=null),null===g&&this.onDataUpdate_(s,b,!1,r),(0,j.DV)(this.listens_,o)===u){let T;T=g?401===g?"permission_denied":"rest_error:"+g:"ok",i(T,null)}})}unlisten(e,t){const r=jm.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Uv(e._queryParams),r=e._path.toString(),i=new j.BH;return this.restRequest_(r+".json",t,(s,o)=>{let u=o;404===s&&(u=null,s=null),null===s?(this.onDataUpdate_(r,u,!1,null),i.resolve(u)):i.reject(new Error(u))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,j.xO)(t);this.log_("Sending REST request for "+o);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(r&&4===u.readyState){this.log_("REST Response for "+o+" received. status:",u.status,"response:",u.responseText);let h=null;if(u.status>=200&&u.status<300){try{h=(0,j.cI)(u.responseText)}catch{is("Failed to parse JSON response for "+o+": "+u.responseText)}r(null,h)}else 401!==u.status&&404!==u.status&&is("Got unsuccessful REST response for "+o+" Status: "+u.status),r(u.status);r=null}},u.open("GET",o,!0),u.send()})}}class Bv{constructor(){this.rootNode_=pn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function md(){return{value:null,children:new Map}}function Uh(n,e,t){if(bn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=dn(e);n.children.has(r)||n.children.set(r,md()),Uh(n.children.get(r),e=hr(e),t)}}function _p(n,e){if(bn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(vr,(r,i)=>{Uh(n,new Gn(r),i)}),_p(n,e)}}if(n.children.size>0){const t=dn(e);return e=hr(e),n.children.has(t)&&_p(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Bh(n,e,t){null!==n.value?t(e,n.value):function _d(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Bh(i,new Gn(e.toString()+"/"+r),t)})}class MC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&_i(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class kC{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new MC(e);const r=1e4+2e4*Math.random();Xc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;_i(e,(i,s)=>{s>0&&(0,j.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Xc(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var os=(()=>{return(n=os||(os={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",os;var n})();function $v(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class jh{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=os.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(bn(this.path)){if(null!=this.affectedTree.value)return(0,j.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Gn(e));return new jh(jn(),t,this.revert)}}return(0,j.hu)(dn(this.path)===e,"operationForChild called for unrelated child."),new jh(hr(this.path),this.affectedTree,this.revert)}}class yp{constructor(e,t){this.source=e,this.path=t,this.type=os.LISTEN_COMPLETE}operationForChild(e){return bn(this.path)?new yp(this.source,jn()):new yp(this.source,hr(this.path))}}class nu{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=os.OVERWRITE}operationForChild(e){return bn(this.path)?new nu(this.source,jn(),this.snap.getImmediateChild(e)):new nu(this.source,hr(this.path),this.snap)}}class Hh{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=os.MERGE}operationForChild(e){if(bn(this.path)){const t=this.children.subtree(new Gn(e));return t.isEmpty()?null:t.value?new nu(this.source,jn(),t.value):new Hh(this.source,jn(),t)}return(0,j.hu)(dn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Hh(this.source,hr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class fc{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(bn(e))return this.isFullyInitialized()&&!this.filtered_;const t=dn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class JN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function pc(n,e,t,r,i,s){const o=r.filter(u=>u.type===t);o.sort((u,h)=>function $h(n,e,t){if(null==e.childName||null==t.childName)throw(0,j.g5)("Should only compare child_ events.");const r=new kn(e.childName,e.snapshotNode),i=new kn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,u,h)),o.forEach(u=>{const h=function kA(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,u,s);i.forEach(g=>{g.respondsTo(u.type)&&e.push(g.createEvent(h,n.query_))})})}function ru(n,e){return{eventCache:n,serverCache:e}}function vp(n,e,t,r){return ru(new fc(e,t,r),n.serverCache)}function zv(n,e,t,r){return ru(n.eventCache,new fc(e,t,r))}function $m(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function yd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Wv;class fr{constructor(e,t=(()=>(Wv||(Wv=new $s(Kf)),Wv))()){this.value=e,this.children=t}static fromObject(e){let t=new fr(null);return _i(e,(r,i)=>{t=t.set(new Gn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:jn(),value:this.value};if(bn(e))return null;{const r=dn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(hr(e),t);return null!=s?{path:Tr(new Gn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(bn(e))return this;{const t=dn(e),r=this.children.get(t);return null!==r?r.subtree(hr(e)):new fr(null)}}set(e,t){if(bn(e))return new fr(t,this.children);{const r=dn(e),s=(this.children.get(r)||new fr(null)).set(hr(e),t),o=this.children.insert(r,s);return new fr(this.value,o)}}remove(e){if(bn(e))return this.children.isEmpty()?new fr(null):new fr(null,this.children);{const t=dn(e),r=this.children.get(t);if(r){const i=r.remove(hr(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new fr(null):new fr(this.value,s)}return this}}get(e){if(bn(e))return this.value;{const t=dn(e),r=this.children.get(t);return r?r.get(hr(e)):null}}setTree(e,t){if(bn(e))return t;{const r=dn(e),s=(this.children.get(r)||new fr(null)).setTree(hr(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new fr(this.value,o)}}fold(e){return this.fold_(jn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Tr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,jn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(bn(e))return null;{const s=dn(e),o=this.children.get(s);return o?o.findOnPath_(hr(e),Tr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,jn(),t)}foreachOnPath_(e,t,r){if(bn(e))return this;{this.value&&r(t,this.value);const i=dn(e),s=this.children.get(i);return s?s.foreachOnPath_(hr(e),Tr(t,i),r):new fr(null)}}foreach(e){this.foreach_(jn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Tr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class xo{constructor(e){this.writeTree_=e}static empty(){return new xo(new fr(null))}}function vd(n,e,t){if(bn(e))return new xo(new fr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=ss(i,e);return s=s.updateChild(o,t),new xo(n.writeTree_.set(i,s))}{const i=new fr(t),s=n.writeTree_.setTree(e,i);return new xo(s)}}}function Gv(n,e,t){let r=n;return _i(t,(i,s)=>{r=vd(r,Tr(e,i),s)}),r}function zm(n,e){if(bn(e))return xo.empty();{const t=n.writeTree_.setTree(e,new fr(null));return new xo(t)}}function wd(n,e){return null!=bd(n,e)}function bd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ss(t.path,e)):null}function PC(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(vr,(r,i)=>{e.push(new kn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new kn(r,i.value))}),e}function iu(n,e){if(bn(e))return n;{const t=bd(n,e);return new xo(null!=t?new fr(t):n.writeTree_.subtree(e))}}function qv(n){return n.writeTree_.isEmpty()}function zh(n,e){return OC(jn(),n.writeTree_,e)}function OC(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,j.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=OC(Tr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Tr(n,".priority"),r)),t}}function Wm(n,e){return UC(e,n)}function eL(n,e){if(n.snap)return So(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&So(Tr(n.path,t),e))return!0;return!1}function NC(n){return n.visible}function OA(n,e,t){let r=xo.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let u;if(s.snap)So(t,o)?(u=ss(t,o),r=vd(r,u,s.snap)):So(o,t)&&(u=ss(o,t),r=vd(r,jn(),s.snap.getChild(u)));else{if(!s.children)throw(0,j.g5)("WriteRecord should have .snap or .children");if(So(t,o))u=ss(t,o),r=Gv(r,u,s.children);else if(So(o,t))if(u=ss(o,t),bn(u))r=Gv(r,jn(),s.children);else{const h=(0,j.DV)(s.children,dn(u));if(h){const g=h.getChild(hr(u));r=vd(r,jn(),g)}}}}}return r}function Zv(n,e,t,r,i){if(r||i){const s=iu(n.visibleWrites,e);return!i&&qv(s)?t:i||null!=t||wd(s,jn())?zh(OA(n.allWrites,function(g){return(g.visible||i)&&(!r||!~r.indexOf(g.writeId))&&(So(g.path,e)||So(e,g.path))},e),t||pn.EMPTY_NODE):null}{const s=bd(n.visibleWrites,e);if(null!=s)return s;{const o=iu(n.visibleWrites,e);return qv(o)?t:null!=t||wd(o,jn())?zh(o,t||pn.EMPTY_NODE):null}}}function Gm(n,e,t,r){return Zv(n.writeTree,n.treePath,e,t,r)}function qm(n,e){return function LC(n,e,t){let r=pn.EMPTY_NODE;const i=bd(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(vr,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=iu(n.visibleWrites,e);return t.forEachChild(vr,(o,u)=>{const h=zh(iu(s,new Gn(o)),u);r=r.updateImmediateChild(o,h)}),PC(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return PC(iu(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function VC(n,e,t,r){return function NA(n,e,t,r,i){(0,j.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Tr(e,t);if(wd(n.visibleWrites,s))return null;{const o=iu(n.visibleWrites,s);return qv(o)?i.getChild(t):zh(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Zm(n,e){return function LA(n,e){return bd(n.visibleWrites,e)}(n.writeTree,Tr(n.treePath,e))}function Kv(n,e,t){return function FC(n,e,t,r){const i=Tr(e,t),s=bd(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?zh(iu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Yv(n,e){return UC(Tr(n.treePath,e),n.writeTree)}function UC(n,e){return{treePath:n,writeTree:e}}class UA{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,j.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,j.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,gd(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,hc(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,gp(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,j.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,gd(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const hn=new class BA{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Km{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new fc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Kv(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:yd(this.viewCache_),s=function VA(n,e,t,r,i,s){return function FA(n,e,t,r,i,s,o){let u;const h=iu(n.visibleWrites,e),g=bd(h,jn());if(null!=g)u=g;else{if(null==t)return[];u=zh(h,t)}if(u=u.withIndex(o),u.isEmpty()||u.isLeafNode())return[];{const y=[],b=o.getCompare(),T=s?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o);let k=T.getNext();for(;k&&y.length<i;)0!==b(k,r)&&y.push(k),k=T.getNext();return y}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function Qv(n,e,t,r,i,s){const o=e.eventCache;if(null!=Zm(r,t))return e;{let u,h;if(bn(t))if((0,j.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=yd(e),b=qm(r,g instanceof pn?g:pn.EMPTY_NODE);u=n.filter.updateFullNode(e.eventCache.getNode(),b,s)}else{const g=Gm(r,yd(e));u=n.filter.updateFullNode(e.eventCache.getNode(),g,s)}else{const g=dn(t);if(".priority"===g){(0,j.hu)(1===eu(t),"Can't have a priority with additional path components");const y=o.getNode();h=e.serverCache.getNode();const b=VC(r,t,y,h);u=null!=b?n.filter.updatePriority(y,b):o.getNode()}else{const y=hr(t);let b;if(o.isCompleteForChild(g)){h=e.serverCache.getNode();const T=VC(r,t,o.getNode(),h);b=null!=T?o.getNode().getImmediateChild(g).updateChild(y,T):o.getNode().getImmediateChild(g)}else b=Kv(r,g,e.serverCache);u=null!=b?n.filter.updateChild(o.getNode(),g,b,y,i,s):o.getNode()}}return vp(e,u,o.isFullyInitialized()||bn(t),n.filter.filtersNodes())}}function Ym(n,e,t,r,i,s,o,u){const h=e.serverCache;let g;const y=o?n.filter:n.filter.getIndexedFilter();if(bn(t))g=y.updateFullNode(h.getNode(),r,null);else if(y.filtersNodes()&&!h.isFiltered()){const k=h.getNode().updateChild(t,r);g=y.updateFullNode(h.getNode(),k,null)}else{const k=dn(t);if(!h.isCompleteForPath(t)&&eu(t)>1)return e;const P=hr(t),H=h.getNode().getImmediateChild(k).updateChild(P,r);g=".priority"===k?y.updatePriority(h.getNode(),H):y.updateChild(h.getNode(),k,H,P,hn,null)}const b=zv(e,g,h.isFullyInitialized()||bn(t),y.filtersNodes());return Qv(n,b,t,i,new Km(i,b,s),u)}function Qm(n,e,t,r,i,s,o){const u=e.eventCache;let h,g;const y=new Km(i,e,s);if(bn(t))g=n.filter.updateFullNode(e.eventCache.getNode(),r,o),h=vp(e,g,!0,n.filter.filtersNodes());else{const b=dn(t);if(".priority"===b)g=n.filter.updatePriority(e.eventCache.getNode(),r),h=vp(e,g,u.isFullyInitialized(),u.isFiltered());else{const T=hr(t),k=u.getNode().getImmediateChild(b);let P;if(bn(T))P=r;else{const B=y.getCompleteChild(b);P=null!=B?".priority"===mC(T)&&B.getChild(_C(T)).isEmpty()?B:B.updateChild(T,r):pn.EMPTY_NODE}h=k.equals(P)?e:vp(e,n.filter.updateChild(u.getNode(),b,P,T,y,o),u.isFullyInitialized(),n.filter.filtersNodes())}}return h}function HC(n,e){return n.eventCache.isCompleteForChild(e)}function zA(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Xm(n,e,t,r,i,s,o,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let g,h=e;g=bn(t)?r:new fr(null).setTree(t,r);const y=e.serverCache.getNode();return g.children.inorderTraversal((b,T)=>{if(y.hasChild(b)){const P=zA(0,e.serverCache.getNode().getImmediateChild(b),T);h=Ym(n,h,new Gn(b),P,i,s,o,u)}}),g.children.inorderTraversal((b,T)=>{const k=!e.serverCache.isCompleteForChild(b)&&null===T.value;if(!y.hasChild(b)&&!k){const B=zA(0,e.serverCache.getNode().getImmediateChild(b),T);h=Ym(n,h,new Gn(b),B,i,s,o,u)}}),h}class Xv{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Um(r.getIndex()),s=function SC(n){return n.loadsAllData()?new Um(n.getIndex()):n.hasLimit()?new XN(n):new Vh(n)}(r);this.processor_=function BC(n){return{filter:n}}(s);const o=t.serverCache,u=t.eventCache,h=i.updateFullNode(pn.EMPTY_NODE,o.getNode(),null),g=s.updateFullNode(pn.EMPTY_NODE,u.getNode(),null),y=new fc(h,o.isFullyInitialized(),i.filtersNodes()),b=new fc(g,u.isFullyInitialized(),s.filtersNodes());this.viewCache_=ru(b,y),this.eventGenerator_=new JN(this.query_)}get query(){return this.query_}}function nL(n,e){const t=yd(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!bn(e)&&!t.getImmediateChild(dn(e)).isEmpty())?t.getChild(e):null}function qA(n){return 0===n.eventRegistrations_.length}function zC(n,e,t){const r=[];if(t){(0,j.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function e0(n,e,t,r){e.type===os.MERGE&&null!==e.source.queryId&&((0,j.hu)(yd(n.viewCache_),"We should always have a full cache before handling merges"),(0,j.hu)($m(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function jA(n,e,t,r,i){const s=new UA;let o,u;if(t.type===os.OVERWRITE){const g=t;g.source.fromUser?o=Qm(n,e,g.path,g.snap,r,i,s):((0,j.hu)(g.source.fromServer,"Unknown source."),u=g.source.tagged||e.serverCache.isFiltered()&&!bn(g.path),o=Ym(n,e,g.path,g.snap,r,i,u,s))}else if(t.type===os.MERGE){const g=t;g.source.fromUser?o=function $A(n,e,t,r,i,s,o){let u=e;return r.foreach((h,g)=>{const y=Tr(t,h);HC(e,dn(y))&&(u=Qm(n,u,y,g,i,s,o))}),r.foreach((h,g)=>{const y=Tr(t,h);HC(e,dn(y))||(u=Qm(n,u,y,g,i,s,o))}),u}(n,e,g.path,g.children,r,i,s):((0,j.hu)(g.source.fromServer,"Unknown source."),u=g.source.tagged||e.serverCache.isFiltered(),o=Xm(n,e,g.path,g.children,r,i,u,s))}else if(t.type===os.ACK_USER_WRITE){const g=t;o=g.revert?function WA(n,e,t,r,i,s){let o;if(null!=Zm(r,t))return e;{const u=new Km(r,e,i),h=e.eventCache.getNode();let g;if(bn(t)||".priority"===dn(t)){let y;if(e.serverCache.isFullyInitialized())y=Gm(r,yd(e));else{const b=e.serverCache.getNode();(0,j.hu)(b instanceof pn,"serverChildren would be complete if leaf node"),y=qm(r,b)}g=n.filter.updateFullNode(h,y,s)}else{const y=dn(t);let b=Kv(r,y,e.serverCache);null==b&&e.serverCache.isCompleteForChild(y)&&(b=h.getImmediateChild(y)),g=null!=b?n.filter.updateChild(h,y,b,hr(t),u,s):e.eventCache.getNode().hasChild(y)?n.filter.updateChild(h,y,pn.EMPTY_NODE,hr(t),u,s):h,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Gm(r,yd(e)),o.isLeafNode()&&(g=n.filter.updateFullNode(g,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Zm(r,jn()),vp(e,g,o,n.filter.filtersNodes())}}(n,e,g.path,r,i,s):function $C(n,e,t,r,i,s,o){if(null!=Zm(i,t))return e;const u=e.serverCache.isFiltered(),h=e.serverCache;if(null!=r.value){if(bn(t)&&h.isFullyInitialized()||h.isCompleteForPath(t))return Ym(n,e,t,h.getNode().getChild(t),i,s,u,o);if(bn(t)){let g=new fr(null);return h.getNode().forEachChild(Dl,(y,b)=>{g=g.set(new Gn(y),b)}),Xm(n,e,t,g,i,s,u,o)}return e}{let g=new fr(null);return r.foreach((y,b)=>{const T=Tr(t,y);h.isCompleteForPath(T)&&(g=g.set(y,h.getNode().getChild(T)))}),Xm(n,e,t,g,i,s,u,o)}}(n,e,g.path,g.affectedTree,r,i,s)}else{if(t.type!==os.LISTEN_COMPLETE)throw(0,j.g5)("Unknown operation type: "+t.type);o=function Ed(n,e,t,r,i){const s=e.serverCache;return Qv(n,zv(e,s.getNode(),s.isFullyInitialized()||bn(t),s.isFiltered()),t,r,hn,i)}(n,e,t.path,r,s)}const h=s.getChanges();return function HA(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=$m(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(SA($m(e)))}}(e,o,h),{viewCache:o,changes:h}}(n.processor_,i,e,t,r);return function jC(n,e){(0,j.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,j.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,j.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,WC(n,s.changes,s.viewCache.eventCache.getNode(),null)}function WC(n,e,t,r){return function MA(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function TC(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),pc(n,i,"child_removed",e,r,t),pc(n,i,"child_added",e,r,t),pc(n,i,"child_moved",s,r,t),pc(n,i,"child_changed",e,r,t),pc(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let mc,Gh;class GC{constructor(){this.views=new Map}}function e_(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,j.hu)(null!=s,"SyncTree gave us an op for an invalid query."),e0(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(e0(o,e,t,r));return s}}function ZC(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let u=Gm(t,i?r:null),h=!1;u?h=!0:r instanceof pn?(u=qm(t,r),h=!1):(u=pn.EMPTY_NODE,h=!1);const g=ru(new fc(u,h,!1),new fc(r,i,!1));return new Xv(e,g)}return o}function KC(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function su(n,e){let t=null;for(const r of n.views.values())t=t||nL(r,e);return t}function t0(n,e){return e._queryParams.loadsAllData()?wp(n):n.views.get(e._queryIdentifier)}function YC(n,e){return null!=t0(n,e)}function _c(n){return null!=wp(n)}function wp(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let QA=1;class XA{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fr(null),this.pendingWriteTree_=function Ba(){return{visibleWrites:xo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ou(n,e,t,r,i){return function Wh(n,e,t,r,i){(0,j.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=vd(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?lu(n,new nu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function au(n,e,t=!1){const r=function RA(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function PA(n,e){const t=n.allWrites.findIndex(u=>u.writeId===e);(0,j.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const u=n.allWrites[o];u.visible&&(o>=t&&eL(u,r.path)?i=!1:So(r.path,u.path)&&(s=!0)),o--}return!!i&&(s?(function tL(n){n.visibleWrites=OA(n.allWrites,NC,jn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=zm(n.visibleWrites,r.path):_i(r.children,h=>{n.visibleWrites=zm(n.visibleWrites,Tr(r.path,h))}),!0))}(n.pendingWriteTree_,e)){let s=new fr(null);return null!=r.snap?s=s.set(jn(),!0):_i(r.children,o=>{s=s.set(new Gn(o),!0)}),lu(n,new jh(r.path,s,t))}return[]}function qh(n,e,t){return lu(n,new nu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function yc(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let u=[];if(o&&("default"===e._queryIdentifier||YC(o,e))){const h=function YA(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const u=_c(n);if("default"===i)for(const[h,g]of n.views.entries())o=o.concat(zC(g,t,r)),qA(g)&&(n.views.delete(h),g.query._queryParams.loadsAllData()||s.push(g.query));else{const h=n.views.get(i);h&&(o=o.concat(zC(h,t,r)),qA(h)&&(n.views.delete(i),h.query._queryParams.loadsAllData()||s.push(h.query)))}return u&&!_c(n)&&s.push(new(function Jm(){return(0,j.hu)(mc,"Reference.ts has not been loaded"),mc}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function ZA(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const g=h.removed;if(u=h.events,!i){const y=-1!==g.findIndex(T=>T._queryParams.loadsAllData()),b=n.syncPointTree_.findOnPath(s,(T,k)=>_c(k));if(y&&!b){const T=n.syncPointTree_.subtree(s);if(!T.isEmpty()){const k=function JC(n){return n.fold((e,t,r)=>{if(t&&_c(t))return[wp(t)];{let i=[];return t&&(i=KC(t)),_i(r,(s,o)=>{i=i.concat(o)}),i}})}(T);for(let P=0;P<k.length;++P){const B=k[P],H=B.query,ne=r0(n,B);n.listenProvider_.startListening(Zh(H),Id(n,H),ne.hashFn,ne.onComplete)}}}!b&&g.length>0&&!r&&(y?n.listenProvider_.stopListening(Zh(e),null):g.forEach(T=>{const k=n.queryToTagMap.get(s_(T));n.listenProvider_.stopListening(Zh(T),k)}))}!function tM(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=s_(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,g)}return u}function n_(n,e,t,r){const i=s0(n,r);if(null!=i){const s=o_(i),o=s.path,u=s.queryId,h=ss(o,e);return o0(n,o,new nu($v(u),h,t))}return[]}function Ep(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(T,k)=>{const P=ss(T,i);s=s||su(k,P),o=o||_c(k)});let h,u=n.syncPointTree_.get(i);u?(o=o||_c(u),s=s||su(u,jn())):(u=new GC,n.syncPointTree_=n.syncPointTree_.set(i,u)),null!=s?h=!0:(h=!1,s=pn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((k,P)=>{const B=su(P,jn());B&&(s=s.updateImmediateChild(k,B))}));const g=YC(u,e);if(!g&&!e._queryParams.loadsAllData()){const T=s_(e);(0,j.hu)(!n.queryToTagMap.has(T),"View does not exist, but we have a tag");const k=function nM(){return QA++}();n.queryToTagMap.set(T,k),n.tagToQueryMap.set(k,T)}let b=function KA(n,e,t,r,i,s){const o=ZC(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function rL(n,e){n.eventRegistrations_.push(e)}(o,t),function iL(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(vr,(s,o)=>{r.push(gp(s,o))}),t.isFullyInitialized()&&r.push(SA(t.getNode())),WC(n,r,t.getNode(),e)}(o,t)}(u,e,t,Wm(n.pendingWriteTree_,i),s,h);if(!g&&!o&&!r){const T=t0(u,e);b=b.concat(function Ao(n,e,t){const r=e._path,i=Id(n,e),s=r0(n,t),o=n.listenProvider_.startListening(Zh(e),i,s.hashFn,s.onComplete),u=n.syncPointTree_.subtree(r);if(i)(0,j.hu)(!_c(u.value),"If we're adding a query, it shouldn't be shadowed");else{const h=u.fold((g,y,b)=>{if(!bn(g)&&y&&_c(y))return[wp(y).query];{let T=[];return y&&(T=T.concat(KC(y).map(k=>k.query))),_i(b,(k,P)=>{T=T.concat(P)}),T}});for(let g=0;g<h.length;++g){const y=h[g];n.listenProvider_.stopListening(Zh(y),Id(n,y))}}return o}(n,e,T))}return b}function Cd(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,u)=>{const g=su(u,ss(o,e));if(g)return g});return Zv(i,e,s,t,!0)}function lu(n,e){return r_(e,n.syncPointTree_,null,Wm(n.pendingWriteTree_,jn()))}function r_(n,e,t,r){if(bn(n.path))return i_(n,e,t,r);{const i=e.get(jn());null==t&&null!=i&&(t=su(i,jn()));let s=[];const o=dn(n.path),u=n.operationForChild(o),h=e.children.get(o);if(h&&u){const g=t?t.getImmediateChild(o):null,y=Yv(r,o);s=s.concat(r_(u,h,g,y))}return i&&(s=s.concat(e_(i,n,r,t))),s}}function i_(n,e,t,r){const i=e.get(jn());null==t&&null!=i&&(t=su(i,jn()));let s=[];return e.children.inorderTraversal((o,u)=>{const h=t?t.getImmediateChild(o):null,g=Yv(r,o),y=n.operationForChild(o);y&&(s=s.concat(i_(y,u,h,g)))}),i&&(s=s.concat(e_(i,n,r,t))),s}function r0(n,e){const t=e.query,r=Id(n,t);return{hashFn:()=>(function Jv(n){return n.viewCache_.serverCache.getNode()}(e)||pn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function t_(n,e,t){const r=s0(n,t);if(r){const i=o_(r),s=i.path,o=i.queryId,u=ss(s,e);return o0(n,s,new yp($v(o),u))}return[]}(n,t._path,r):function eM(n,e){return lu(n,new yp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Cv(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return yc(n,t,null,s)}}}}function Id(n,e){const t=s_(e);return n.queryToTagMap.get(t)}function s_(n){return n._path.toString()+"$"+n._queryIdentifier}function s0(n,e){return n.tagToQueryMap.get(e)}function o_(n){const e=n.indexOf("$");return(0,j.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Gn(n.substr(0,e))}}function o0(n,e,t){const r=n.syncPointTree_.get(e);return(0,j.hu)(r,"Missing sync point for query tag that we're tracking"),e_(r,t,Wm(n.pendingWriteTree_,e),null)}function Zh(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function n0(){return(0,j.hu)(Gh,"Reference.ts has not been loaded"),Gh}())(n._repo,n._path):n}class a_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new a_(t)}node(){return this.node_}}class a0{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Tr(this.path_,e);return new a0(this.syncTree_,t)}node(){return Cd(this.syncTree_,this.path_)}}const l_=function(n,e,t){return n&&"object"==typeof n?((0,j.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?eI(n[".sv"],e,t):"object"==typeof n[".sv"]?rM(n[".sv"],e):void(0,j.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},eI=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,j.hu)(!1,"Unexpected server value: "+n)},rM=function(n,e,t){n.hasOwnProperty("increment")||(0,j.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,j.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,j.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},tI=function(n,e,t,r){return c_(e,new a0(t,n),r)},l0=function(n,e,t){return c_(n,new a_(e),t)};function c_(n,e,t){const r=n.getPriority().val(),i=l_(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,u=l_(o.getValue(),e,t);return u!==o.getValue()||i!==o.getPriority().val()?new hp(u,Ur(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new hp(i))),o.forEachChild(vr,(u,h)=>{const g=c_(h,e.getImmediateChild(u),t);g!==h&&(s=s.updateImmediateChild(u,g))}),s}}class c0{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function u_(n,e){let t=e instanceof Gn?e:new Gn(e),r=n,i=dn(t);for(;null!==i;){const s=(0,j.DV)(r.node.children,i)||{children:{},childCount:0};r=new c0(i,r,s),t=hr(t),i=dn(t)}return r}function vc(n){return n.node.value}function u0(n,e){n.node.value=e,d0(n)}function nI(n){return n.node.childCount>0}function d_(n,e){_i(n.node.children,(t,r)=>{e(new c0(t,n,r))})}function rI(n,e,t,r){t&&!r&&e(n),d_(n,i=>{rI(i,e,!0,r)}),t&&r&&e(n)}function Dd(n){return new Gn(null===n.parent?n.name:Dd(n.parent)+"/"+n.name)}function d0(n){null!==n.parent&&function sM(n,e,t){const r=function iM(n){return void 0===vc(n)&&!nI(n)}(t),i=(0,j.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,d0(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,d0(n))}(n.parent,n.name,n)}const iI=/[\[\].#$\/\u0000-\u001F\u007F]/,oM=/[\[\].#$\u0000-\u001F\u007F]/,h0=10485760,h_=function(n){return"string"==typeof n&&0!==n.length&&!iI.test(n)},f_=function(n){return"string"==typeof n&&0!==n.length&&!oM.test(n)},Cp=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Ah(n)||n&&"object"==typeof n&&(0,j.r3)(n,".sv")},Mo=function(n,e,t,r){r&&void 0===e||Td((0,j.gK)(n,"value"),e,t)},Td=function(n,e,t){const r=t instanceof Gn?new vC(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+pd(r));if("function"==typeof e)throw new Error(n+"contains a function "+pd(r)+" with contents = "+e.toString());if(Ah(e))throw new Error(n+"contains "+e.toString()+" "+pd(r));if("string"==typeof e&&e.length>h0/3&&(0,j.ug)(e)>h0)throw new Error(n+"contains a string greater than "+h0+" utf8 bytes "+pd(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(_i(e,(o,u)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!h_(o)))throw new Error(n+" contains an invalid key ("+o+") "+pd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function _A(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,j.ug)(e),wC(n)})(r,o),Td(n,u,r),function yA(n){const e=n.parts_.pop();n.byteLength_-=(0,j.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+pd(r)+" in addition to actual children.")}},lM=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,j.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];_i(e,(o,u)=>{const h=new Gn(o);if(Td(i,u,Tr(t,h)),".priority"===mC(h)&&!Cp(u))throw new Error(i+"contains an invalid value for '"+h.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(h)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=fd(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!h_(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(yC);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&So(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Ip=function(n,e,t){if(!t||void 0!==e){if(Ah(e))throw new Error((0,j.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Cp(e))throw new Error((0,j.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},g_=function(n,e,t,r){if(!(r&&void 0===t||h_(t)))throw new Error((0,j.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Kh=function(n,e,t,r){if(!(r&&void 0===t||f_(t)))throw new Error((0,j.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ko=function(n,e){if(".info"===dn(e))throw new Error(n+" failed = Can't modify data under /.info/")},f0=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!h_(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),f_(n)}(t))throw new Error((0,j.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class p0{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function fa(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!Mm(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Dp(n,e,t){fa(n,t),Yh(n,r=>Mm(r,e))}function Es(n,e,t){fa(n,t),Yh(n,r=>So(r,e)||So(e,r))}function Yh(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(cM(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function cM(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Fa&&Xr("event: "+t.toString()),Jr(r)}}}const g0="repo_interrupt";class uM{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new p0,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=md(),this.transactionQueueTree_=new c0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Qh(n){const t=n.infoData_.getNode(new Gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Tp(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Qh(n)})}function hM(n,e,t,r,i){n.dataUpdateCount++;const s=new Gn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const h=(0,j.UI)(t,g=>Ur(g));o=function bp(n,e,t,r){const i=s0(n,r);if(i){const s=o_(i),o=s.path,u=s.queryId,h=ss(o,e),g=fr.fromObject(t);return o0(n,o,new Hh($v(u),h,g))}return[]}(n.serverSyncTree_,s,h,i)}else{const h=Ur(t);o=n_(n.serverSyncTree_,s,h,i)}else if(r){const h=(0,j.UI)(t,g=>Ur(g));o=function JA(n,e,t){const r=fr.fromObject(t);return lu(n,new Hh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,h)}else{const h=Ur(t);o=qh(n.serverSyncTree_,s,h)}let u=s;o.length>0&&(u=Sd(n,s)),Es(n.eventQueue_,u,o)}function aI(n,e){m0(n,"connected",e),!1===e&&function lI(n){Xh(n,"onDisconnectEvents");const e=Tp(n),t=md();Bh(n.onDisconnect_,jn(),(i,s)=>{const o=tI(i,s,n.serverSyncTree_,e);Uh(t,i,o)});let r=[];Bh(t,jn(),(i,s)=>{r=r.concat(qh(n.serverSyncTree_,i,s));const o=b0(n,i);Sd(n,o)}),n.onDisconnect_=md(),Es(n.eventQueue_,jn(),r)}(n)}function m0(n,e,t){const r=new Gn("/.info/"+e),i=Ur(t);n.infoData_.updateSnapshot(r,i);const s=qh(n.infoSyncTree_,r,i);Es(n.eventQueue_,r,s)}function m_(n){return n.nextWriteId_++}function _0(n,e,t,r,i){Xh(n,"set",{path:e.toString(),value:t,priority:r});const s=Tp(n),o=Ur(t,r),u=Cd(n.serverSyncTree_,e),h=l0(o,u,s),g=m_(n),y=ou(n.serverSyncTree_,e,h,g,!0);fa(n.eventQueue_,y),n.server_.put(e.toString(),o.val(!0),(T,k)=>{const P="ok"===T;P||is("set at "+e+" failed: "+T);const B=au(n.serverSyncTree_,g,!P);Es(n.eventQueue_,e,B),cu(0,i,T,k)});const b=b0(n,e);Sd(n,b),Es(n.eventQueue_,b,[])}function y0(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&_p(n.onDisconnect_,e),cu(0,t,r,i)})}function cI(n,e,t,r){const i=Ur(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{"ok"===s&&Uh(n.onDisconnect_,e,i),cu(0,r,s,o)})}function w0(n,e,t){let r;r=".info"===dn(e._path)?yc(n.infoSyncTree_,e,t):yc(n.serverSyncTree_,e,t),Dp(n.eventQueue_,e._path,r)}function uI(n){n.persistentConnection_&&n.persistentConnection_.interrupt(g0)}function Xh(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Xr(t,...e)}function cu(n,e,t,r){e&&Jr(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function __(n,e,t){return Cd(n.serverSyncTree_,e,t)||pn.EMPTY_NODE}function y_(n,e=n.transactionQueueTree_){if(e||w_(n,e),vc(e)){const t=vM(n,e);(0,j.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function aL(n,e,t){const r=t.map(g=>g.currentWriteId),i=__(n,e,r);let s=i;const o=i.hash();for(let g=0;g<t.length;g++){const y=t[g];(0,j.hu)(0===y.status,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const b=ss(e,y.path);s=s.updateChild(b,y.currentOutputSnapshotRaw)}const u=s.val(!0),h=e;n.server_.put(h.toString(),u,g=>{Xh(n,"transaction put response",{path:h.toString(),status:g});let y=[];if("ok"===g){const b=[];for(let T=0;T<t.length;T++)t[T].status=2,y=y.concat(au(n.serverSyncTree_,t[T].currentWriteId)),t[T].onComplete&&b.push(()=>t[T].onComplete(null,!0,t[T].currentOutputSnapshotResolved)),t[T].unwatcher();w_(n,u_(n.transactionQueueTree_,e)),y_(n,n.transactionQueueTree_),Es(n.eventQueue_,e,y);for(let T=0;T<b.length;T++)Jr(b[T])}else{if("datastale"===g)for(let b=0;b<t.length;b++)t[b].status=3===t[b].status?4:0;else{is("transaction at "+h.toString()+" failed: "+g);for(let b=0;b<t.length;b++)t[b].status=4,t[b].abortReason=g}Sd(n,e)}},o)}(n,Dd(e),t)}else nI(e)&&d_(e,t=>{y_(n,t)})}function Sd(n,e){const t=uu(n,e),r=Dd(t);return function v_(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(u=>0===u.status).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const h=e[u],g=ss(t,h.path);let b,y=!1;if((0,j.hu)(null!==g,"rerunTransactionsUnderNode_: relativePath should not be null."),4===h.status)y=!0,b=h.abortReason,i=i.concat(au(n.serverSyncTree_,h.currentWriteId,!0));else if(0===h.status)if(h.retryCount>=25)y=!0,b="maxretry",i=i.concat(au(n.serverSyncTree_,h.currentWriteId,!0));else{const T=__(n,h.path,o);h.currentInputSnapshot=T;const k=e[u].update(T.val());if(void 0!==k){Td("transaction failed: Data returned ",k,h.path);let P=Ur(k);"object"==typeof k&&null!=k&&(0,j.r3)(k,".priority")||(P=P.updatePriority(T.getPriority()));const H=h.currentWriteId,ne=Tp(n),ce=l0(P,T,ne);h.currentOutputSnapshotRaw=P,h.currentOutputSnapshotResolved=ce,h.currentWriteId=m_(n),o.splice(o.indexOf(H),1),i=i.concat(ou(n.serverSyncTree_,h.path,ce,h.currentWriteId,h.applyLocally)),i=i.concat(au(n.serverSyncTree_,H,!0))}else y=!0,b="nodata",i=i.concat(au(n.serverSyncTree_,h.currentWriteId,!0))}Es(n.eventQueue_,t,i),i=[],y&&(e[u].status=2,setTimeout(e[u].unwatcher,Math.floor(0)),e[u].onComplete&&r.push("nodata"===b?()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot):()=>e[u].onComplete(new Error(b),!1,null)))}w_(n,n.transactionQueueTree_);for(let u=0;u<r.length;u++)Jr(r[u]);y_(n,n.transactionQueueTree_)}(n,vM(n,t),r),r}function uu(n,e){let t,r=n.transactionQueueTree_;for(t=dn(e);null!==t&&void 0===vc(r);)r=u_(r,t),t=dn(e=hr(e));return r}function vM(n,e){const t=[];return Sp(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Sp(n,e,t){const r=vc(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);d_(e,i=>{Sp(n,i,t)})}function w_(n,e){const t=vc(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,u0(e,t.length>0?t:void 0)}d_(e,r=>{w_(n,r)})}function b0(n,e){const t=Dd(uu(n,e)),r=u_(n.transactionQueueTree_,e);return function Tl(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{xp(n,i)}),xp(n,r),rI(r,i=>{xp(n,i)}),t}function xp(n,e){const t=vc(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,j.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,j.hu)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(au(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?u0(e,void 0):t.length=s+1,Es(n.eventQueue_,Dd(e),i);for(let o=0;o<r.length;o++)Jr(r[o])}}const xd=function(n,e){const t=Cs(n),r=t.namespace;return"firebase.com"===t.domain&&Va(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Va("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ke(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Gn(t.pathString)}},Cs=function(n){let e="",t="",r="",i="",s="",o=!0,u="https",h=443;if("string"==typeof n){let g=n.indexOf("//");g>=0&&(u=n.substring(0,g-1),n=n.substring(g+2));let y=n.indexOf("/");-1===y&&(y=n.length);let b=n.indexOf("?");-1===b&&(b=n.length),e=n.substring(0,Math.min(y,b)),y<b&&(i=function wM(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(y,b)));const T=function Sl(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):is(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,b)));g=e.indexOf(":"),g>=0?(o="https"===u||"wss"===u,h=parseInt(e.substring(g+1),10)):g=e.length;const k=e.slice(0,g);if("localhost"===k.toLowerCase())t="localhost";else if(k.split(".").length<=2)t=k;else{const P=e.indexOf(".");r=e.substring(0,P).toLowerCase(),t=e.substring(P+1),s=r}"ns"in T&&(s=T.ns)}return{host:e,port:h,domain:t,subdomain:r,secure:o,scheme:u,pathString:i,namespace:s}},du="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",b_=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=du.charAt(t%64),t=Math.floor(t/64);(0,j.hu)(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=du.charAt(e[i]);return(0,j.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class Ro{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,j.Wl)(this.snapshot.exportVal())}}class E_{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class hu{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,j.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Ad{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new j.BH;return y0(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ko("OnDisconnect.remove",this._path);const e=new j.BH;return cI(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ko("OnDisconnect.set",this._path),Mo("OnDisconnect.set",e,this._path,!1);const t=new j.BH;return cI(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ko("OnDisconnect.setWithPriority",this._path),Mo("OnDisconnect.setWithPriority",e,this._path,!1),Ip("OnDisconnect.setWithPriority",t,!1);const r=new j.BH;return function v0(n,e,t,r,i){const s=Ur(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,u)=>{"ok"===o&&Uh(n.onDisconnect_,e,s),cu(0,i,o,u)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ko("OnDisconnect.update",this._path),lM("OnDisconnect.update",e,this._path,!1);const t=new j.BH;return function mM(n,e,t,r){if((0,j.xb)(t))return Xr("onDisconnect().update() called with empty data.  Don't do anything."),void cu(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&_i(t,(o,u)=>{const h=Ur(u);Uh(n.onDisconnect_,Tr(e,o),h)}),cu(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Oi{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return bn(this._path)?null:mC(this._path)}get ref(){return new as(this._repo,this._path)}get _queryIdentifier(){const e=tu(this._queryParams),t=Yf(e);return"{}"===t?"default":t}get _queryObject(){return tu(this._queryParams)}isEqual(e){if(!((e=(0,j.m9)(e))instanceof Oi))return!1;const t=this._repo===e._repo,r=Mm(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function mA(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function wc(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Po(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Dl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ua)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==da)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===vr){if(null!=e&&!Cp(e)||null!=t&&!Cp(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,j.hu)(n.getIndex()instanceof Ov||n.getIndex()===Vm,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function bc(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class as extends Oi{constructor(e,t){super(e,t,new Bm,!1)}get parent(){const e=_C(this._path);return null===e?null:new as(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class pa{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Gn(e),r=fu(this.ref,e);return new pa(this._node.getChild(t),r,vr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new pa(i,fu(this.ref,r),vr)))}hasChild(e){const t=new Gn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Md(n,e){return(n=(0,j.m9)(n))._checkNotDeleted("ref"),void 0!==e?fu(n._root,e):n._root}function E0(n,e){(n=(0,j.m9)(n))._checkNotDeleted("refFromURL");const t=xd(e,n._repo.repoInfo_.nodeAdmin);f0("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Va("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Md(n,t.path.toString())}function fu(n,e){return null===dn((n=(0,j.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Kh("child","path",t,!1)):Kh("child","path",e,!1),new as(n._repo,Tr(n._path,e));var t}function C_(n,e){n=(0,j.m9)(n),ko("set",n._path),Mo("set",e,n._path,!1);const t=new j.BH;return _0(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function mI(n,e){lM("update",e,n._path,!1);const t=new j.BH;return function gM(n,e,t,r){Xh(n,"update",{path:e.toString(),value:t});let i=!0;const s=Tp(n),o={};if(_i(t,(u,h)=>{i=!1,o[u]=tI(Tr(e,u),Ur(h),n.serverSyncTree_,s)}),i)Xr("update() called with empty data.  Don't do anything."),cu(0,r,"ok",void 0);else{const u=m_(n),h=function QC(n,e,t,r){!function gc(n,e,t,r){(0,j.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Gv(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=fr.fromObject(t);return lu(n,new Hh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,o,u);fa(n.eventQueue_,h),n.server_.merge(e.toString(),t,(g,y)=>{const b="ok"===g;b||is("update at "+e+" failed: "+g);const T=au(n.serverSyncTree_,u,!b),k=T.length>0?Sd(n,e):e;Es(n.eventQueue_,k,T),cu(0,r,g,y)}),_i(t,g=>{const y=b0(n,Tr(e,g));Sd(n,y)}),Es(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function EM(n){n=(0,j.m9)(n);const e=new hu(()=>{}),t=new Ap(e);return function pM(n,e,t){const r=function XC(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(g,y)=>{const b=ss(g,t);r=r||su(y,b)});let i=n.syncPointTree_.get(t);i?r=r||su(i,jn()):(i=new GC,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new fc(r,!0,!1):null;return function GA(n){return $m(n.viewCache_)}(ZC(i,e,Wm(n.pendingWriteTree_,e._path),s?o.getNode():pn.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Ur(i).withIndex(e._queryParams.getIndex());let o;if(Ep(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=qh(n.serverSyncTree_,e._path,s);else{const u=Id(n.serverSyncTree_,e);o=n_(n.serverSyncTree_,e._path,s,u)}return Es(n.eventQueue_,e._path,o),yc(n.serverSyncTree_,e,t,null,!0),s},i=>(Xh(n,"get for query "+(0,j.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new pa(r,new as(n._repo,n._path),n._queryParams.getIndex()))}class Ap{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Ro("value",this,new pa(e.snapshotNode,new as(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new E_(this,e,t):null}matches(e){return e instanceof Ap&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Mp{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new E_(this,e,t):null}createEvent(e,t){(0,j.hu)(null!=e.childName,"Child events should have a childName.");const r=fu(new as(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Ro(e.type,this,new pa(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Mp&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function kp(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const h=t,g=(y,b)=>{w0(n._repo,n,u),h(y,b)};g.userCallback=t.userCallback,g.context=t.context,t=g}const o=new hu(t,s||void 0),u="value"===e?new Ap(o):new Mp(e,o);return function _M(n,e,t){let r;r=".info"===dn(e._path)?Ep(n.infoSyncTree_,e,t):Ep(n.serverSyncTree_,e,t),Dp(n.eventQueue_,e._path,r)}(n._repo,n,u),()=>w0(n._repo,n,u)}function I_(n,e,t,r){return kp(n,"value",e,t,r)}function D_(n,e,t,r){return kp(n,"child_added",e,t,r)}function T_(n,e,t,r){return kp(n,"child_changed",e,t,r)}function _I(n,e,t,r){return kp(n,"child_moved",e,t,r)}function Rp(n,e,t,r){return kp(n,"child_removed",e,t,r)}function Pp(n,e,t){let r=null;const i=t?new hu(t):null;"value"===e?r=new Ap(i):e&&(r=new Mp(e,i)),w0(n._repo,n,r)}class Oo{}class yI extends Oo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Mo("endAt",this._value,e._path,!0);const t=Fv(e._queryParams,this._value,this._key);if(bc(t),Po(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Oi(e._repo,e._path,t,e._orderByCalled)}}class I0 extends Oo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Mo("endBefore",this._value,e._path,!1);const t=function Vv(n,e,t){let r;return r=Fv(n,e,n.index_===Dl||t?t:ua),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(bc(t),Po(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Oi(e._repo,e._path,t,e._orderByCalled)}}class D0 extends Oo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Mo("startAt",this._value,e._path,!0);const t=AC(e._queryParams,this._value,this._key);if(bc(t),Po(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Oi(e._repo,e._path,t,e._orderByCalled)}}class wI extends Oo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Mo("startAfter",this._value,e._path,!1);const t=function Lv(n,e,t){let r;return r=AC(n,e,n.index_===Dl||t?t:da),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(bc(t),Po(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Oi(e._repo,e._path,t,e._orderByCalled)}}class S0 extends Oo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Oi(e._repo,e._path,function xC(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class CM extends Oo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Oi(e._repo,e._path,function Nv(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class II extends Oo{constructor(e){super(),this._path=e}_apply(e){wc(e,"orderByChild");const t=new Gn(this._path);if(bn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ov(t),i=mp(e._queryParams,r);return Po(i),new Oi(e._repo,e._path,i,!0)}}class TI extends Oo{_apply(e){wc(e,"orderByKey");const t=mp(e._queryParams,Dl);return Po(t),new Oi(e._repo,e._path,t,!0)}}class DM extends Oo{_apply(e){wc(e,"orderByPriority");const t=mp(e._queryParams,vr);return Po(t),new Oi(e._repo,e._path,t,!0)}}class x0 extends Oo{_apply(e){wc(e,"orderByValue");const t=mp(e._queryParams,Vm);return Po(t),new Oi(e._repo,e._path,t,!0)}}class SI extends Oo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Mo("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new yI(this._value,this._key)._apply(new D0(this._value,this._key)._apply(e))}}function ga(n,...e){let t=(0,j.m9)(n);for(const r of e)t=r._apply(t);return t}(function qC(n){(0,j.hu)(!mc,"__referenceConstructor has already been defined"),mc=n})(as),function sL(n){(0,j.hu)(!Gh,"__referenceConstructor has already been defined"),Gh=n}(as);const S_={};function k0(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Va("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let h,g,o=xd(s,i),u=o.repoInfo;typeof process<"u"&&process.env&&(g=process.env.FIREBASE_DATABASE_EMULATOR_HOST),g?(h=!0,s=`http://${g}?ns=${u.namespace}`,o=xd(s,i),u=o.repoInfo):h=!o.repoInfo.secure;const y=i&&h?new Ua(Ua.OWNER):new Yi(n.name,n.options,e);f0("Invalid Firebase Database URL",o),bn(o.path)||Va("Database URL must point to the root of a Firebase Database (not including a child path).");const b=function pu(n,e,t,r){let i=S_[e.name];i||(i={},S_[e.name]=i);let s=i[n.toURLString()];return s&&Va("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new uM(n,false,t,r),i[n.toURLString()]=s,s}(u,n,y,new ep(n.name,t));return new xM(b,n)}class xM{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function dM(n,e,t){if(n.stats_=oo(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new jm(n.repoInfo_,(r,i,s,o)=>{hM(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>aI(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,j.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Oh(n.repoInfo_,e,(r,i,s,o)=>{hM(n,r,i,s,o)},r=>{aI(n,r)},r=>{!function fM(n,e){_i(e,(t,r)=>{m0(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function dd(n,e){const t=n.toString();return bs[t]||(bs[t]=e()),bs[t]}(n.repoInfo_,()=>new kC(n.stats_,n.server_)),n.infoData_=new Bv,n.infoSyncTree_=new XA({startListening:(r,i,s,o)=>{let u=[];const h=n.infoData_.getNode(r._path);return h.isEmpty()||(u=qh(n.infoSyncTree_,r._path,h),setTimeout(()=>{o("ok")},0)),u},stopListening:()=>{}}),m0(n,"connected",!1),n.serverSyncTree_=new XA({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(u,h)=>{const g=o(u,h);Es(n.eventQueue_,r._path,g)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new as(this._repo,jn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function x_(n,e){const t=S_[e];(!t||t[n.key]!==n)&&Va(`Database ${e}(${n.repoInfo_}) has already been deleted.`),uI(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Va("Cannot call "+e+" on a deleted database.")}}function A_(){ap.IS_TRANSPORT_INITIALIZED&&is("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function kd(){A_(),uc.forceDisallow()}function R0(){A_(),op.forceDisallow(),uc.forceAllow()}function AM(n,e){Ev(n,e)}const kI={".sv":"timestamp"};class RI{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Oh.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Oh.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function MM(n){Hs(tr.SDK_VERSION),(0,tr._registerComponent)(new qt.wA("database",(e,{instanceIdentifier:t})=>k0(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,tr.registerVersion)(Qc,"0.14.1",n),(0,tr.registerVersion)(Qc,"0.14.1","esm2017")}();const OI=new Ri.Yd("@firebase/database-compat"),Rd=function(n){OI.warn("FIREBASE WARNING: "+n)};class NI{constructor(e){this._delegate=e}cancel(e){(0,j.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,j.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,j.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,j.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,j.Dv)("OnDisconnect.set",1,2,arguments.length),(0,j.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,j.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,j.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,j.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Rd("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,j.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class FM{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,j.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ec{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,j.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,j.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,j.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,j.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,j.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Kh("DataSnapshot.child","path",e,!1),new Ec(this._database,this._delegate.child(e))}hasChild(e){return(0,j.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Kh("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,j.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,j.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,j.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ec(this._database,t)))}hasChildren(){return(0,j.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,j.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,j.Dv)("DataSnapshot.ref",0,0,arguments.length),new zs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Is{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,j.Dv)("Query.on",2,4,arguments.length),(0,j.Wj)("Query.on","callback",t,!1);const o=Is.getCancelAndContextArgs_("Query.on",r,i),u=(g,y)=>{t.call(o.context,new Ec(this.database,g),y)};u.userCallback=t,u.context=o.context;const h=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return I_(this._delegate,u,h),t;case"child_added":return D_(this._delegate,u,h),t;case"child_removed":return Rp(this._delegate,u,h),t;case"child_changed":return T_(this._delegate,u,h),t;case"child_moved":return _I(this._delegate,u,h),t;default:throw new Error((0,j.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,j.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,j.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,j.Wj)("Query.off","callback",t,!0),(0,j.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Pp(this._delegate,e,i)}else Pp(this._delegate,e)}get(){return EM(this._delegate).then(e=>new Ec(this.database,e))}once(e,t,r,i){(0,j.Dv)("Query.once",1,4,arguments.length),(0,j.Wj)("Query.once","callback",t,!0);const s=Is.getCancelAndContextArgs_("Query.once",r,i),o=new j.BH,u=(g,y)=>{const b=new Ec(this.database,g);t&&t.call(s.context,b,y),o.resolve(b)};u.userCallback=t,u.context=s.context;const h=g=>{s.cancel&&s.cancel.call(s.context,g),o.reject(g)};switch(e){case"value":I_(this._delegate,u,h,{onlyOnce:!0});break;case"child_added":D_(this._delegate,u,h,{onlyOnce:!0});break;case"child_removed":Rp(this._delegate,u,h,{onlyOnce:!0});break;case"child_changed":T_(this._delegate,u,h,{onlyOnce:!0});break;case"child_moved":_I(this._delegate,u,h,{onlyOnce:!0});break;default:throw new Error((0,j.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,j.Dv)("Query.limitToFirst",1,1,arguments.length),new Is(this.database,ga(this._delegate,function EI(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new S0(n)}(e)))}limitToLast(e){return(0,j.Dv)("Query.limitToLast",1,1,arguments.length),new Is(this.database,ga(this._delegate,function CI(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new CM(n)}(e)))}orderByChild(e){return(0,j.Dv)("Query.orderByChild",1,1,arguments.length),new Is(this.database,ga(this._delegate,function DI(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Kh("orderByChild","path",n,!1),new II(n)}(e)))}orderByKey(){return(0,j.Dv)("Query.orderByKey",0,0,arguments.length),new Is(this.database,ga(this._delegate,function IM(){return new TI}()))}orderByPriority(){return(0,j.Dv)("Query.orderByPriority",0,0,arguments.length),new Is(this.database,ga(this._delegate,function TM(){return new DM}()))}orderByValue(){return(0,j.Dv)("Query.orderByValue",0,0,arguments.length),new Is(this.database,ga(this._delegate,function A0(){return new x0}()))}startAt(e=null,t){return(0,j.Dv)("Query.startAt",0,2,arguments.length),new Is(this.database,ga(this._delegate,function T0(n=null,e){return g_("startAt","key",e,!0),new D0(n,e)}(e,t)))}startAfter(e=null,t){return(0,j.Dv)("Query.startAfter",0,2,arguments.length),new Is(this.database,ga(this._delegate,function bI(n,e){return g_("startAfter","key",e,!0),new wI(n,e)}(e,t)))}endAt(e=null,t){return(0,j.Dv)("Query.endAt",0,2,arguments.length),new Is(this.database,ga(this._delegate,function C0(n,e){return g_("endAt","key",e,!0),new yI(n,e)}(e,t)))}endBefore(e=null,t){return(0,j.Dv)("Query.endBefore",0,2,arguments.length),new Is(this.database,ga(this._delegate,function vI(n,e){return g_("endBefore","key",e,!0),new I0(n,e)}(e,t)))}equalTo(e,t){return(0,j.Dv)("Query.equalTo",1,2,arguments.length),new Is(this.database,ga(this._delegate,function xI(n,e){return g_("equalTo","key",e,!0),new SI(n,e)}(e,t)))}toString(){return(0,j.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,j.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,j.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Is))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,j.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,j.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,j.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new zs(this.database,new as(this._delegate._repo,this._delegate._path))}}class zs extends Is{constructor(e,t){super(e,new Oi(t._repo,t._path,new Bm,!1)),this.database=e,this._delegate=t}getKey(){return(0,j.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,j.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new zs(this.database,fu(this._delegate,e))}getParent(){(0,j.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new zs(this.database,e):null}getRoot(){return(0,j.Dv)("Reference.root",0,0,arguments.length),new zs(this.database,this._delegate.root)}set(e,t){(0,j.Dv)("Reference.set",1,2,arguments.length),(0,j.Wj)("Reference.set","onComplete",t,!0);const r=C_(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,j.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Rd("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ko("Reference.update",this._delegate._path),(0,j.Wj)("Reference.update","onComplete",t,!0);const r=mI(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,j.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,j.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function gI(n,e,t){if(ko("setWithPriority",n._path),Mo("setWithPriority",e,n._path,!1),Ip("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new j.BH;return _0(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,j.Dv)("Reference.remove",0,1,arguments.length),(0,j.Wj)("Reference.remove","onComplete",e,!0);const t=function fI(n){return ko("remove",n._path),C_(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,j.Dv)("Reference.transaction",1,3,arguments.length),(0,j.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,j.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,j.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function RM(n,e,t){var r;if(n=(0,j.m9)(n),ko("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new j.BH,u=I_(n,()=>{});return function dI(n,e,t,r,i,s){Xh(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:um(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=__(n,e,void 0);o.currentInputSnapshot=u;const h=o.update(u.val());if(void 0===h)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Td("transaction failed: Data returned ",h,o.path),o.status=0;const g=u_(n.transactionQueueTree_,e),y=vc(g)||[];let b;y.push(o),u0(g,y),"object"==typeof h&&null!==h&&(0,j.r3)(h,".priority")?(b=(0,j.DV)(h,".priority"),(0,j.hu)(Cp(b),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):b=(Cd(n.serverSyncTree_,e)||pn.EMPTY_NODE).getPriority().val();const T=Tp(n),k=Ur(h,b),P=l0(k,u,T);o.currentOutputSnapshotRaw=k,o.currentOutputSnapshotResolved=P,o.currentWriteId=m_(n);const B=ou(n.serverSyncTree_,e,P,o.currentWriteId,o.applyLocally);Es(n.eventQueue_,e,B),y_(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(h,g,y)=>{let b=null;h?s.reject(h):(b=new pa(y,new as(n._repo,n._path),vr),s.resolve(new RI(g,b)))},u,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new FM(s.committed,new Ec(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,j.Dv)("Reference.setPriority",1,2,arguments.length),(0,j.Wj)("Reference.setPriority","onComplete",t,!0);const r=function pI(n,e){n=(0,j.m9)(n),ko("setPriority",n._path),Ip("setPriority",e,!1);const t=new j.BH;return _0(n._repo,Tr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,j.Dv)("Reference.push",0,2,arguments.length),(0,j.Wj)("Reference.push","onComplete",t,!0);const r=function hI(n,e){n=(0,j.m9)(n),ko("push",n._path),Mo("push",e,n._path,!0);const t=Qh(n._repo),r=b_(t),i=fu(n,r),s=fu(n,r);let o;return o=null!=e?C_(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),i=r.then(o=>new zs(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new zs(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return ko("Reference.onDisconnect",this._delegate._path),new NI(new Ad(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Pd{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:kd,forceLongPolling:R0}}useEmulator(e,t,r={}){!function M_(n,e,t,r={}){(n=(0,j.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Va("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Va('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ua(Ua.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,j.Sg)(r.mockUserToken,n.app.options.projectId);s=new Ua(o)}!function MI(n,e,t,r){n.repoInfo_=new Ke(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,j.Dv)("database.ref",0,1,arguments.length),e instanceof zs){const t=E0(this._delegate,e.toString());return new zs(this,t)}{const t=Md(this._delegate,e);return new zs(this,t)}}refFromURL(e){(0,j.Dv)("database.refFromURL",1,1,arguments.length);const r=E0(this._delegate,e);return new zs(this,r)}goOffline(){return(0,j.Dv)("database.goOffline",0,0,arguments.length),function cL(n){(n=(0,j.m9)(n))._checkNotDeleted("goOffline"),uI(n._repo)}(this._delegate)}goOnline(){return(0,j.Dv)("database.goOnline",0,0,arguments.length),function uL(n){(n=(0,j.m9)(n))._checkNotDeleted("goOnline"),function yM(n){n.persistentConnection_&&n.persistentConnection_.resume(g0)}(n._repo)}(this._delegate)}}Pd.ServerValue={TIMESTAMP:function kM(){return kI}(),increment:n=>function Ni(n){return{".sv":{increment:n}}}(n)};var VM=Object.freeze({__proto__:null,initStandalone:function xl({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){Hs(t);const o=new qt.zt("auth-internal",new qt.H0("database-standalone"));return o.setComponent(new qt.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Pd(k0(n,o,void 0,e,s),n),namespace:i}}});const UM=Pd.ServerValue;!function Al(n){n.INTERNAL.registerComponent(new qt.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Pd(i,r)},"PUBLIC").setServiceProps({Reference:zs,Query:Is,Database:Pd,DataSnapshot:Ec,enableLogging:AM,INTERNAL:VM,ServerValue:UM}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.1")}(Ot.Z);var Qi=W(7579),ao=W(5363),LI=W(6063);class FI extends Qi.x{constructor(e=1/0,t=1/0,r=LI.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let u=0;for(let h=1;h<r.length&&r[h]<=o;h+=2)u=h;u&&r.splice(0,u+1)}}}function VI(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,ld.B)({connector:()=>new FI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const k_=(0,W(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ja(n,e){return(0,yr.e)((t,r)=>{let i=0;t.subscribe((0,ur.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var Ml=W(515);function Cc(n){return n<=0?()=>Ml.E:(0,yr.e)((e,t)=>{let r=0;e.subscribe((0,ur.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function R_(n){return(0,yr.e)((e,t)=>{let r=!1;e.subscribe((0,ur.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function P0(n=jM){return(0,yr.e)((e,t)=>{let r=!1;e.subscribe((0,ur.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function jM(){return new k_}function kl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ja((i,s)=>n(i,s,r)):M.y,Cc(1),t?R_(e):P0(()=>new k_))}var P_=W(576);function Op(n,e){return(0,P_.m)(e)?dr(()=>n,e):dr(()=>n)}var O0=W(9468);W(259);const V0=new Map,HI={activated:!1,tokenObservers:[]},GM={initialized:!1,enabled:!1};function ls(n){return V0.get(n)||Object.assign({},HI)}function N_(){return GM}class zI{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,he.Z)(function*(){t.stop();try{t.pending=new j.BH,yield function WI(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new j.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ds=new j.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function B0(n){if(!ls(n).activated)throw Ds.create("use-before-activation",{appName:n.name})}function F_(n,e){return V_.apply(this,arguments)}function V_(){return(V_=(0,he.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const b=yield i.getHeartbeatsHeader();b&&(r["X-Firebase-Client"]=b)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,u;try{o=yield fetch(n,s)}catch(b){throw Ds.create("fetch-network-error",{originalErrorMessage:b?.message})}if(200!==o.status)throw Ds.create("fetch-status-error",{httpStatus:o.status});try{u=yield o.json()}catch(b){throw Ds.create("fetch-parse-error",{originalErrorMessage:b?.message})}const h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ds.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});const g=1e3*Number(h[1]),y=Date.now();return{token:u.token,expireTimeMillis:y+g,issuedAtTimeMillis:y}})).apply(this,arguments)}function XM(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const U_="firebase-app-check-store";let j0=null;function H0(){return j0||(j0=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ds.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(U_,{keyPath:"compositeKey"})}}catch(t){e(Ds.create("storage-open",{originalErrorMessage:t?.message}))}}),j0)}function $0(){return($0=(0,he.Z)(function*(n,e){const r=(yield H0()).transaction(U_,"readwrite"),s=r.objectStore(U_).put({compositeKey:n,value:e});return new Promise((o,u)=>{s.onsuccess=h=>{o()},r.onerror=h=>{var g;u(Ds.create("storage-set",{originalErrorMessage:null===(g=h.target.error)||void 0===g?void 0:g.message}))}})})).apply(this,arguments)}const gu=new Ri.Yd("@firebase/app-check");function j_(n,e){return(0,j.hl)()?function yL(n,e){return function KI(n,e){return $0.apply(this,arguments)}(function Vp(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{gu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function G0(){return N_().enabled}function q0(){return H_.apply(this,arguments)}function H_(){return(H_=(0,he.Z)(function*(){const n=N_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const tk={error:"UNKNOWN_ERROR"};function nk(n){return j.US.encodeString(JSON.stringify(n),!1)}function $_(n){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,he.Z)(function*(n,e=!1){const t=n.app;B0(t);const r=ls(t);let s,i=r.token;if(i&&!Fd(i)&&(r.token=void 0,i=void 0),!i){const h=yield r.cachedTokenPromise;h&&(Fd(h)?i=h:yield j_(t,void 0))}if(!e&&i&&Fd(i))return{token:i.token};let u,o=!1;if(G0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=F_(XM(t,yield q0()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const h=yield r.exchangeTokenPromise;return yield j_(t,h),r.token=h,{token:h.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield ls(t).exchangeTokenPromise}catch(h){"appCheck/throttled"===h.code?gu.warn(h.message):gu.error(h),s=h}return i?s?u=Fd(i)?{token:i.token,internalError:s}:Q0(s):(u={token:i.token},r.token=i,yield j_(t,i)):u=Q0(s),o&&Y0(t,u),u})).apply(this,arguments)}function K0(n,e){const t=ls(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function JI(n){const{app:e}=n,t=ls(e);let r=t.tokenRefresher;r||(r=function z_(n){const{app:e}=n;return new zI((0,he.Z)(function*(){let r;if(r=ls(e).token?yield $_(n,!0):yield $_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ls(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Y0(n,e){const t=ls(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Fd(n){return n.expireTimeMillis-Date.now()>0}function Q0(n){return{token:nk(tk),error:n}}class rk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ls(this.app);for(const t of e)K0(this.app,t.next);return Promise.resolve()}}const oD="app-check-internal";!function aD(){(0,tr._registerComponent)(new qt.wA("app-check",n=>function Up(n,e){return new rk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(oD).initialize()})),(0,tr._registerComponent)(new qt.wA(oD,n=>function Bp(n){return{getToken:e=>$_(n,e),addTokenListener:e=>function Z0(n,e,t,r){const{app:i}=n,s=ls(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&Fd(s.token)){const u=s.token;Promise.resolve().then(()=>{t({token:u.token}),JI(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>JI(n))}(n,"INTERNAL",e),removeTokenListener:e=>K0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,tr.registerVersion)("@firebase/app-check","0.6.1")}();class Ic{constructor(){return(0,nt.vb)("app-check")}}typeof window<"u"&&window;var q_=W(9260);const rw=new f.OlP("angularfire2.auth.use-emulator"),iw=new f.OlP("angularfire2.auth.settings"),sw=new f.OlP("angularfire2.auth.tenant-id"),ow=new f.OlP("angularfire2.auth.langugage-code"),aw=new f.OlP("angularfire2.auth.use-device-language"),lw=new f.OlP("angularfire.auth.persistence"),cw=(n,e,t,r,i,s,o,u)=>(0,Dr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const h=e.runOutsideAngular(()=>n.auth());if(t&&h.useEmulator(...t),r&&(h.tenantId=r),h.languageCode=i,s&&h.useDeviceLanguage(),o)for(const[g,y]of Object.entries(o))h.settings[g]=y;return u&&h.setPersistence(u),h},[t,r,i,s,o,u]);let $p=(()=>{class n{constructor(t,r,i,s,o,u,h,g,y,b,T,k){const P=new Qi.x,B=Et(void 0).pipe((0,ao.Q)(o.outsideAngular),dr(()=>s.runOutsideAngular(()=>Promise.resolve().then(W.bind(W,9568)))),(0,xt.U)(()=>(0,Dr.on)(t,s,r)),(0,xt.U)(H=>cw(H,s,u,g,y,b,h,T)),VI({bufferSize:1,refCount:!1}));if(Vc(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Et(null);else{B.pipe(kl()).subscribe();const ne=B.pipe(dr(Ie=>Ie.getRedirectResult().then(Ce=>Ce,()=>null)),nt.iC,VI({bufferSize:1,refCount:!1})),ce=B.pipe(dr(Ie=>new js.y(Ce=>({unsubscribe:s.runOutsideAngular(()=>Ie.onAuthStateChanged(Ve=>Ce.next(Ve),Ve=>Ce.error(Ve),()=>Ce.complete()))})))),ve=B.pipe(dr(Ie=>new js.y(Ce=>({unsubscribe:s.runOutsideAngular(()=>Ie.onIdTokenChanged(Ve=>Ce.next(Ve),Ve=>Ce.error(Ve),()=>Ce.complete()))}))));this.authState=ne.pipe(Op(ce),(0,O0.R)(o.outsideAngular),(0,ao.Q)(o.insideAngular)),this.user=ne.pipe(Op(ve),(0,O0.R)(o.outsideAngular),(0,ao.Q)(o.insideAngular)),this.idToken=this.user.pipe(dr(Ie=>Ie?(0,Un.D)(Ie.getIdToken()):Et(null))),this.idTokenResult=this.user.pipe(dr(Ie=>Ie?(0,Un.D)(Ie.getIdTokenResult()):Et(null))),this.credential=(0,sc.T)(ne,P,this.authState.pipe(ja(Ie=>!Ie))).pipe((0,xt.U)(Ie=>Ie?.user?Ie:null),(0,O0.R)(o.outsideAngular),(0,ao.Q)(o.insideAngular))}return(0,Dr.pX)(this,B,s,{spy:{apply:(H,ne,ce)=>{(H.startsWith("signIn")||H.startsWith("createUser"))&&ce.then(ve=>P.next(ve))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Dr.Dh),f.LFG(Dr.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(nt.HU),f.LFG(rw,8),f.LFG(iw,8),f.LFG(sw,8),f.LFG(ow,8),f.LFG(aw,8),f.LFG(lw,8),f.LFG(Ic,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gD=(()=>{class n{constructor(){q_.Z.registerVersion("angularfire",nt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[$p]}),n})();function _D(n){return null==n}function uw(n){return"function"==typeof n.set}function yD(n,e){return uw(e)?e:n.ref(e)}function vD(n,e){if(function mD(n){return"string"==typeof n}(n))return e.stringCase();if(uw(n))return e.firebaseCase();if(function dk(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function zp(n,e,t="on",r=di.z){return new js.y(i=>{let s=null;return s=n[t](e,(o,u)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:u})}),"once"===t&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,xt.U)(i=>{const{snapshot:s,prevKey:o}=i;let u=null;return s.exists()&&(u=s.key),{type:e,payload:s,prevKey:o,key:u}}),(0,ld.B)())}function Z_(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function hw(n,e){const{payload:t,prevKey:r,key:i}=e,s=Z_(n,i),o=function wD(n,e){if(_D(e))return 0;{const t=Z_(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let u=null;e.payload.forEach(h=>{const g={payload:h,type:"value",prevKey:u,key:h.key};return u=h.key,n=[...n,g],!1})}return n;case"child_added":if(s>-1){const u=n[s-1];(u&&u.key||null)!==r&&(n=n.filter(h=>h.payload.key!==t.key)).splice(o,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(u=>u.payload.key!==t.key);case"child_changed":return n.map(u=>u.payload.key===i?e:u);case"child_moved":if(s>-1){const u=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,u),n}return n;default:return n}}function bD(n){return(_D(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function ED(n,e,t){return function dw(n,e,t){return zp(n,"value","once",t).pipe(dr(r=>{const i=[Et(r)];return e.forEach(s=>i.push(zp(n,s,"on",t))),(0,sc.T)(...i).pipe(A(hw,[]))}),L())}(n,e=bD(e),t)}function K_(n,e,t){const r=(e=bD(e)).map(i=>zp(n,i,"on",t));return(0,sc.T)(...r)}function fw(n,e){return function(r,i){return vD(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function fk(n){return function(t){return t?vD(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function pw(n,e){return function(){return zp(n,"value","on",e)}}const pk=new f.OlP("angularfire2.realtimeDatabaseURL"),mw=new f.OlP("angularfire2.database.use-emulator");let ID=(()=>{class n{constructor(t,r,i,s,o,u,h,g,y,b,T,k,P,B,H){this.schedulers=u;const ne=h,ce=(0,Dr.on)(t,o,r);g&&cw(ce,o,y,T,k,P,b,B),this.database=(0,Dr.cc)(`${ce.name}.database.${i}`,"AngularFireDatabase",ce.name,()=>{const ve=o.runOutsideAngular(()=>ce.database(i||void 0));return ne&&ve.useEmulator(...ne),ve},[ne])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>yD(this.database,t));let s=i;return r&&(s=r(i)),function PL(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:fw(r,"update"),set:fw(r,"set"),push:i=>r.push(i),remove:fk(r),snapshotChanges:i=>ED(n,i,t).pipe(nt.iC),stateChanges:i=>K_(n,i,t).pipe(nt.iC),auditTrail:i=>function hk(n,e,t){return function ef(n,e,t){return function CD(n,e){return zp(n,"value","on",e).pipe((0,xt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function be(...n){const e=(0,la.jO)(n);return(0,yr.e)((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),u=!1;for(let h=0;h<i;h++)(0,oc.Xf)(n[h]).subscribe((0,ur.x)(r,g=>{s[h]=g,!u&&!o[h]&&(o[h]=!0,(u=o.every(M.y))&&(o=null))},de.Z));t.subscribe((0,ur.x)(r,h=>{if(u){const g=[h,...s];r.next(e?e(...g):g)}}))})}(e),(0,xt.U)(([i,s])=>{const o=i.lastKeyToLoad,u=s.map(h=>h.key);return{actions:s,lastKeyToLoad:o,loadedKeys:u}}),function Je(n){return(0,yr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,ur.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,xt.U)(i=>i.actions))}(n,K_(n,e).pipe(A((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(nt.iC),valueChanges:(i,s)=>ED(n,i,t).pipe((0,xt.U)(u=>u.map(h=>s&&s.idField?Object.assign(Object.assign({},h.payload.val()),{[s.idField]:h.key}):h.payload.val())),nt.iC)}}(s,this)}object(t){return function gw(n,e){return{query:n,snapshotChanges:()=>pw(n,e.schedulers.outsideAngular)().pipe(nt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>pw(n,e.schedulers.outsideAngular)().pipe(nt.iC,(0,xt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>yD(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Dr.Dh),f.LFG(Dr.xv,8),f.LFG(pk,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(nt.HU),f.LFG(mw,8),f.LFG($p,8),f.LFG(rw,8),f.LFG(iw,8),f.LFG(sw,8),f.LFG(ow,8),f.LFG(aw,8),f.LFG(lw,8),f.LFG(Ic,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),DD=(()=>{class n{constructor(){q_.Z.registerVersion("angularfire",nt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[ID]}),n})();class ma extends Qi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:TD}=Array,{getPrototypeOf:SD,prototype:xD,keys:gk}=Object;function AD(n){if(1===n.length){const e=n[0];if(TD(e))return{args:e,keys:null};if(function mk(n){return n&&"object"==typeof n&&SD(n)===xD}(e)){const t=gk(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:_k}=Array;function yk(n){return(0,xt.U)(e=>function MD(n,e){return _k(e)?n(...e):n(e)}(n,e))}function yw(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var vk=W(9672);function kD(...n){const e=(0,la.yG)(n),t=(0,la.jO)(n),{args:r,keys:i}=AD(n);if(0===r.length)return(0,Un.D)([],e);const s=new js.y(function OL(n,e,t=M.y){return r=>{RD(e,()=>{const{length:i}=n,s=new Array(i);let o=i,u=i;for(let h=0;h<i;h++)RD(e,()=>{const g=(0,Un.D)(n[h],e);let y=!1;g.subscribe((0,ur.x)(r,b=>{s[h]=b,y||(y=!0,u--),u||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>yw(i,o):M.y));return t?s.pipe(yk(t)):s}function RD(n,e,t){n?(0,vk.f)(t,n,e):e()}var Wp=W(8189);function vw(...n){return function PD(){return(0,Wp.J)(1)}()((0,Un.D)(n,(0,la.yG)(n)))}function OD(n){return new js.y(e=>{(0,oc.Xf)(n()).subscribe(e)})}var wk=W(9635);function Gp(n,e){const t=(0,P_.m)(n)?n:()=>n,r=i=>i.error(t());return new js.y(e?i=>e.schedule(r,0,i):r)}var ND=W(727);function ww(){return(0,yr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ur.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class LD extends js.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,yr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ND.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ur.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ND.w0.EMPTY)}return e}refCount(){return ww()(this)}}function Y_(...n){const e=(0,la.yG)(n);return(0,yr.e)((t,r)=>{(e?vw(n,t,e):vw(n,t)).subscribe(r)})}var Ws=W(5577);function Ha(n,e){return(0,P_.m)(e)?(0,Ws.z)(n,e,1):(0,Ws.z)(n,1)}var cs=W(8505);function Dc(n){return(0,yr.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,ur.x)(t,void 0,void 0,o=>{s=(0,oc.Xf)(n(o,Dc(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Q_(n){return n<=0?()=>Ml.E:(0,yr.e)((e,t)=>{let r=[];e.subscribe((0,ur.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function bw(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ja((i,s)=>n(i,s,r)):M.y,Q_(1),t?R_(e):P0(()=>new k_))}function Ew(n){return(0,yr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const On="primary",qp=Symbol("RouteTitle");class Ek{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function tf(n){return new Ek(n)}function Ck(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],u=n[s];if(o.startsWith(":"))i[o.substring(1)]=u;else if(o!==u.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function lo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!VD(n[i],e[i]))return!1;return!0}function VD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function X_(n){return Array.prototype.concat.apply([],n)}function $a(n){return n.length>0?n[n.length-1]:null}function Li(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function _a(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Un.D)(Promise.resolve(n)):Et(n)}const J_=!1,Dk={exact:function BD(n,e,t){if(!Tc(n.segments,e.segments)||!nf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!BD(n.children[r],e.children[r],t))return!1;return!0},subset:Cw},UD={exact:function ey(n,e){return lo(n,e)},subset:function Tk(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>VD(n[t],e[t]))},ignored:()=>!0};function Zp(n,e,t){return Dk[t.paths](n.root,e.root,t.matrixParams)&&UD[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Cw(n,e,t){return Iw(n,e,e.segments,t)}function Iw(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Tc(i,t)||e.hasChildren()||!nf(i,t,r))}if(n.segments.length===t.length){if(!Tc(n.segments,t)||!nf(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Cw(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Tc(n.segments,i)&&nf(n.segments,i,r)&&n.children[On])&&Iw(n.children[On],e,s,r)}}function nf(n,e,t){return e.every((r,i)=>UD[t](n[i].parameters,r.parameters))}class mu{constructor(e=new Tn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tf(this.queryParams)),this._queryParamMap}toString(){return Sk.serialize(this)}}class Tn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Li(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ty(this)}}class Vd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=tf(this.parameters)),this._parameterMap}toString(){return Sw(this)}}function Tc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Kp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new Tw},providedIn:"root"}),n})();class Tw{parse(e){const t=new LL(e);return new mu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${rf(e.root,!0)}`,r=function xk(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Yp(t)}=${Yp(i)}`).join("&"):`${Yp(t)}=${Yp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function HD(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Sk=new Tw;function ty(n){return n.segments.map(e=>Sw(e)).join("/")}function rf(n,e){if(!n.hasChildren())return ty(n);if(e){const t=n.children[On]?rf(n.children[On],!1):"",r=[];return Li(n.children,(i,s)=>{s!==On&&r.push(`${s}:${rf(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Dw(n,e){let t=[];return Li(n.children,(r,i)=>{i===On&&(t=t.concat(e(r,i)))}),Li(n.children,(r,i)=>{i!==On&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===On?[rf(n.children[On],!1)]:[`${i}:${rf(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[On]?`${ty(n)}/${t[0]}`:`${ty(n)}/(${t.join("//")})`}}function ny(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yp(n){return ny(n).replace(/%3B/gi,";")}function ry(n){return ny(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qp(n){return decodeURIComponent(n)}function $D(n){return Qp(n.replace(/\+/g,"%20"))}function Sw(n){return`${ry(n.path)}${function zD(n){return Object.keys(n).map(e=>`;${ry(e)}=${ry(n[e])}`).join("")}(n.parameters)}`}const WD=/^[^\/()?;=#]+/;function iy(n){const e=n.match(WD);return e?e[0]:""}const Gs=/^[^=?&#]+/,Ak=/^[^&#]+/;class LL{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tn([],{}):new Tn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[On]=new Tn(e,t)),r}parseSegment(){const e=iy(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,J_);return this.capture(e),new Vd(Qp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=iy(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=iy(this.remaining);i&&(r=i,this.capture(r))}e[Qp(t)]=Qp(r)}parseQueryParam(e){const t=function sf(n){const e=n.match(Gs);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Mk(n){const e=n.match(Ak);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=$D(t),s=$D(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=iy(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,J_);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=On);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[On]:new Tn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,J_)}}function GD(n){return n.segments.length>0?new Tn([],{[On]:n}):n}function Xp(n){const e={};for(const r of Object.keys(n.children)){const s=Xp(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function qD(n){if(1===n.numberOfChildren&&n.children[On]){const e=n.children[On];return new Tn(n.segments.concat(e.segments),e.children)}return n}(new Tn(n.segments,e))}function za(n){return n instanceof mu}function Rk(n,e,t,r,i){if(0===t.length)return _u(e.root,e.root,e.root,r,i);const s=function tg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Mw(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const u={};return Li(s.outlets,(h,g)=>{u[g]="string"==typeof h?h.split("/"):h}),[...i,{outlets:u}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((u,h)=>{0==h&&"."===u||(0==h&&""===u?t=!0:".."===u?e++:""!=u&&i.push(u))}),i):[...i,s]},[]);return new Mw(t,e,r)}(t);return s.toRoot()?_u(e.root,e.root,new Tn([],{}),r,i):function o(h){const g=function YD(n,e,t,r){if(n.isAbsolute)return new yu(e.root,!0,0);if(-1===r)return new yu(t,t===e.root,0);return function QD(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new yu(r,!1,i-s)}(t,r+(Jp(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,h),y=g.processChildren?ng(g.segmentGroup,g.index,s.commands):vu(g.segmentGroup,g.index,s.commands);return _u(e.root,g.segmentGroup,y,r,i)}(n.snapshot?._lastPathIndex)}function Jp(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function eg(n){return"object"==typeof n&&null!=n&&n.outlets}function _u(n,e,t,r,i){let o,s={};r&&Li(r,(h,g)=>{s[g]=Array.isArray(h)?h.map(y=>`${y}`):`${h}`}),o=n===e?t:Aw(n,e,t);const u=GD(Xp(o));return new mu(u,s,i)}function Aw(n,e,t){const r={};return Li(n.children,(i,s)=>{r[s]=i===e?t:Aw(i,e,t)}),new Tn(n.segments,r)}class Mw{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Jp(r[0]))throw new f.vHH(4003,!1);const i=r.find(eg);if(i&&i!==$a(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function vu(n,e,t){if(n||(n=new Tn([],{})),0===n.segments.length&&n.hasChildren())return ng(n,e,t);const r=function JD(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],u=t[r];if(eg(u))break;const h=`${u}`,g=r<t.length-1?t[r+1]:null;if(i>0&&void 0===h)break;if(h&&g&&"object"==typeof g&&void 0===g.outlets){if(!Pk(h,g,o))return s;r+=2}else{if(!Pk(h,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Tn(n.segments.slice(0,r.pathIndex),{});return s.children[On]=new Tn(n.segments.slice(r.pathIndex),n.children),ng(s,0,i)}return r.match&&0===i.length?new Tn(n.segments,{}):r.match&&!n.hasChildren()?rg(n,e,t):r.match?ng(n,0,i):rg(n,e,t)}function ng(n,e,t){if(0===t.length)return new Tn(n.segments,{});{const r=function XD(n){return eg(n[0])?n[0].outlets:{[On]:n}}(t),i={};return Li(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=vu(n.children[o],e,s))}),Li(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new Tn(n.segments,i)}}function rg(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(eg(s)){const h=VL(s.outlets);return new Tn(r,h)}if(0===i&&Jp(t[0])){r.push(new Vd(n.segments[e].path,eT(t[0]))),i++;continue}const o=eg(s)?s.outlets[On]:`${s}`,u=i<t.length-1?t[i+1]:null;o&&u&&Jp(u)?(r.push(new Vd(o,eT(u))),i+=2):(r.push(new Vd(o,{})),i++)}return new Tn(r,{})}function VL(n){const e={};return Li(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=rg(new Tn([],{}),0,t))}),e}function eT(n){const e={};return Li(n,(t,r)=>e[r]=`${t}`),e}function Pk(n,e,t){return n==t.path&&lo(e,t.parameters)}const ig="imperative";class Rl{constructor(e,t){this.id=e,this.url=t}}class kw extends Rl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wu extends Rl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sg extends Rl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tT extends Rl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Rw extends Rl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nT extends Rl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ok extends Rl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nk extends Rl{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rT extends Rl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lk extends Rl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iT{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sT{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oT{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aT{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fk{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vk{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uk{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let UL=(()=>{class n{createUrlTree(t,r,i,s,o,u){return Rk(t||r.root,i,s,o,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),BL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(e){return UL.\u0275fac(e)},providedIn:"root"}),n})();class Bk{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=cT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=cT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=uT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return uT(e,this._root).map(t=>t.value)}}function cT(n,e){if(n===e.value)return e;for(const t of e.children){const r=cT(n,t);if(r)return r}return null}function uT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=uT(n,t);if(r.length)return r.unshift(e),r}return[]}class bu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Sc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class jk extends Bk{constructor(e,t){super(e),this.snapshot=t,Lw(this,e)}toString(){return this.snapshot.toString()}}function Pw(n,e){const t=function sy(n,e){const o=new af([],{},{},"",{},On,e,null,n.root,-1,{});return new Nw("",new bu(o,[]))}(n,e),r=new ma([new Vd("",{})]),i=new ma({}),s=new ma({}),o=new ma({}),u=new ma(""),h=new Ud(r,i,o,u,s,On,e,t.root);return h.snapshot=t.root,new jk(new bu(h,[]),t)}class Ud{constructor(e,t,r,i,s,o,u,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=u,this.title=this.data?.pipe((0,xt.U)(g=>g[qp]))??Et(void 0),this._futureSnapshot=h}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xt.U)(e=>tf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xt.U)(e=>tf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ow(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function jL(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class af{get title(){return this.data?.[qp]}constructor(e,t,r,i,s,o,u,h,g,y,b){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=u,this.routeConfig=h,this._urlSegment=g,this._lastPathIndex=y,this._resolve=b}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=tf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Nw extends Bk{constructor(e,t){super(t),this.url=e,Lw(this,t)}toString(){return Fw(this._root)}}function Lw(n,e){e.value._routerState=n,e.children.forEach(t=>Lw(n,t))}function Fw(n){const e=n.children.length>0?` { ${n.children.map(Fw).join(", ")} } `:"";return`${n.value}${e}`}function dT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,lo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),lo(e.params,t.params)||n.params.next(t.params),function Ik(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!lo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),lo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function hT(n,e){const t=lo(n.params,e.params)&&function jD(n,e){return Tc(n,e)&&n.every((t,r)=>lo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||hT(n.parent,e.parent))}function og(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function oy(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return og(n,r,i);return og(n,r)})}(n,e,t);return new bu(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(u=>og(n,u)),o}}const r=function $k(n){return new Ud(new ma(n.url),new ma(n.params),new ma(n.queryParams),new ma(n.fragment),new ma(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>og(n,s));return new bu(r,i)}}const fT="ngNavigationCancelingError";function zk(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=za(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Wk(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Wk(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[fT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function pT(n){return gT(n)&&za(n.url)}function gT(n){return n&&n[fT]}class Gk{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ay,this.attachRef=null}}let ay=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Gk,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ly=!1;let ag=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=On,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(ay),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,ly);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,ly);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,ly);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,ly);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,h=new mT(t,u,i.injector);if(r&&function HL(n){return!!n.resolveComponentFactory}(r)){const g=r.resolveComponentFactory(o);this.activated=i.createComponent(g,i.length,h)}else this.activated=i.createComponent(o,{index:i.length,injector:h,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),n})();class mT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ud?this.route:e===ay?this.childContexts:this.parent.get(e,t)}}let No=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[ag],encapsulation:2}),n})();function _T(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lg(n){const e=n.children&&n.children.map(lg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==On&&(t.component=No),t}function Lo(n){return n.outlet||On}function Bw(n,e){const t=n.filter(r=>Lo(r)===e);return t.push(...n.filter(r=>Lo(r)!==e)),t}function cg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class wT{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),dT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Sc(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Li(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Sc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Sc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Sc(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Vk(s.value.snapshot))}),e.children.length&&this.forwardEvent(new aT(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(dT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(u.contexts),o.attachRef=u.componentRef,o.route=u.route.value,o.outlet&&o.outlet.attach(u.componentRef,u.route.value),dT(u.route.value),this.activateChildRoutes(e,null,o.children)}else{const u=cg(i.snapshot),h=u?.get(f._Vd)??null;o.attachRef=null,o.route=i,o.resolver=h,o.injector=u,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class bT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ug{constructor(e,t){this.component=e,this.route=t}}function Kk(n,e,t){const r=n._root;return lf(r,e?e._root:null,t,[r.value])}function Fo(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function lf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Sc(e);return n.children.forEach(o=>{(function Hw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,u=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const h=function xc(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Tc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Tc(n.url,e.url)||!lo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hT(n,e)||!lo(n.queryParams,e.queryParams);default:return!hT(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);h?i.canActivateChecks.push(new bT(r)):(s.data=o.data,s._resolvedData=o._resolvedData),lf(n,e,s.component?u?u.children:null:t,r,i),h&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new ug(u.outlet.component,o))}else o&&dg(e,u,i),i.canActivateChecks.push(new bT(r)),lf(n,null,s.component?u?u.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Li(s,(o,u)=>dg(o,t.getContext(u),i)),i}function dg(n,e,t){const r=Sc(n),i=n.value;Li(r,(s,o)=>{dg(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new ug(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function cy(n){return"function"==typeof n}function uy(n){return n instanceof k_||"EmptyError"===n?.name}const $w=Symbol("INITIAL_VALUE");function Eu(){return dr(n=>kD(n.map(e=>e.pipe(Cc(1),Y_($w)))).pipe((0,xt.U)(e=>{for(const t of e)if(!0!==t){if(t===$w)return $w;if(!1===t||t instanceof mu)return t}return!0}),ja(e=>e!==$w),Cc(1)))}function AT(n){return(0,wk.z)((0,cs.b)(e=>{if(za(e))throw zk(0,e)}),(0,xt.U)(e=>!0===e))}const MT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function r1(n,e,t,r,i){const s=fy(n,e,t);return s.matched?function WL(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Et(i.map(o=>{const u=Fo(o,n);return _a(function zL(n){return n&&cy(n.canMatch)}(u)?u.canMatch(e,t):n.runInContext(()=>u(e,t)))})).pipe(Eu(),AT()):Et(!0)}(r=_T(e,r),e,t).pipe((0,xt.U)(o=>!0===o?s:{...MT})):Et(s)}function fy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...MT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ck)(t,n,e);if(!i)return{...MT};const s={};Li(i.posParams,(u,h)=>{s[h]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function py(n,e,t,r){if(t.length>0&&function GL(n,e,t){return t.some(r=>zw(n,e,r)&&Lo(r)!==On)}(n,t,r)){const s=new Tn(e,function s1(n,e,t,r){const i={};i[On]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Lo(s)!==On){const o=new Tn([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[Lo(s)]=o}return i}(n,e,r,new Tn(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function qL(n,e,t){return t.some(r=>zw(n,e,r))}(n,t,r)){const s=new Tn(n.segments,function i1(n,e,t,r,i){const s={};for(const o of r)if(zw(n,t,o)&&!i[Lo(o)]){const u=new Tn([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,s[Lo(o)]=u}return{...i,...s}}(n,e,t,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const i=new Tn(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function zw(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function o1(n,e,t,r){return!!(Lo(n)===r||r!==On&&zw(e,t,n))&&("**"===n.path||fy(e,n,t).matched)}function a1(n,e,t){return 0===e.length&&!n.children[t]}const gy=!1;class Bd{constructor(e){this.segmentGroup=e||null}}class kT{constructor(e){this.urlTree=e}}function hg(n){return Gp(new Bd(n))}function Ww(n){return Gp(new kT(n))}class qw{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=py(this.urlTree.root,[],[],this.config).segmentGroup,t=new Tn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,On).pipe((0,xt.U)(s=>this.createUrlTree(Xp(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Dc(s=>{if(s instanceof kT)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Bd?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,On).pipe((0,xt.U)(i=>this.createUrlTree(Xp(i),e.queryParams,e.fragment))).pipe(Dc(i=>{throw i instanceof Bd?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,gy)}createUrlTree(e,t,r){const i=GD(e);return new mu(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,xt.U)(s=>new Tn([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Un.D)(i).pipe(Ha(s=>{const o=r.children[s],u=Bw(t,s);return this.expandSegmentGroup(e,u,o,s).pipe((0,xt.U)(h=>({segment:h,outlet:s})))}),A((s,o)=>(s[o.outlet]=o.segment,s),{}),bw())}expandSegment(e,t,r,i,s,o){return(0,Un.D)(r).pipe(Ha(u=>this.expandSegmentAgainstRoute(e,t,r,u,i,s,o).pipe(Dc(g=>{if(g instanceof Bd)return Et(null);throw g}))),kl(u=>!!u),Dc((u,h)=>{if(uy(u))return a1(t,i,s)?Et(new Tn([],{})):hg(t);throw u}))}expandSegmentAgainstRoute(e,t,r,i,s,o,u){return o1(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):u&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):hg(t):hg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ww(s):this.lineralizeSegments(r,s).pipe((0,Ws.z)(o=>{const u=new Tn(o,{});return this.expandSegment(e,u,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:u,consumedSegments:h,remainingSegments:g,positionalParamSegments:y}=fy(t,i,s);if(!u)return hg(t);const b=this.applyRedirectCommands(h,i.redirectTo,y);return i.redirectTo.startsWith("/")?Ww(b):this.lineralizeSegments(i,b).pipe((0,Ws.z)(T=>this.expandSegment(e,t,r,T.concat(g),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=_T(r,e),r.loadChildren?(r._loadedRoutes?Et({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,xt.U)(u=>(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,new Tn(i,{})))):Et(new Tn(i,{}))):r1(t,r,i,e).pipe(dr(({matched:o,consumedSegments:u,remainingSegments:h})=>o?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Ws.z)(y=>{const b=y.injector??e,T=y.routes,{segmentGroup:k,slicedSegments:P}=py(t,u,h,T),B=new Tn(k.segments,k.children);if(0===P.length&&B.hasChildren())return this.expandChildren(b,T,B).pipe((0,xt.U)(ve=>new Tn(u,ve)));if(0===T.length&&0===P.length)return Et(new Tn(u,{}));const H=Lo(r)===s;return this.expandSegment(b,B,T,P,H?On:s,!0).pipe((0,xt.U)(ce=>new Tn(u.concat(ce.segments),ce.children)))})):hg(t)))}getChildConfig(e,t,r){return t.children?Et({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Et({routes:t._loadedRoutes,injector:t._loadedInjector}):function n1(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Et(!0):Et(i.map(o=>{const u=Fo(o,n);return _a(function Qk(n){return n&&cy(n.canLoad)}(u)?u.canLoad(e,t):n.runInContext(()=>u(e,t)))})).pipe(Eu(),AT())}(e,t,r).pipe((0,Ws.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,cs.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function RT(n){return Gp(Wk(gy,3))}())):Et({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Et(r);if(i.numberOfChildren>1||!i.children[On])return Gp(new f.vHH(4e3,gy));i=i.children[On]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new mu(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Li(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const u=i.substring(1);r[s]=t[u]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Li(t.children,(u,h)=>{o[h]=this.createSegmentGroup(e,u,r,i)}),new Tn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,gy);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Zw{}class KL{constructor(e,t,r,i,s,o,u){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=u}recognize(){const e=py(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,On).pipe((0,xt.U)(t=>{if(null===t)return null;const r=new af([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},On,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new bu(r,t),s=new Nw(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=Ow(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Un.D)(Object.keys(r.children)).pipe(Ha(i=>{const s=r.children[i],o=Bw(t,i);return this.processSegmentGroup(e,o,s,i)}),A((i,s)=>i&&s?(i.push(...s),i):null),function FD(n,e=!1){return(0,yr.e)((t,r)=>{let i=0;t.subscribe((0,ur.x)(r,s=>{const o=n(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}(i=>null!==i),R_(null),bw(),(0,xt.U)(i=>{if(null===i)return null;const s=OT(i);return function YL(n){n.sort((e,t)=>e.value.outlet===On?-1:t.value.outlet===On?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,Un.D)(t).pipe(Ha(o=>this.processSegmentAgainstRoute(o._injector??e,o,r,i,s)),kl(o=>!!o),Dc(o=>{if(uy(o))return a1(r,i,s)?Et([]):Et(null);throw o}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!o1(t,r,i,s))return Et(null);let o;if("**"===t.path){const u=i.length>0?$a(i).parameters:{},h=LT(r)+i.length;o=Et({snapshot:new af(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kw(t),Lo(t),t.component??t._loadedComponent??null,t,NT(r),h,Yw(t)),consumedSegments:[],remainingSegments:[]})}else o=r1(r,t,i,e).pipe((0,xt.U)(({matched:u,consumedSegments:h,remainingSegments:g,parameters:y})=>{if(!u)return null;const b=LT(r)+h.length;return{snapshot:new af(h,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kw(t),Lo(t),t.component??t._loadedComponent??null,t,NT(r),b,Yw(t)),consumedSegments:h,remainingSegments:g}}));return o.pipe(dr(u=>{if(null===u)return Et(null);const{snapshot:h,consumedSegments:g,remainingSegments:y}=u;e=t._injector??e;const b=t._loadedInjector??e,T=function QL(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:k,slicedSegments:P}=py(r,g,y,T.filter(H=>void 0===H.redirectTo));if(0===P.length&&k.hasChildren())return this.processChildren(b,T,k).pipe((0,xt.U)(H=>null===H?null:[new bu(h,H)]));if(0===T.length&&0===P.length)return Et([new bu(h,[])]);const B=Lo(t)===s;return this.processSegment(b,T,k,P,B?On:s).pipe((0,xt.U)(H=>null===H?null:[new bu(h,H)]))}))}}function PT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function OT(n){const e=[],t=new Set;for(const r of n){if(!PT(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=OT(r.children);e.push(new bu(r.value,i))}return e.filter(r=>!t.has(r))}function NT(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function LT(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Kw(n){return n.data||{}}function Yw(n){return n.resolve||{}}function yy(n){return"string"==typeof n.title||null===n.title}function Xw(n){return dr(e=>{const t=n(e);return t?(0,Un.D)(t).pipe((0,xt.U)(()=>e)):Et(e)})}const fg=new f.OlP("ROUTES");let Jw=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Et(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=_a(t.loadComponent()).pipe((0,xt.U)(UT),(0,cs.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ew(()=>{this.componentLoaders.delete(t)})),i=new LD(r,()=>new Qi.x).pipe(ww());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Et({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,xt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(r);let h,g,y=!1;Array.isArray(u)?g=u:(h=u.create(t).injector,g=X_(h.get(fg,[],f.XFs.Self|f.XFs.Optional)));return{routes:g.map(lg),injector:h}}),Ew(()=>{this.childrenLoaders.delete(r)})),o=new LD(s,()=>new Qi.x).pipe(ww());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(t){return _a(t()).pipe((0,xt.U)(UT),(0,Ws.z)(i=>i instanceof f.YKP||Array.isArray(i)?Et(i):(0,Un.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function UT(n){return function g1(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let tb=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Qi.x,this.configLoader=(0,f.f3M)(Jw),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(Kp),this.rootContexts=(0,f.f3M)(ay),this.navigationId=0,this.afterPreactivation=()=>Et(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new sT(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new iT(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new ma({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ig,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ja(r=>0!==r.id),(0,xt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),dr(r=>{let i=!1,s=!1;return Et(r).pipe((0,cs.b)(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),dr(o=>{const u=t.browserUrlTree.toString(),h=!t.navigated||o.extractedUrl.toString()!==u||u!==t.currentUrlTree.toString();if(!h&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new tT(o.id,t.serializeUrl(r.rawUrl),y,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),Ml.E}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return m1(o.source)&&(t.browserUrlTree=o.extractedUrl),Et(o).pipe(dr(y=>{const b=this.transitions?.getValue();return this.events.next(new kw(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),b!==this.transitions?.getValue()?Ml.E:Promise.resolve(y)}),function l1(n,e,t,r){return dr(i=>function Gw(n,e,t,r,i){return new qw(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,xt.U)(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,cs.b)(y=>{this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects},r.urlAfterRedirects=y.urlAfterRedirects}),function d1(n,e,t,r,i){return(0,Ws.z)(s=>function ZL(n,e,t,r,i,s,o="emptyOnly"){return new KL(n,e,t,r,i,o,s).recognize().pipe(dr(u=>null===u?function _y(n){return new js.y(e=>e.error(n))}(new Zw):Et(u)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe((0,xt.U)(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,cs.b)(y=>{if(r.targetSnapshot=y.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!y.extras.skipLocationChange){const T=t.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl);t.setBrowserUrl(T,y)}t.browserUrlTree=y.urlAfterRedirects}const b=new nT(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(b)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:y,extractedUrl:b,source:T,restoredState:k,extras:P}=o,B=new kw(y,this.urlSerializer.serialize(b),T,k);this.events.next(B);const H=Pw(b,this.rootComponentType).snapshot;return Et(r={...o,targetSnapshot:H,urlAfterRedirects:b,extras:{...P,skipLocationChange:!1,replaceUrl:!1}})}{const y="";return this.events.next(new tT(o.id,t.serializeUrl(r.extractedUrl),y,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),Ml.E}}),(0,cs.b)(o=>{const u=new Ok(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(u)}),(0,xt.U)(o=>r={...o,guards:Kk(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function CT(n,e){return(0,Ws.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Et({...t,guardsResult:!0}):function IT(n,e,t,r){return(0,Un.D)(n).pipe((0,Ws.z)(i=>function xT(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Et(s.map(u=>{const h=cg(e)??i,g=Fo(u,h);return _a(function ET(n){return n&&cy(n.canDeactivate)}(g)?g.canDeactivate(n,e,t,r):h.runInContext(()=>g(n,e,t,r))).pipe(kl())})).pipe(Eu()):Et(!0)}(i.component,i.route,t,e,r)),kl(i=>!0!==i,!0))}(o,r,i,n).pipe((0,Ws.z)(u=>u&&function Yk(n){return"boolean"==typeof n}(u)?function DT(n,e,t,r){return(0,Un.D)(e).pipe(Ha(i=>vw(function ST(n,e){return null!==n&&e&&e(new oT(n)),Et(!0)}(i.route.parent,r),function TT(n,e){return null!==n&&e&&e(new Fk(n)),Et(!0)}(i.route,r),function hy(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function jw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>OD(()=>Et(o.guards.map(h=>{const g=cg(o.node)??t,y=Fo(h,g);return _a(function Jk(n){return n&&cy(n.canActivateChild)}(y)?y.canActivateChild(r,n):g.runInContext(()=>y(r,n))).pipe(kl())})).pipe(Eu())));return Et(s).pipe(Eu())}(n,i.path,t),function dy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Et(!0);const i=r.map(s=>OD(()=>{const o=cg(e)??t,u=Fo(s,o);return _a(function Xk(n){return n&&cy(n.canActivate)}(u)?u.canActivate(e,n):o.runInContext(()=>u(e,n))).pipe(kl())}));return Et(i).pipe(Eu())}(n,i.route,t))),kl(i=>!0!==i,!0))}(r,s,n,e):Et(u)),(0,xt.U)(u=>({...t,guardsResult:u})))})}(this.environmentInjector,o=>this.events.next(o)),(0,cs.b)(o=>{if(r.guardsResult=o.guardsResult,za(o.guardsResult))throw zk(0,o.guardsResult);const u=new Nk(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(u)}),ja(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),Xw(o=>{if(o.guards.canActivateChecks.length)return Et(o).pipe((0,cs.b)(u=>{const h=new rT(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),dr(u=>{let h=!1;return Et(u).pipe(function h1(n,e){return(0,Ws.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Et(t);let s=0;return(0,Un.D)(i).pipe(Ha(o=>function FT(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!yy(i)&&(s[qp]=i.title),function Qw(n,e,t,r){const i=function XL(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Et({});const s={};return(0,Un.D)(i).pipe((0,Ws.z)(o=>function VT(n,e,t,r){const i=cg(e)??r,s=Fo(n,i);return _a(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(kl(),(0,cs.b)(u=>{s[o]=u}))),Q_(1),function bk(n){return(0,xt.U)(()=>n)}(s),Dc(o=>uy(o)?Ml.E:Gp(o)))}(s,n,e,r).pipe((0,xt.U)(o=>(n._resolvedData=o,n.data=Ow(n,t).resolve,i&&yy(i)&&(n.data[qp]=i.title),null)))}(o.route,r,n,e)),(0,cs.b)(()=>s++),Q_(1),(0,Ws.z)(o=>s===i.length?Et(t):Ml.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,cs.b)({next:()=>h=!0,complete:()=>{h||(t.restoreHistory(u),this.cancelNavigationTransition(u,"",2))}}))}),(0,cs.b)(u=>{const h=new Lk(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),Xw(o=>{const u=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe((0,cs.b)(y=>{h.component=y}),(0,xt.U)(()=>{})));for(const y of h.children)g.push(...u(y));return g};return kD(u(o.targetSnapshot.root)).pipe(R_(),Cc(1))}),Xw(()=>this.afterPreactivation()),(0,xt.U)(o=>{const u=function Hk(n,e,t){const r=og(n,e._root,t?t._root:void 0);return new jk(r,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:u}}),(0,cs.b)(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>(0,xt.U)(r=>(new wT(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),(0,cs.b)({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new wu(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Ew(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Dc(o=>{if(s=!0,gT(o)){pT(o)||(t.navigated=!0,t.restoreHistory(r,!0));const u=new sg(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(u),pT(o)){const h=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),g={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||m1(r.source)};t.scheduleNavigation(h,ig,null,g,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const u=new Rw(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(u);try{r.resolve(t.errorHandler(o))}catch(h){r.reject(h)}}return Ml.E}))}))}cancelNavigationTransition(t,r,i){const s=new sg(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function m1(n){return n!==ig}let _1=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===On);return r}getResolvedTitleForRoute(t){return t.data[qp]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(JL)},providedIn:"root"}),n})(),JL=(()=>{class n extends _1{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(La))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),y1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(tF)},providedIn:"root"}),n})();class eF{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let tF=(()=>{class n extends eF{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nb=new f.OlP("",{providedIn:"root",factory:()=>({})});let rF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(iF)},providedIn:"root"}),n})(),iF=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function l(n){throw n}function c(n,e,t){return e.parse("/")}const d={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},p={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let m=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this.options=(0,f.f3M)(nb,{optional:!0})||{},this.errorHandler=this.options.errorHandler||l,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||c,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(rF),this.routeReuseStrategy=(0,f.f3M)(y1),this.urlCreationStrategy=(0,f.f3M)(BL),this.titleStrategy=(0,f.f3M)(_1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=X_((0,f.f3M)(fg,{optional:!0})??[]),this.navigationTransitions=(0,f.f3M)(tb),this.urlSerializer=(0,f.f3M)(Kp),this.location=(0,f.f3M)(Ze),this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new mu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Pw(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ig,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const h={...i};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(s.state=h)}const u=this.parseUrl(t);this.scheduleNavigation(u,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(lg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:u,preserveFragment:h}=r,g=h?this.currentUrlTree.fragment:o;let y=null;switch(u){case"merge":y={...this.currentUrlTree.queryParams,...s};break;case"preserve":y=this.currentUrlTree.queryParams;break;default:y=s||null}return null!==y&&(y=this.removeEmptyProps(y)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,y,g??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=za(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,ig,null,r)}navigate(t,r={skipLocationChange:!1}){return function w(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...d}:!1===r?{...p}:r,za(t))return Zp(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Zp(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let u,h,g,y;return o?(u=o.resolve,h=o.reject,g=o.promise):g=new Promise((b,T)=>{u=b,h=T}),y="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:y,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:u,reject:h,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(b=>Promise.reject(b))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C=(()=>{class n{constructor(t,r,i,s,o,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=u,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Qi.x;const h=o.nativeElement.tagName;this.isAnchorElement="A"===h||"AREA"===h,this.isAnchorElement?this.subscription=t.events.subscribe(g=>{g instanceof wu&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,f.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(m),f.Y36(Ud),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(bt))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&f.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&f.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})(),x=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new f.vpe,this.routerEventsSubscription=t.events.subscribe(u=>{u instanceof wu&&this.update()})}ngAfterContentInit(){Et(this.links.changes,Et(null)).pipe((0,Wp.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,Un.D)(t).pipe((0,Wp.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function R(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(m),f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(f.sBO),f.Y36(C,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&f.Suo(i,C,5),2&t){let s;f.iGM(s=f.CRH())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[f.TTD]}),n})();class F{}let _e=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ja(t=>t instanceof wu),Ha(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,f.MMx)(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,u=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(u,s.children??s._loadedRoutes))}return(0,Un.D)(i).pipe((0,Wp.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Et(null);const s=i.pipe((0,Ws.z)(o=>null===o?Et(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){const o=this.loader.loadComponent(r);return(0,Un.D)([s,o]).pipe((0,Wp.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(m),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(F),f.LFG(Jw))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fe=new f.OlP("");let lt=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof kw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Uk&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Uk(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Qe(n,e){return{\u0275kind:n,\u0275providers:e}}function sF(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(m),i=n.get(oF);1===n.get(v1)&&r.initialNavigation(),n.get(aF,null,f.XFs.Optional)?.setUpPreloading(),n.get(Fe,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const oF=new f.OlP("",{factory:()=>new Qi.x}),v1=new f.OlP("",{providedIn:"root",factory:()=>1});const aF=new f.OlP("");function mz(n){return Qe(0,[{provide:aF,useExisting:_e},{provide:F,useExisting:n}])}const lF=new f.OlP("ROUTER_FORROOT_GUARD"),_z=[Ze,{provide:Kp,useClass:Tw},m,ay,{provide:Ud,useFactory:function Xt(n){return n.routerState.root},deps:[m]},Jw,[]];function yz(){return new f.PXZ("Router",m)}let cF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[_z,[],{provide:fg,multi:!0,useValue:t},{provide:lF,useFactory:Ez,deps:[[m,new f.FiY,new f.tp0]]},{provide:nb,useValue:r||{}},r?.useHash?{provide:bt,useClass:je}:{provide:bt,useClass:Be},{provide:Fe,useFactory:()=>{const n=(0,f.f3M)(wo),e=(0,f.f3M)(f.R0b),t=(0,f.f3M)(nb),r=(0,f.f3M)(tb),i=(0,f.f3M)(Kp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new lt(i,r,n,e,t)}},r?.preloadingStrategy?mz(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:yz},r?.initialNavigation?Cz(r):[],[{provide:uF,useFactory:sF},{provide:f.tb,multi:!0,useExisting:uF}]]}}static forChild(t){return{ngModule:n,providers:[{provide:fg,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(lF,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[No]}),n})();function Ez(n){return"guarded"}function Cz(n){return["disabled"===n.initialNavigation?Qe(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(m);return()=>{e.setUpLocationChangeListener()}}},{provide:v1,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Qe(2,[{provide:v1,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(Re,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const s=e.get(m),o=e.get(oF);(function r(i){e.get(m).events.pipe(ja(o=>o instanceof wu||o instanceof sg||o instanceof Rw),(0,xt.U)(o=>o instanceof wu||o instanceof sg&&(0===o.code||1===o.code)&&null),ja(o=>null!==o),Cc(1)).subscribe(()=>{i()})})(()=>{i(!0)}),e.get(tb).afterPreactivation=()=>(i(!0),o.closed?Et(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const uF=new f.OlP("");let dF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),pg=(()=>{class n extends dF{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Cu=new f.OlP("NgValueAccessor"),Sz={provide:Cu,useExisting:(0,f.Gpc)(()=>ib),multi:!0},Az=new f.OlP("CompositionEventMode");let ib=(()=>{class n extends dF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xz(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Az,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[f._Bn([Sz]),f.qOj]}),n})();function cf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function fF(n){return null!=n&&"number"==typeof n.length}const co=new f.OlP("NgValidators"),uf=new f.OlP("NgAsyncValidators"),kz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Iu{static min(e){return function pF(n){return e=>{if(cf(e.value)||cf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function gF(n){return e=>{if(cf(e.value)||cf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return mF(e)}static requiredTrue(e){return function _F(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function yF(n){return cf(n.value)||kz.test(n.value)?null:{email:!0}}(e)}static minLength(e){return vF(e)}static maxLength(e){return wF(e)}static pattern(e){return bF(e)}static nullValidator(e){return null}static compose(e){return SF(e)}static composeAsync(e){return xF(e)}}function mF(n){return cf(n.value)?{required:!0}:null}function vF(n){return e=>cf(e.value)||!fF(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function wF(n){return e=>fF(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function bF(n){if(!n)return BT;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(cf(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function BT(n){return null}function EF(n){return null!=n}function CF(n){return(0,f.QGY)(n)?(0,Un.D)(n):n}function IF(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function DF(n,e){return e.map(t=>t(n))}function TF(n){return n.map(e=>function Rz(n){return!n.validate}(e)?e:t=>e.validate(t))}function SF(n){if(!n)return null;const e=n.filter(EF);return 0==e.length?null:function(t){return IF(DF(t,e))}}function w1(n){return null!=n?SF(TF(n)):null}function xF(n){if(!n)return null;const e=n.filter(EF);return 0==e.length?null:function(t){return function Dz(...n){const e=(0,la.jO)(n),{args:t,keys:r}=AD(n),i=new js.y(s=>{const{length:o}=t;if(!o)return void s.complete();const u=new Array(o);let h=o,g=o;for(let y=0;y<o;y++){let b=!1;(0,oc.Xf)(t[y]).subscribe((0,ur.x)(s,T=>{b||(b=!0,g--),u[y]=T},()=>h--,void 0,()=>{(!h||!b)&&(g||s.next(r?yw(r,u):u),s.complete())}))}});return e?i.pipe(yk(e)):i}(DF(t,e).map(CF)).pipe((0,xt.U)(IF))}}function b1(n){return null!=n?xF(TF(n)):null}function AF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function MF(n){return n._rawValidators}function kF(n){return n._rawAsyncValidators}function E1(n){return n?Array.isArray(n)?n:[n]:[]}function jT(n,e){return Array.isArray(n)?n.includes(e):n===e}function RF(n,e){const t=E1(e);return E1(n).forEach(i=>{jT(t,i)||t.push(i)}),t}function PF(n,e){return E1(e).filter(t=>!jT(n,t))}class OF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=w1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=b1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vo extends OF{get formDirective(){return null}get path(){return null}}class df extends OF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class NF{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let C1=(()=>{class n extends NF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(df,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),vy=(()=>{class n extends NF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Vo,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const sb="VALID",$T="INVALID",wy="PENDING",ob="DISABLED";function S1(n){return(zT(n)?n.validators:n)||null}function x1(n,e){return(zT(e)?e.asyncValidators:n)||null}function zT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function FF(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")}function VF(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,"")})}class WT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===sb}get invalid(){return this.status===$T}get pending(){return this.status==wy}get disabled(){return this.status===ob}get enabled(){return this.status!==ob}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(RF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(RF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(PF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(PF(e,this._rawAsyncValidators))}hasValidator(e){return jT(this._rawValidators,e)}hasAsyncValidator(e){return jT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=wy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ob,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=sb,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sb||this.status===wy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ob:sb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=wy,this._hasOwnPendingAsyncValidator=!0;const t=CF(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?ob:this.errors?$T:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wy)?wy:this._anyControlsHaveStatus($T)?$T:sb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){zT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Uz(n){return Array.isArray(n)?w1(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Bz(n){return Array.isArray(n)?b1(n):n||null}(this._rawAsyncValidators)}}class ab extends WT{constructor(e,t,r){super(S1(t),x1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){VF(this,0,e),Object.keys(e).forEach(r=>{FF(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class UF extends ab{}const by=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>GT}),GT="always";function qT(n,e){return[...e.path,n]}function lb(n,e,t=GT){A1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Hz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&BF(n,e)})}(n,e),function zz(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function $z(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&BF(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function jz(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ZT(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),YT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function KT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function A1(n,e){const t=MF(n);null!==e.validator?n.setValidators(AF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=kF(n);null!==e.asyncValidator?n.setAsyncValidators(AF(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();KT(e._rawValidators,i),KT(e._rawAsyncValidators,i)}function YT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=MF(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=kF(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return KT(e._rawValidators,r),KT(e._rawAsyncValidators,r),t}function BF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function jF(n,e){A1(n,e)}function k1(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function HF(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function R1(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===ib?t=s:function qz(n){return Object.getPrototypeOf(n.constructor)===pg}(s)?r=s:i=s}),i||r||t||null}const Kz={provide:Vo,useExisting:(0,f.Gpc)(()=>gg)},cb=(()=>Promise.resolve())();let gg=(()=>{class n extends Vo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new ab({},w1(t),b1(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){cb.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),lb(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){cb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){cb.then(()=>{const r=this._findContainer(t.path),i=new ab({});jF(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){cb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){cb.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,HF(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(co,10),f.Y36(uf,10),f.Y36(by,8))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Kz]),f.qOj]}),n})();function $F(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function zF(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ub=class extends WT{constructor(e=null,t,r){super(S1(t),x1(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=zF(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){$F(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){$F(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){zF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Xz={provide:df,useExisting:(0,f.Gpc)(()=>QT)},qF=(()=>Promise.resolve())();let QT=(()=>{class n extends df{constructor(t,r,i,s,o,u){super(),this._changeDetectorRef=o,this.callSetDisabledState=u,this.control=new ub,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=R1(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),k1(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){lb(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){qF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,f.D6c)(r);qF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?qT(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Vo,9),f.Y36(co,10),f.Y36(uf,10),f.Y36(Cu,10),f.Y36(f.sBO,8),f.Y36(by,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([Xz]),f.qOj,f.TTD]}),n})(),Ey=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const e5={provide:Cu,useExisting:(0,f.Gpc)(()=>P1),multi:!0};let KF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),t5=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:KF}),n})(),P1=(()=>{class n extends pg{constructor(t,r,i,s){super(t,r),this._registry=i,this._injector=s,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(df),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(t5),f.Y36(f.zs3))},n.\u0275dir=f.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[f._Bn([e5]),f.qOj]}),n})();const O1=new f.OlP("NgModelWithFormControlWarning"),i5={provide:Vo,useExisting:(0,f.Gpc)(()=>XT)};let XT=(()=>{class n extends Vo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(YT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return lb(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ZT(t.control||null,t,!1),function Zz(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,HF(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ZT(r||null,t),(n=>n instanceof ub)(i)&&(lb(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);jF(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Wz(n,e){return YT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){A1(this.form,this),this._oldForm&&YT(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(co,10),f.Y36(uf,10),f.Y36(by,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([i5]),f.qOj,f.TTD]}),n})();const a5={provide:df,useExisting:(0,f.Gpc)(()=>F1)};let F1=(()=>{class n extends df{set isDisabled(t){}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=R1(0,s)}ngOnChanges(t){this._added||this._setUpControl(),k1(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return qT(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Vo,13),f.Y36(co,10),f.Y36(uf,10),f.Y36(Cu,10),f.Y36(O1,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([a5]),f.qOj,f.TTD]}),n})();const l5={provide:Cu,useExisting:(0,f.Gpc)(()=>db),multi:!0};function JF(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let db=(()=>{class n extends pg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=JF(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function c5(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&f.NdJ("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([l5]),f.qOj]}),n})(),V1=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(JF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(db,9))},n.\u0275dir=f.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const u5={provide:Cu,useExisting:(0,f.Gpc)(()=>U1),multi:!0};function e2(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let U1=(()=>{class n extends pg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let u=0;u<o.length;u++){const g=this._getOptionValue(o[u].value);i.push(g)}}else{const o=r.options;for(let u=0;u<o.length;u++){const h=o[u];if(h.selected){const g=this._getOptionValue(h.value);i.push(g)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function d5(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([u5]),f.qOj]}),n})(),B1=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(e2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(e2(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(U1,9))},n.\u0275dir=f.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();function t2(n){return"number"==typeof n?n:parseInt(n,10)}let mg=(()=>{class n{constructor(){this._validator=BT}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):BT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const p5={provide:co,useExisting:(0,f.Gpc)(()=>hb),multi:!0};let hb=(()=>{class n extends mg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.D6c,this.createValidator=t=>mF}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([p5]),f.qOj]}),n})();const _5={provide:co,useExisting:(0,f.Gpc)(()=>j1),multi:!0};let j1=(()=>{class n extends mg{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>t2(t),this.createValidator=t=>vF(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[f._Bn([_5]),f.qOj]}),n})();const y5={provide:co,useExisting:(0,f.Gpc)(()=>H1),multi:!0};let H1=(()=>{class n extends mg{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>t2(t),this.createValidator=t=>wF(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[f._Bn([y5]),f.qOj]}),n})();const v5={provide:co,useExisting:(0,f.Gpc)(()=>$1),multi:!0};let $1=(()=>{class n extends mg{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>bF(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[f._Bn([v5]),f.qOj]}),n})(),a2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[KF]}),n})();class l2 extends WT{constructor(e,t,r){super(S1(t),x1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){VF(this,0,e),e.forEach((r,i)=>{FF(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function c2(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let w5=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return c2(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new ab(i,s)}record(t,r=null){const i=this._reduceControls(t);return new UF(i,r)}control(t,r,i){let s={};return this.useNonNullable?(c2(r)?s=r:(s.validators=r,s.asyncValidators=i),new ub(t,{...s,nonNullable:!0})):new ub(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new l2(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof ub||t instanceof WT?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),b5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:by,useValue:t.callSetDisabledState??GT}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[a2]}),n})(),E5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:O1,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:by,useValue:t.callSetDisabledState??GT}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[a2]}),n})();var u2=W(1808);class d2{}var C5=W(5226),Pl=W.n(C5);function I5(n){return n.value<18||n.value>60?{age:!0}:null}class Hd{constructor(e){this.db=e,this.dbPath="/donors",this.uid=localStorage.getItem("uid"),this.donorsRef=e.list(this.dbPath,t=>t.orderByChild("userId").equalTo(this.uid))}getAll(){return this.donorsRef}create(e){return this.donorsRef.push(e)}update(e,t){return this.donorsRef.update(e,t)}delete(e){return this.donorsRef.remove(e)}deleteAll(){return this.donorsRef.remove()}}function D5(n,e){1&n&&(f.TgZ(0,"div"),f._uU(1,"Please enter your first name"),f.qZA())}function T5(n,e){1&n&&(f.TgZ(0,"div"),f._uU(1,"Your first name has special caracters"),f.qZA())}function S5(n,e){1&n&&(f.TgZ(0,"div"),f._uU(1,"Your first should be 3 caracters long"),f.qZA())}function x5(n,e){if(1&n&&(f.TgZ(0,"div",33),f.YNc(1,D5,2,0,"div",34),f.YNc(2,T5,2,0,"div",34),f.YNc(3,S5,2,0,"div",34),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngIf",null==t.fn.fname.errors?null:t.fn.fname.errors.required),f.xp6(1),f.Q6J("ngIf",null==t.fn.fname.errors?null:t.fn.fname.errors.pattern),f.xp6(1),f.Q6J("ngIf",null==t.fn.fname.errors?null:t.fn.fname.errors.minlength)}}function A5(n,e){1&n&&(f.TgZ(0,"div"),f._uU(1,"Please enter your last name"),f.qZA())}function M5(n,e){1&n&&(f.TgZ(0,"div"),f._uU(1,"Your last name should not have special caracters"),f.qZA())}function k5(n,e){1&n&&(f.TgZ(0,"div"),f._uU(1,"Your last name should be 3 caracters"),f.qZA())}function R5(n,e){if(1&n&&(f.TgZ(0,"div",33),f.YNc(1,A5,2,0,"div",34),f.YNc(2,M5,2,0,"div",34),f.YNc(3,k5,2,0,"div",34),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngIf",null==t.ln.lname.errors?null:t.ln.lname.errors.required),f.xp6(1),f.Q6J("ngIf",null==t.ln.lname.errors?null:t.ln.lname.errors.pattern),f.xp6(1),f.Q6J("ngIf",null==t.ln.lname.errors?null:t.ln.lname.errors.minlength)}}function P5(n,e){1&n&&(f.TgZ(0,"div"),f._uU(1,"Please enter your age"),f.qZA())}function O5(n,e){1&n&&(f.TgZ(0,"div"),f._uU(1,"your age should be 18 < age < 60 "),f.qZA())}function N5(n,e){if(1&n&&(f.TgZ(0,"div",33),f.YNc(1,P5,2,0,"div",34),f.YNc(2,O5,2,0,"div",34),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngIf",null==t.age.errors?null:t.age.errors.required),f.xp6(1),f.Q6J("ngIf",null==t.age.errors?null:t.age.errors.age)}}function L5(n,e){1&n&&(f.TgZ(0,"div"),f._uU(1,"Please enter your phone"),f.qZA())}function F5(n,e){1&n&&(f.TgZ(0,"div"),f._uU(1,"Your phone should have 10 digits"),f.qZA())}function V5(n,e){if(1&n&&(f.TgZ(0,"div",33),f.YNc(1,L5,2,0,"div",34),f.YNc(2,F5,2,0,"div",34),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngIf",null==t.phone.phone.errors?null:t.phone.phone.errors.required),f.xp6(1),f.Q6J("ngIf",null==t.phone.phone.errors?null:t.phone.phone.errors.pattern)}}function U5(n,e){if(1&n&&(f.TgZ(0,"option",35),f._uU(1),f.qZA()),2&n){const t=e.$implicit;f.Q6J("ngValue",t.value),f.xp6(1),f.hij(" ",t.name," ")}}function B5(n,e){1&n&&(f.TgZ(0,"div"),f._uU(1,"Please select your gender"),f.qZA())}function j5(n,e){if(1&n&&(f.TgZ(0,"div",33),f.YNc(1,B5,2,0,"div",34),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngIf",null==t.sexe.sexe.errors?null:t.sexe.sexe.errors.required)}}Hd.\u0275fac=function(e){return new(e||Hd)(f.LFG(ID))},Hd.\u0275prov=f.Yz7({token:Hd,factory:Hd.\u0275fac,providedIn:"root"});const h2=function(){return{standalone:!0}};class fb{ngOnInit(){}constructor(e,t){this.donorService=e,this.isSubmitted=!1,this.donor=new d2,this.submitted=!1,this.user=(0,u2.n)(),this.bloodtypes=[{value:"A+",name:"A RhD positive (A+)"},{value:"A-",name:"A RhD negative (A-)"},{value:"B+",name:"B RhD positive (B+)"},{value:"B-",name:"B RhD negative (B-)"},{value:"O+",name:"O RhD positive (O+)"},{value:"O-",name:"O RhD negative (O-)"},{value:"AB+",name:"AB RhD positive (AB+)"},{value:"AB-",name:"AB RhD negative (AB-)"}],this.addForm=t.group({fname:["",[Iu.minLength(3),Iu.required,Iu.pattern("[a-zA-Z]+$")]],lname:["",[Iu.minLength(3),Iu.required,Iu.pattern("[a-zA-Z]+$")]],phone:["",[Iu.required,Iu.pattern("^((\\+212-?)|0)?[0-9]{10}$")]],sexe:["",[Iu.required]],age:["",[Iu.required,I5]]})}get fn(){return this.addForm.controls}get ln(){return this.addForm.controls}get phone(){return this.addForm.controls}get age(){return this.addForm.get("age")}get agee(){return this.addForm.controls}get sexe(){return this.addForm.controls}saveDonor(e){this.donor.userId=this.user.currentUser?.uid,this.donorService.create(this.donor).then(()=>{Pl().fire("Done","saved with success","success"),e.reset()})}newDonor(){this.submitted=!1,this.donor=new d2}}function z1(){return(0,yr.e)((n,e)=>{let t,r=!1;n.subscribe((0,ur.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}fb.\u0275fac=function(e){return new(e||fb)(f.Y36(Hd),f.Y36(w5))},fb.\u0275cmp=f.Xpm({type:fb,selectors:[["app-add-donor"]],decls:56,vars:20,consts:[[1,"nk-block","nk-block-lg"],[1,"card","card-bordered","card-preview"],[1,"card-inner"],[1,"nk-block-head-content"],[1,"nk-block-title"],[1,"submit-form"],["novalidate","",3,"formGroup","ngSubmit"],["login","ngForm"],[1,"row","gy-gs"],[1,"col-12","col-lg-6"],[1,"form-group"],["for","fname"],["type","text","id","fname","minlength","3","pattern","[a-zA-Z]+$","required","","formControlName","fname","placeholder","Enter the first name",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["for","lname"],["type","text","id","lname","required","","formControlName","lname","placeholder","Enter the last name",1,"form-control",3,"ngModel","ngModelChange"],["for","age"],["type","text","id","age","required","","formControlName","age","name","age","placeholder","Enter the age of the donor",1,"form-control",3,"ngModel","ngModelChange"],["for","phone"],["type","text","id","phone","required","","pattern","^((\\\\+212-?)|0)?[0-9]{10}$","maxlength","10","minlength","10","formControlName","phone","placeholder","Ex: 0612345678 or 0712345678",1,"form-control",3,"ngModel","ngModelChange"],["for","address"],["type","text","id","address","required","","placeholder","Enter the address of the donor",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["for","bloodType"],[1,"form-control-wrap"],["required","",1,"form-select","js-select2",3,"ngModelOptions","ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"custom-control","custom-radio"],["type","radio","id","female","formControlName","sexe","name","sexe","value","female","required","",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","female",1,"custom-control-label"],[1,"custom-control","custom-radio","mx-3"],["type","radio","id","male","formControlName","sexe","name","sexe","value","male","required","",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","male",1,"custom-control-label"],["type","submit","value","Submit",1,"btn","btn-success",3,"disabled"],[1,"text-danger"],[4,"ngIf"],[3,"ngValue"]],template:function(e,t){if(1&e){const r=f.EpF();f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),f._uU(5,"Add new Donor"),f.qZA()(),f._UZ(6,"br"),f.TgZ(7,"div",5)(8,"form",6,7),f.NdJ("ngSubmit",function(){f.CHM(r);const s=f.MAs(9);return f.KtG(t.saveDonor(s))}),f.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),f._uU(14,"First name"),f.qZA(),f.TgZ(15,"input",12),f.NdJ("ngModelChange",function(s){return t.donor.fname=s}),f.qZA(),f.YNc(16,x5,4,3,"div",13),f.qZA(),f.TgZ(17,"div",10)(18,"label",14),f._uU(19,"Last name"),f.qZA(),f.TgZ(20,"input",15),f.NdJ("ngModelChange",function(s){return t.donor.lname=s}),f.qZA(),f.YNc(21,R5,4,3,"div",13),f.qZA(),f.TgZ(22,"div",10)(23,"label",16),f._uU(24,"Age"),f.qZA(),f.TgZ(25,"input",17),f.NdJ("ngModelChange",function(s){return t.donor.age=s}),f.qZA(),f.YNc(26,N5,3,2,"div",13),f.qZA()(),f.TgZ(27,"div",9)(28,"div",10)(29,"label",18),f._uU(30,"Phone"),f.qZA(),f.TgZ(31,"input",19),f.NdJ("ngModelChange",function(s){return t.donor.phone=s}),f.qZA(),f.YNc(32,V5,3,2,"div",13),f.qZA(),f.TgZ(33,"div",10)(34,"label",20),f._uU(35,"Address"),f.qZA(),f.TgZ(36,"input",21),f.NdJ("ngModelChange",function(s){return t.donor.address=s}),f.qZA()(),f.TgZ(37,"div",10)(38,"label",22),f._uU(39,"Blood type"),f.qZA(),f.TgZ(40,"div",23)(41,"select",24),f.NdJ("ngModelChange",function(s){return t.donor.bloodType=s}),f.YNc(42,U5,2,2,"option",25),f.qZA()()(),f.TgZ(43,"div",10)(44,"div",26)(45,"input",27),f.NdJ("ngModelChange",function(s){return t.donor.sexe=s}),f.qZA(),f.TgZ(46,"label",28),f._uU(47,"Female"),f.qZA()(),f.TgZ(48,"div",29)(49,"input",30),f.NdJ("ngModelChange",function(s){return t.donor.sexe=s}),f.qZA(),f.TgZ(50,"label",31),f._uU(51,"male"),f.qZA()(),f._UZ(52,"br")(53,"br"),f.qZA(),f.YNc(54,j5,2,1,"div",13),f.qZA()(),f._UZ(55,"input",32),f.qZA()()()()()}2&e&&(f.xp6(8),f.Q6J("formGroup",t.addForm),f.xp6(7),f.Q6J("ngModel",t.donor.fname),f.xp6(1),f.Q6J("ngIf",t.fn.fname.touched&&t.ln.fname.invalid),f.xp6(4),f.Q6J("ngModel",t.donor.lname),f.xp6(1),f.Q6J("ngIf",t.ln.lname.touched&&t.ln.lname.invalid),f.xp6(4),f.Q6J("ngModel",t.donor.age),f.xp6(1),f.Q6J("ngIf",t.agee.age.touched&&t.agee.age.invalid),f.xp6(5),f.Q6J("ngModel",t.donor.phone),f.xp6(1),f.Q6J("ngIf",t.phone.phone.touched&&t.phone.phone.invalid),f.xp6(4),f.Q6J("ngModel",t.donor.address)("ngModelOptions",f.DdM(18,h2)),f.xp6(5),f.Q6J("ngModelOptions",f.DdM(19,h2))("ngModel",t.donor.bloodType),f.xp6(1),f.Q6J("ngForOf",t.bloodtypes),f.xp6(3),f.Q6J("ngModel",t.donor.sexe),f.xp6(4),f.Q6J("ngModel",t.donor.sexe),f.xp6(5),f.Q6J("ngIf",t.sexe.sexe.touched&&t.sexe.sexe.invalid),f.xp6(1),f.Q6J("disabled",t.addForm.invalid))},dependencies:[Hi,Si,Ey,V1,B1,ib,db,P1,C1,vy,hb,j1,H1,$1,QT,XT,F1]});var Wt,H5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$d={},W1=W1||{},gn=H5||self;function JT(){}function eS(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function pb(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var G1="closure_uid_"+(1e9*Math.random()>>>0),z5=0;function W5(n,e,t){return n.call.apply(n.bind,arguments)}function G5(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function uo(n,e,t){return(uo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?W5:G5).apply(null,arguments)}function tS(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function qs(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var o=Array(arguments.length-2),u=2;u<arguments.length;u++)o[u-2]=arguments[u];return e.prototype[i].apply(r,o)}}function hf(){this.s=this.s,this.o=this.o}hf.prototype.s=!1,hf.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function $5(n){Object.prototype.hasOwnProperty.call(n,G1)&&n[G1]||(n[G1]=++z5)}(this)},hf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const f2=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function q1(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function p2(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(eS(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function ho(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ho.prototype.h=function(){this.defaultPrevented=!0};var Z5=function(){if(!gn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{gn.addEventListener("test",JT,e),gn.removeEventListener("test",JT,e)}catch{}return n}();function nS(n){return/^[\s\xa0]*$/.test(n)}var g2=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Z1(n,e){return n<e?-1:n>e?1:0}function rS(){var n=gn.navigator;return n&&(n=n.userAgent)?n:""}function Du(n){return-1!=rS().indexOf(n)}function K1(n){return K1[" "](n),n}K1[" "]=JT;var iS,n,Y5=Du("Opera"),Cy=Du("Trident")||Du("MSIE"),m2=Du("Edge"),Y1=m2||Cy,_2=Du("Gecko")&&!(-1!=rS().toLowerCase().indexOf("webkit")&&!Du("Edge"))&&!(Du("Trident")||Du("MSIE"))&&!Du("Edge"),Q5=-1!=rS().toLowerCase().indexOf("webkit")&&!Du("Edge");function y2(){var n=gn.document;return n?n.documentMode:void 0}e:{var Q1="",X1=(n=rS(),_2?/rv:([^\);]+)(\)|;)/.exec(n):m2?/Edge\/([\d\.]+)/.exec(n):Cy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Q5?/WebKit\/(\S+)/.exec(n):Y5?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(X1&&(Q1=X1?X1[1]:""),Cy){var J1=y2();if(null!=J1&&J1>parseFloat(Q1)){iS=String(J1);break e}}iS=Q1}var X5={};var eW=gn.document&&Cy&&(y2()||parseInt(iS,10))||void 0;function gb(n,e){if(ho.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(_2){e:{try{K1(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:tW[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&gb.X.h.call(this)}}qs(gb,ho);var tW={2:"touch",3:"pen",4:"mouse"};gb.prototype.h=function(){gb.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var mb="closure_listenable_"+(1e6*Math.random()|0),nW=0;function rW(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++nW,this.ba=this.ea=!1}function sS(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function tR(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function w2(n){const e={};for(const t in n)e[t]=n[t];return e}const b2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E2(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<b2.length;s++)t=b2[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function oS(n){this.src=n,this.g={},this.h=0}function nR(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=f2(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(sS(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function rR(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}oS.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=rR(n,e,r,i);return-1<o?(e=n[o],t||(e.ea=!1)):((e=new rW(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var iR="closure_lm_"+(1e6*Math.random()|0),sR={};function C2(n,e,t,r,i){if(r&&r.once)return D2(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)C2(n,e[s],t,r,i);return null}return t=cR(t),n&&n[mb]?n.N(e,t,pb(r)?!!r.capture:!!r,i):I2(n,e,t,!1,r,i)}function I2(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=pb(i)?!!i.capture:!!i,u=aR(n);if(u||(n[iR]=u=new oS(n)),(t=u.add(e,t,r,o,s)).proxy)return t;if(r=function iW(){const e=sW;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Z5||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(S2(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function D2(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)D2(n,e[s],t,r,i);return null}return t=cR(t),n&&n[mb]?n.O(e,t,pb(r)?!!r.capture:!!r,i):I2(n,e,t,!0,r,i)}function T2(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)T2(n,e[s],t,r,i);else r=pb(r)?!!r.capture:!!r,t=cR(t),n&&n[mb]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=rR(s=n.g[e],t,r,i))&&(sS(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=aR(n))&&(e=n.g[e.toString()],n=-1,e&&(n=rR(e,t,r,i)),(t=-1<n?e[n]:null)&&oR(t))}function oR(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[mb])nR(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(S2(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=aR(e))?(nR(t,n),0==t.h&&(t.src=null,e[iR]=null)):sS(n)}}}function S2(n){return n in sR?sR[n]:sR[n]="on"+n}function sW(n,e){if(n.ba)n=!0;else{e=new gb(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&oR(n),n=t.call(r,e)}return n}function aR(n){return(n=n[iR])instanceof oS?n:null}var lR="__closure_events_fn_"+(1e9*Math.random()>>>0);function cR(n){return"function"==typeof n?n:(n[lR]||(n[lR]=function(e){return n.handleEvent(e)}),n[lR])}function Ts(){hf.call(this),this.i=new oS(this),this.P=this,this.I=null}function Zs(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ho(e,n);else if(e instanceof ho)e.target=e.target||n;else{var i=e;E2(e=new ho(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=aS(o,r,!0,e)&&i}if(i=aS(o=e.g=n,r,!0,e)&&i,i=aS(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=aS(o=e.g=t[s],r,!1,e)&&i}function aS(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==t){var u=o.listener,h=o.ha||o.src;o.ea&&nR(n.i,o),i=!1!==u.call(h,r)&&i}}return i&&!r.defaultPrevented}qs(Ts,hf),Ts.prototype[mb]=!0,Ts.prototype.removeEventListener=function(n,e,t,r){T2(this,n,e,t,r)},Ts.prototype.M=function(){if(Ts.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)sS(t[r]);delete n.g[e],n.h--}}this.I=null},Ts.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ts.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var uR=gn.JSON.stringify;function oW(){var n=M2;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var dR,x2=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new lW,n=>n.reset());class lW{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function cW(n){gn.setTimeout(()=>{throw n},0)}function A2(n,e){dR||function uW(){var n=gn.Promise.resolve(void 0);dR=function(){n.then(dW)}}(),hR||(dR(),hR=!0),M2.add(n,e)}var hR=!1,M2=new class aW{constructor(){this.h=this.g=null}add(e,t){const r=x2.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function dW(){for(var n;n=oW();){try{n.h.call(n.g)}catch(t){cW(t)}var e=x2;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}hR=!1}function lS(n,e){Ts.call(this),this.h=n||1,this.g=e||gn,this.j=uo(this.lb,this),this.l=Date.now()}function fR(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function pR(n,e,t){if("function"==typeof n)t&&(n=uo(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=uo(n.handleEvent,n)}return 2147483647<Number(e)?-1:gn.setTimeout(n,e||0)}function k2(n){n.g=pR(()=>{n.g=null,n.i&&(n.i=!1,k2(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}qs(lS,Ts),(Wt=lS.prototype).ca=!1,Wt.R=null,Wt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Zs(this,"tick"),this.ca&&(fR(this),this.start()))}},Wt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Wt.M=function(){lS.X.M.call(this),fR(this),delete this.g};class hW extends hf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:k2(this)}M(){super.M(),this.g&&(gn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _b(n){hf.call(this),this.h=n,this.g={}}qs(_b,hf);var R2=[];function P2(n,e,t,r){Array.isArray(t)||(t&&(R2[0]=t.toString()),t=R2);for(var i=0;i<t.length;i++){var s=C2(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function O2(n){tR(n.g,function(e,t){this.g.hasOwnProperty(t)&&oR(e)},n),n.g={}}function cS(){this.g=!0}function Iy(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function mW(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return uR(t)}catch{return e}}(n,t)+(r?" "+r:"")})}_b.prototype.M=function(){_b.X.M.call(this),O2(this)},_b.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cS.prototype.Aa=function(){this.g=!1},cS.prototype.info=function(){};var _g={},N2=null;function uS(){return N2=N2||new Ts}function L2(n){ho.call(this,_g.Pa,n)}function yb(n){const e=uS();Zs(e,new L2(e))}function F2(n,e){ho.call(this,_g.STAT_EVENT,n),this.stat=e}function Uo(n){const e=uS();Zs(e,new F2(e,n))}function V2(n,e){ho.call(this,_g.Qa,n),this.size=e}function vb(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return gn.setTimeout(function(){n()},e)}_g.Pa="serverreachability",qs(L2,ho),_g.STAT_EVENT="statevent",qs(F2,ho),_g.Qa="timingevent",qs(V2,ho);var dS={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},U2={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function gR(){}function j2(){}gR.prototype.h=null;var yR,wb={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function mR(){ho.call(this,"d")}function _R(){ho.call(this,"c")}function hS(){}function bb(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new _b(this),this.O=_W,this.T=new lS(n=Y1?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new H2}function H2(){this.i=null,this.g="",this.h=!1}qs(mR,ho),qs(_R,ho),qs(hS,gR),hS.prototype.g=function(){return new XMLHttpRequest},hS.prototype.i=function(){return{}},yR=new hS;var _W=45e3,vR={},fS={};function wR(n,e,t){n.K=1,n.v=_S(zd(e)),n.s=t,n.P=!0,$2(n,null)}function $2(n,e){n.F=Date.now(),Eb(n),n.A=zd(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),J2(t.i,"t",r),n.C=0,t=n.l.H,n.h=new H2,n.g=CV(n.l,t?e:null,!n.s),0<n.N&&(n.L=new hW(uo(n.La,n,n.g),n.N)),P2(n.S,n.g,"readystatechange",n.ib),e=n.H?w2(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),yb(),function fW(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",u=s.split("&"),h=0;h<u.length;h++){var g=u[h].split("=");if(1<g.length){var y=g[0];g=g[1];var b=y.split("_");o=2<=b.length&&"type"==b[1]?o+(y+"=")+g+"&":o+(y+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.U,n.s)}function z2(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function W2(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=yW(n,t),i==fS){4==e&&(n.o=4,Uo(14),r=!1),Iy(n.j,n.m,null,"[Incomplete Response]");break}if(i==vR){n.o=4,Uo(15),Iy(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Iy(n.j,n.m,i,null),bR(n,i)}z2(n)&&i!=fS&&i!=vR&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Uo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),AR(e),e.K=!0,Uo(11))):(Iy(n.j,n.m,t,"[Invalid Chunked Response]"),yg(n),Cb(n))}function yW(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?fS:(t=Number(e.substring(t,r)),isNaN(t)?vR:(r+=1)+t>e.length?fS:(e=e.substr(r,t),n.C=r+t,e))}function Eb(n){n.V=Date.now()+n.O,G2(n,n.O)}function G2(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=vb(uo(n.gb,n),e)}function pS(n){n.B&&(gn.clearTimeout(n.B),n.B=null)}function Cb(n){0==n.l.G||n.I||vV(n.l,n)}function yg(n){pS(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,fR(n.T),O2(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function bR(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ER(t.h,n)))if(!n.J&&ER(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;CS(t),bS(t)}xR(t),Uo(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=vb(uo(t.cb,t),6e3));if(1>=nV(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else wg(t,11)}else if((n.J||t.g==n)&&CS(t),!nS(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let g=i[e];if(t.T=g[0],g=g[1],2==t.G)if("c"==g[0]){t.I=g[1],t.ka=g[2];const y=g[3];null!=y&&(t.ma=y,t.j.info("VER="+t.ma));const b=g[4];null!=b&&(t.Ca=b,t.j.info("SVER="+t.Ca));const T=g[5];null!=T&&"number"==typeof T&&0<T&&(t.J=r=1.5*T,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const k=n.g;if(k){const P=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(P){var s=r.h;s.g||-1==P.indexOf("spdy")&&-1==P.indexOf("quic")&&-1==P.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(CR(s,s.h),s.h=null))}if(r.D){const B=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;B&&(r.za=B,ti(r.F,r.D,B))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var o=n;if((r=t).sa=EV(r,r.H?r.ka:null,r.V),o.J){rV(r.h,o);var u=o,h=r.J;h&&u.setTimeout(h),u.B&&(pS(u),Eb(u)),r.g=o}else _V(r);0<t.i.length&&ES(t)}else"stop"!=g[0]&&"close"!=g[0]||wg(t,7);else 3==t.G&&("stop"==g[0]||"close"==g[0]?"stop"==g[0]?wg(t,7):SR(t):"noop"!=g[0]&&t.l&&t.l.wa(g),t.A=0)}yb()}catch{}}function q2(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(eS(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function wW(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(eS(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function vW(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(eS(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(Wt=bb.prototype).setTimeout=function(n){this.O=n},Wt.ib=function(n){n=n.target;const e=this.L;e&&3==Wd(n)?e.l():this.La(n)},Wt.La=function(n){try{if(n==this.g)e:{const y=Wd(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>y)&&(3!=y||Y1||this.g&&(this.h.h||this.g.fa()||dV(this.g)))){this.I||4!=y||7==e||yb(),pS(this);var t=this.g.aa();this.Y=t;t:if(z2(this)){var r=dV(this.g);n="";var i=r.length,s=4==Wd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){yg(this),Cb(this);var o="";break t}this.h.i=new gn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==t,function pW(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,y,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,h=this.g;if((u=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nS(u)){var g=u;break t}}g=null}if(!(t=g)){this.i=!1,this.o=3,Uo(12),yg(this),Cb(this);break e}Iy(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bR(this,t)}this.P?(W2(this,y,o),Y1&&this.i&&3==y&&(P2(this.S,this.T,"tick",this.hb),this.T.start())):(Iy(this.j,this.m,o,null),bR(this,o)),4==y&&yg(this),this.i&&!this.I&&(4==y?vV(this.l,this):(this.i=!1,Eb(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,Uo(12)):(this.o=0,Uo(13)),yg(this),Cb(this)}}}catch{}},Wt.hb=function(){if(this.g){var n=Wd(this.g),e=this.g.fa();this.C<e.length&&(pS(this),W2(this,n,e),this.i&&4!=n&&Eb(this))}},Wt.cancel=function(){this.I=!0,yg(this)},Wt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function gW(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(yb(),Uo(17)),yg(this),this.o=2,Cb(this)):G2(this,this.V-n)};var Z2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vg(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof vg){this.h=void 0!==e?e:n.h,gS(this,n.j),this.s=n.s,this.g=n.g,mS(this,n.m),this.l=n.l,e=n.i;var t=new Tb;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),K2(this,t),this.o=n.o}else n&&(t=String(n).match(Z2))?(this.h=!!e,gS(this,t[1]||"",!0),this.s=Ib(t[2]||""),this.g=Ib(t[3]||"",!0),mS(this,t[4]),this.l=Ib(t[5]||"",!0),K2(this,t[6]||"",!0),this.o=Ib(t[7]||"")):(this.h=!!e,this.i=new Tb(null,this.h))}function zd(n){return new vg(n)}function gS(n,e,t){n.j=t?Ib(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function mS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function K2(n,e,t){e instanceof Tb?(n.i=e,function SW(n,e){e&&!n.j&&(ff(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Q2(this,r),J2(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Db(e,DW)),n.i=new Tb(e,n.h))}function ti(n,e,t){n.i.set(e,t)}function _S(n){return ti(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ib(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Db(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,EW),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function EW(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}vg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Db(e,Y2,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Db(e,Y2,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Db(t,"/"==t.charAt(0)?IW:CW,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Db(t,TW)),n.join("")};var Y2=/[#\/\?@]/g,CW=/[#\?:]/g,IW=/[#\?]/g,DW=/[#\?@]/g,TW=/#/g;function Tb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ff(n){n.g||(n.g=new Map,n.h=0,n.i&&function bW(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Q2(n,e){ff(n),e=Dy(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function X2(n,e){return ff(n),e=Dy(n,e),n.g.has(e)}function J2(n,e,t){Q2(n,e),0<t.length&&(n.i=null,n.g.set(Dy(n,e),q1(t)),n.h+=t.length)}function Dy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function eV(n){this.l=n||AW,n=gn.PerformanceNavigationTiming?0<(n=gn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(gn.g&&gn.g.Ga&&gn.g.Ga()&&gn.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Wt=Tb.prototype).add=function(n,e){ff(this),this.i=null,n=Dy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Wt.forEach=function(n,e){ff(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Wt.oa=function(){ff(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},Wt.W=function(n){ff(this);let e=[];if("string"==typeof n)X2(this,n)&&(e=e.concat(this.g.get(Dy(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Wt.set=function(n,e){return ff(this),this.i=null,X2(this,n=Dy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Wt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Wt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var AW=10;function tV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function nV(n){return n.h?1:n.g?n.g.size:0}function ER(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function CR(n,e){n.g?n.g.add(e):n.h=e}function rV(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function iV(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return q1(n.i)}function IR(){}function MW(){this.g=new IR}function kW(n,e,t){const r=t||"";try{q2(n,function(i,s){let o=i;pb(i)&&(o=uR(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function yS(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Sb(n){this.l=n.ac||null,this.j=n.jb||!1}function vS(n,e){Ts.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=DR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}eV.prototype.cancel=function(){if(this.i=iV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},IR.prototype.stringify=function(n){return gn.JSON.stringify(n,void 0)},IR.prototype.parse=function(n){return gn.JSON.parse(n,void 0)},qs(Sb,gR),Sb.prototype.g=function(){return new vS(this.l,this.j)},Sb.prototype.i=function(n){return function(){return n}}({}),qs(vS,Ts);var DR=0;function sV(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function xb(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ab(n)}function Ab(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Wt=vS.prototype).open=function(n,e){if(this.readyState!=DR)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ab(this)},Wt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||gn).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Wt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xb(this)),this.readyState=DR},Wt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ab(this)),this.g&&(this.readyState=3,Ab(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof gn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sV(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Wt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?xb(this):Ab(this),3==this.readyState&&sV(this)}},Wt.Va=function(n){this.g&&(this.response=this.responseText=n,xb(this))},Wt.Ua=function(n){this.g&&(this.response=n,xb(this))},Wt.ga=function(){this.g&&xb(this)},Wt.setRequestHeader=function(n,e){this.v.append(n,e)},Wt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Wt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var PW=gn.JSON.parse;function vi(n){Ts.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=oV,this.K=this.L=!1}qs(vi,Ts);var oV="",OW=/^https?$/i,NW=["POST","PUT"];function aV(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,lV(n),wS(n)}function lV(n){n.D||(n.D=!0,Zs(n,"complete"),Zs(n,"error"))}function cV(n){if(n.h&&typeof W1<"u"&&(!n.C[1]||4!=Wd(n)||2!=n.aa()))if(n.v&&4==Wd(n))pR(n.Ha,0,n);else if(Zs(n,"readystatechange"),4==Wd(n)){n.h=!1;try{const u=n.aa();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.H).match(Z2)[1]||null;if(!i&&gn.self&&gn.self.location){var s=gn.self.location.protocol;i=s.substr(0,s.length-1)}r=!OW.test(i?i.toLowerCase():"")}t=r}if(t)Zs(n,"complete"),Zs(n,"success");else{n.m=6;try{var o=2<Wd(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.aa()+"]",lV(n)}}finally{wS(n)}}}function wS(n,e){if(n.g){uV(n);const t=n.g,r=n.C[0]?JT:null;n.g=null,n.C=null,e||Zs(n,"ready");try{t.onreadystatechange=r}catch{}}}function uV(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(gn.clearTimeout(n.A),n.A=null)}function Wd(n){return n.g?n.g.readyState:0}function dV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case oV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function hV(n){let e="";return tR(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function TR(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=hV(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ti(n,e,t))}function Mb(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function fV(n){this.Ca=0,this.i=[],this.j=new cS,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Mb("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Mb("baseRetryDelayMs",5e3,n),this.bb=Mb("retryDelaySeedMs",1e4,n),this.$a=Mb("forwardChannelMaxRetries",2,n),this.ta=Mb("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new eV(n&&n.concurrentRequestLimit),this.Fa=new MW,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function SR(n){if(pV(n),3==n.G){var e=n.U++,t=zd(n.F);ti(t,"SID",n.I),ti(t,"RID",e),ti(t,"TYPE","terminate"),kb(n,t),(e=new bb(n,n.j,e,void 0)).K=2,e.v=_S(zd(t)),t=!1,gn.navigator&&gn.navigator.sendBeacon&&(t=gn.navigator.sendBeacon(e.v.toString(),"")),!t&&gn.Image&&((new Image).src=e.v,t=!0),t||(e.g=CV(e.l,null),e.g.da(e.v)),e.F=Date.now(),Eb(e)}bV(n)}function bS(n){n.g&&(AR(n),n.g.cancel(),n.g=null)}function pV(n){bS(n),n.u&&(gn.clearTimeout(n.u),n.u=null),CS(n),n.h.cancel(),n.m&&("number"==typeof n.m&&gn.clearTimeout(n.m),n.m=null)}function ES(n){tV(n.h)||n.m||(n.m=!0,A2(n.Ja,n),n.C=0)}function gV(n,e){var t;t=e?e.m:n.U++;const r=zd(n.F);ti(r,"SID",n.I),ti(r,"RID",t),ti(r,"AID",n.T),kb(n,r),n.o&&n.s&&TR(r,n.o,n.s),t=new bb(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=mV(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),CR(n.h,t),wR(t,r,e)}function kb(n,e){n.ia&&tR(n.ia,function(t,r){ti(e,r,t)}),n.l&&q2({},function(t,r){ti(e,r,t)})}function mV(n,e,t){t=Math.min(n.i.length,t);var r=n.l?uo(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let u=!0;for(let h=0;h<t;h++){let g=i[h].h;const y=i[h].g;if(g-=s,0>g)s=Math.max(0,i[h].h-100),u=!1;else try{kW(y,o,"req"+g+"_")}catch{r&&r(y)}}if(u){r=o.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function _V(n){n.g||n.u||(n.Z=1,A2(n.Ia,n),n.A=0)}function xR(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=vb(uo(n.Ia,n),wV(n,n.A)),n.A++,0))}function AR(n){null!=n.B&&(gn.clearTimeout(n.B),n.B=null)}function yV(n){n.g=new bb(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=zd(n.sa);ti(e,"RID","rpc"),ti(e,"SID",n.I),ti(e,"CI",n.L?"0":"1"),ti(e,"AID",n.T),ti(e,"TYPE","xmlhttp"),kb(n,e),n.o&&n.s&&TR(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=_S(zd(e)),t.s=null,t.P=!0,$2(t,n)}function CS(n){null!=n.v&&(gn.clearTimeout(n.v),n.v=null)}function vV(n,e){var t=null;if(n.g==e){CS(n),AR(n),n.g=null;var r=2}else{if(!ER(n.h,e))return;t=e.D,rV(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Zs(r=uS(),new V2(r,t)),ES(n)}else _V(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function FW(n,e){return!(nV(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=vb(uo(n.Ja,n,e),wV(n,n.C)),n.C++,0)))}(n,e)||2==r&&xR(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:wg(n,5);break;case 4:wg(n,10);break;case 3:wg(n,6);break;default:wg(n,2)}}function wV(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function wg(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=uo(n.kb,n);t||(t=new vg("//www.google.com/images/cleardot.gif"),gn.location&&"http"==gn.location.protocol||gS(t,"https"),_S(t)),function RW(n,e){const t=new cS;if(gn.Image){const r=new Image;r.onload=tS(yS,t,r,"TestLoadImage: loaded",!0,e),r.onerror=tS(yS,t,r,"TestLoadImage: error",!1,e),r.onabort=tS(yS,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=tS(yS,t,r,"TestLoadImage: timeout",!1,e),gn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Uo(2);n.G=0,n.l&&n.l.va(e),bV(n),pV(n)}function bV(n){if(n.G=0,n.la=[],n.l){const e=iV(n.h);(0!=e.length||0!=n.i.length)&&(p2(n.la,e),p2(n.la,n.i),n.h.i.length=0,q1(n.i),n.i.length=0),n.l.ua()}}function EV(n,e,t){var r=t instanceof vg?zd(t):new vg(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),mS(r,r.m);else{var i=gn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new vg(null,void 0);r&&gS(s,r),e&&(s.g=e),i&&mS(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&ti(r,t,e),ti(r,"VER",n.ma),kb(n,r),r}function CV(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vi(t&&n.Da&&!n.ra?new Sb({jb:!0}):n.ra)).Ka(n.H),e}function IV(){}function IS(){if(Cy&&!(10<=Number(eW)))throw Error("Environmental error: no available transport.")}function Ga(n,e){Ts.call(this),this.g=new fV(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!nS(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!nS(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ty(this)}function DV(n){mR.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function TV(){_R.call(this),this.status=1}function Ty(n){this.g=n}(Wt=vi.prototype).Ka=function(n){this.L=n},Wt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():yR.g(),this.C=function B2(n){return n.h||(n.h=n.i())}(this.u?this.u:yR),this.g.onreadystatechange=uo(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void aV(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=gn.FormData&&n instanceof gn.FormData,!(0<=f2(NW,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{uV(this),0<this.B&&((this.K=function LW(n){return Cy&&function J5(){return function K5(n){var e=X5;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=g2(String(iS)).split("."),t=g2("9").split("."),r=Math.max(e.length,t.length);for(let o=0;0==n&&o<r;o++){var i=e[o]||"",s=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=Z1(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Z1(0==i[2].length,0==s[2].length)||Z1(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=uo(this.qa,this)):this.A=pR(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){aV(this,s)}},Wt.qa=function(){typeof W1<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zs(this,"timeout"),this.abort(8))},Wt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Zs(this,"complete"),Zs(this,"abort"),wS(this))},Wt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wS(this,!0)),vi.X.M.call(this)},Wt.Ha=function(){this.s||(this.F||this.v||this.l?cV(this):this.fb())},Wt.fb=function(){cV(this)},Wt.aa=function(){try{return 2<Wd(this)?this.g.status:-1}catch{return-1}},Wt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Wt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),PW(e)}},Wt.Ea=function(){return this.m},Wt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Wt=fV.prototype).ma=8,Wt.G=1,Wt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new bb(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=w2(s),E2(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=mV(this,i,e),ti(t=zd(this.F),"RID",n),ti(t,"CVER",22),this.D&&ti(t,"X-HTTP-Session-Id",this.D),kb(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(hV(s)))+"&"+e:this.o&&TR(t,this.o,s)),CR(this.h,i),this.Ya&&ti(t,"TYPE","init"),this.O?(ti(t,"$req",e),ti(t,"SID","null"),i.Z=!0,wR(i,t,null)):wR(i,t,e),this.G=2}}else 3==this.G&&(n?gV(this,n):0==this.i.length||tV(this.h)||gV(this))},Wt.Ia=function(){if(this.u=null,yV(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=vb(uo(this.eb,this),n)}},Wt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Uo(10),bS(this),yV(this))},Wt.cb=function(){null!=this.v&&(this.v=null,bS(this),xR(this),Uo(19))},Wt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Uo(2)):(this.j.info("Failed to ping google.com"),Uo(1))},(Wt=IV.prototype).xa=function(){},Wt.wa=function(){},Wt.va=function(){},Wt.ua=function(){},Wt.Ra=function(){},IS.prototype.g=function(n,e){return new Ga(n,e)},qs(Ga,Ts),Ga.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Uo(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=EV(n,null,n.V),ES(n)},Ga.prototype.close=function(){SR(this.g)},Ga.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=uR(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&ES(e)},Ga.prototype.M=function(){this.g.l=null,delete this.j,SR(this.g),delete this.g,Ga.X.M.call(this)},qs(DV,mR),qs(TV,_R),qs(Ty,IV),Ty.prototype.xa=function(){Zs(this.g,"a")},Ty.prototype.wa=function(n){Zs(this.g,new DV(n))},Ty.prototype.va=function(n){Zs(this.g,new TV)},Ty.prototype.ua=function(){Zs(this.g,"b")},IS.prototype.createWebChannel=IS.prototype.g,Ga.prototype.send=Ga.prototype.u,Ga.prototype.open=Ga.prototype.m,Ga.prototype.close=Ga.prototype.close,dS.NO_ERROR=0,dS.TIMEOUT=8,dS.HTTP_ERROR=6,U2.COMPLETE="complete",j2.EventType=wb,wb.OPEN="a",wb.CLOSE="b",wb.ERROR="c",wb.MESSAGE="d",Ts.prototype.listen=Ts.prototype.N,vi.prototype.listenOnce=vi.prototype.O,vi.prototype.getLastError=vi.prototype.Oa,vi.prototype.getLastErrorCode=vi.prototype.Ea,vi.prototype.getStatus=vi.prototype.aa,vi.prototype.getResponseJson=vi.prototype.Sa,vi.prototype.getResponseText=vi.prototype.fa,vi.prototype.send=vi.prototype.da,vi.prototype.setWithCredentials=vi.prototype.Ka;var VW=$d.createWebChannelTransport=function(){return new IS},UW=$d.getStatEventTarget=function(){return uS()},MR=$d.ErrorCode=dS,BW=$d.EventType=U2,jW=$d.Event=_g,SV=$d.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},HW=$d.FetchXmlHttpFactory=Sb,DS=$d.WebChannel=j2,$W=$d.XhrIo=vi;const xV="@firebase/firestore";class Ss{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ss.UNAUTHENTICATED=new Ss(null),Ss.GOOGLE_CREDENTIALS=new Ss("google-credentials-uid"),Ss.FIRST_PARTY=new Ss("first-party-uid"),Ss.MOCK_USER=new Ss("mock-user");let Sy="9.16.0";const pf=new Ri.Yd("@firebase/firestore");function kR(){return pf.logLevel}function at(n,...e){if(pf.logLevel<=Ri.in.DEBUG){const t=e.map(RR);pf.debug(`Firestore (${Sy}): ${n}`,...t)}}function Fi(n,...e){if(pf.logLevel<=Ri.in.ERROR){const t=e.map(RR);pf.error(`Firestore (${Sy}): ${n}`,...t)}}function bg(n,...e){if(pf.logLevel<=Ri.in.WARN){const t=e.map(RR);pf.warn(`Firestore (${Sy}): ${n}`,...t)}}function RR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function kt(n="Unexpected state"){const e=`FIRESTORE (${Sy}) INTERNAL ASSERTION FAILED: `+n;throw Fi(e),new Error(e)}function zt(n,e){n||kt()}function vt(n,e){return n}const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends j.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class us{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class AV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ss.UNAUTHENTICATED))}shutdown(){}}class qW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ZW{constructor(e){this.t=e,this.currentUser=Ss.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let o=new us;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new us,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const g=o;e.enqueueRetryable((0,he.Z)(function*(){yield g.promise,yield s(r.currentUser)}))},h=g=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.auth.addAuthTokenListener(this.o),u()};this.t.onInit(g=>h(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?h(g):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new us)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(zt("string"==typeof r.accessToken),new AV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return zt(null===e||"string"==typeof e),new Ss(e)}}class KW{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Ss.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(zt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class YW{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new KW(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ss.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QW{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,at("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(zt("string"==typeof t.token),this.A=t.token,new MV(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function XW(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class kV{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=XW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function mn(n,e){return n<e?-1:n>e?1:0}function xy(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function RV(n){return n+"\0"}class ni{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new et(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new et(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new et(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ni.fromMillis(Date.now())}static fromDate(e){return ni.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ni(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mn(this.nanoseconds,e.nanoseconds):mn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zt(e)}static min(){return new Zt(new ni(0,0))}static max(){return new Zt(new ni(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Rb{constructor(e,t,r){void 0===t?t=0:t>e.length&&kt(),void 0===r?r=e.length-t:r>e.length-t&&kt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Rb.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rb?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Kn extends Rb{construct(e,t,r){return new Kn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new et(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Kn(t)}static emptyPath(){return new Kn([])}}const JW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wi extends Rb{construct(e,t,r){return new wi(e,t,r)}static isValidIdentifier(e){return JW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new et(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const u=e[i];if("\\"===u){if(i+1===e.length)throw new et(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if("\\"!==h&&"."!==h&&"`"!==h)throw new et(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(s(),i++)}if(s(),o)throw new et(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wi(t)}static emptyPath(){return new wi([])}}class _t{constructor(e){this.path=e}static fromPath(e){return new _t(Kn.fromString(e))}static fromName(e){return new _t(Kn.fromString(e).popFirst(5))}static empty(){return new _t(Kn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Kn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Kn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _t(new Kn(e.slice()))}}class TS{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function PR(n){return n.fields.find(e=>2===e.kind)}function Eg(n){return n.fields.filter(e=>2!==e.kind)}TS.UNKNOWN_ID=-1;class SS{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pb(0,qa.min())}}function PV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Zt.fromTimestamp(1e9===r?new ni(t+1,0):new ni(t,r));return new qa(i,_t.empty(),e)}function OV(n){return new qa(n.readTime,n.key,-1)}class qa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new qa(Zt.min(),_t.empty(),-1)}static max(){return new qa(Zt.max(),_t.empty(),-1)}}function OR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=_t.comparator(n.documentKey,e.documentKey),0!==t?t:mn(n.largestBatchId,e.largestBatchId))}const NV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function gf(n){return NR.apply(this,arguments)}function NR(){return NR=(0,he.Z)(function*(n){if(n.code!==Pe.FAILED_PRECONDITION||n.message!==NV)throw n;at("LocalStore","Unexpectedly lost primary lease")}),NR.apply(this,arguments)}class Ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&kt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ae((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ae?t:Ae.resolve(t)}catch(t){return Ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.reject(t)}static resolve(e){return new Ae((t,r)=>{t(e)})}static reject(e){return new Ae((t,r)=>{r(e)})}static waitFor(e){return new Ae((t,r)=>{let i=0,s=0,o=!1;e.forEach(u=>{++i,u.next(()=>{++s,o&&s===i&&t()},h=>r(h))}),o=!0,s===i&&t()})}static or(e){let t=Ae.resolve(!1);for(const r of e)t=t.next(i=>i?Ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Ae((r,i)=>{const s=e.length,o=new Array(s);let u=0;for(let h=0;h<s;h++){const g=h;t(e[g]).next(y=>{o[g]=y,++u,u===s&&r(o)},y=>i(y))}})}static doWhile(e,t){return new Ae((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class xS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new us,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ob(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=LR(r.target.error);this.P.reject(new Ob(e,i))}}static open(e,t,r,i){try{return new xS(t,e.transaction(i,r))}catch(s){throw new Ob(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(at("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new rG(t)}}class Ac{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Ac.D((0,j.z$)())&&Fi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return at("SimpleDb","Removing database:",e),Cg(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,j.hl)())return!1;if(Ac.N())return!0;const e=(0,j.z$)(),t=Ac.D(e),r=0<t&&t<10,i=Ac.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,he.Z)(function*(){return t.db||(at("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Ob(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const u=o.target.error;i("VersionError"===u.name?new et(Pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===u.name?new et(Pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u):new Ob(e,u))},s.onupgradeneeded=o=>{at("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.S.$(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{at("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,he.Z)(function*(){const o="readonly"===t;let u=0;for(;;){++u;try{s.db=yield s.F(e);const h=xS.open(s.db,e,o?"readonly":"readwrite",r),g=i(h).next(y=>(h.V(),y)).catch(y=>(h.abort(y),Ae.reject(y))).toPromise();return g.catch(()=>{}),yield h.v,g}catch(h){const g=h,y="FirebaseError"!==g.name&&u<3;if(at("SimpleDb","Transaction failed with error:",g.message,"Retrying:",y),s.close(),!y)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class nG{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Cg(this.q.delete())}}class Ob extends et{constructor(e,t){super(Pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function mf(n){return"IndexedDbTransactionError"===n.name}class rG{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(at("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(at("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cg(r)}add(e){return at("SimpleDb","ADD",this.store.name,e,e),Cg(this.store.add(e))}get(e){return Cg(this.store.get(e)).next(t=>(void 0===t&&(t=null),at("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return at("SimpleDb","DELETE",this.store.name,e),Cg(this.store.delete(e))}count(){return at("SimpleDb","COUNT",this.store.name),Cg(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(o,u)=>{s.push(u)}).next(()=>s)}{const i=this.store.getAll(r.range);return new Ae((s,o)=>{i.onerror=u=>{o(u.target.error)},i.onsuccess=u=>{s(u.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Ae((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Y(e,t){at("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,u)=>u.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new Ae((r,i)=>{t.onerror=s=>{const o=LR(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(u=>{u?o.continue():r()}):r()}})}H(e,t){const r=[];return new Ae((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const u=o.target.result;if(!u)return void i();const h=new nG(u),g=t(u.primaryKey,u.value,h);if(g instanceof Ae){const y=g.catch(b=>(h.done(),Ae.reject(b)));r.push(y)}h.isDone?i():null===h.G?u.continue():u.continue(h.G)}}).next(()=>Ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cg(n){return new Ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=LR(r.target.error);t(i)}})}let FV=!1;function LR(n){const e=Ac.D((0,j.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return FV||(FV=!0,setTimeout(()=>{throw r},0)),r}}return n}class iG{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;at("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,he.Z)(function*(){t.task=null;try{at("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){mf(r)?at("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield gf(r)}yield t.nt(6e4)}))}}class sG{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,he.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return Ae.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return at("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,i).next(u=>{i-=u,r.add(o)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(i,s)).next(u=>(at("IndexBackiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u))).next(()=>o.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=OV(s);OR(o,r)>0&&(r=o)}),new qa(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Za=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class oG{constructor(e,t,r,i,s,o,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=h}}class _f{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _f("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _f&&e.projectId===this.projectId&&e.database===this.database}}function VV(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ig(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function UV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Nb(n){return null==n}function Lb(n){return 0===n&&1/n==-1/0}function BV(n){return"number"==typeof n&&Number.isInteger(n)&&!Lb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ds{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ds(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ds(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ds.EMPTY_BYTE_STRING=new ds("");const lG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yf(n){if(zt(!!n),"string"==typeof n){let e=0;const t=lG.exec(n);if(zt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bi(n.seconds),nanos:bi(n.nanos)}}function bi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Dg(n){return"string"==typeof n?ds.fromBase64String(n):ds.fromUint8Array(n)}function FR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function jV(n){const e=n.mapValue.fields.__previous_value__;return FR(e)?jV(e):e}function Fb(n){const e=yf(n.mapValue.fields.__local_write_time__.timestampValue);return new ni(e.seconds,e.nanos)}const vf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},AS={nullValue:"NULL_VALUE"};function Tg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?FR(n)?4:WV(n)?9007199254740991:10:kt()}function Tu(n,e){if(n===e)return!0;const t=Tg(n);if(t!==Tg(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fb(n).isEqual(Fb(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=yf(r.timestampValue),o=yf(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Dg(n.bytesValue).isEqual(Dg(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return bi(r.geoPointValue.latitude)===bi(i.geoPointValue.latitude)&&bi(r.geoPointValue.longitude)===bi(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return bi(r.integerValue)===bi(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=bi(r.doubleValue),o=bi(i.doubleValue);return s===o?Lb(s)===Lb(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return xy(n.arrayValue.values||[],e.arrayValue.values||[],Tu);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(VV(s)!==VV(o))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===o[u]||!Tu(s[u],o[u])))return!1;return!0}(n,e);default:return kt()}var i}function Vb(n,e){return void 0!==(n.values||[]).find(t=>Tu(t,e))}function wf(n,e){if(n===e)return 0;const t=Tg(n),r=Tg(e);if(t!==r)return mn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return mn(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=bi(i.integerValue||i.doubleValue),u=bi(s.integerValue||s.doubleValue);return o<u?-1:o>u?1:o===u?0:isNaN(o)?isNaN(u)?0:-1:1}(n,e);case 3:return HV(n.timestampValue,e.timestampValue);case 4:return HV(Fb(n),Fb(e));case 5:return mn(n.stringValue,e.stringValue);case 6:return function(i,s){const o=Dg(i),u=Dg(s);return o.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),u=s.split("/");for(let h=0;h<o.length&&h<u.length;h++){const g=mn(o[h],u[h]);if(0!==g)return g}return mn(o.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=mn(bi(i.latitude),bi(s.latitude));return 0!==o?o:mn(bi(i.longitude),bi(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],u=s.values||[];for(let h=0;h<o.length&&h<u.length;++h){const g=wf(o[h],u[h]);if(g)return g}return mn(o.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===vf.mapValue&&s===vf.mapValue)return 0;if(i===vf.mapValue)return 1;if(s===vf.mapValue)return-1;const o=i.fields||{},u=Object.keys(o),h=s.fields||{},g=Object.keys(h);u.sort(),g.sort();for(let y=0;y<u.length&&y<g.length;++y){const b=mn(u[y],g[y]);if(0!==b)return b;const T=wf(o[u[y]],h[g[y]]);if(0!==T)return T}return mn(u.length,g.length)}(n.mapValue,e.mapValue);default:throw kt()}}function HV(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return mn(n,e);const t=yf(n),r=yf(e),i=mn(t.seconds,r.seconds);return 0!==i?i:mn(t.nanos,r.nanos)}function Ay(n){return VR(n)}function VR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=yf(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Dg(n.bytesValue).toBase64():"referenceValue"in n?_t.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=VR(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const u of i)o?o=!1:s+=",",s+=`${u}:${VR(r.fields[u])}`;return s+"}"}(n.mapValue):kt();var e}function Sg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function UR(n){return!!n&&"integerValue"in n}function Ub(n){return!!n&&"arrayValue"in n}function $V(n){return!!n&&"nullValue"in n}function zV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function MS(n){return!!n&&"mapValue"in n}function Bb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ig(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Bb(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bb(n.arrayValue.values[t]);return e}return Object.assign({},n)}function WV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function cG(n){return"nullValue"in n?AS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sg(_f.empty(),_t.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:kt()}function uG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sg(_f.empty(),_t.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?vf:kt()}function GV(n,e){const t=wf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function qV(n,e){const t=wf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bf{constructor(e,t){this.position=e,this.inclusive=t}}function ZV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?_t.comparator(_t.fromName(o.referenceValue),t.key):wf(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function KV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tu(n.position[t],e.position[t]))return!1;return!0}class YV{}class Hn extends YV{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new dG(e,t,r):"array-contains"===t?new pG(e,r):"in"===t?new nU(e,r):"not-in"===t?new gG(e,r):"array-contains-any"===t?new mG(e,r):new Hn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new hG(e,r):new fG(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(wf(t,this.value)):null!==t&&Tg(this.value)===Tg(t)&&this.matchesComparison(wf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return kt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class pr extends YV{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new pr(e,t)}matches(e){return My(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function My(n){return"and"===n.op}function BR(n){return"or"===n.op}function jR(n){return QV(n)&&My(n)}function QV(n){for(const e of n.filters)if(e instanceof pr)return!1;return!0}function HR(n){if(n instanceof Hn)return n.field.canonicalString()+n.op.toString()+Ay(n.value);if(jR(n))return n.filters.map(e=>HR(e)).join(",");{const e=n.filters.map(t=>HR(t)).join(",");return`${n.op}(${e})`}}function XV(n,e){return n instanceof Hn?(t=n,(r=e)instanceof Hn&&t.op===r.op&&t.field.isEqual(r.field)&&Tu(t.value,r.value)):n instanceof pr?function(t,r){return r instanceof pr&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,o)=>i&&XV(s,r.filters[o]),!0)}(n,e):void kt();var t,r}function JV(n,e){const t=n.filters.concat(e);return pr.create(t,n.op)}function eU(n){return n instanceof Hn?`${(e=n).field.canonicalString()} ${e.op} ${Ay(e.value)}`:n instanceof pr?function(e){return e.op.toString()+" {"+e.getFilters().map(eU).join(" ,")+"}"}(n):"Filter";var e}class dG extends Hn{constructor(e,t,r){super(e,t,r),this.key=_t.fromName(r.referenceValue)}matches(e){const t=_t.comparator(e.key,this.key);return this.matchesComparison(t)}}class hG extends Hn{constructor(e,t){super(e,"in",t),this.keys=tU(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fG extends Hn{constructor(e,t){super(e,"not-in",t),this.keys=tU(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tU(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>_t.fromName(r.referenceValue))}class pG extends Hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ub(t)&&Vb(t.arrayValue,this.value)}}class nU extends Hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vb(this.value.arrayValue,t)}}class gG extends Hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Vb(this.value.arrayValue,t)}}class mG extends Hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ub(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vb(this.value.arrayValue,r))}}class ky{constructor(e,t="asc"){this.field=e,this.dir=t}}function _G(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Ei{constructor(e,t){this.comparator=e,this.root=t||Ks.EMPTY}insert(e,t){return new Ei(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ks.BLACK,null,null))}remove(e){return new Ei(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ks.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kS(this.root,e,this.comparator,!1)}getReverseIterator(){return new kS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kS(this.root,e,this.comparator,!0)}}class kS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ks{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Ks.RED,this.left=i??Ks.EMPTY,this.right=s??Ks.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ks(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ks.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ks.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ks.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ks.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw kt();const e=this.left.check();if(e!==this.right.check())throw kt();return e+(this.isRed()?0:1)}}Ks.EMPTY=null,Ks.RED=!0,Ks.BLACK=!1,Ks.EMPTY=new class{constructor(){this.size=0}get key(){throw kt()}get value(){throw kt()}get color(){throw kt()}get left(){throw kt()}get right(){throw kt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ks(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wr{constructor(e){this.comparator=e,this.data=new Ei(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rU(this.data.getIterator())}getIteratorFrom(e){return new rU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wr(this.comparator);return t.data=e,t}}class rU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ry(n){return n.hasNext()?n.getNext():void 0}class ya{constructor(e){this.fields=e,e.sort(wi.comparator)}static empty(){return new ya([])}unionWith(e){let t=new wr(wi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ya(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xy(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ys{constructor(e){this.value=e}static empty(){return new Ys({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!MS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bb(t)}setAll(e){let t=wi.emptyPath(),r={},i=[];e.forEach((o,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=u.popLast()}o?r[u.lastSegment()]=Bb(o):i.push(u.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());MS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];MS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ig(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ys(Bb(this.value))}}function iU(n){const e=[];return Ig(n.fields,(t,r)=>{const i=new wi([t]);if(MS(r)){const s=iU(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ya(e)}class Br{constructor(e,t,r,i,s,o,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Br(e,0,Zt.min(),Zt.min(),Zt.min(),Ys.empty(),0)}static newFoundDocument(e,t,r,i){return new Br(e,1,t,Zt.min(),r,i,0)}static newNoDocument(e,t){return new Br(e,2,t,Zt.min(),Zt.min(),Ys.empty(),0)}static newUnknownDocument(e,t){return new Br(e,3,t,Zt.min(),Zt.min(),Ys.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ys.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ys.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Br&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Br(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yG{constructor(e,t=null,r=[],i=[],s=null,o=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=u,this.ft=null}}function $R(n,e=null,t=[],r=[],i=null,s=null,o=null){return new yG(n,e,t,r,i,s,o)}function xg(n){const e=vt(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>HR(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Nb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ay(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ay(r)).join(",")),e.ft=t}return e.ft}function jb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_G(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!KV(n.startAt,e.startAt)&&KV(n.endAt,e.endAt)}function RS(n){return _t.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function PS(n,e){return n.filters.filter(t=>t instanceof Hn&&t.field.isEqual(e))}function sU(n,e,t){let r=AS,i=!0;for(const s of PS(n,e)){let o=AS,u=!0;switch(s.op){case"<":case"<=":o=cG(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,u=!1;break;case"!=":case"not-in":o=AS}GV({value:r,inclusive:i},{value:o,inclusive:u})<0&&(r=o,i=u)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];GV({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function oU(n,e,t){let r=vf,i=!0;for(const s of PS(n,e)){let o=vf,u=!0;switch(s.op){case">=":case">":o=uG(s.value),u=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,u=!1;break;case"!=":case"not-in":o=vf}qV({value:r,inclusive:i},{value:o,inclusive:u})>0&&(r=o,i=u)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];qV({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Gd{constructor(e,t=null,r=[],i=[],s=null,o="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=u,this.endAt=h,this.dt=null,this._t=null}}function aU(n,e,t,r,i,s,o,u){return new Gd(n,e,t,r,i,s,o,u)}function Py(n){return new Gd(n)}function lU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function zR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function OS(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function WR(n){return null!==n.collectionGroup}function Ag(n){const e=vt(n);if(null===e.dt){e.dt=[];const t=OS(e),r=zR(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new ky(t)),e.dt.push(new ky(wi.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new ky(wi.keyField(),s))}}}return e.dt}function Bo(n){const e=vt(n);if(!e._t)if("F"===e.limitType)e._t=$R(e.path,e.collectionGroup,Ag(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Ag(e))t.push(new ky(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new bf(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new bf(e.startAt.position,e.startAt.inclusive):null;e._t=$R(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function GR(n,e){e.getFirstInequalityField(),OS(n);const t=n.filters.concat([e]);return new Gd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function NS(n,e,t){return new Gd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hb(n,e){return jb(Bo(n),Bo(e))&&n.limitType===e.limitType}function cU(n){return`${xg(Bo(n))}|lt:${n.limitType}`}function qR(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>eU(r)).join(", ")}]`),Nb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ay(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ay(r)).join(",")),`Target(${t})`}(Bo(n))}; limitType=${n.limitType})`}function ZR(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):_t.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Ag(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,o){const u=ZV(i,s,o);return i.inclusive?u<=0:u<0}(t.startAt,Ag(t),r)||t.endAt&&!function(i,s,o){const u=ZV(i,s,o);return i.inclusive?u>=0:u>0}(t.endAt,Ag(t),r)));var t,r}function uU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dU(n){return(e,t)=>{let r=!1;for(const i of Ag(n)){const s=vG(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function vG(n,e,t){const r=n.field.isKeyField()?_t.comparator(e.key,t.key):function(i,s,o){const u=s.data.field(i),h=o.data.field(i);return null!==u&&null!==h?wf(u,h):kt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return kt()}}function hU(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lb(e)?"-0":e}}function fU(n){return{integerValue:""+n}}function pU(n,e){return BV(e)?fU(e):hU(n,e)}class LS{constructor(){this._=void 0}}function wG(n,e,t){return n instanceof Oy?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Mg?mU(n,e):n instanceof kg?_U(n,e):function(r,i){const s=gU(r,i),o=yU(s)+yU(r.gt);return UR(s)&&UR(r.gt)?fU(o):hU(r.yt,o)}(n,e)}function bG(n,e,t){return n instanceof Mg?mU(n,e):n instanceof kg?_U(n,e):t}function gU(n,e){return n instanceof Ny?UR(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Oy extends LS{}class Mg extends LS{constructor(e){super(),this.elements=e}}function mU(n,e){const t=vU(e);for(const r of n.elements)t.some(i=>Tu(i,r))||t.push(r);return{arrayValue:{values:t}}}class kg extends LS{constructor(e){super(),this.elements=e}}function _U(n,e){let t=vU(e);for(const r of n.elements)t=t.filter(i=>!Tu(i,r));return{arrayValue:{values:t}}}class Ny extends LS{constructor(e,t){super(),this.yt=e,this.gt=t}}function yU(n){return bi(n.integerValue||n.doubleValue)}function vU(n){return Ub(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $b{constructor(e,t){this.field=e,this.transform=t}}class CG{constructor(e,t){this.version=e,this.transformResults=t}}class ri{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ri}static exists(e){return new ri(void 0,e)}static updateTime(e){return new ri(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function FS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class VS{}function wU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Fy(n.key,ri.none()):new Ly(n.key,n.data,ri.none());{const t=n.data,r=Ys.empty();let i=new wr(wi.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new qd(n.key,r,new ya(i.toArray()),ri.none())}}function IG(n,e,t){n instanceof Ly?function(r,i,s){const o=r.value.clone(),u=CU(r.fieldTransforms,i,s.transformResults);o.setAll(u),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof qd?function(r,i,s){if(!FS(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=CU(r.fieldTransforms,i,s.transformResults),u=i.data;u.setAll(EU(r)),u.setAll(o),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zb(n,e,t,r){return n instanceof Ly?function(i,s,o,u){if(!FS(i.precondition,s))return o;const h=i.value.clone(),g=IU(i.fieldTransforms,u,s);return h.setAll(g),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof qd?function(i,s,o,u){if(!FS(i.precondition,s))return o;const h=IU(i.fieldTransforms,u,s),g=s.data;return g.setAll(EU(i)),g.setAll(h),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(y=>y.field))}(n,e,t,r):(o=t,FS(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function DG(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=gU(r.transform,i||null);null!=s&&(null===t&&(t=Ys.empty()),t.set(r.field,s))}return t||null}function bU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&xy(t,r,(i,s)=>function EG(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Mg&&r instanceof Mg||t instanceof kg&&r instanceof kg?xy(t.elements,r.elements,Tu):t instanceof Ny&&r instanceof Ny?Tu(t.gt,r.gt):t instanceof Oy&&r instanceof Oy);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ly extends VS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qd extends VS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function EU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function CU(n,e,t){const r=new Map;zt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,u=e.data.field(s.field);r.set(s.field,bG(o,u,t[i]))}return r}function IU(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,wG(s,o,e))}return r}class Fy extends VS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KR extends VS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class TG{constructor(e){this.count=e}}var Xi,Yn;function DU(n){switch(n){default:return kt();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0}}function TU(n){if(void 0===n)return Fi("GRPC error has no .code"),Pe.UNKNOWN;switch(n){case Xi.OK:return Pe.OK;case Xi.CANCELLED:return Pe.CANCELLED;case Xi.UNKNOWN:return Pe.UNKNOWN;case Xi.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case Xi.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case Xi.INTERNAL:return Pe.INTERNAL;case Xi.UNAVAILABLE:return Pe.UNAVAILABLE;case Xi.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case Xi.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case Xi.NOT_FOUND:return Pe.NOT_FOUND;case Xi.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case Xi.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case Xi.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case Xi.ABORTED:return Pe.ABORTED;case Xi.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case Xi.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case Xi.DATA_LOSS:return Pe.DATA_LOSS;default:return kt()}}(Yn=Xi||(Xi={}))[Yn.OK=0]="OK",Yn[Yn.CANCELLED=1]="CANCELLED",Yn[Yn.UNKNOWN=2]="UNKNOWN",Yn[Yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yn[Yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yn[Yn.NOT_FOUND=5]="NOT_FOUND",Yn[Yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yn[Yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yn[Yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yn[Yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yn[Yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yn[Yn.ABORTED=10]="ABORTED",Yn[Yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yn[Yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yn[Yn.INTERNAL=13]="INTERNAL",Yn[Yn.UNAVAILABLE=14]="UNAVAILABLE",Yn[Yn.DATA_LOSS=15]="DATA_LOSS";class Ef{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ig(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return UV(this.inner)}size(){return this.innerSize}}const SG=new Ei(_t.comparator);function va(){return SG}const SU=new Ei(_t.comparator);function Wb(...n){let e=SU;for(const t of n)e=e.insert(t.key,t);return e}function xU(n){let e=SU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Su(){return Gb()}function AU(){return Gb()}function Gb(){return new Ef(n=>n.toString(),(n,e)=>n.isEqual(e))}const xG=new Ei(_t.comparator),AG=new wr(_t.comparator);function Sn(...n){let e=AG;for(const t of n)e=e.add(t);return e}const MG=new wr(mn);function US(){return MG}class qb{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Zb.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qb(Zt.min(),i,US(),va(),Sn())}}class Zb{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Zb(r,t,Sn(),Sn(),Sn())}}class BS{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class MU{constructor(e,t){this.targetId=e,this.Et=t}}class kU{constructor(e,t,r=ds.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class RU{constructor(){this.At=0,this.Rt=OU(),this.bt=ds.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Sn(),t=Sn(),r=Sn();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:kt()}}),new Zb(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=OU()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class kG{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=va(),this.qt=PU(),this.Ut=new wr(mn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:kt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const s=i.target;if(RS(s))if(0===r){const o=new _t(s.path);this.Qt(t,o,Br.newNoDocument(o,Zt.min()))}else zt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((s,o)=>{const u=this.Yt(o);if(u){if(s.current&&RS(u.target)){const h=new _t(u.target.path);null!==this.Lt.get(h)||this.te(o,h)||this.Qt(o,h,Br.newNoDocument(h,e))}s.St&&(t.set(o,s.Ct()),s.xt())}});let r=Sn();this.qt.forEach((s,o)=>{let u=!0;o.forEachWhile(h=>{const g=this.Yt(h);return!g||2===g.purpose||(u=!1,!1)}),u&&(r=r.add(s))}),this.Lt.forEach((s,o)=>o.setReadTime(e));const i=new qb(e,t,this.Ut,this.Lt,r);return this.Lt=va(),this.qt=PU(),this.Ut=new wr(mn),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new RU,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new wr(mn),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||at("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new RU),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function PU(){return new Ei(_t.comparator)}function OU(){return new Ei(_t.comparator)}const RG={asc:"ASCENDING",desc:"DESCENDING"},PG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OG={and:"AND",or:"OR"};class NG{constructor(e,t){this.databaseId=e,this.wt=t}}function Vy(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NU(n,e){return n.wt?e.toBase64():e.toUint8Array()}function LG(n,e){return Vy(n,e.toTimestamp())}function Vi(n){return zt(!!n),Zt.fromTimestamp(function(e){const t=yf(e);return new ni(t.seconds,t.nanos)}(n))}function YR(n,e){return(t=n,new Kn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function LU(n){const e=Kn.fromString(n);return zt(WU(e)),e}function Kb(n,e){return YR(n.databaseId,e.path)}function xu(n,e){const t=LU(e);if(t.get(1)!==n.databaseId.projectId)throw new et(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new et(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _t(VU(t))}function QR(n,e){return YR(n.databaseId,e)}function FU(n){const e=LU(n);return 4===e.length?Kn.emptyPath():VU(e)}function Yb(n){return new Kn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VU(n){return zt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function UU(n,e,t){return{name:Kb(n,e),fields:t.value.mapValue.fields}}function BU(n,e,t){const r=xu(n,e.name),i=Vi(e.updateTime),s=e.createTime?Vi(e.createTime):Zt.min(),o=new Ys({mapValue:{fields:e.fields}}),u=Br.newFoundDocument(r,i,s,o);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Qb(n,e){let t;if(e instanceof Ly)t={update:UU(n,e.key,e.value)};else if(e instanceof Fy)t={delete:Kb(n,e.key)};else if(e instanceof qd)t={update:UU(n,e.key,e.data),updateMask:zG(e.fieldMask)};else{if(!(e instanceof KR))return kt();t={verify:Kb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Oy)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Mg)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof kg)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ny)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw kt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:LG(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:kt()),t;var i}function XR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ri.updateTime(Vi(i.updateTime)):void 0!==i.exists?ri.exists(i.exists):ri.none():ri.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let u=null;"setToServerValue"in o?(zt("REQUEST_TIME"===o.setToServerValue),u=new Oy):"appendMissingElements"in o?u=new Mg(o.appendMissingElements.values||[]):"removeAllFromArray"in o?u=new kg(o.removeAllFromArray.values||[]):"increment"in o?u=new Ny(s,o.increment):kt();const h=wi.fromServerFormat(o.fieldPath);return new $b(h,u)}(n,i)):[];var i;if(e.update){const i=xu(n,e.update.name),s=new Ys({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new ya((e.updateMask.fieldPaths||[]).map(g=>wi.fromServerFormat(g)));return new qd(i,s,o,t,r)}return new Ly(i,s,t,r)}if(e.delete){const i=xu(n,e.delete);return new Fy(i,t)}if(e.verify){const i=xu(n,e.verify);return new KR(i,t)}return kt()}function jU(n,e){return{documents:[QR(n,e.path)]}}function JR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=QR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=QR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(h){if(0!==h.length)return zU(pr.create(h,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(h){if(0!==h.length)return h.map(g=>{return{field:Uy((y=g).field),direction:jG(y.dir)};var y})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=(g=e.limit,n.wt||Nb(g)?g:{value:g});var g,u,h;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(t.structuredQuery.endAt={before:!(h=e.endAt).inclusive,values:h.position}),t}function HU(n){let e=FU(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){zt(1===r);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let s=[];t.where&&(s=function(y){const b=$U(y);return b instanceof pr&&jR(b)?b.getFilters():[b]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new ky(By((b=y).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let u=null;t.limit&&(u=function(y){let b;return b="object"==typeof y?y.value:y,Nb(b)?null:b}(t.limit));let h=null;var y;t.startAt&&(h=new bf((y=t.startAt).values||[],!!y.before));let g=null;return t.endAt&&(g=function(y){return new bf(y.values||[],!y.before)}(t.endAt)),aU(e,i,o,s,u,"F",h,g)}function $U(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=By(e.unaryFilter.field);return Hn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=By(e.unaryFilter.field);return Hn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=By(e.unaryFilter.field);return Hn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=By(e.unaryFilter.field);return Hn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return kt()}}(n):void 0!==n.fieldFilter?Hn.create(By((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return kt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return pr.create(e.compositeFilter.filters.map(t=>$U(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return kt()}}(e.compositeFilter.op))}(n):kt();var e}function jG(n){return RG[n]}function HG(n){return PG[n]}function $G(n){return OG[n]}function Uy(n){return{fieldPath:n.canonicalString()}}function By(n){return wi.fromServerFormat(n.fieldPath)}function zU(n){return n instanceof Hn?function(e){if("=="===e.op){if(zV(e.value))return{unaryFilter:{field:Uy(e.field),op:"IS_NAN"}};if($V(e.value))return{unaryFilter:{field:Uy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zV(e.value))return{unaryFilter:{field:Uy(e.field),op:"IS_NOT_NAN"}};if($V(e.value))return{unaryFilter:{field:Uy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uy(e.field),op:HG(e.op),value:e.value}}}(n):n instanceof pr?function(e){const t=e.getFilters().map(r=>zU(r));return 1===t.length?t[0]:{compositeFilter:{op:$G(e.op),filters:t}}}(n):kt()}function zG(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function WU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function jo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=GU(e)),e=WG(n.get(t),e);return GU(e)}function WG(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function GU(n){return n+"\x01\x01"}function Au(n){const e=n.length;if(zt(e>=2),2===e)return zt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Kn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&kt(),n.charAt(o+1)){case"\x01":const u=n.substring(s,o);let h;0===i.length?h=u:(i+=u,h=i,i=""),r.push(h);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:kt()}s=o+2}return new Kn(r)}const qU=["userId","batchId"];function jS(n,e){return[n,jo(e)]}function ZU(n,e,t){return[n,jo(e),t]}const GG={},qG=["prefixPath","collectionGroup","readTime","documentId"],ZG=["prefixPath","collectionGroup","documentId"],KG=["collectionGroup","readTime","prefixPath","documentId"],YG=["canonicalId","targetId"],QG=["targetId","path"],XG=["path","targetId"],JG=["collectionId","parent"],e6=["indexId","uid"],t6=["uid","sequenceNumber"],n6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],r6=["indexId","uid","orderedDocumentKey"],i6=["userId","collectionPath","documentId"],s6=["userId","collectionPath","largestBatchId"],o6=["userId","collectionGroup","largestBatchId"],KU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],a6=[...KU,"documentOverlays"],YU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],QU=YU,l6=[...QU,"indexConfiguration","indexState","indexEntries"];class eP extends LV{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function xs(n,e){const t=vt(n);return Ac.M(t.se,e)}class tP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&IG(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zb(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zb(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=AU();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let u=this.applyToLocalView(o,s.mutatedFields);u=t.has(i.key)?null:u;const h=wU(o,u);null!==h&&r.set(i.key,h),o.isValidDocument()||o.convertToNoDocument(Zt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Sn())}isEqual(e){return this.batchId===e.batchId&&xy(this.mutations,e.mutations,(t,r)=>bU(t,r))&&xy(this.baseMutations,e.baseMutations,(t,r)=>bU(t,r))}}class nP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){zt(e.mutations.length===r.length);let i=xG;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new nP(e,t,r,i)}}class rP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Cf{constructor(e,t,r,i,s=Zt.min(),o=Zt.min(),u=ds.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}withSequenceNumber(e){return new Cf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Cf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Cf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class XU{constructor(e){this.ie=e}}function JU(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:HS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Kb(i=n.ie,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Vy(i,s.version.toTimestamp()),createTime:Vy(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Rg(e.version)};else{if(!e.isUnknownDocument())return kt();r.unknownDocument={path:t.path.toArray(),version:Rg(e.version)}}var i,s;return r}function HS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Rg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pg(n){const e=new ni(n.seconds,n.nanoseconds);return Zt.fromTimestamp(e)}function Og(n,e){const t=(e.baseMutations||[]).map(s=>XR(n.ie,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>XR(n.ie,s)),i=ni.fromMillis(e.localWriteTimeMs);return new tP(e.batchId,i,t,r)}function Xb(n){const e=Pg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Pg(n.lastLimboFreeSnapshotVersion):Zt.min();let r;var i;return void 0!==n.query.documents?(zt(1===(i=n.query).documents.length),r=Bo(Py(FU(i.documents[0])))):r=Bo(HU(n.query)),new Cf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ds.fromBase64String(n.resumeToken))}function eB(n,e){const t=Rg(e.snapshotVersion),r=Rg(e.lastLimboFreeSnapshotVersion);let i;i=RS(e.target)?jU(n.ie,e.target):JR(n.ie,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xg(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function iP(n){const e=HU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?NS(e,e.limit,"L"):e}function sP(n,e){return new rP(e.largestBatchId,XR(n.ie,e.overlayMutation))}function tB(n,e){const t=e.path.lastSegment();return[n,jo(e.path.popLast()),t]}function nB(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Rg(r.readTime),documentKey:jo(r.documentKey.path),largestBatchId:r.largestBatchId}}class u6{getBundleMetadata(e,t){return rB(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Pg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return rB(e).put({bundleId:(r=t).id,createTime:Rg(Vi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return iB(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:iP(i.bundledQuery),readTime:Pg(i.readTime)};var i})}saveNamedQuery(e,t){return iB(e).put({name:(r=t).name,readTime:Rg(Vi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function rB(n){return xs(n,"bundles")}function iB(n){return xs(n,"namedQueries")}class $S{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new $S(e,t.uid||"")}getOverlay(e,t){return Jb(e).get(tB(this.userId,t)).next(r=>r?sP(this.yt,r):null)}getOverlays(e,t){const r=Su();return Ae.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const u=new rP(t,o);i.push(this.oe(e,u))}),Ae.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(jo(o.getCollectionPath())));const s=[];return i.forEach(o=>{const u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Jb(e).Y("collectionPathOverlayIndex",u))}),Ae.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Su(),s=jo(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Jb(e).W("collectionPathOverlayIndex",o).next(u=>{for(const h of u){const g=sP(this.yt,h);i.set(g.getKey(),g)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Su();let o;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jb(e).Z({index:"collectionGroupOverlayIndex",range:u},(h,g,y)=>{const b=sP(this.yt,g);s.size()<i||b.largestBatchId===o?(s.set(b.getKey(),b),o=b.largestBatchId):y.done()}).next(()=>s)}oe(e,t){return Jb(e).put(function(r,i,s){const[o,u,h]=tB(i,s.mutation.key);return{userId:i,collectionPath:u,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Qb(r.ie,s.mutation)}}(this.yt,this.userId,t))}}function Jb(n){return xs(n,"documentOverlays")}class Ng{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(bi(e.integerValue));else if("doubleValue"in e){const r=bi(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Lb(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Dg(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?WV(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):kt()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),_t.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function d6(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function sB(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=d6(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Ng.Ie=new Ng;class h6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=sB(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=sB(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class f6{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class p6{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class eE{constructor(){this.$e=new h6,this.Be=new f6(this.$e),this.Le=new p6(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Lg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Lg(this.indexId,this.documentKey,this.arrayValue,r)}}function If(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=oB(n.arrayValue,e.arrayValue),0!==t?t:(t=oB(n.directionalValue,e.directionalValue),0!==t?t:_t.comparator(n.documentKey,e.documentKey)))}function oB(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class g6{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){zt(e.collectionGroup===this.collectionId);const t=PR(e);if(void 0!==t&&!this.We(t))return!1;const r=Eg(e);let i=0,s=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const o=r[i];if(!this.ze(this.Qe,o)||!this.He(this.Ke[s++],o))return!1;++i}for(;i<r.length;++i)if(s>=this.Ke.length||!this.He(this.Ke[s++],r[i]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function aB(n){var e,t;if(zt(n instanceof Hn||n instanceof pr),n instanceof Hn){if(n instanceof nU){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Hn.create(n.field,"==",s)))||[];return pr.create(i,"or")}return n}const r=n.filters.map(i=>aB(i));return pr.create(r,n.op)}function m6(n){if(0===n.getFilters().length)return[];const e=lP(aB(n));return zt(lB(e)),oP(e)||aP(e)?[e]:e.getFilters()}function oP(n){return n instanceof Hn}function aP(n){return n instanceof pr&&jR(n)}function lB(n){return oP(n)||aP(n)||function(e){if(e instanceof pr&&BR(e)){for(const t of e.getFilters())if(!oP(t)&&!aP(t))return!1;return!0}return!1}(n)}function lP(n){if(zt(n instanceof Hn||n instanceof pr),n instanceof Hn)return n;if(1===n.filters.length)return lP(n.filters[0]);const e=n.filters.map(r=>lP(r));let t=pr.create(e,n.op);return t=zS(t),lB(t)?t:(zt(t instanceof pr),zt(My(t)),zt(t.filters.length>1),t.filters.reduce((r,i)=>cP(r,i)))}function cP(n,e){let t;return zt(n instanceof Hn||n instanceof pr),zt(e instanceof Hn||e instanceof pr),t=n instanceof Hn?e instanceof Hn?pr.create([n,e],"and"):cB(n,e):e instanceof Hn?cB(e,n):function(r,i){if(zt(r.filters.length>0&&i.filters.length>0),My(r)&&My(i))return JV(r,i.getFilters());const s=BR(r)?r:i,o=BR(r)?i:r,u=s.filters.map(h=>cP(h,o));return pr.create(u,"or")}(n,e),zS(t)}function cB(n,e){if(My(e))return JV(e,n.getFilters());{const t=e.filters.map(r=>cP(n,r));return pr.create(t,"or")}}function zS(n){if(zt(n instanceof Hn||n instanceof pr),n instanceof Hn)return n;const e=n.getFilters();if(1===e.length)return zS(e[0]);if(QV(n))return n;const t=e.map(i=>zS(i)),r=[];return t.forEach(i=>{i instanceof Hn?r.push(i):i instanceof pr&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:pr.create(r,n.op)}class _6{constructor(){this.Je=new uP}addToCollectionParentIndex(e,t){return this.Je.add(t),Ae.resolve()}getCollectionParents(e,t){return Ae.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return Ae.resolve()}deleteFieldIndex(e,t){return Ae.resolve()}getDocumentsMatchingTarget(e,t){return Ae.resolve(null)}getIndexType(e,t){return Ae.resolve(0)}getFieldIndexes(e,t){return Ae.resolve([])}getNextCollectionGroupToUpdate(e){return Ae.resolve(null)}getMinOffset(e,t){return Ae.resolve(qa.min())}getMinOffsetFromCollectionGroup(e,t){return Ae.resolve(qa.min())}updateCollectionGroup(e,t,r){return Ae.resolve()}updateIndexEntries(e,t){return Ae.resolve()}}class uP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wr(Kn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wr(Kn.comparator)).toArray()}}const WS=new Uint8Array(0);class y6{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new uP,this.Xe=new Ef(r=>xg(r),(r,i)=>jb(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const s={collectionId:r,parent:jo(i)};return uB(e).put(s)}return Ae.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[RV(t),""],!1,!0);return uB(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Au(o.parent))}return r})}addFieldIndex(e,t){const r=GS(e),i={indexId:(o=t).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var o;delete i.indexId;const s=r.add(i);if(t.indexState){const o=nE(e);return s.next(u=>{o.put(nB(u,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=GS(e),i=nE(e),s=tE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=tE(e);let i=!0;const s=new Map;return Ae.forEach(this.Ze(t),o=>this.tn(e,o).next(u=>{i&&(i=!!u),s.set(o,u)})).next(()=>{if(i){let o=Sn();const u=[];return Ae.forEach(s,(h,g)=>{var y;at("IndexedDbIndexManager",`Using index ${y=h,`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(ve=>`${ve.fieldPath}:${ve.kind}`).join(",")}`} to execute ${xg(t)}`);const b=function(ve,Ie){const Ce=PR(Ie);if(void 0===Ce)return null;for(const Ve of PS(ve,Ce.fieldPath))switch(Ve.op){case"array-contains-any":return Ve.value.arrayValue.values||[];case"array-contains":return[Ve.value]}return null}(g,h),T=function(ve,Ie){const Ce=new Map;for(const Ve of Eg(Ie))for(const rt of PS(ve,Ve.fieldPath))switch(rt.op){case"==":case"in":Ce.set(Ve.fieldPath.canonicalString(),rt.value);break;case"not-in":case"!=":return Ce.set(Ve.fieldPath.canonicalString(),rt.value),Array.from(Ce.values())}return null}(g,h),k=function(ve,Ie){const Ce=[];let Ve=!0;for(const rt of Eg(Ie)){const gt=0===rt.kind?sU(ve,rt.fieldPath,ve.startAt):oU(ve,rt.fieldPath,ve.startAt);Ce.push(gt.value),Ve&&(Ve=gt.inclusive)}return new bf(Ce,Ve)}(g,h),P=function(ve,Ie){const Ce=[];let Ve=!0;for(const rt of Eg(Ie)){const gt=0===rt.kind?oU(ve,rt.fieldPath,ve.endAt):sU(ve,rt.fieldPath,ve.endAt);Ce.push(gt.value),Ve&&(Ve=gt.inclusive)}return new bf(Ce,Ve)}(g,h),B=this.en(h,g,k),H=this.en(h,g,P),ne=this.nn(h,g,T),ce=this.sn(h.indexId,b,B,k.inclusive,H,P.inclusive,ne);return Ae.forEach(ce,ve=>r.J(ve,t.limit).next(Ie=>{Ie.forEach(Ce=>{const Ve=_t.fromSegments(Ce.documentKey);o.has(Ve)||(o=o.add(Ve),u.push(Ve))})}))}).next(()=>u)}return Ae.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:m6(pr.create(e.filters,"and")).map(r=>$R(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,s,o,u){const h=(null!=t?t.length:1)*Math.max(r.length,s.length),g=h/(null!=t?t.length:1),y=[];for(let b=0;b<h;++b){const T=t?this.rn(t[b/g]):WS,k=this.on(e,T,r[b%g],i),P=this.un(e,T,s[b%g],o),B=u.map(H=>this.on(e,T,H,!0));y.push(...this.createRange(k,P,B))}return y}on(e,t,r,i){const s=new Lg(e,_t.empty(),t,r);return i?s:s.Ue()}un(e,t,r,i){const s=new Lg(e,_t.empty(),t,r);return i?s.Ue():s}tn(e,t){const r=new g6(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const u of s)r.je(u)&&(!o||u.fields.length>o.fields.length)&&(o=u);return o})}getIndexType(e,t){let r=2;const i=this.Ze(t);return Ae.forEach(i,s=>this.tn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let h=new wr(wi.comparator),g=!1;for(const y of u.filters)for(const b of y.getFlattenedFilters())b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?g=!0:h=h.add(b.field));for(const y of u.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(g?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new eE;for(const i of Eg(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.qe(i.kind);Ng.Ie.ue(s,o)}return r.Fe()}rn(e){const t=new eE;return Ng.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new eE;return Ng.Ie.ue(Sg(this.databaseId,t),r.qe(function(i){const s=Eg(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new eE);let s=0;for(const o of Eg(e)){const u=r[s++];for(const h of i)if(this.hn(t,o.fieldPath)&&Ub(u))i=this.ln(i,o,u);else{const g=h.qe(o.kind);Ng.Ie.ue(u,g)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const u of i){const h=new eE;h.seed(u.Fe()),Ng.Ie.ue(o,h.qe(t.kind)),s.push(h)}return s}hn(e,t){return!!e.filters.find(r=>r instanceof Hn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=GS(e),i=nE(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const o=[];return Ae.forEach(s,u=>i.get([u.indexId,this.uid]).next(h=>{o.push(function(g,y){const b=y?new Pb(y.sequenceNumber,new qa(Pg(y.readTime),new _t(Au(y.documentKey)),y.largestBatchId)):Pb.empty(),T=g.fields.map(([k,P])=>new SS(wi.fromServerFormat(k),P));return new TS(g.indexId,g.collectionGroup,T,b)}(u,h))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:mn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=GS(e),s=nE(e);return this.dn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(u=>Ae.forEach(u,h=>s.put(nB(h.indexId,this.user,o,r)))))}updateIndexEntries(e,t){const r=new Map;return Ae.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?Ae.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(u=>(r.set(i.collectionGroup,u),Ae.forEach(u,h=>this._n(e,i,h).next(g=>{const y=this.wn(s,h);return g.isEqual(y)?Ae.resolve():this.mn(e,s,h,g,y)}))))})}gn(e,t,r,i){return tE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return tE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=tE(e);let s=new wr(If);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(o,u)=>{s=s.add(new Lg(r.indexId,t,u.arrayValue,u.directionalValue))}).next(()=>s)}wn(e,t){let r=new wr(If);const i=this.cn(t,e);if(null==i)return r;const s=PR(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Ub(o))for(const u of o.arrayValue.values||[])r=r.add(new Lg(t.indexId,e.key,this.rn(u),i))}else r=r.add(new Lg(t.indexId,e.key,WS,i));return r}mn(e,t,r,i,s){at("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,h,g,y,b){const T=u.getIterator(),k=h.getIterator();let P=Ry(T),B=Ry(k);for(;P||B;){let H=!1,ne=!1;if(P&&B){const ce=g(P,B);ce<0?ne=!0:ce>0&&(H=!0)}else null!=P?ne=!0:H=!0;H?(y(B),B=Ry(k)):ne?(b(P),P=Ry(T)):(P=Ry(T),B=Ry(k))}}(i,s,If,u=>{o.push(this.gn(e,t,r,u))},u=>{o.push(this.yn(e,t,r,u))}),Ae.waitFor(o)}dn(e){let t=1;return nE(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,u)=>If(o,u)).filter((o,u,h)=>!u||0!==If(o,h[u-1]));const i=[];i.push(e);for(const o of r){const u=If(o,e),h=If(o,t);if(0===u)i[0]=e.Ue();else if(u>0&&h<0)i.push(o),i.push(o.Ue());else if(h>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.pn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,WS,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,WS,[]]))}return s}pn(e,t){return If(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dB)}getMinOffset(e,t){return Ae.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||kt())).next(dB)}}function uB(n){return xs(n,"collectionParents")}function tE(n){return xs(n,"indexEntries")}function GS(n){return xs(n,"indexConfiguration")}function nE(n){return xs(n,"indexState")}function dB(n){zt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;OR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new qa(e.readTime,e.documentKey,t)}const hB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wa{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new wa(e,wa.DEFAULT_COLLECTION_PERCENTILE,wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fB(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let u=0;const h=r.Z({range:o},(y,b,T)=>(u++,T.delete()));s.push(h.next(()=>{zt(1===u)}));const g=[];for(const y of t.mutations){const b=ZU(e,y.key.path,t.batchId);s.push(i.delete(b)),g.push(y.key)}return Ae.waitFor(s).next(()=>g)}function qS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw kt();e=n.noDocument}return JSON.stringify(e).length}wa.DEFAULT_COLLECTION_PERCENTILE=10,wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wa.DEFAULT=new wa(41943040,wa.DEFAULT_COLLECTION_PERCENTILE,wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wa.DISABLED=new wa(-1,0,0);class ZS{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){zt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new ZS(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Df(e).Z({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=jy(e),o=Df(e);return o.add({}).next(u=>{zt("number"==typeof u);const h=new tP(u,t,r,i),g=function(T,k,P){const B=P.baseMutations.map(ne=>Qb(T.ie,ne)),H=P.mutations.map(ne=>Qb(T.ie,ne));return{userId:k,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:B,mutations:H}}(this.yt,this.userId,h),y=[];let b=new wr((T,k)=>mn(T.canonicalString(),k.canonicalString()));for(const T of i){const k=ZU(this.userId,T.key.path,u);b=b.add(T.key.path.popLast()),y.push(o.put(g)),y.push(s.put(k,GG))}return b.forEach(T=>{y.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.In[u]=h.keys()}),Ae.waitFor(y).next(()=>h)})}lookupMutationBatch(e,t){return Df(e).get(t).next(r=>r?(zt(r.userId===this.userId),Og(this.yt,r)):null)}Tn(e,t){return this.In[t]?Ae.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Df(e).Z({index:"userMutationsIndex",range:i},(o,u,h)=>{u.userId===this.userId&&(zt(u.batchId>=r),s=Og(this.yt,u)),h.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Df(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Df(e).W("userMutationsIndex",t).next(r=>r.map(i=>Og(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=jS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return jy(e).Z({range:i},(o,u,h)=>{const[g,y,b]=o,T=Au(y);if(g===this.userId&&t.path.isEqual(T))return Df(e).get(b).next(k=>{if(!k)throw kt();zt(k.userId===this.userId),s.push(Og(this.yt,k))});h.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wr(mn);const i=[];return t.forEach(s=>{const o=jS(this.userId,s.path),u=IDBKeyRange.lowerBound(o),h=jy(e).Z({range:u},(g,y,b)=>{const[T,k,P]=g,B=Au(k);T===this.userId&&s.path.isEqual(B)?r=r.add(P):b.done()});i.push(h)}),Ae.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=jS(this.userId,r),o=IDBKeyRange.lowerBound(s);let u=new wr(mn);return jy(e).Z({range:o},(h,g,y)=>{const[b,T,k]=h,P=Au(T);b===this.userId&&r.isPrefixOf(P)?P.length===i&&(u=u.add(k)):y.done()}).next(()=>this.En(e,u))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Df(e).get(s).next(o=>{if(null===o)throw kt();zt(o.userId===this.userId),r.push(Og(this.yt,o))}))}),Ae.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fB(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Ae.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return jy(e).Z({range:r},(s,o,u)=>{if(s[0]===this.userId){const h=Au(s[1]);i.push(h)}else u.done()}).next(()=>{zt(0===i.length)})})}containsKey(e,t){return pB(e,this.userId,t)}Rn(e){return gB(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pB(n,e,t){const r=jS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return jy(n).Z({range:s,X:!0},(u,h,g)=>{const[y,b,T]=u;y===e&&b===i&&(o=!0),g.done()}).next(()=>o)}function Df(n){return xs(n,"mutations")}function jy(n){return xs(n,"documentMutations")}function gB(n){return xs(n,"mutationQueues")}class Fg{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Fg(0)}static vn(){return new Fg(-1)}}class v6{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Fg(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Zt.fromTimestamp(new ni(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hy(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(zt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Hy(e).Z((o,u)=>{const h=Xb(u);h.sequenceNumber<=t&&null===r.get(h.targetId)&&(i++,s.push(this.removeTargetData(e,h)))}).next(()=>Ae.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Hy(e).Z((r,i)=>{const s=Xb(i);t(s)})}Vn(e){return mB(e).get("targetGlobalKey").next(t=>(zt(null!==t),t))}Sn(e,t){return mB(e).put("targetGlobalKey",t)}Dn(e,t){return Hy(e).put(eB(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=xg(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Hy(e).Z({range:i,index:"queryTargetsIndex"},(o,u,h)=>{const g=Xb(u);jb(t,g.target)&&(s=g,h.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Tf(e);return t.forEach(o=>{const u=jo(o.path);i.push(s.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,o))}),Ae.waitFor(i)}removeMatchingKeys(e,t,r){const i=Tf(e);return Ae.forEach(t,s=>{const o=jo(s.path);return Ae.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Tf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Tf(e);let s=Sn();return i.Z({range:r,X:!0},(o,u,h)=>{const g=Au(o[1]),y=new _t(g);s=s.add(y)}).next(()=>s)}containsKey(e,t){const r=jo(t.path),i=IDBKeyRange.bound([r],[RV(r)],!1,!0);let s=0;return Tf(e).Z({index:"documentTargetsIndex",X:!0,range:i},([o,u],h,g)=>{0!==o&&(s++,g.done())}).next(()=>s>0)}ne(e,t){return Hy(e).get(t).next(r=>r?Xb(r):null)}}function Hy(n){return xs(n,"targets")}function mB(n){return xs(n,"targetGlobal")}function Tf(n){return xs(n,"targetDocuments")}function _B([n,e],[t,r]){const i=mn(n,t);return 0===i?mn(e,r):i}class w6{constructor(e){this.xn=e,this.buffer=new wr(_B),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_B(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class b6{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;at("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,he.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){mf(r)?at("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield gf(r)}yield t.Fn(3e5)}))}}class E6{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ae.resolve(Za.at);const r=new w6(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(hB)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hB):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,s,o,u,h,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,o=Date.now(),this.nthSequenceNumber(e,i))).next(b=>(r=b,u=Date.now(),this.removeTargets(e,r,t))).next(b=>(s=b,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(b=>(g=Date.now(),kR()<=Ri.in.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-y}ms\n\tDetermined least recently used ${i} in `+(u-o)+`ms\n\tRemoved ${s} targets in `+(h-u)+`ms\n\tRemoved ${b} documents in `+(g-h)+`ms\nTotal Duration: ${g-y}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:b})))}}class C6{constructor(e,t){this.db=e,this.garbageCollector=new E6(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return KS(e,r)}removeReference(e,t,r){return KS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return KS(e,t)}Gn(e,t){return function(r,i){let s=!1;return gB(r).tt(o=>pB(r,o,i).next(u=>(u&&(s=!0),Ae.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(o,u)=>{if(u<=t){const h=this.Gn(e,o).next(g=>{if(!g)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Zt.min()),Tf(e).delete([0,jo(o.path)])))});i.push(h)}}).next(()=>Ae.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return KS(e,t)}Kn(e,t){const r=Tf(e);let i,s=Za.at;return r.Z({index:"documentTargetsIndex"},([o,u],{path:h,sequenceNumber:g})=>{0===o?(s!==Za.at&&t(new _t(Au(i)),s),s=g,i=h):s=Za.at}).next(()=>{s!==Za.at&&t(new _t(Au(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function KS(n,e){return Tf(n).put((r=n.currentSequenceNumber,{targetId:0,path:jo(e.path),sequenceNumber:r}));var r}class yB{constructor(){this.changes=new Ef(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Br.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class I6{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Vg(e).put(r)}removeEntry(e,t,r){return Vg(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],HS(s),o[o.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Br.newInvalidDocument(t);return Vg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rE(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:Br.newInvalidDocument(t)};return Vg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rE(t))},(i,s)=>{r={document:this.jn(t,s),size:qS(s)}}).next(()=>r)}getEntries(e,t){let r=va();return this.zn(e,t,(i,s)=>{const o=this.jn(i,s);r=r.insert(i,o)}).next(()=>r)}Hn(e,t){let r=va(),i=new Ei(_t.comparator);return this.zn(e,t,(s,o)=>{const u=this.jn(s,o);r=r.insert(s,u),i=i.insert(s,qS(o))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return Ae.resolve();let i=new wr(EB);t.forEach(h=>i=i.add(h));const s=IDBKeyRange.bound(rE(i.first()),rE(i.last())),o=i.getIterator();let u=o.getNext();return Vg(e).Z({index:"documentKeyIndex",range:s},(h,g,y)=>{const b=_t.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;u&&EB(u,b)<0;)r(u,null),u=o.getNext();u&&u.isEqual(b)&&(r(u,g),u=o.hasNext()?o.getNext():null),u?y.j(rE(u)):y.done()}).next(()=>{for(;u;)r(u,null),u=o.hasNext()?o.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),HS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vg(e).W(IDBKeyRange.bound(i,s,!0)).next(o=>{let u=va();for(const h of o){const g=this.jn(_t.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);u=u.insert(g.key,g)}return u})}getAllFromCollectionGroup(e,t,r,i){let s=va();const o=bB(t,r),u=bB(t,qa.max());return Vg(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(h,g,y)=>{const b=this.jn(_t.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);s=s.insert(b.key,b),s.size===i&&y.done()}).next(()=>s)}newChangeBuffer(e){return new D6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wB(e).get("remoteDocumentGlobalKey").next(t=>(zt(!!t),t))}Qn(e,t){return wB(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function c6(n,e){let t;if(e.document)t=BU(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=_t.fromSegments(e.noDocument.path),i=Pg(e.noDocument.readTime);t=Br.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return kt();{const r=_t.fromSegments(e.unknownDocument.path),i=Pg(e.unknownDocument.version);t=Br.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ni(r[0],r[1]);return Zt.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(Zt.min()))return r}return Br.newInvalidDocument(e)}}function vB(n){return new I6(n)}class D6 extends yB{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ef(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new wr((s,o)=>mn(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const u=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,u.readTime)),o.isValidDocument()){const h=JU(this.Yn.yt,o);i=i.add(s.path.popLast());const g=qS(h);r+=g-u.size,t.push(this.Yn.addEntry(e,s,h))}else if(r-=u.size,this.trackRemovals){const h=JU(this.Yn.yt,o.convertToNoDocument(Zt.min()));t.push(this.Yn.addEntry(e,s,h))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),Ae.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,o)=>{this.Xn.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function wB(n){return xs(n,"remoteDocumentGlobal")}function Vg(n){return xs(n,"remoteDocumentsV14")}function rE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bB(n,e){const t=e.documentKey.path.toArray();return[n,HS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function EB(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=mn(t[s],r[s]),i)return i;return i=mn(t.length,r.length),i||(i=mn(t[t.length-2],r[r.length-2]),i||mn(t[t.length-1],r[r.length-1]))}class T6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class CB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&zb(r.mutation,i,ya.empty(),ni.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Sn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Sn()){const i=Su();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Wb();return s.forEach((u,h)=>{o=o.insert(u,h.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Su();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Sn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,u)=>{t.set(o,u)})})}computeViews(e,t,r,i){let s=va();const o=Gb(),u=Gb();return t.forEach((h,g)=>{const y=r.get(g.key);i.has(g.key)&&(void 0===y||y.mutation instanceof qd)?s=s.insert(g.key,g):void 0!==y?(o.set(g.key,y.mutation.getFieldMask()),zb(y.mutation,g,y.mutation.getFieldMask(),ni.now())):o.set(g.key,ya.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((g,y)=>o.set(g,y)),t.forEach((g,y)=>{var b;return u.set(g,new T6(y,null!==(b=o.get(g))&&void 0!==b?b:null))}),u))}recalculateAndSaveOverlays(e,t){const r=Gb();let i=new Ei((o,u)=>o-u),s=Sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const u of o)u.keys().forEach(h=>{const g=t.get(h);if(null===g)return;let y=r.get(h)||ya.empty();y=u.applyToLocalView(g,y),r.set(h,y);const b=(i.get(u.batchId)||Sn()).add(h);i=i.insert(u.batchId,b)})}).next(()=>{const o=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),g=h.key,y=h.value,b=AU();y.forEach(T=>{if(!s.has(T)){const k=wU(t.get(T),r.get(T));null!==k&&b.set(T,k),s=s.add(T)}}),o.push(this.documentOverlayCache.saveOverlays(e,g,b))}return Ae.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return _t.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):WR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Ae.resolve(Su());let u=-1,h=s;return o.next(g=>Ae.forEach(g,(y,b)=>(u<b.largestBatchId&&(u=b.largestBatchId),s.get(y)?Ae.resolve():this.remoteDocumentCache.getEntry(e,y).next(T=>{h=h.insert(y,T)}))).next(()=>this.populateOverlays(e,g,s)).next(()=>this.computeViews(e,h,g,Sn())).next(y=>({batchId:u,changes:xU(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _t(t)).next(r=>{let i=Wb();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Wb();return this.indexManager.getCollectionParents(e,i).next(o=>Ae.forEach(o,u=>{const h=(g=t,y=u.child(i),new Gd(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,y;return this.getDocumentsMatchingCollectionQuery(e,h,r).next(g=>{g.forEach((y,b)=>{s=s.insert(y,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((u,h)=>{const g=h.getKey();null===i.get(g)&&(i=i.insert(g,Br.newInvalidDocument(g)))});let o=Wb();return i.forEach((u,h)=>{const g=s.get(u);void 0!==g&&zb(g.mutation,h,ya.empty(),ni.now()),ZR(t,h)&&(o=o.insert(u,h))}),o})}}class S6{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Ae.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Vi(r.createTime)}),Ae.resolve()}getNamedQuery(e,t){return Ae.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:iP(r.bundledQuery),readTime:Vi(r.readTime)}),Ae.resolve();var r}}class x6{constructor(){this.overlays=new Ei(_t.comparator),this.es=new Map}getOverlay(e,t){return Ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Su();return Ae.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.oe(e,t,s)}),Ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),Ae.resolve()}getOverlaysForCollection(e,t,r){const i=Su(),s=t.length+1,o=new _t(t.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const h=u.getNext().value,g=h.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return Ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ei((g,y)=>g-y);const o=this.overlays.getIterator();for(;o.hasNext();){const g=o.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let y=s.get(g.largestBatchId);null===y&&(y=Su(),s=s.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const u=Su(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((g,y)=>u.set(g,y)),!(u.size()>=i)););return Ae.resolve(u)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rP(t,r));let s=this.es.get(t);void 0===s&&(s=Sn(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class dP{constructor(){this.ns=new wr(As.ss),this.rs=new wr(As.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new As(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new As(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new _t(new Kn([])),r=new As(t,e),i=new As(t,e+1),s=[];return this.rs.forEachInRange([r,i],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new _t(new Kn([])),r=new As(t,e),i=new As(t,e+1);let s=Sn();return this.rs.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new As(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class As{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return _t.comparator(e.key,t.key)||mn(e._s,t._s)}static os(e,t){return mn(e._s,t._s)||_t.comparator(e.key,t.key)}}class A6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new wr(As.ss)}checkEmpty(e){return Ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const o=new tP(s,t,r,i);this.mutationQueue.push(o);for(const u of i)this.gs=this.gs.add(new As(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Ae.resolve(o)}lookupMutationBatch(e,t){return Ae.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return Ae.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new As(t,0),i=new As(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],o=>{const u=this.ys(o._s);s.push(u)}),Ae.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wr(mn);return t.forEach(i=>{const s=new As(i,0),o=new As(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],u=>{r=r.add(u._s)})}),Ae.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;_t.isDocumentKey(s)||(s=s.child(""));const o=new As(new _t(s),0);let u=new wr(mn);return this.gs.forEachWhile(h=>{const g=h.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(u=u.add(h._s)),!0)},o),Ae.resolve(this.Is(u))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){zt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return Ae.forEach(t.mutations,i=>{const s=new As(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new As(t,0),i=this.gs.firstAfterOrEqual(r);return Ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Ae.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class M6{constructor(e){this.Es=e,this.docs=new Ei(_t.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ae.resolve(r?r.document.mutableCopy():Br.newInvalidDocument(t))}getEntries(e,t){let r=va();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Br.newInvalidDocument(i))}),Ae.resolve(r)}getAllFromCollection(e,t,r){let i=va();const s=new _t(t.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:u,value:{document:h}}=o.getNext();if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||OR(OV(h),r)<=0||(i=i.insert(h.key,h.mutableCopy()))}return Ae.resolve(i)}getAllFromCollectionGroup(e,t,r,i){kt()}As(e,t){return Ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new k6(this)}getSize(e){return Ae.resolve(this.size)}}class k6 extends yB{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),Ae.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class R6{constructor(e){this.persistence=e,this.Rs=new Ef(t=>xg(t),jb),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new dP,this.targetCount=0,this.vs=Fg.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),Ae.resolve()}getLastRemoteSnapshotVersion(e){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ae.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),Ae.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Fg(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Ae.resolve()}updateTargetData(e,t){return this.Dn(t),Ae.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((o,u)=>{u.sequenceNumber<=t&&null===r.get(u.targetId)&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),Ae.waitFor(s).next(()=>i)}getTargetCount(e){return Ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return Ae.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),Ae.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Ae.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return Ae.resolve(r)}containsKey(e,t){return Ae.resolve(this.Ps.containsKey(t))}}class IB{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Za(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new R6(this),this.indexManager=new _6,this.remoteDocumentCache=new M6(r=>this.referenceDelegate.xs(r)),this.yt=new XU(t),this.Ns=new S6(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new x6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new A6(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){at("MemoryPersistence","Starting transaction:",e);const i=new P6(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return Ae.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class P6 extends LV{constructor(e){super(),this.currentSequenceNumber=e}}class YS{constructor(e){this.persistence=e,this.Fs=new dP,this.$s=null}static Bs(e){return new YS(e)}get Ls(){if(this.$s)return this.$s;throw kt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),Ae.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),Ae.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Ae.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.Ls,r=>{const i=_t.fromPath(r);return this.qs(e,i).next(s=>{s||t.removeEntry(i,Zt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return Ae.or([()=>Ae.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class O6{constructor(e){this.yt=e}$(e,t,r,i){const s=new xS("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qU,{unique:!0}),u.createObjectStore("documentMutations"),DB(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=Ae.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),DB(e)),o=o.next(()=>function(u){const h=u.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zt.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",g)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,h){return h.store("mutations").W().next(g=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qU,{unique:!0});const y=h.store("mutations"),b=g.map(T=>y.put(T));return Ae.waitFor(b)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Us(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(o=o.next(()=>this.Gs(s))),r<8&&i>=8&&(o=o.next(()=>this.Qs(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.js(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const h=u.createObjectStore("documentOverlays",{keyPath:i6});h.createIndex("collectionPathOverlayIndex",s6,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",o6,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const h=u.createObjectStore("remoteDocumentsV14",{keyPath:qG});h.createIndex("documentKeyIndex",ZG),h.createIndex("collectionGroupIndex",KG)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.zs(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:e6}).createIndex("sequenceNumberIndex",t6,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:n6}).createIndex("documentKeyIndex",r6,{unique:!1})}(e))),o}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=qS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>Ae.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(u=>Ae.forEach(u,h=>{zt(h.userId===s.userId);const g=Og(this.yt,h);return fB(e,s.userId,g).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((o,u)=>{const h=new Kn(o),g=[0,jo(h)];s.push(t.get(g).next(y=>y?Ae.resolve():t.put({targetId:0,path:jo(h),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Ae.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:JG});const r=t.store("collectionParents"),i=new uP,s=o=>{if(i.add(o)){const u=o.lastSegment(),h=o.popLast();return r.put({collectionId:u,parent:jo(h)})}};return t.store("remoteDocuments").Z({X:!0},(o,u)=>{const h=new Kn(o);return s(h.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([o,u,h],g)=>{const y=Au(u);return s(y.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=Xb(i),o=eB(this.yt,s);return t.put(o)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,o)=>{const u=t.store("remoteDocumentsV14"),h=(g=o,g.document?new _t(Kn.fromString(g.document.name).popFirst(5)):g.noDocument?_t.fromSegments(g.noDocument.path):g.unknownDocument?_t.fromSegments(g.unknownDocument.path):kt()).path.toArray();var g;const y={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(u.put(y))}).next(()=>Ae.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=vB(this.yt),s=new IB(YS.Bs,this.yt.ie);return r.W().next(o=>{const u=new Map;return o.forEach(h=>{var g;let y=null!==(g=u.get(h.userId))&&void 0!==g?g:Sn();Og(this.yt,h).keys().forEach(b=>y=y.add(b)),u.set(h.userId,y)}),Ae.forEach(u,(h,g)=>{const y=new Ss(g),b=$S.re(this.yt,y),T=s.getIndexManager(y),k=ZS.re(y,this.yt,T,s.referenceDelegate);return new CB(i,k,b,T).recalculateAndSaveOverlaysForDocumentKeys(new eP(t,Za.at),h).next()})})}}function DB(n){n.createObjectStore("targetDocuments",{keyPath:QG}).createIndex("documentTargetsIndex",XG,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",YG,{unique:!0}),n.createObjectStore("targetGlobal")}const hP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fP{constructor(e,t,r,i,s,o,u,h,g,y,b=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=o,this.document=u,this.Js=g,this.Ys=y,this.Xs=b,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=T=>Promise.resolve(),!fP.C())throw new et(Pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new C6(this,i),this.ii=t+"main",this.yt=new XU(h),this.ri=new Ac(this.ii,this.Xs,new O6(this.yt)),this.Cs=new v6(this.referenceDelegate,this.yt),this.remoteDocumentCache=vB(this.yt),this.Ns=new u6,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===y&&Fi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new et(Pe.FAILED_PRECONDITION,hP);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Za(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,he.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,he.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>QS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(mf(e))return at("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return at("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return iE(e).get("owner").next(t=>Ae.resolve(this.mi(t)))}gi(e){return QS(e).delete(this.clientId)}yi(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=xs(r,"clientMetadata");return i.W().next(s=>{const o=e.Ii(s,18e5),u=s.filter(h=>-1===o.indexOf(h));return Ae.forEach(u,h=>i.delete(h.clientId)).next(()=>u)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Ae.resolve(!0):iE(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new et(Pe.FAILED_PRECONDITION,hP);return!1}}return!(!this.networkEnabled||!this.inForeground)||QS(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&at("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new eP(t,Za.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>QS(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return ZS.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new y6(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return $S.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){at("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(o=this.Xs)?l6:14===o?QU:13===o?YU:12===o?a6:11===o?KU:void kt();var o;let u;return this.ri.runTransaction(e,i,s,h=>(u=new eP(h,this.Ss?this.Ss.next():Za.at),"readwrite-primary"===t?this.fi(u).next(g=>!!g||this.di(u)).next(g=>{if(!g)throw Fi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new et(Pe.FAILED_PRECONDITION,NV);return r(u)}).next(g=>this.wi(u).next(()=>g)):this.Vi(u).next(()=>r(u)))).then(h=>(u.raiseOnCommittedEvent(),h))}Vi(e){return iE(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new et(Pe.FAILED_PRECONDITION,hP)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return iE(e).put("owner",t)}static C(){return Ac.C()}_i(e){const t=iE(e);return t.get("owner").next(r=>this.mi(r)?(at("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ae.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Fi(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,j.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return at("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Fi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function iE(n){return xs(n,"owner")}function QS(n){return xs(n,"clientMetadata")}function pP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class gP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Sn(),i=Sn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new gP(e,t.fromCache,r,i)}}class TB{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(lU(t))return Ae.resolve(null);let r=Bo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=NS(t,null,"F"),r=Bo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Sn(...s);return this.Ni.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const g=this.Fi(t,u);return this.$i(t,g,o,h.readTime)?this.ki(e,NS(t,null,"F")):this.Bi(e,g,t,h)}))})))}Oi(e,t,r,i){return lU(t)||i.isEqual(Zt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const o=this.Fi(t,s);return this.$i(t,o,r,i)?this.Mi(e,t):(kR()<=Ri.in.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qR(t)),this.Bi(e,o,t,PV(i,-1)))})}Fi(e,t){let r=new wr(dU(e));return t.forEach((i,s)=>{ZR(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return kR()<=Ri.in.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",qR(t)),this.Ni.getDocumentsMatchingQuery(e,t,qa.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class N6{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new Ei(mn),this.Ui=new Ef(s=>xg(s),jb),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CB(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function SB(n,e,t,r){return new N6(n,e,t,r)}function xB(n,e){return mP.apply(this,arguments)}function mP(){return mP=(0,he.Z)(function*(n,e){const t=vt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],u=[];let h=Sn();for(const g of i){o.push(g.batchId);for(const y of g.mutations)h=h.add(y.key)}for(const g of s){u.push(g.batchId);for(const y of g.mutations)h=h.add(y.key)}return t.localDocuments.getDocuments(r,h).next(g=>({ji:g,removedBatchIds:o,addedBatchIds:u}))})})}),mP.apply(this,arguments)}function L6(n,e){const t=vt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(o,u,h,g){const y=h.batch,b=y.keys();let T=Ae.resolve();return b.forEach(k=>{T=T.next(()=>g.getEntry(u,k)).next(P=>{const B=h.docVersions.get(k);zt(null!==B),P.version.compareTo(B)<0&&(y.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),g.addEntry(P)))})}),T.next(()=>o.mutationQueue.removeMutationBatch(u,y))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let u=Sn();for(let h=0;h<o.mutationResults.length;++h)o.mutationResults[h].transformResults.length>0&&(u=u.add(o.batch.mutations[h].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function AB(n){const e=vt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function F6(n,e){const t=vt(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const u=[];e.targetChanges.forEach((y,b)=>{const T=i.get(b);if(!T)return;u.push(t.Cs.removeMatchingKeys(s,y.removedDocuments,b).next(()=>t.Cs.addMatchingKeys(s,y.addedDocuments,b)));let k=T.withSequenceNumber(s.currentSequenceNumber);var P,B,H;e.targetMismatches.has(b)?k=k.withResumeToken(ds.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):y.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(y.resumeToken,r)),i=i.insert(b,k),B=k,H=y,(0===(P=T).resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0)&&u.push(t.Cs.updateTargetData(s,k))});let h=va(),g=Sn();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),u.push(MB(s,o,e.documentUpdates).next(y=>{h=y.Wi,g=y.zi})),!r.isEqual(Zt.min())){const y=t.Cs.getLastRemoteSnapshotVersion(s).next(b=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(y)}return Ae.waitFor(u).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,h,g)).next(()=>h)}).then(s=>(t.qi=i,s))}function MB(n,e,t){let r=Sn(),i=Sn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=va();return t.forEach((u,h)=>{const g=s.get(u);h.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(Zt.min())?(e.removeEntry(u,h.readTime),o=o.insert(u,h)):!g.isValidDocument()||h.version.compareTo(g.version)>0||0===h.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(h),o=o.insert(u,h)):at("LocalStore","Ignoring outdated watch update for ",u,". Current version:",g.version," Watch version:",h.version)}),{Wi:o,zi:i}})}function V6(n,e){const t=vt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $y(n,e){const t=vt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,Ae.resolve(i)):t.Cs.allocateTargetId(r).next(o=>(i=new Cf(e,o,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function zy(n,e,t){return _P.apply(this,arguments)}function _P(){return _P=(0,he.Z)(function*(n,e,t){const r=vt(n),i=r.qi.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!mf(o))throw o;at("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),_P.apply(this,arguments)}function XS(n,e,t){const r=vt(n);let i=Zt.min(),s=Sn();return r.persistence.runTransaction("Execute query","readonly",o=>function(u,h,g){const y=vt(u),b=y.Ui.get(g);return void 0!==b?Ae.resolve(y.qi.get(b)):y.Cs.getTargetData(h,g)}(r,o,Bo(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,u.targetId).next(h=>{s=h})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,t?i:Zt.min(),t?s:Sn())).next(u=>(PB(r,uU(e),u),{documents:u,Hi:s})))}function kB(n,e){const t=vt(n),r=vt(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ne(s,e).next(o=>o?o.target:null))}function RB(n,e){const t=vt(n),r=t.Ki.get(e)||Zt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,PV(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(PB(t,e,i),i))}function PB(n,e,t){let r=n.Ki.get(e)||Zt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function yP(){return yP=(0,he.Z)(function*(n,e,t,r){const i=vt(n);let s=Sn(),o=va();for(const g of t){const y=e.Ji(g.metadata.name);g.document&&(s=s.add(y));const b=e.Yi(g);b.setReadTime(e.Xi(g.metadata.readTime)),o=o.insert(y,b)}const u=i.Gi.newChangeBuffer({trackRemovals:!0}),h=yield $y(i,(g=r,Bo(Py(Kn.fromString(`__bundle__/docs/${g}`)))));var g;return i.persistence.runTransaction("Apply bundle documents","readwrite",g=>MB(g,u,o).next(y=>(u.apply(g),y)).next(y=>i.Cs.removeMatchingKeysForTargetId(g,h.targetId).next(()=>i.Cs.addMatchingKeys(g,s,h.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(g,y.Wi,y.zi)).next(()=>y.Wi)))}),yP.apply(this,arguments)}function B6(n,e){return vP.apply(this,arguments)}function vP(){return vP=(0,he.Z)(function*(n,e,t=Sn()){const r=yield $y(n,Bo(iP(e.bundledQuery))),i=vt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Vi(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ns.saveNamedQuery(s,e);const u=r.withResumeToken(ds.EMPTY_BYTE_STRING,o);return i.qi=i.qi.insert(u.targetId,u),i.Cs.updateTargetData(s,u).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),vP.apply(this,arguments)}function OB(n,e){return`firestore_clients_${n}_${e}`}function NB(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function wP(n,e){return`firestore_targets_${n}_${e}`}class JS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new et(i.error.code,i.error.message))),o?new JS(e,t,i.state,s):(Fi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new et(r.error.code,r.error.message))),s?new sE(e,r.state,i):(Fi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ex{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=US();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=BV(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new ex(e,s):(Fi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class bP{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new bP(t.clientId,t.onlineState):(Fi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class EP{constructor(){this.activeTargetIds=US()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CP{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ei(mn),this.started=!1,this.cr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=OB(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new EP),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(OB(e.persistenceKey,i));if(s){const o=ex.Zi(i,s);o&&(e.ur=e.ur.insert(o.clientId,o))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(wP(this.persistenceKey,e));if(r){const i=sE.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wP(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return at("SharedClientState","READ",e,t),t}setItem(e,t){at("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){at("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(at("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Fi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let o=Za.at;if(null!=s)try{const u=JSON.parse(s);zt("number"==typeof u),o=u}catch(u){Fi("SharedClientState","Failed to read sequence number from WebStorage",u)}return o}(r.newValue);i!==Za.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Mr(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new JS(this.currentUser,e,t,r),s=NB(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=NB(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=wP(this.persistenceKey,e),s=new sE(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return ex.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return JS.Zi(new Ss(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return sE.Zi(i,t)}yr(e){return bP.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);at("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),o=[],u=[];return s.forEach(h=>{i.has(h)||o.push(h)}),i.forEach(h=>{s.has(h)||u.push(h)}),this.syncEngine.Br(o,u).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=US();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class LB{constructor(){this.Lr=new EP,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new EP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class j6{Ur(e){}shutdown(){}}class FB{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){at("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){at("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const H6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $6{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class z6 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const o=this.ho(e,t);at("RestConnection","Sending: ",o,r);const u={};return this.lo(u,i,s),this.fo(e,o,u,r).then(h=>(at("RestConnection","Received: ",h),h),h=>{throw bg("RestConnection",`${e} failed with error: `,h,"url: ",o,"request:",r),h})}_o(e,t,r,i,s,o){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.oo}/v1/${t}:${H6[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,o)=>{const u=new $W;u.setWithCredentials(!0),u.listenOnce(BW.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case MR.NO_ERROR:const g=u.getResponseJson();at("Connection","XHR received:",JSON.stringify(g)),s(g);break;case MR.TIMEOUT:at("Connection",'RPC "'+e+'" timed out'),o(new et(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case MR.HTTP_ERROR:const y=u.getStatus();if(at("Connection",'RPC "'+e+'" failed with status:',y,"response text:",u.getResponseText()),y>0){let b=u.getResponseJson();Array.isArray(b)&&(b=b[0]);const T=b?.error;if(T&&T.status&&T.message){const k=function(P){const B=P.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(B)>=0?B:Pe.UNKNOWN}(T.status);o(new et(k,T.message))}else o(new et(Pe.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new et(Pe.UNAVAILABLE,"Connection failed."));break;default:kt()}}finally{at("Connection",'RPC "'+e+'" completed.')}});const h=JSON.stringify(i);u.send(t,"POST",h,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=VW(),o=UW(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new HW({})),this.lo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const h=i.join("");at("Connection","Creating WebChannel: "+h,u);const g=s.createWebChannel(h,u);let y=!1,b=!1;const T=new $6({Hr:P=>{b?at("Connection","Not sending because WebChannel is closed:",P):(y||(at("Connection","Opening WebChannel transport."),g.open(),y=!0),at("Connection","WebChannel sending:",P),g.send(P))},Jr:()=>g.close()}),k=(P,B,H)=>{P.listen(B,ne=>{try{H(ne)}catch(ce){setTimeout(()=>{throw ce},0)}})};return k(g,DS.EventType.OPEN,()=>{b||at("Connection","WebChannel transport opened.")}),k(g,DS.EventType.CLOSE,()=>{b||(b=!0,at("Connection","WebChannel transport closed"),T.io())}),k(g,DS.EventType.ERROR,P=>{b||(b=!0,bg("Connection","WebChannel transport errored:",P),T.io(new et(Pe.UNAVAILABLE,"The operation could not be completed")))}),k(g,DS.EventType.MESSAGE,P=>{var B;if(!b){const H=P.data[0];zt(!!H);const ce=H.error||(null===(B=H[0])||void 0===B?void 0:B.error);if(ce){at("Connection","WebChannel received error:",ce);const ve=ce.status;let Ie=function(Ve){const rt=Xi[Ve];if(void 0!==rt)return TU(rt)}(ve),Ce=ce.message;void 0===Ie&&(Ie=Pe.INTERNAL,Ce="Unknown error status: "+ve+" with message "+ce.message),b=!0,T.io(new et(Ie,Ce)),g.close()}else at("Connection","WebChannel received:",H),T.ro(H)}}),k(o,jW.STAT_EVENT,P=>{P.stat===SV.PROXY?at("Connection","Detected buffering proxy"):P.stat===SV.NOPROXY&&at("Connection","Detected no buffering proxy")}),setTimeout(()=>{T.so()},0),T}}function VB(){return typeof window<"u"?window:null}function tx(){return typeof document<"u"?document:null}function oE(n){return new NG(n,!0)}class IP{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&at("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class UB{constructor(e,t,r,i,s,o,u,h){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new IP(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,he.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,he.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,he.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===Pe.RESOURCE_EXHAUSTED?(Fi(t.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===Pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new et(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,he.Z)(function*(){e.state=0,e.start()}))}Qo(e){return at("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(at("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class W6 extends UB{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.yt=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function VG(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(h=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===h?1:"REMOVE"===h?2:"CURRENT"===h?3:"RESET"===h?4:kt(),i=e.targetChange.targetIds||[],s=function(h,g){return h.wt?(zt(void 0===g||"string"==typeof g),ds.fromBase64String(g||"")):(zt(void 0===g||g instanceof Uint8Array),ds.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const g=void 0===h.code?Pe.UNKNOWN:TU(h.code);return new et(g,h.message||"")}(o);t=new kU(r,i,s,u||null)}else if("documentChange"in e){const r=e.documentChange,i=xu(n,r.document.name),s=Vi(r.document.updateTime),o=r.document.createTime?Vi(r.document.createTime):Zt.min(),u=new Ys({mapValue:{fields:r.document.fields}}),h=Br.newFoundDocument(i,s,o,u);t=new BS(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=xu(n,r.document),s=r.readTime?Vi(r.readTime):Zt.min(),o=Br.newNoDocument(i,s);t=new BS([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=xu(n,r.document);t=new BS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return kt();{const r=e.filter,s=new TG(r.count||0);t=new MU(r.targetId,s)}}var h;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return Zt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Zt.min():s.readTime?Vi(s.readTime):Zt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Yb(this.yt),t.addTarget=function(i,s){let o;const u=s.target;return o=RS(u)?{documents:jU(i,u)}:{query:JR(i,u)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=NU(i,s.resumeToken):s.snapshotVersion.compareTo(Zt.min())>0&&(o.readTime=Vy(i,s.snapshotVersion.toTimestamp())),o}(this.yt,e);const r=function BG(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return kt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Yb(this.yt),t.removeTarget=e,this.Bo(t)}}class G6 extends UB{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function UG(n,e){return n&&n.length>0?(zt(void 0!==e),n.map(t=>function(r,i){let s=Vi(r.updateTime?r.updateTime:i);return s.isEqual(Zt.min())&&(s=Vi(i)),new CG(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Vi(e.commitTime);return this.listener.Zo(r,t)}return zt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Yb(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qb(this.yt,r))};this.Bo(t)}}class q6 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new et(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new et(Pe.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection._o(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new et(Pe.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class K6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Fi(t),this.ou=!1):at("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Y6{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(u=>{r.enqueueAndForget((0,he.Z)(function*(){var h;Zd(o)&&(at("RemoteStore","Restarting streams for network reachability change."),yield(h=(0,he.Z)(function*(g){const y=vt(g);y._u.add(4),yield Wy(y),y.gu.set("Unknown"),y._u.delete(4),yield aE(y)}),function(g){return h.apply(this,arguments)})(o))}))}),this.gu=new K6(r,i)}}function aE(n){return TP.apply(this,arguments)}function TP(){return TP=(0,he.Z)(function*(n){if(Zd(n))for(const e of n.wu)yield e(!0)}),TP.apply(this,arguments)}function Wy(n){return SP.apply(this,arguments)}function SP(){return SP=(0,he.Z)(function*(n){for(const e of n.wu)yield e(!1)}),SP.apply(this,arguments)}function nx(n,e){const t=vt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),MP(t)?AP(t):qy(t).ko()&&xP(t,e))}function lE(n,e){const t=vt(n),r=qy(t);t.du.delete(e),r.ko()&&BB(t,e),0===t.du.size&&(r.ko()?r.Fo():Zd(t)&&t.gu.set("Unknown"))}function xP(n,e){n.yu.Ot(e.targetId),qy(n).zo(e)}function BB(n,e){n.yu.Ot(e),qy(n).Ho(e)}function AP(n){n.yu=new kG({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),qy(n).start(),n.gu.uu()}function MP(n){return Zd(n)&&!qy(n).No()&&n.du.size>0}function Zd(n){return 0===vt(n)._u.size}function jB(n){n.yu=void 0}function Q6(n){return kP.apply(this,arguments)}function kP(){return kP=(0,he.Z)(function*(n){n.du.forEach((e,t)=>{xP(n,e)})}),kP.apply(this,arguments)}function X6(n,e){return RP.apply(this,arguments)}function RP(){return RP=(0,he.Z)(function*(n,e){jB(n),MP(n)?(n.gu.hu(e),AP(n)):n.gu.set("Unknown")}),RP.apply(this,arguments)}function J6(n,e,t){return PP.apply(this,arguments)}function PP(){return PP=(0,he.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof kU&&2===e.state&&e.cause)try{yield(r=(0,he.Z)(function*(i,s){const o=s.cause;for(const u of s.targetIds)i.du.has(u)&&(yield i.remoteSyncer.rejectListen(u,o),i.du.delete(u),i.yu.removeTarget(u))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){at("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rx(n,r)}else if(e instanceof BS?n.yu.Kt(e):e instanceof MU?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Zt.min()))try{const r=yield AB(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const o=i.yu.Zt(s);return o.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const g=i.du.get(h);g&&i.du.set(h,g.withResumeToken(u.resumeToken,s))}}),o.targetMismatches.forEach(u=>{const h=i.du.get(u);if(!h)return;i.du.set(u,h.withResumeToken(ds.EMPTY_BYTE_STRING,h.snapshotVersion)),BB(i,u);const g=new Cf(h.target,u,1,h.sequenceNumber);xP(i,g)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(r){at("RemoteStore","Failed to raise snapshot:",r),yield rx(n,r)}var r}),PP.apply(this,arguments)}function rx(n,e,t){return OP.apply(this,arguments)}function OP(){return OP=(0,he.Z)(function*(n,e,t){if(!mf(e))throw e;n._u.add(1),yield Wy(n),n.gu.set("Offline"),t||(t=()=>AB(n.localStore)),n.asyncQueue.enqueueRetryable((0,he.Z)(function*(){at("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield aE(n)}))}),OP.apply(this,arguments)}function HB(n,e){return e().catch(t=>rx(n,t,e))}function Gy(n){return NP.apply(this,arguments)}function NP(){return NP=(0,he.Z)(function*(n){const e=vt(n),t=Sf(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;eq(e);)try{const i=yield V6(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,tq(e,i)}catch(i){yield rx(e,i)}$B(e)&&zB(e)}),NP.apply(this,arguments)}function eq(n){return Zd(n)&&n.fu.length<10}function tq(n,e){n.fu.push(e);const t=Sf(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function $B(n){return Zd(n)&&!Sf(n).No()&&n.fu.length>0}function zB(n){Sf(n).start()}function nq(n){return LP.apply(this,arguments)}function LP(){return LP=(0,he.Z)(function*(n){Sf(n).eu()}),LP.apply(this,arguments)}function rq(n){return FP.apply(this,arguments)}function FP(){return FP=(0,he.Z)(function*(n){const e=Sf(n);for(const t of n.fu)e.Xo(t.mutations)}),FP.apply(this,arguments)}function iq(n,e,t){return VP.apply(this,arguments)}function VP(){return VP=(0,he.Z)(function*(n,e,t){const r=n.fu.shift(),i=nP.from(r,e,t);yield HB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Gy(n)}),VP.apply(this,arguments)}function sq(n,e){return UP.apply(this,arguments)}function UP(){return UP=(0,he.Z)(function*(n,e){var t;e&&Sf(n).Yo&&(yield(t=(0,he.Z)(function*(r,i){if(DU(s=i.code)&&s!==Pe.ABORTED){const o=r.fu.shift();Sf(r).Mo(),yield HB(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Gy(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),$B(n)&&zB(n)}),UP.apply(this,arguments)}function WB(n,e){return BP.apply(this,arguments)}function BP(){return BP=(0,he.Z)(function*(n,e){const t=vt(n);t.asyncQueue.verifyOperationInProgress(),at("RemoteStore","RemoteStore received new credentials");const r=Zd(t);t._u.add(3),yield Wy(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield aE(t)}),BP.apply(this,arguments)}function jP(n,e){return HP.apply(this,arguments)}function HP(){return HP=(0,he.Z)(function*(n,e){const t=vt(n);e?(t._u.delete(2),yield aE(t)):e||(t._u.add(2),yield Wy(t),t.gu.set("Unknown"))}),HP.apply(this,arguments)}function qy(n){return n.pu||(n.pu=function(e,t,r){const i=vt(e);return i.su(),new W6(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:Q6.bind(null,n),Zr:X6.bind(null,n),Wo:J6.bind(null,n)}),n.wu.push(function(){var e=(0,he.Z)(function*(t){t?(n.pu.Mo(),MP(n)?AP(n):n.gu.set("Unknown")):(yield n.pu.stop(),jB(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Sf(n){return n.Iu||(n.Iu=function(e,t,r){const i=vt(e);return i.su(),new G6(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:nq.bind(null,n),Zr:sq.bind(null,n),tu:rq.bind(null,n),Zo:iq.bind(null,n)}),n.wu.push(function(){var e=(0,he.Z)(function*(t){t?(n.Iu.Mo(),yield Gy(n)):(yield n.Iu.stop(),n.fu.length>0&&(at("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class $P{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,u=new $P(e,t,o,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new et(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zy(n,e){if(Fi("AsyncQueue",`${e}: ${n}`),mf(n))return new et(Pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Ky{constructor(e){this.comparator=e?(t,r)=>e(t,r)||_t.comparator(t.key,r.key):(t,r)=>_t.comparator(t.key,r.key),this.keyedMap=Wb(),this.sortedSet=new Ei(this.comparator)}static emptySet(e){return new Ky(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ky)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ky;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class GB{constructor(){this.Tu=new Ei(_t.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):kt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Yy{constructor(e,t,r,i,s,o,u,h,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(u=>{o.push({type:0,doc:u})}),new Yy(e,t,Ky.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class oq{constructor(){this.Au=void 0,this.listeners=[]}}class aq{constructor(){this.queries=new Ef(e=>cU(e),Hb),this.onlineState="Unknown",this.Ru=new Set}}function zP(n,e){return WP.apply(this,arguments)}function WP(){return WP=(0,he.Z)(function*(n,e){const t=vt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new oq),i)try{s.Au=yield t.onListen(r)}catch(o){const u=Zy(o,`Initialization of query '${qR(e.query)}' failed`);return void e.onError(u)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&ZP(t)}),WP.apply(this,arguments)}function GP(n,e){return qP.apply(this,arguments)}function qP(){return qP=(0,he.Z)(function*(n,e){const t=vt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),qP.apply(this,arguments)}function lq(n,e){const t=vt(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const u of o.listeners)u.Pu(i)&&(r=!0);o.Au=i}}r&&ZP(t)}function cq(n,e,t){const r=vt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function ZP(n){n.Ru.forEach(e=>{e.next()})}class KP{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Yy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Yy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class uq{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class qB{constructor(e){this.yt=e}Ji(e){return xu(this.yt,e)}Yi(e){return e.metadata.exists?BU(this.yt,e.document,!1):Br.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Vi(e)}}class dq{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ZB(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Kn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new qB(this.yt);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const o of i.metadata.queries){const u=(t.get(o)||Sn()).add(s);t.set(o,u)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function U6(n,e,t,r){return yP.apply(this,arguments)}(e.localStore,new qB(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield B6(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function ZB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class KB{constructor(e){this.key=e}}class YB{constructor(e){this.key=e}}class QB{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Sn(),this.mutatedKeys=Sn(),this.Gu=dU(e),this.Qu=new Ky(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new GB,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1;const h="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,g="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,b)=>{const T=i.get(y),k=ZR(this.query,b)?b:null,P=!!T&&this.mutatedKeys.has(T.key),B=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let H=!1;T&&k?T.data.isEqual(k.data)?P!==B&&(r.track({type:3,doc:k}),H=!0):this.Hu(T,k)||(r.track({type:2,doc:k}),H=!0,(h&&this.Gu(k,h)>0||g&&this.Gu(k,g)<0)&&(u=!0)):!T&&k?(r.track({type:0,doc:k}),H=!0):T&&!k&&(r.track({type:1,doc:T}),H=!0,(h||g)&&(u=!0)),H&&(k?(o=o.add(k),s=B?s.add(y):s.delete(y)):(o=o.delete(y),s=s.delete(y)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const y="F"===this.query.limitType?o.last():o.first();o=o.delete(y.key),s=s.delete(y.key),r.track({type:1,doc:y})}return{Qu:o,zu:r,$i:u,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((g,y)=>function(b,T){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt()}};return k(b)-k(T)}(g.type,y.type)||this.Gu(g.doc,y.doc)),this.Ju(r);const o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,h=u!==this.Uu;return this.Uu=u,0!==s.length||h?{snapshot:new Yy(this.query,e.Qu,i,s,e.mutatedKeys,0===u,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new GB,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Sn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new YB(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new KB(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Sn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Yy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class hq{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class fq{constructor(e){this.key=e,this.nc=!1}}class pq{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Ef(u=>cU(u),Hb),this.rc=new Map,this.oc=new Set,this.uc=new Ei(_t.comparator),this.cc=new Map,this.ac=new dP,this.hc={},this.lc=new Map,this.fc=Fg.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function gq(n,e){return YP.apply(this,arguments)}function YP(){return YP=(0,he.Z)(function*(n,e){const t=vO(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const o=yield $y(t.localStore,Bo(e));t.isPrimaryClient&&nx(t.remoteStore,o);const u=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield QP(t,e,r,"current"===u,o.resumeToken)}return i}),YP.apply(this,arguments)}function QP(n,e,t,r,i){return XP.apply(this,arguments)}function XP(){return XP=(0,he.Z)(function*(n,e,t,r,i){n._c=(b,T,k)=>{return(P=(0,he.Z)(function*(B,H,ne,ce){let ve=H.view.Wu(ne);ve.$i&&(ve=yield XS(B.localStore,H.query,!1).then(({documents:Ve})=>H.view.Wu(Ve,ve)));const Ie=ce&&ce.targetChanges.get(H.targetId),Ce=H.view.applyChanges(ve,B.isPrimaryClient,Ie);return lO(B,H.targetId,Ce.Xu),Ce.snapshot}),function(B,H,ne,ce){return P.apply(this,arguments)})(n,b,T,k);var P};const s=yield XS(n.localStore,e,!0),o=new QB(e,s.Hi),u=o.Wu(s.documents),h=Zb.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),g=o.applyChanges(u,n.isPrimaryClient,h);lO(n,t,g.Xu);const y=new hq(e,t,o);return n.ic.set(e,y),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),g.snapshot}),XP.apply(this,arguments)}function mq(n,e){return JP.apply(this,arguments)}function JP(){return JP=(0,he.Z)(function*(n,e){const t=vt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!Hb(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield zy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),lE(t.remoteStore,r.targetId),Qy(t,r.targetId)}).catch(gf))):(Qy(t,r.targetId),yield zy(t.localStore,r.targetId,!0))}),JP.apply(this,arguments)}function eO(){return eO=(0,he.Z)(function*(n,e,t){const r=wO(n);try{const i=yield function(s,o){const u=vt(s),h=ni.now(),g=o.reduce((T,k)=>T.add(k.key),Sn());let y,b;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let k=va(),P=Sn();return u.Gi.getEntries(T,g).next(B=>{k=B,k.forEach((H,ne)=>{ne.isValidDocument()||(P=P.add(H))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,k)).next(B=>{y=B;const H=[];for(const ne of o){const ce=DG(ne,y.get(ne.key).overlayedDocument);null!=ce&&H.push(new qd(ne.key,ce,iU(ce.value.mapValue),ri.exists(!0)))}return u.mutationQueue.addMutationBatch(T,h,H,o)}).next(B=>{b=B;const H=B.applyToLocalDocumentSet(y,P);return u.documentOverlayCache.saveOverlays(T,B.batchId,H)})}).then(()=>({batchId:b.batchId,changes:xU(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,u){let h=s.hc[s.currentUser.toKey()];h||(h=new Ei(mn)),h=h.insert(o,u),s.hc[s.currentUser.toKey()]=h}(r,i.batchId,t),yield Kd(r,i.changes),yield Gy(r.remoteStore)}catch(i){const s=Zy(i,"Failed to persist write");t.reject(s)}}),eO.apply(this,arguments)}function XB(n,e){return tO.apply(this,arguments)}function tO(){return tO=(0,he.Z)(function*(n,e){const t=vt(n);try{const r=yield F6(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.cc.get(s);o&&(zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.nc=!0:i.modifiedDocuments.size>0?zt(o.nc):i.removedDocuments.size>0&&(zt(o.nc),o.nc=!1))}),yield Kd(t,r,e)}catch(r){yield gf(r)}}),tO.apply(this,arguments)}function JB(n,e,t){const r=vt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((s,o)=>{const u=o.view.bu(e);u.snapshot&&i.push(u.snapshot)}),function(s,o){const u=vt(s);u.onlineState=o;let h=!1;u.queries.forEach((g,y)=>{for(const b of y.listeners)b.bu(o)&&(h=!0)}),h&&ZP(u)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function yq(n,e,t){return nO.apply(this,arguments)}function nO(){return nO=(0,he.Z)(function*(n,e,t){const r=vt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let o=new Ei(_t.comparator);o=o.insert(s,Br.newNoDocument(s,Zt.min()));const u=Sn().add(s),h=new qb(Zt.min(),new Map,new wr(mn),o,u);yield XB(r,h),r.uc=r.uc.remove(s),r.cc.delete(e),cO(r)}else yield zy(r.localStore,e,!1).then(()=>Qy(r,e,t)).catch(gf)}),nO.apply(this,arguments)}function vq(n,e){return rO.apply(this,arguments)}function rO(){return rO=(0,he.Z)(function*(n,e){const t=vt(n),r=e.batch.batchId;try{const i=yield L6(t.localStore,e);aO(t,r,null),oO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Kd(t,i)}catch(i){yield gf(i)}}),rO.apply(this,arguments)}function wq(n,e,t){return iO.apply(this,arguments)}function iO(){return iO=(0,he.Z)(function*(n,e,t){const r=vt(n);try{const i=yield function(s,o){const u=vt(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return u.mutationQueue.lookupMutationBatch(h,o).next(y=>(zt(null!==y),g=y.keys(),u.mutationQueue.removeMutationBatch(h,y))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,g,o)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>u.localDocuments.getDocuments(h,g))})}(r.localStore,e);aO(r,e,t),oO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Kd(r,i)}catch(i){yield gf(i)}}),iO.apply(this,arguments)}function sO(){return sO=(0,he.Z)(function*(n,e){const t=vt(n);Zd(t.remoteStore)||at("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const o=vt(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>o.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Zy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),sO.apply(this,arguments)}function oO(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function aO(n,e,t){const r=vt(n);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Qy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||ej(n,r)})}function ej(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(lE(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),cO(n))}function lO(n,e,t){for(const r of t)r instanceof KB?(n.ac.addReference(r.key,e),Eq(n,r)):r instanceof YB?(at("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||ej(n,r.key)):kt()}function Eq(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(at("SyncEngine","New document in limbo: "+t),n.oc.add(r),cO(n))}function cO(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new _t(Kn.fromString(e)),r=n.fc.next();n.cc.set(r,new fq(t)),n.uc=n.uc.insert(t,r),nx(n.remoteStore,new Cf(Bo(Py(t.path)),r,2,Za.at))}}function Kd(n,e,t){return uO.apply(this,arguments)}function uO(){return uO=(0,he.Z)(function*(n,e,t){const r=vt(n),i=[],s=[],o=[];var u;r.ic.isEmpty()||(r.ic.forEach((u,h)=>{o.push(r._c(h,e,t).then(g=>{if((g||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(h.targetId,g?.fromCache?"not-current":"current"),g){i.push(g);const y=gP.Ci(h.targetId,g);s.push(y)}}))}),yield Promise.all(o),r.sc.Wo(i),yield(u=(0,he.Z)(function*(h,g){const y=vt(h);try{yield y.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>Ae.forEach(g,T=>Ae.forEach(T.Si,k=>y.persistence.referenceDelegate.addReference(b,T.targetId,k)).next(()=>Ae.forEach(T.Di,k=>y.persistence.referenceDelegate.removeReference(b,T.targetId,k)))))}catch(b){if(!mf(b))throw b;at("LocalStore","Failed to update sequence numbers: "+b)}for(const b of g){const T=b.targetId;if(!b.fromCache){const k=y.qi.get(T),B=k.withLastLimboFreeSnapshotVersion(k.snapshotVersion);y.qi=y.qi.insert(T,B)}}}),function(h,g){return u.apply(this,arguments)})(r.localStore,s))}),uO.apply(this,arguments)}function Cq(n,e){return dO.apply(this,arguments)}function dO(){return dO=(0,he.Z)(function*(n,e){const t=vt(n);if(!t.currentUser.isEqual(e)){at("SyncEngine","User change. New user:",e.toKey());const r=yield xB(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(o=>{o.forEach(u=>{u.reject(new et(Pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Kd(t,r.ji)}var i}),dO.apply(this,arguments)}function Iq(n,e){const t=vt(n),r=t.cc.get(e);if(r&&r.nc)return Sn().add(r.key);{let i=Sn();const s=t.rc.get(e);if(!s)return i;for(const o of s){const u=t.ic.get(o);i=i.unionWith(u.view.ju)}return i}}function Dq(n,e){return hO.apply(this,arguments)}function hO(){return hO=(0,he.Z)(function*(n,e){const t=vt(n),r=yield XS(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&lO(t,e.targetId,i.Xu),i}),hO.apply(this,arguments)}function Tq(n,e){return fO.apply(this,arguments)}function fO(){return fO=(0,he.Z)(function*(n,e){const t=vt(n);return RB(t.localStore,e).then(r=>Kd(t,r))}),fO.apply(this,arguments)}function Sq(n,e,t,r){return pO.apply(this,arguments)}function pO(){return pO=(0,he.Z)(function*(n,e,t,r){const i=vt(n),s=yield function(o,u){const h=vt(o),g=vt(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",y=>g.Tn(y,u).next(b=>b?h.localDocuments.getDocuments(y,b):Ae.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield Gy(i.remoteStore):"acknowledged"===t||"rejected"===t?(aO(i,e,r||null),oO(i,e),u=e,vt(vt(i.localStore).mutationQueue).An(u)):kt(),yield Kd(i,s)):at("SyncEngine","Cannot apply mutation batch with id: "+e)}),pO.apply(this,arguments)}function gO(){return gO=(0,he.Z)(function*(n,e){const t=vt(n);if(vO(t),wO(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield tj(t,r.toArray());t.dc=!0,yield jP(t.remoteStore,!0);for(const s of i)nx(t.remoteStore,s)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Qy(t,o),zy(t.localStore,o,!0))),lE(t.remoteStore,o)}),yield i,yield tj(t,r),function(s){const o=vt(s);o.cc.forEach((u,h)=>{lE(o.remoteStore,h)}),o.ac.fs(),o.cc=new Map,o.uc=new Ei(_t.comparator)}(t),t.dc=!1,yield jP(t.remoteStore,!1)}}),gO.apply(this,arguments)}function tj(n,e,t){return mO.apply(this,arguments)}function mO(){return mO=(0,he.Z)(function*(n,e,t){const r=vt(n),i=[],s=[];for(const o of e){let u;const h=r.rc.get(o);if(h&&0!==h.length){u=yield $y(r.localStore,Bo(h[0]));for(const g of h){const y=r.ic.get(g),b=yield Dq(r,y);b.snapshot&&s.push(b.snapshot)}}else{const g=yield kB(r.localStore,o);u=yield $y(r.localStore,g),yield QP(r,nj(g),o,!1,u.resumeToken)}i.push(u)}return r.sc.Wo(s),i}),mO.apply(this,arguments)}function nj(n){return aU(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Aq(n){const e=vt(n);return vt(vt(e.localStore).persistence).vi()}function Mq(n,e,t,r){return _O.apply(this,arguments)}function _O(){return _O=(0,he.Z)(function*(n,e,t,r){const i=vt(n);if(i.dc)return void at("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield RB(i.localStore,uU(s[0])),u=qb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ds.EMPTY_BYTE_STRING);yield Kd(i,o,u);break}case"rejected":yield zy(i.localStore,e,!0),Qy(i,e,r);break;default:kt()}}),_O.apply(this,arguments)}function kq(n,e,t){return yO.apply(this,arguments)}function yO(){return yO=(0,he.Z)(function*(n,e,t){const r=vO(n);if(r.dc){for(const i of e){if(r.rc.has(i)){at("SyncEngine","Adding an already active target "+i);continue}const s=yield kB(r.localStore,i),o=yield $y(r.localStore,s);yield QP(r,nj(s),o.targetId,!1,o.resumeToken),nx(r.remoteStore,o)}for(const i of t)r.rc.has(i)&&(yield zy(r.localStore,i,!1).then(()=>{lE(r.remoteStore,i),Qy(r,i)}).catch(gf))}}),yO.apply(this,arguments)}function vO(n){const e=vt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Iq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yq.bind(null,e),e.sc.Wo=lq.bind(null,e.eventManager),e.sc.wc=cq.bind(null,e.eventManager),e}function wO(n){const e=vt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wq.bind(null,e),e}class rj{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.yt=oE(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return SB(this.persistence,new TB,e.initialUser,this.yt)}yc(e){return new IB(YS.Bs,this.yt)}gc(e){return new LB}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ij extends rj{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield wO(r.Ac.syncEngine),yield Gy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return SB(this.persistence,new TB,e.initialUser,this.yt)}Tc(e,t){return new b6(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new sG(t,this.persistence);return new iG(e.asyncQueue,r)}yc(e){const t=pP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?wa.withCacheSize(this.cacheSizeBytes):wa.DEFAULT;return new fP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,VB(),tx(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new LB}}class Pq extends ij{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof CP&&(r.sharedClientState.syncEngine={Fr:Sq.bind(null,i),$r:Mq.bind(null,i),Br:kq.bind(null,i),vi:Aq.bind(null,i),Mr:Tq.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=(0,he.Z)(function*(o){yield function xq(n,e){return gO.apply(this,arguments)}(r.Ac.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}gc(e){const t=VB();if(!CP.C(t))throw new et(Pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=pP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new CP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class bO{initialize(e,t){var r=this;return(0,he.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>JB(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Cq.bind(null,r.syncEngine),yield jP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new aq}createDatastore(e){const t=oE(e.databaseInfo.databaseId),r=new z6(e.databaseInfo);return new q6(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=u=>JB(this.syncEngine,u,0),o=FB.C()?new FB:new j6,new Y6(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,u,h,g){const y=new pq(r,i,s,o,u,h);return g&&(y.dc=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const r=vt(t);at("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Wy(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function EO(n,e,t){if(!t)throw new et(Pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sj(n,e,t,r){if(!0===e&&!0===r)throw new et(Pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oj(n){if(!_t.isDocumentKey(n))throw new et(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aj(n){if(_t.isDocumentKey(n))throw new et(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ix(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":kt()}function $n(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new et(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ix(n);throw new et(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function lj(n,e){if(e<=0)throw new et(Pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const cj=new Map;class uj{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new et(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new et(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,sj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uj({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new et(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new et(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uj(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new GW;switch(t.type){case"gapi":return new YW(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new et(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=cj.get(e);t&&(at("ComponentProvider","Removing Datastore"),cj.delete(e),t.terminate())}(this),Promise.resolve()}}class jr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jr(this.firestore,e,this._key)}}class Qs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qs(this.firestore,e,this._query)}}class Mu extends Qs{constructor(e,t,r){super(e,t,Py(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jr(this.firestore,null,new _t(e))}withConverter(e){return new Mu(this.firestore,e,this._path)}}function hj(n,e,...t){if(n=(0,j.m9)(n),EO("collection","path",e),n instanceof cE){const r=Kn.fromString(e,...t);return aj(r),new Mu(n,null,r)}{if(!(n instanceof jr||n instanceof Mu))throw new et(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kn.fromString(e,...t));return aj(r),new Mu(n.firestore,null,r)}}function sx(n,e,...t){if(n=(0,j.m9)(n),1===arguments.length&&(e=kV.R()),EO("doc","path",e),n instanceof cE){const r=Kn.fromString(e,...t);return oj(r),new jr(n,null,new _t(r))}{if(!(n instanceof jr||n instanceof Mu))throw new et(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kn.fromString(e,...t));return oj(r),new jr(n.firestore,n instanceof Mu?n.converter:null,new _t(r))}}function fj(n,e){return n=(0,j.m9)(n),e=(0,j.m9)(e),(n instanceof jr||n instanceof Mu)&&(e instanceof jr||e instanceof Mu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function CO(n,e){return n=(0,j.m9)(n),e=(0,j.m9)(e),n instanceof Qs&&e instanceof Qs&&n.firestore===e.firestore&&Hb(n._query,e._query)&&n.converter===e.converter}function pj(n,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ox{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Nq{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new us,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,he.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const s=yield e.Cc(i);return new uq(JSON.parse(s),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,he.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,he.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Vq{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new et(Pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,he.Z)(function*(s,o){const u=vt(s),h=Yb(u.yt)+"/documents",g={documents:o.map(k=>Kb(u.yt,k))},y=yield u._o("BatchGetDocuments",h,g,o.length),b=new Map;y.forEach(k=>{const P=function FG(n,e){return"found"in e?function(t,r){zt(!!r.found);const i=xu(t,r.found.name),s=Vi(r.found.updateTime),o=r.found.createTime?Vi(r.found.createTime):Zt.min(),u=new Ys({mapValue:{fields:r.found.fields}});return Br.newFoundDocument(i,s,o,u)}(n,e):"missing"in e?function(t,r){zt(!!r.missing),zt(!!r.readTime);const i=xu(t,r.missing),s=Vi(r.readTime);return Br.newNoDocument(i,s)}(n,e):kt()}(u.yt,k);b.set(P.key.toString(),P)});const T=[];return o.forEach(k=>{const P=b.get(k.toString());zt(!!P),T.push(P)}),T}),function(s,o){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=_t.fromPath(i);e.mutations.push(new KR(s,e.precondition(s)))}),yield(r=(0,he.Z)(function*(i,s){const o=vt(i),u=Yb(o.yt)+"/documents",h={writes:s.map(g=>Qb(o.yt,g))};yield o.ao("Commit",u,h)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw kt();t=Zt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new et(Pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Zt.min())?ri.exists(!1):ri.updateTime(t):ri.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zt.min()))throw new et(Pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ri.updateTime(t)}return ri.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Uq{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.xo=new IP(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,he.Z)(function*(){const t=new Vq(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Fc(s)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Nb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!DU(t)}return!1}}class Bq{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ss.UNAUTHENTICATED,this.clientId=kV.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,he.Z)(function*(u){at("FirestoreClient","Received user=",u.uid),yield s.authCredentialListener(u),s.user=u});return function(u){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(at("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new et(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Zy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function gj(n,e){return IO.apply(this,arguments)}function IO(){return IO=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),at("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,he.Z)(function*(s){r.isEqual(s)||(yield xB(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),IO.apply(this,arguments)}function mj(n,e){return DO.apply(this,arguments)}function DO(){return DO=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield TO(n);at("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>WB(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>WB(e.remoteStore,s)),n.onlineComponents=e}),DO.apply(this,arguments)}function TO(n){return SO.apply(this,arguments)}function SO(){return SO=(0,he.Z)(function*(n){return n.offlineComponents||(at("FirestoreClient","Using default OfflineComponentProvider"),yield gj(n,new rj)),n.offlineComponents}),SO.apply(this,arguments)}function ax(n){return xO.apply(this,arguments)}function xO(){return xO=(0,he.Z)(function*(n){return n.onlineComponents||(at("FirestoreClient","Using default OnlineComponentProvider"),yield mj(n,new bO)),n.onlineComponents}),xO.apply(this,arguments)}function _j(n){return TO(n).then(e=>e.persistence)}function lx(n){return TO(n).then(e=>e.localStore)}function AO(n){return ax(n).then(e=>e.remoteStore)}function MO(n){return ax(n).then(e=>e.syncEngine)}function Xy(n){return kO.apply(this,arguments)}function kO(){return kO=(0,he.Z)(function*(n){const e=yield ax(n),t=e.eventManager;return t.onListen=gq.bind(null,e.syncEngine),t.onUnlisten=mq.bind(null,e.syncEngine),t}),kO.apply(this,arguments)}function vj(n,e,t={}){const r=new us;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(i,s,o,u,h){const g=new ox({next:b=>{s.enqueueAndForget(()=>GP(i,y));const T=b.docs.has(o);!T&&b.fromCache?h.reject(new et(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&b.fromCache&&u&&"server"===u.source?h.reject(new et(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(b)},error:b=>h.reject(b)}),y=new KP(Py(o.path),g,{includeMetadataChanges:!0,Nu:!0});return zP(i,y)}(yield Xy(n),n.asyncQueue,e,t,r)})),r.promise}function wj(n,e,t={}){const r=new us;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(i,s,o,u,h){const g=new ox({next:b=>{s.enqueueAndForget(()=>GP(i,y)),b.fromCache&&"server"===u.source?h.reject(new et(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(b)},error:b=>h.reject(b)}),y=new KP(o,g,{includeMetadataChanges:!0,Nu:!0});return zP(i,y)}(yield Xy(n),n.asyncQueue,e,t,r)})),r.promise}class Zq{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new IP(this,"async_queue_retry"),this.Wc=()=>{const t=tx();t&&at("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=tx();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=tx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new us;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,he.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!mf(t))throw t;at("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Fi("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=$P.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&kt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function RO(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Kq{constructor(){this._progressObserver={},this._taskCompletionResolver=new us,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Hr extends cE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Zq,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||bj(this),this._firestoreClient.terminate()}}function Ui(n){return n._firestoreClient||bj(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function bj(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new oG(n._databaseId,s,n._persistenceKey,(u=t).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,u.useFetchStreams));var s,u;n._firestoreClient=new Bq(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Ej(n,e,t){const r=new us;return n.asyncQueue.enqueue((0,he.Z)(function*(){try{yield gj(n,t),yield mj(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(o=s).name?o.code===Pe.FAILED_PRECONDITION||o.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw s;bg("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var o})).then(()=>r.promise)}function Cj(n){if(n._initialized||n._terminated)throw new et(Pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ku{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ku(ds.fromBase64String(e))}catch(t){throw new et(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ku(ds.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new et(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ug{constructor(e){this._methodName=e}}class cx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new et(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new et(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mn(this._lat,e._lat)||mn(this._long,e._long)}}const s4=/^__.*__$/;class o4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new qd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ly(e,this.data,t,this.fieldTransforms)}}class Ij{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new qd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Dj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt()}}class ux{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ux(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return fx(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Dj(this.sa)&&s4.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class a4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||oE(e)}da(e,t,r,i=!1){return new ux({sa:e,methodName:t,fa:r,path:wi.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Bg(n){const e=n._freezeSettings(),t=oE(n._databaseId);return new a4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dx(n,e,t,r,i,s={}){const o=n.da(s.merge||s.mergeFields?2:0,e,t,i);LO("Data must be an object, but it was:",o,r);const u=xj(r,o);let h,g;if(s.merge)h=new ya(o.fieldMask),g=o.fieldTransforms;else if(s.mergeFields){const y=[];for(const b of s.mergeFields){const T=FO(e,b,t);if(!o.contains(T))throw new et(Pe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Mj(y,T)||y.push(T)}h=new ya(y),g=o.fieldTransforms.filter(b=>h.covers(b.field))}else h=null,g=o.fieldTransforms;return new o4(new Ys(u),h,g)}class uE extends Ug{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uE}}function Tj(n,e,t){return new ux({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class PO extends Ug{_toFieldTransform(e){return new $b(e.path,new Oy)}isEqual(e){return e instanceof PO}}class l4 extends Ug{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Tj(this,e,!0),r=this._a.map(s=>jg(s,t)),i=new Mg(r);return new $b(e.path,i)}isEqual(e){return this===e}}class c4 extends Ug{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Tj(this,e,!0),r=this._a.map(s=>jg(s,t)),i=new kg(r);return new $b(e.path,i)}isEqual(e){return this===e}}class u4 extends Ug{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Ny(e.yt,pU(e.yt,this.wa));return new $b(e.path,t)}isEqual(e){return this===e}}function OO(n,e,t,r){const i=n.da(1,e,t);LO("Data must be an object, but it was:",i,r);const s=[],o=Ys.empty();Ig(r,(h,g)=>{const y=hx(e,h,t);g=(0,j.m9)(g);const b=i.ca(y);if(g instanceof uE)s.push(y);else{const T=jg(g,b);null!=T&&(s.push(y),o.set(y,T))}});const u=new ya(s);return new Ij(o,u,i.fieldTransforms)}function NO(n,e,t,r,i,s){const o=n.da(1,e,t),u=[FO(e,r,t)],h=[i];if(s.length%2!=0)throw new et(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<s.length;T+=2)u.push(FO(e,s[T])),h.push(s[T+1]);const g=[],y=Ys.empty();for(let T=u.length-1;T>=0;--T)if(!Mj(g,u[T])){const k=u[T];let P=h[T];P=(0,j.m9)(P);const B=o.ca(k);if(P instanceof uE)g.push(k);else{const H=jg(P,B);null!=H&&(g.push(k),y.set(k,H))}}const b=new ya(g);return new Ij(y,b,o.fieldTransforms)}function Sj(n,e,t,r=!1){return jg(t,n.da(r?4:3,e))}function jg(n,e){if(Aj(n=(0,j.m9)(n)))return LO("Unsupported field value:",e,n),xj(n,e);if(n instanceof Ug)return function(t,r){if(!Dj(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const o of t){let u=jg(o,r.aa(s));null==u&&(u={nullValue:"NULL_VALUE"}),i.push(u),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,j.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return pU(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ni.fromDate(t);return{timestampValue:Vy(r.yt,i)}}if(t instanceof ni){const i=new ni(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vy(r.yt,i)}}if(t instanceof cx)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ku)return{bytesValue:NU(r.yt,t._byteString)};if(t instanceof jr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:YR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${ix(t)}`)}(n,e)}function xj(n,e){const t={};return UV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ig(n,(r,i)=>{const s=jg(i,e.ra(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Aj(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ni||n instanceof cx||n instanceof ku||n instanceof jr||n instanceof Ug)}function LO(n,e,t){if(!Aj(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ix(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function FO(n,e,t){if((e=(0,j.m9)(e))instanceof Yd)return e._internalPath;if("string"==typeof e)return hx(n,e);throw fx("Field path arguments must be of type string or ",n,!1,void 0,t)}const d4=new RegExp("[~\\*/\\[\\]]");function hx(n,e,t){if(e.search(d4)>=0)throw fx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yd(...e.split("."))._internalPath}catch{throw fx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fx(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(s||o)&&(h+=" (found",s&&(h+=` in field ${r}`),o&&(h+=` in document ${i}`),h+=")"),new et(Pe.INVALID_ARGUMENT,u+n+h)}function Mj(n,e){return n.some(t=>t.isEqual(e))}class dE{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new h4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(px("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class h4 extends dE{data(){return super.data()}}function px(n,e){return"string"==typeof e?hx(n,e):e instanceof Yd?e._internalPath:e._delegate._internalPath}function kj(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new et(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VO{}class hE extends VO{}function xf(n,e,...t){let r=[];e instanceof VO&&r.push(e),r=r.concat(t),function(i){const s=i.filter(u=>u instanceof Jy).length,o=i.filter(u=>u instanceof fE).length;if(s>1||s>0&&o>0)throw new et(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class fE extends hE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fE(e,t,r)}_apply(e){const t=this._parse(e);return Nj(e._query,t),new Qs(e.firestore,e.converter,GR(e._query,t))}_parse(e){const t=Bg(e.firestore);return function(i,s,o,u,h,g,y){let b;if(h.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new et(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){Oj(y,g);const T=[];for(const k of y)T.push(Pj(u,i,k));b={arrayValue:{values:T}}}else b=Pj(u,i,y)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||Oj(y,g),b=Sj(o,"where",y,"in"===g||"not-in"===g);return Hn.create(h,g,b)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Jy extends VO{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:pr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const u of o)Nj(s,u),s=GR(s,u)}(e._query,t),new Qs(e.firestore,e.converter,GR(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class UO extends hE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new UO(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new et(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new et(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new ky(i,s);return function(u,h){if(null===zR(u)){const g=OS(u);null!==g&&Lj(0,g,h.field)}}(r,o),o}(e._query,this._field,this._direction);return new Qs(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Gd(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class gx extends hE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new gx(e,t,r)}_apply(e){return new Qs(e.firestore,e.converter,NS(e._query,this._limit,this._limitType))}}class mx extends hE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new mx(e,t,r)}_apply(e){const t=Rj(e,this.type,this._docOrFields,this._inclusive);return new Qs(e.firestore,e.converter,(i=t,new Gd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class _x extends hE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new _x(e,t,r)}_apply(e){const t=Rj(e,this.type,this._docOrFields,this._inclusive);return new Qs(e.firestore,e.converter,(i=t,new Gd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Rj(n,e,t,r){if(t[0]=(0,j.m9)(t[0]),t[0]instanceof dE)return function(i,s,o,u,h){if(!u)throw new et(Pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const g=[];for(const y of Ag(i))if(y.field.isKeyField())g.push(Sg(s,u.key));else{const b=u.data.field(y.field);if(FR(b))throw new et(Pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===b){const T=y.field.canonicalString();throw new et(Pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}g.push(b)}return new bf(g,h)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Bg(n.firestore);return function(s,o,u,h,g,y){const b=s.explicitOrderBy;if(g.length>b.length)throw new et(Pe.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let k=0;k<g.length;k++){const P=g[k];if(b[k].field.isKeyField()){if("string"!=typeof P)throw new et(Pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof P}`);if(!WR(s)&&-1!==P.indexOf("/"))throw new et(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${P}' contains a slash.`);const B=s.path.child(Kn.fromString(P));if(!_t.isDocumentKey(B))throw new et(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${B}' is not because it contains an odd number of segments.`);const H=new _t(B);T.push(Sg(o,H))}else{const B=Sj(u,h,P);T.push(B)}}return new bf(T,y)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Pj(n,e,t){if("string"==typeof(t=(0,j.m9)(t))){if(""===t)throw new et(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WR(e)&&-1!==t.indexOf("/"))throw new et(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Kn.fromString(t));if(!_t.isDocumentKey(r))throw new et(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sg(n,new _t(r))}if(t instanceof jr)return Sg(n,t._key);throw new et(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ix(t)}.`)}function Oj(n,e){if(!Array.isArray(n)||0===n.length)throw new et(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new et(Pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Nj(n,e){if(e.isInequality()){const r=OS(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new et(Pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=zR(n);null!==s&&Lj(0,i,s)}const t=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new et(Pe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Lj(n,e,t){if(!t.isEqual(e))throw new et(Pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class BO{convertValue(e,t="none"){switch(Tg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw kt()}}convertObject(e,t){const r={};return Ig(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new cx(bi(e.latitude),bi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=jV(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fb(e));default:return null}}convertTimestamp(e){const t=yf(e);return new ni(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Kn.fromString(e);zt(WU(r));const i=new _f(r.get(1),r.get(3)),s=new _t(r.popFirst(5));return i.isEqual(t)||Fi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function yx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class b4 extends BO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ku(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jr(this.firestore,null,t)}}class Hg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qd extends dE{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(px("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pE extends Qd{data(e={}){return super.data(e)}}class Af{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pE(this._firestore,this._userDataWriter,r.key,r,new Hg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new et(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new pE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Hg(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const u=new pE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Hg(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,g=-1;return 0!==o.type&&(h=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),g=s.indexOf(o.doc.key)),{type:E4(o.type),doc:u,oldIndex:h,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function E4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt()}}function Vj(n,e){return n instanceof Qd&&e instanceof Qd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Af&&e instanceof Af&&n._firestore===e._firestore&&CO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Mf extends BO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ku(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jr(this.firestore,null,t)}}function Uj(n,e,t){n=$n(n,jr);const r=$n(n.firestore,Hr),i=yx(n.converter,e,t);return ev(r,[dx(Bg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ri.none())])}function Bj(n,e,t,...r){n=$n(n,jr);const i=$n(n.firestore,Hr),s=Bg(i);let o;return o="string"==typeof(e=(0,j.m9)(e))||e instanceof Yd?NO(s,"updateDoc",n._key,e,t,r):OO(s,"updateDoc",n._key,e),ev(i,[o.toMutation(n._key,ri.exists(!0))])}function jj(n,...e){var t,r,i;n=(0,j.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||RO(e[o])||(s=e[o],o++);const u={includeMetadataChanges:s.includeMetadataChanges};if(RO(e[o])){const b=e[o];e[o]=null===(t=b.next)||void 0===t?void 0:t.bind(b),e[o+1]=null===(r=b.error)||void 0===r?void 0:r.bind(b),e[o+2]=null===(i=b.complete)||void 0===i?void 0:i.bind(b)}let h,g,y;if(n instanceof jr)g=$n(n.firestore,Hr),y=Py(n._key.path),h={next:b=>{e[o]&&e[o](jO(g,n,b))},error:e[o+1],complete:e[o+2]};else{const b=$n(n,Qs);g=$n(b.firestore,Hr),y=b._query;const T=new Mf(g);h={next:k=>{e[o]&&e[o](new Af(g,T,b,k))},error:e[o+1],complete:e[o+2]},kj(n._query)}return function(b,T,k,P){const B=new ox(P),H=new KP(T,B,k);return b.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return zP(yield Xy(b),H)})),()=>{B.bc(),b.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return GP(yield Xy(b),H)}))}}(Ui(g),y,u,h)}function ev(n,e){return function(t,r){const i=new us;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function _q(n,e,t){return eO.apply(this,arguments)}(yield MO(t),r,i)})),i.promise}(Ui(n),e)}function jO(n,e,t){const r=t.docs.get(e._key),i=new Mf(n);return new Qd(n,i,e._key,r,new Hg(t.hasPendingWrites,t.fromCache),e.converter)}const R4={maxAttempts:5};class Hj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bg(e)}set(e,t,r){this._verifyNotCommitted();const i=kf(e,this._firestore),s=yx(i.converter,t,r),o=dx(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,ri.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=kf(e,this._firestore);let o;return o="string"==typeof(t=(0,j.m9)(t))||t instanceof Yd?NO(this._dataReader,"WriteBatch.update",s._key,t,r,i):OO(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,ri.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kf(e,this._firestore);return this._mutations=this._mutations.concat(new Fy(t._key,ri.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new et(Pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kf(n,e){if((n=(0,j.m9)(n)).firestore!==e)throw new et(Pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class P4 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bg(e)}get(e){const t=kf(e,this._firestore),r=new b4(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return kt();const s=i[0];if(s.isFoundDocument())return new dE(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new dE(this._firestore,r,t._key,null,t.converter);throw kt()})}set(e,t,r){const i=kf(e,this._firestore),s=yx(i.converter,t,r),o=dx(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const s=kf(e,this._firestore);let o;return o="string"==typeof(t=(0,j.m9)(t))||t instanceof Yd?NO(this._dataReader,"Transaction.update",s._key,t,r,i):OO(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=kf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=kf(e,this._firestore),r=new Mf(this._firestore);return super.get(e).then(i=>new Qd(this._firestore,r,t._key,i._document,new Hg(!1,!1),t.converter))}}function HO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new et("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zj(){if(typeof Uint8Array>"u")throw new et("unimplemented","Uint8Arrays are not available in this environment.")}function Wj(){if(!function aG(){return typeof atob<"u"}())throw new et("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Sy=tr.SDK_VERSION,(0,tr._registerComponent)(new qt.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),o=new Hr(new ZW(t.getProvider("auth-internal")),new QW(t.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new et(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _f(u.options.projectId,h)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),(0,tr.registerVersion)(xV,"3.8.1",n),(0,tr.registerVersion)(xV,"3.8.1","esm2017")}();class gE{constructor(e){this._delegate=e}static fromBase64String(e){return Wj(),new gE(ku.fromBase64String(e))}static fromUint8Array(e){return zj(),new gE(ku.fromUint8Array(e))}toBase64(){return Wj(),this._delegate.toBase64()}toUint8Array(){return zj(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function $O(n){return function H4(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class $4{enableIndexedDbPersistence(e,t){return function Qq(n,e){Cj(n=$n(n,Hr));const t=Ui(n),r=n._freezeSettings(),i=new bO;return Ej(t,i,new ij(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Xq(n){Cj(n=$n(n,Hr));const e=Ui(n),t=n._freezeSettings(),r=new bO;return Ej(e,r,new Pq(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Jq(n){if(n._initialized&&!n._terminated)throw new et(Pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new us;return n._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(r){if(!Ac.C())return Promise.resolve();const i=r+"main";yield Ac.delete(i)}),function(r){return t.apply(this,arguments)})(pP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Gj{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _f||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function dj(n,e,t,r={}){var i;const s=(n=$n(n,cE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&bg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let o,u;if("string"==typeof r.mockUserToken)o=r.mockUserToken,u=Ss.MOCK_USER;else{o=(0,j.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new et(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ss(h)}n._authCredentials=new qW(new AV(o,u))}}(this._delegate,e,t,r)}enableNetwork(){return function t4(n){return function jq(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield _j(n),t=yield AO(n);return e.setNetworkEnabled(!0),function(r){const i=vt(r);return i._u.delete(0),aE(i)}(t)}))}(Ui(n=$n(n,Hr)))}(this._delegate)}disableNetwork(){return function n4(n){return function Hq(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield _j(n),t=yield AO(n);return e.setNetworkEnabled(!1),(r=(0,he.Z)(function*(i){const s=vt(i);s._u.add(0),yield Wy(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Ui(n=$n(n,Hr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,sj("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function e4(n){return function(e){const t=new us;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function bq(n,e){return sO.apply(this,arguments)}(yield MO(e),t)})),t.promise}(Ui(n=$n(n,Hr)))}(this._delegate)}onSnapshotsInSync(e){return function k4(n,e){return function Wq(n,e){const t=new ox(e);return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield Xy(n),i=t,vt(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield Xy(n),i=t,void vt(r).Ru.delete(i);var r,i}))}}(Ui(n=$n(n,Hr)),RO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new et("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new tv(this,hj(this._delegate,e))}catch(t){throw Ho(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ol(this,sx(this._delegate,e))}catch(t){throw Ho(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $o(this,function Oq(n,e){if(n=$n(n,cE),EO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new et(Pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qs(n,null,(t=e,new Gd(Kn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ho(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function O4(n,e,t){n=$n(n,Hr);const r=Object.assign(Object.assign({},R4),t);return function(i){if(i.maxAttempts<1)throw new et(Pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const u=new us;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const h=yield function yj(n){return ax(n).then(e=>e.datastore)}(i);new Uq(i.asyncQueue,h,o,s,u).run()})),u.promise}(Ui(n),i=>e(new P4(n,i)),r)}(this._delegate,t=>e(new qj(this,t)))}batch(){return Ui(this._delegate),new Zj(new Hj(this._delegate,e=>ev(this._delegate,e)))}loadBundle(e){return function r4(n,e){const t=Ui(n=$n(n,Hr)),r=new Kq;return function Gq(n,e,t,r){const i=function(s,o){let u;return u="string"==typeof s?(new TextEncoder).encode(s):s,h=function(h,g){if(h instanceof Uint8Array)return pj(h,g);if(h instanceof ArrayBuffer)return pj(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new Nq(h,o);var h}(t,oE(e));n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function Rq(n,e,t){const r=vt(n);var i;(i=(0,he.Z)(function*(s,o,u){try{const h=yield o.getMetadata();if(yield function(T,k){const P=vt(T),B=Vi(k.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",H=>P.Ns.getBundleMetadata(H,k.id)).then(H=>!!H&&H.createTime.compareTo(B)>=0)}(s.localStore,h))return yield o.close(),u._completeWith({taskState:"Success",documentsLoaded:(T=h).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);u._updateProgress(ZB(h));const g=new dq(h,s.localStore,o.yt);let y=yield o.mc();for(;y;){const T=yield g.Fu(y);T&&u._updateProgress(T),y=yield o.mc()}const b=yield g.complete();return yield Kd(s,b.Lu,void 0),yield function(T,k){const P=vt(T);return P.persistence.runTransaction("Save bundle","readwrite",B=>P.Ns.saveBundleMetadata(B,k))}(s.localStore,h),u._completeWith(b.progress),Promise.resolve(b.Bu)}catch(h){return bg("SyncEngine",`Loading bundle failed with ${h}`),u._failWith(h),Promise.resolve(new Set)}var T}),function(s,o,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield MO(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function i4(n,e){return function qq(n,e){return n.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,r){const i=vt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield lx(n),e)}))}(Ui(n=$n(n,Hr)),e).then(t=>t?new Qs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new $o(this,t):null)}}class vx extends BO{constructor(e){super(),this.firestore=e}convertBytes(e){return new gE(new ku(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ol.forKey(t,this.firestore,null)}}class qj{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new vx(e)}get(e){const t=zg(e);return this._delegate.get(t).then(r=>new mE(this._firestore,new Qd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=zg(e);return r?(HO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=zg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=zg(e);return this._delegate.delete(t),this}}class Zj{constructor(e){this._delegate=e}set(e,t,r){const i=zg(e);return r?(HO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=zg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=zg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $g{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _E(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=$g.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new $g(e,new vx(e),t),i.set(t,s)),s}}$g.INSTANCES=new WeakMap;class Ol{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vx(e)}static forPath(e,t,r){if(e.length%2!=0)throw new et("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ol(t,new jr(t._delegate,r,new _t(e)))}static forKey(e,t,r){return new Ol(t,new jr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new tv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new tv(this.firestore,hj(this._delegate,e))}catch(t){throw Ho(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,j.m9)(e))instanceof jr&&fj(this._delegate,e)}set(e,t){t=HO("DocumentReference.set",t);try{return t?Uj(this._delegate,e,t):Uj(this._delegate,e)}catch(r){throw Ho(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Bj(this._delegate,e):Bj(this._delegate,e,t,...r)}catch(i){throw Ho(i,"updateDoc()","DocumentReference.update()")}}delete(){return function A4(n){return ev($n(n.firestore,Hr),[new Fy(n._key,ri.none())])}(this._delegate)}onSnapshot(...e){const t=Kj(e),r=Yj(e,i=>new mE(this.firestore,new Qd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return jj(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function I4(n){n=$n(n,jr);const e=$n(n.firestore,Hr),t=Ui(e),r=new Mf(e);return function $q(n,e){const t=new us;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(i,s,o){try{const u=yield function(h,g){const y=vt(h);return y.persistence.runTransaction("read document","readonly",b=>y.localDocuments.getDocument(b,g))}(i,s);u.isFoundDocument()?o.resolve(u):u.isNoDocument()?o.resolve(null):o.reject(new et(Pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const h=Zy(u,`Failed to get document '${s} from cache`);o.reject(h)}}),function(i,s,o){return r.apply(this,arguments)})(yield lx(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Qd(e,r,n._key,i,new Hg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function D4(n){n=$n(n,jr);const e=$n(n.firestore,Hr);return vj(Ui(e),n._key,{source:"server"}).then(t=>jO(e,n,t))}(this._delegate):function C4(n){n=$n(n,jr);const e=$n(n.firestore,Hr);return vj(Ui(e),n._key).then(t=>jO(e,n,t))}(this._delegate),t.then(r=>new mE(this.firestore,new Qd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ol(this.firestore,this._delegate.withConverter(e?$g.getInstance(this.firestore,e):null))}}function Ho(n,e,t){return n.message=n.message.replace(e,t),n}function Kj(n){for(const e of n)if("object"==typeof e&&!$O(e))return e;return{}}function Yj(n,e){var t,r;let i;return i=$O(n[0])?n[0]:$O(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ol(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Vj(this._delegate,e._delegate)}}class _E extends mE{data(e){const t=this._delegate.data(e);return function WW(n,e){n||kt()}(void 0!==t),t}}class $o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vx(e)}where(e,t,r){try{return new $o(this.firestore,xf(this._delegate,function f4(n,e,t){const r=e,i=px("where",n);return fE._create(i,r,t)}(e,t,r)))}catch(i){throw Ho(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $o(this.firestore,xf(this._delegate,function p4(n,e="asc"){const t=e,r=px("orderBy",n);return UO._create(r,t)}(e,t)))}catch(r){throw Ho(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $o(this.firestore,xf(this._delegate,function g4(n){return lj("limit",n),gx._create("limit",n,"F")}(e)))}catch(t){throw Ho(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $o(this.firestore,xf(this._delegate,function m4(n){return lj("limitToLast",n),gx._create("limitToLast",n,"L")}(e)))}catch(t){throw Ho(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $o(this.firestore,xf(this._delegate,function _4(...n){return mx._create("startAt",n,!0)}(...e)))}catch(t){throw Ho(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $o(this.firestore,xf(this._delegate,function y4(...n){return mx._create("startAfter",n,!1)}(...e)))}catch(t){throw Ho(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $o(this.firestore,xf(this._delegate,function v4(...n){return _x._create("endBefore",n,!1)}(...e)))}catch(t){throw Ho(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $o(this.firestore,xf(this._delegate,function w4(...n){return _x._create("endAt",n,!0)}(...e)))}catch(t){throw Ho(t,"endAt()","Query.endAt()")}}isEqual(e){return CO(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function S4(n){n=$n(n,Qs);const e=$n(n.firestore,Hr),t=Ui(e),r=new Mf(e);return function zq(n,e){const t=new us;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(i,s,o){try{const u=yield XS(i,s,!0),h=new QB(s,u.Hi),g=h.Wu(u.documents),y=h.applyChanges(g,!1);o.resolve(y.snapshot)}catch(u){const h=Zy(u,`Failed to execute query '${s} against cache`);o.reject(h)}}),function(i,s,o){return r.apply(this,arguments)})(yield lx(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Af(e,r,n,i))}(this._delegate):"server"===e?.source?function x4(n){n=$n(n,Qs);const e=$n(n.firestore,Hr),t=Ui(e),r=new Mf(e);return wj(t,n._query,{source:"server"}).then(i=>new Af(e,r,n,i))}(this._delegate):function T4(n){n=$n(n,Qs);const e=$n(n.firestore,Hr),t=Ui(e),r=new Mf(e);return kj(n._query),wj(t,n._query).then(i=>new Af(e,r,n,i))}(this._delegate),t.then(r=>new zO(this.firestore,new Af(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Kj(e),r=Yj(e,i=>new zO(this.firestore,new Af(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return jj(this._delegate,t,r)}withConverter(e){return new $o(this.firestore,this._delegate.withConverter(e?$g.getInstance(this.firestore,e):null))}}class W4{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _E(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class zO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $o(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _E(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new W4(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _E(this._firestore,r))})}isEqual(e){return Vj(this._delegate,e._delegate)}}class tv extends $o{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ol(this.firestore,e):null}doc(e){try{return new Ol(this.firestore,void 0===e?sx(this._delegate):sx(this._delegate,e))}catch(t){throw Ho(t,"doc()","CollectionReference.doc()")}}add(e){return function M4(n,e){const t=$n(n.firestore,Hr),r=sx(n),i=yx(n.converter,e);return ev(t,[dx(Bg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ri.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ol(this.firestore,t))}isEqual(e){return fj(this._delegate,e._delegate)}withConverter(e){return new tv(this.firestore,this._delegate.withConverter(e?$g.getInstance(this.firestore,e):null))}}function zg(n){return $n(n,jr)}class WO{constructor(...e){this._delegate=new Yd(...e)}static documentId(){return new WO(wi.keyField().canonicalString())}isEqual(e){return(e=(0,j.m9)(e))instanceof Yd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Wg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function L4(){return new PO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Wg(e)}static delete(){const e=function N4(){return new uE("deleteField")}();return e._methodName="FieldValue.delete",new Wg(e)}static arrayUnion(...e){const t=function F4(...n){return new l4("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Wg(t)}static arrayRemove(...e){const t=function V4(...n){return new c4("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Wg(t)}static increment(e){const t=function U4(n){return new u4("increment",n)}(e);return t._methodName="FieldValue.increment",new Wg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const G4={Firestore:Gj,GeoPoint:cx,Timestamp:ni,Blob:gE,Transaction:qj,WriteBatch:Zj,DocumentReference:Ol,DocumentSnapshot:mE,Query:$o,QueryDocumentSnapshot:_E,QuerySnapshot:zO,CollectionReference:tv,FieldPath:WO,FieldValue:Wg,setLogLevel:function z4(n){!function zW(n){pf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Qj(n,e){return function K4(n,e=di.z){return new js.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function GO(n,e){return Qj(n,e).pipe((0,xt.U)(t=>({payload:t,type:"query"})))}function wx(n,e){return GO(n,e).pipe(Y_(void 0),z1(),(0,xt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(o=>({type:o.type,payload:o}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((o,u)=>{const h=i.find(y=>y.doc.ref.isEqual(o.ref)),g=t?.payload.docs.find(y=>y.ref.isEqual(o.ref));h&&JSON.stringify(h.doc.metadata)===JSON.stringify(o.metadata)||!h&&g&&JSON.stringify(g.metadata)===JSON.stringify(o.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:o}})}),s}))}function Xj(n,e,t){return wx(n,t).pipe(A((r,i)=>function Q4(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function X4(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return qO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return qO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),L(),(0,xt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function qO(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Jj(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Z4(n){(function q4(n,e){n.INTERNAL.registerComponent(new qt.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},G4)))})(n,(e,t)=>new Gj(e,t,new $4)),n.registerVersion("@firebase/firestore-compat","0.3.1")}(Ot.Z);class eH{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=wx(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,xt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Y_(void 0),z1(),ja(([r,i])=>i.length>0||!r),(0,xt.U)(([r,i])=>i),nt.iC)}auditTrail(e){return this.stateChanges(e).pipe(A((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Jj(e);return Xj(this.query,t,this.afs.schedulers.outsideAngular).pipe(nt.iC)}valueChanges(e={}){return GO(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),nt.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(nt.iC)}add(e){return this.ref.add(e)}doc(e){return new tH(this.ref.doc(e),this.afs)}}class tH{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=iH(r,t);return new eH(i,s,this.afs)}snapshotChanges(){return function Y4(n,e){return Qj(n,e).pipe(Y_(void 0),z1(),(0,xt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(nt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,xt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Un.D)(this.ref.get(e)).pipe(nt.iC)}}class J4{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?wx(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ja(t=>t.length>0),nt.iC):wx(this.query,this.afs.schedulers.outsideAngular).pipe(nt.iC)}auditTrail(e){return this.stateChanges(e).pipe(A((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Jj(e);return Xj(this.query,t,this.afs.schedulers.outsideAngular).pipe(nt.iC)}valueChanges(e={}){return GO(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),nt.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(nt.iC)}}const nH=new f.OlP("angularfire2.enableFirestorePersistence"),rH=new f.OlP("angularfire2.firestore.persistenceSettings"),e8=new f.OlP("angularfire2.firestore.settings"),t8=new f.OlP("angularfire2.firestore.use-emulator");function iH(n,e=(t=>t)){return{query:e(n),ref:n}}let sH=(()=>{class n{constructor(t,r,i,s,o,u,h,g,y,b,T,k,P,B,H,ne,ce){this.schedulers=h;const ve=(0,Dr.on)(t,u,r),Ie=y;b&&cw(ve,u,T,P,B,H,k,ne),[this.firestore,this.persistenceEnabled$]=(0,Dr.cc)(`${ve.name}.firestore`,"AngularFirestore",ve.name,()=>{const Ce=u.runOutsideAngular(()=>ve.firestore());if(s&&Ce.settings(s),Ie&&Ce.useEmulator(...Ie),i&&!Vc(o)){const Ve=()=>{try{return(0,Un.D)(Ce.enablePersistence(g||void 0).then(()=>!0,()=>!1))}catch(rt){return typeof console<"u"&&console.warn(rt),Et(!1)}};return[Ce,u.runOutsideAngular(Ve)]}return[Ce,Et(!1)]},[s,Ie,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=iH(i,r),u=this.schedulers.ngZone.run(()=>s);return new eH(u,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new J4(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new tH(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Dr.Dh),f.LFG(Dr.xv,8),f.LFG(nH,8),f.LFG(e8,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(nt.HU),f.LFG(rH,8),f.LFG(t8,8),f.LFG($p,8),f.LFG(rw,8),f.LFG(iw,8),f.LFG(sw,8),f.LFG(ow,8),f.LFG(aw,8),f.LFG(lw,8),f.LFG(Ic,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),n8=(()=>{class n{constructor(){q_.Z.registerVersion("angularfire",nt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:nH,useValue:!0},{provide:rH,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[sH]}),n})();class Nl{constructor(e,t,r,i){this.afs=e,this.afAuth=t,this.router=r,this.ngZone=i,this.afAuth.authState.subscribe(s=>{s?(this.userData=s,localStorage.setItem("uid",s.uid),localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,t){return this.afAuth.signInWithEmailAndPassword(e,t).then(r=>{this.SetUserData(r.user),this.afAuth.authState.subscribe(i=>{i&&this.router.navigate(["dashboard/statistics"])})}).catch(r=>{Pl().fire("What is wrong with u?",r.message.split(":").pop().split("(")[0])})}SignUp(e,t){return this.afAuth.createUserWithEmailAndPassword(e,t).then(r=>{this.SendVerificationMail(),this.SetUserData(r.user)}).catch(r=>{Pl().fire("Error",r.message.split(":").pop().split("(")[0])})}SendVerificationMail(){return Pl().fire("email sent","","success"),this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{Pl().fire("Info","Password reset email sent, check your inbox.")}).catch(t=>{Pl().fire("Error",t.message.split(":").pop().split("(")[0])})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}GoogleAuth(){return this.AuthLogin(new u2.Q).then(e=>{this.router.navigate(["dashboard/statistics"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(t=>{this.router.navigate(["dashboard/statistics"]),this.SetUserData(t.user)}).catch(t=>{Pl().fire("Error",t.message.split(":").pop().split("(")[0])})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}Nl.\u0275fac=function(e){return new(e||Nl)(f.LFG(sH),f.LFG($p),f.LFG(m),f.LFG(f.R0b))},Nl.\u0275prov=f.Yz7({token:Nl,factory:Nl.\u0275fac,providedIn:"root"});const yE=function(){return{exact:!0}};function r8(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",22)(1,"ul",23)(2,"li",24)(3,"a",12)(4,"span",11),f._uU(5,"All Donors"),f.qZA()()(),f.TgZ(6,"li",24)(7,"a",13)(8,"span",11),f._uU(9,"Add New Donor"),f.qZA()()(),f.TgZ(10,"li",25)(11,"a",26)(12,"div",27)(13,"div",28),f._UZ(14,"img",29),f.qZA(),f.TgZ(15,"div",30)(16,"div",31),f._uU(17),f.qZA(),f.TgZ(18,"div",32),f._uU(19),f.qZA()()()(),f.TgZ(20,"div",33)(21,"div",34)(22,"div",35)(23,"div",36),f._UZ(24,"img",29),f.qZA(),f.TgZ(25,"div",37)(26,"span",38),f._uU(27),f.qZA(),f.TgZ(28,"span",39),f._uU(29),f.qZA()()()(),f.TgZ(30,"div",40)(31,"ul",41)(32,"li")(33,"div",42)(34,"div",36),f._UZ(35,"img",29),f.qZA(),f.TgZ(36,"div",37)(37,"span",38),f._uU(38),f.qZA(),f.TgZ(39,"span",39),f._uU(40),f.qZA()()()(),f.TgZ(41,"li")(42,"a",43),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.authService.SignOut())}),f._UZ(43,"em",44),f.TgZ(44,"span"),f._uU(45,"Sign out"),f.qZA()()()()()()()()()}if(2&n){const t=e.ngIf;f.xp6(2),f.Q6J("routerLinkActiveOptions",f.DdM(11,yE)),f.xp6(4),f.Q6J("routerLinkActiveOptions",f.DdM(12,yE)),f.xp6(8),f.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",f.LSH),f.xp6(3),f.Oqu(t.displayName?t.displayName:"User"),f.xp6(2),f.Oqu(t.email),f.xp6(5),f.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",f.LSH),f.xp6(3),f.Oqu(t.displayName?t.displayName:"User"),f.xp6(2),f.Oqu(t.email),f.xp6(6),f.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",f.LSH),f.xp6(3),f.Oqu(t.displayName?t.displayName:"User"),f.xp6(2),f.Oqu(t.email)}}class vE{constructor(e){this.authService=e}}function i8(n,e){if(1&n&&(f.TgZ(0,"option",20),f._uU(1),f.qZA()),2&n){const t=e.$implicit;f.Q6J("ngValue",t.value),f.xp6(1),f.Oqu(t.name)}}function s8(n,e){if(1&n&&(f.TgZ(0,"option",20),f._uU(1),f.qZA()),2&n){const t=e.$implicit;f.Q6J("ngValue",t.value),f.xp6(1),f.Oqu(t.name)}}function o8(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",1)(1,"h4"),f._uU(2,"Tutorial"),f.qZA(),f.TgZ(3,"form")(4,"div",2)(5,"label",3),f._uU(6,"First name"),f.qZA(),f.TgZ(7,"input",4),f.NdJ("ngModelChange",function(i){f.CHM(t);const s=f.oxw();return f.KtG(s.currentDonor.fname=i)}),f.qZA()(),f.TgZ(8,"div",2)(9,"label",5),f._uU(10,"last name"),f.qZA(),f.TgZ(11,"input",6),f.NdJ("ngModelChange",function(i){f.CHM(t);const s=f.oxw();return f.KtG(s.currentDonor.lname=i)}),f.qZA()(),f.TgZ(12,"div",2)(13,"label",7),f._uU(14,"Age"),f.qZA(),f.TgZ(15,"input",8),f.NdJ("ngModelChange",function(i){f.CHM(t);const s=f.oxw();return f.KtG(s.currentDonor.age=i)}),f.qZA()(),f.TgZ(16,"div",2)(17,"label",9),f._uU(18,"Phone"),f.qZA(),f.TgZ(19,"input",10),f.NdJ("ngModelChange",function(i){f.CHM(t);const s=f.oxw();return f.KtG(s.currentDonor.phone=i)}),f.qZA()(),f.TgZ(20,"div",2)(21,"label",11),f._uU(22,"Address"),f.qZA(),f.TgZ(23,"input",12),f.NdJ("ngModelChange",function(i){f.CHM(t);const s=f.oxw();return f.KtG(s.currentDonor.address=i)}),f.qZA()(),f.TgZ(24,"div",2)(25,"label",13),f._uU(26,"Blood type"),f.qZA(),f.TgZ(27,"div",14)(28,"select",15),f.NdJ("ngModelChange",function(i){f.CHM(t);const s=f.oxw();return f.KtG(s.currentDonor.bloodType=i)}),f.YNc(29,i8,2,2,"option",16),f.qZA()()(),f.TgZ(30,"div",2)(31,"label",13),f._uU(32,"Gender"),f.qZA(),f.TgZ(33,"div",14)(34,"select",17),f.NdJ("ngModelChange",function(i){f.CHM(t);const s=f.oxw();return f.KtG(s.currentDonor.sexe=i)}),f.YNc(35,s8,2,2,"option",16),f.qZA()()()(),f.TgZ(36,"button",18),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.deleteDonor())}),f._uU(37," Delete "),f.qZA(),f.TgZ(38,"button",19),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.updateDonor())}),f._uU(39," Update "),f.qZA()()}if(2&n){const t=f.oxw();f.xp6(7),f.Q6J("ngModel",t.currentDonor.fname),f.xp6(4),f.Q6J("ngModel",t.currentDonor.lname),f.xp6(4),f.Q6J("ngModel",t.currentDonor.age),f.xp6(4),f.Q6J("ngModel",t.currentDonor.phone),f.xp6(4),f.Q6J("ngModel",t.currentDonor.address),f.xp6(5),f.Q6J("ngModel",t.currentDonor.bloodType),f.xp6(1),f.Q6J("ngForOf",t.bloodtypesOptions),f.xp6(5),f.Q6J("ngModel",t.currentDonor.sexe),f.xp6(1),f.Q6J("ngForOf",t.sexeOptions)}}vE.\u0275fac=function(e){return new(e||vE)(f.Y36(Nl))},vE.\u0275cmp=f.Xpm({type:vE,selectors:[["app-dashboard"]],decls:30,vars:7,consts:[[1,"nk-app-root"],[1,"nk-main"],["data-content","sidebarMenu",1,"nk-sidebar","nk-sidebar-fixed","is-light"],[1,"nk-sidebar-element","nk-sidebar-head"],[1,"nk-sidebar-element"],["data-simplebar","",1,"nk-sidebar-body"],[1,"nk-sidebar-content"],[1,"nk-sidebar-menu"],[1,"nk-menu"],["routerLinkActive","active",1,"nk-menu-item",3,"routerLinkActiveOptions"],["routerLink","statistics",1,"nk-menu-link"],[1,"nk-menu-text"],["routerLink","donors",1,"nk-menu-link"],["routerLink","add",1,"nk-menu-link"],[1,"nk-wrap"],[1,"nk-header","nk-header-fluid","nk-header-fixed","is-light"],[1,"container-fluid"],[1,"nk-header-wrap"],["class","nk-header-tools",4,"ngIf"],[1,"nk-content","nk-content-fluid"],[1,"container-xl","wide-lg"],[1,"nk-content-body"],[1,"nk-header-tools"],[1,"nk-quick-nav"],["routerLinkActive","active",1,"nk-menu-item","d-xl-none",3,"routerLinkActiveOptions"],[1,"dropdown","user-dropdown"],["href","#","data-bs-toggle","dropdown",1,"dropdown-toggle"],[1,"user-toggle"],[1,"user-avatar","sm"],["alt","user",3,"src"],[1,"user-info","d-none","d-md-block"],[1,"user-name","dropdown-indicator"],[1,"user-status"],[1,"dropdown-menu","dropdown-menu-md","dropdown-menu-right","dropdown-menu-s1"],[1,"dropdown-inner","user-card-wrap","bg-lighter","d-none","d-md-block"],[1,"user-card"],[1,"user-avatar"],[1,"user-info"],[1,"lead-text"],[1,"sub-text"],[1,"dropdown-inner"],[1,"link-list"],[1,"user-card","d-md-none"],[2,"cursor","pointer",3,"click"],[1,"icon","ni","ni-signout"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2),f._UZ(3,"div",3),f.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"ul",8)(9,"li",9)(10,"a",10)(11,"span",11),f._uU(12,"Statistics"),f.qZA()()(),f.TgZ(13,"li",9)(14,"a",12)(15,"span",11),f._uU(16,"All The Donors"),f.qZA()()(),f.TgZ(17,"li",9)(18,"a",13)(19,"span",11),f._uU(20,"Add New Donor"),f.qZA()()()()()()()()(),f.TgZ(21,"div",14)(22,"div",15)(23,"div",16)(24,"div",17),f.YNc(25,r8,46,13,"div",18),f.qZA()()(),f.TgZ(26,"div",19)(27,"div",20)(28,"div",21),f._UZ(29,"router-outlet"),f.qZA()()()()()()),2&e&&(f.xp6(9),f.Q6J("routerLinkActiveOptions",f.DdM(4,yE)),f.xp6(4),f.Q6J("routerLinkActiveOptions",f.DdM(5,yE)),f.xp6(4),f.Q6J("routerLinkActiveOptions",f.DdM(6,yE)),f.xp6(8),f.Q6J("ngIf",t.authService.userData))},dependencies:[Si,ag,C,x]});class wE{constructor(e){this.donorService=e,this.refreshList=new f.vpe,this.currentDonor={fname:"",lname:"",age:1,bloodType:"",phone:1,address:"",sexe:""},this.sexeOptions=[{value:"male",name:"male"},{value:"female",name:"female"}],this.bloodtypesOptions=[{value:"A+",name:"A RhD positive (A+)"},{value:"A-",name:"A RhD negative (A-)"},{value:"B+",name:"B RhD positive (B+)"},{value:"B-",name:"B RhD negative (B-)"},{value:"O+",name:"O RhD positive (O+)"},{value:"O-",name:"O RhD negative (O-)"},{value:"AB+",name:"AB RhD positive (AB+)"},{value:"AB-",name:"AB RhD negative (AB-)"}]}ngOnInit(){}ngOnChanges(){this.currentDonor={...this.donor}}updateDonor(){this.currentDonor.key&&this.donorService.update(this.currentDonor.key,{fname:this.currentDonor.fname,lname:this.currentDonor.lname,age:this.currentDonor.age,bloodType:this.currentDonor.bloodType,phone:this.currentDonor.phone,address:this.currentDonor.address,sexe:this.currentDonor.sexe}).then(()=>Pl().fire("Done","The donor was updated successfully!","success")).catch(t=>console.log(t))}deleteDonor(){this.confirmBox()}confirmBox(){Pl().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(e=>{e.value?(this.currentDonor.key&&this.donorService.delete(this.currentDonor.key).then(()=>{this.refreshList.emit(),this.router.navigate(["dashboard/donors"])}).catch(t=>console.log(t)),Pl().fire("Deleted!","Your imaginary file has been deleted.","success")):e.dismiss===Pl().DismissReason.cancel&&Pl().fire("Cancelled","Your imaginary file is safe :)","error")})}}wE.\u0275fac=function(e){return new(e||wE)(f.Y36(Hd))},wE.\u0275cmp=f.Xpm({type:wE,selectors:[["app-donor-details"]],inputs:{donor:"donor"},outputs:{refreshList:"refreshList"},features:[f.TTD],decls:1,vars:1,consts:[["class","edit-form",4,"ngIf"],[1,"edit-form"],[1,"form-group"],["for","fname"],["type","text","id","fname","required","","name","fname",1,"form-control",3,"ngModel","ngModelChange"],["for","lname"],["type","text","id","lname","required","","name","lname",1,"form-control",3,"ngModel","ngModelChange"],["for","age"],["type","text","id","age","required","","name","age",1,"form-control",3,"ngModel","ngModelChange"],["for","phone"],["type","text","id","phone","required","","name","phone",1,"form-control",3,"ngModel","ngModelChange"],["for","address"],["type","text","id","address","required","","name","address",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-label"],[1,"form-control-wrap"],["id","bloodType","name","bloodType",1,"form-select","js-select2",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["id","sexe","name","sexe",1,"form-select","js-select2",3,"ngModel","ngModelChange"],[1,"btn","btn-danger",3,"click"],["type","submit",1,"btn","btn-success",3,"click"],[3,"ngValue"]],template:function(e,t){1&e&&f.YNc(0,o8,40,9,"div",0),2&e&&f.Q6J("ngIf",t.currentDonor)},dependencies:[Hi,Si,Ey,V1,B1,ib,db,C1,vy,hb,QT,gg],styles:[".btn[_ngcontent-%COMP%]{margin-right:16px;margin-top:20px}"]});const a8=["myModalClose"];function l8(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr")(1,"th"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td")(8,"li")(9,"a",19),f.NdJ("click",function(){const i=f.CHM(t),s=i.$implicit,o=i.index,u=f.oxw();return f.KtG(u.setActiveDonor(s,o))}),f._uU(10,"View"),f.qZA()()()()}if(2&n){const t=e.$implicit,r=e.index;f.xp6(2),f.Oqu(r+1),f.xp6(2),f.Oqu(t.fname),f.xp6(2),f.Oqu(t.lname)}}function c8(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"app-donor-details",20),f.NdJ("refreshList",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.refreshList())}),f.qZA()()}if(2&n){const t=f.oxw();f.xp6(1),f.Q6J("donor",t.currentDonor)}}function u8(n,e){1&n&&f._UZ(0,"div")}class bE{constructor(e){this.donoservice=e,this.currentIndex=-1,this.title=""}ngOnInit(){this.retrieveDonors()}refreshList(){this.currentDonor=void 0,this.currentIndex=-1,this.retrieveDonors()}retrieveDonors(){this.donoservice.getAll().snapshotChanges().pipe((0,xt.U)(e=>e.map(t=>({key:t.payload.key,...t.payload.val()})))).subscribe(e=>{this.donors=e})}setActiveDonor(e,t){this.currentDonor=e,this.currentIndex=t}removeAllDonors(){this.donoservice.deleteAll().then(()=>this.refreshList()).catch(e=>console.log(e))}}bE.\u0275fac=function(e){return new(e||bE)(f.Y36(Hd))},bE.\u0275cmp=f.Xpm({type:bE,selectors:[["app-donors-list"]],viewQuery:function(e,t){if(1&e&&f.Gf(a8,5),2&e){let r;f.iGM(r=f.CRH())&&(t.modalClose=r.first)}},decls:30,vars:3,consts:[[1,"nk-block"],[1,"card","card-bordered","h-100"],[1,"card-inner","border-bottom"],[1,"card-title-group"],[1,"card-title"],[1,"title"],[1,"card-tools"],["type","text","id","myInput","onkeyup","myFunction()","placeholder","Search for names..",1,"form-control"],[1,"card-inner","p-0"],["id","myTable",1,"table","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],["tabindex","-1","id","modalDefault",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#modalDefault",1,"pointer",3,"click"],[3,"donor","refreshList"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h6",5),f._uU(6,"Doners list"),f.qZA()(),f.TgZ(7,"div",6),f._UZ(8,"input",7),f.qZA()()(),f.TgZ(9,"div",8)(10,"table",9)(11,"thead")(12,"tr")(13,"th",10),f._uU(14,"Number"),f.qZA(),f.TgZ(15,"th",10),f._uU(16,"First Name"),f.qZA(),f.TgZ(17,"th",10),f._uU(18,"Last Name"),f.qZA()()(),f.TgZ(19,"tbody"),f.YNc(20,l8,11,3,"tr",11),f.qZA()()()()(),f.TgZ(21,"div",12)(22,"div",13)(23,"div",14)(24,"div",15)(25,"h5",16),f._uU(26,"Modal Title"),f.qZA()(),f.TgZ(27,"div",17),f.YNc(28,c8,2,1,"div",18),f.YNc(29,u8,1,0,"div",18),f.qZA()()()()),2&e&&(f.xp6(20),f.Q6J("ngForOf",t.donors),f.xp6(8),f.Q6J("ngIf",t.currentDonor),f.xp6(1),f.Q6J("ngIf",!t.currentDonor))},dependencies:[Hi,Si,wE],styles:[".pointer[_ngcontent-%COMP%]{cursor:pointer}"]});class EE{constructor(e){this.authService=e}ngOnInit(){}}EE.\u0275fac=function(e){return new(e||EE)(f.Y36(Nl))},EE.\u0275cmp=f.Xpm({type:EE,selectors:[["app-forgot-password"]],decls:25,vars:0,consts:[[1,"nk-block","nk-block-middle","mt-5","nk-auth-body","wide-xs"],[1,"card","card-bordered"],[1,"card-inner","card-inner-lg"],[1,"nk-block-head"],[1,"nk-block-head-content"],[1,"nk-block-title"],[1,"nk-block-des"],["action","html/pages/auths/auth-success-v2.html"],[1,"form-group"],[1,"form-label-group"],["for","default-01",1,"form-label"],[1,"form-control-wrap"],["type","text","id","default-01","placeholder","Enter your email address","required","",1,"form-control","form-control-lg"],["passwordResetEmail",""],[1,"btn","btn-lg","btn-primary","btn-block",3,"click"],[1,"form-note-s2","text-center","pt-4"],["routerLink","/sign-in"]],template:function(e,t){if(1&e){const r=f.EpF();f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),f._uU(6,"Reset password"),f.qZA(),f.TgZ(7,"div",6)(8,"p"),f._uU(9,"If you forgot your password, well, then we\u2019ll email you instructions to reset your password."),f.qZA()()()(),f.TgZ(10,"form",7)(11,"div",8)(12,"div",9)(13,"label",10),f._uU(14,"Email"),f.qZA()(),f.TgZ(15,"div",11),f._UZ(16,"input",12,13),f.qZA()(),f.TgZ(18,"div",8)(19,"button",14),f.NdJ("click",function(){f.CHM(r);const s=f.MAs(17);return f.KtG(t.authService.ForgotPassword(s.value))}),f._uU(20,"Send Reset Link"),f.qZA()()(),f.TgZ(21,"div",15)(22,"a",16)(23,"strong"),f._uU(24,"Return to login"),f.qZA()()()()()()}},dependencies:[C,Ey,vy,gg]});class CE{constructor(e){this.authService=e}ngOnInit(){}}CE.\u0275fac=function(e){return new(e||CE)(f.Y36(Nl))},CE.\u0275cmp=f.Xpm({type:CE,selectors:[["app-sign-in"]],decls:45,vars:0,consts:[[1,"nk-block","nk-block-middle","mt-5","nk-auth-body","wide-xs"],[1,"card","card-bordered"],[1,"card-inner","card-inner-lg"],[1,"nk-block-head"],[1,"nk-block-head-content"],[1,"nk-block-title"],[1,"nk-block-des"],["action","html/index.html"],[1,"form-group"],[1,"form-label-group"],["for","default-01",1,"form-label"],[1,"form-control-wrap"],["type","text","id","default-01","placeholder","Username","required","",1,"form-control","form-control-lg"],["userName",""],["for","password",1,"form-label"],["routerLink","/forgot-password",1,"link","link-primary","link-sm"],["href","#","data-target","password",1,"form-icon","form-icon-right","passcode-switch","lg"],[1,"passcode-icon","icon-show","icon","ni","ni-eye"],[1,"passcode-icon","icon-hide","icon","ni","ni-eye-off"],["type","password","id","password","placeholder","Password","required","",1,"form-control","form-control-lg"],["userPassword",""],[1,"btn","btn-lg","btn-primary","btn-block",3,"click"],[1,"form-note-s2","text-center","pt-4"],["routerLink","/register-user"],[1,"text-center","pt-4","pb-3"],[1,"overline-title","overline-title-sap"],[1,"nav","justify-center","gx-4"],[1,"nav-item"],[1,"nav-link",2,"cursor","pointer",3,"click"]],template:function(e,t){if(1&e){const r=f.EpF();f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),f._uU(6,"Sign-In"),f.qZA(),f.TgZ(7,"div",6)(8,"p"),f._uU(9,"Access the Dashlite panel using your email and passcode."),f.qZA()()()(),f.TgZ(10,"form",7)(11,"div",8)(12,"div",9)(13,"label",10),f._uU(14,"Email or Username"),f.qZA()(),f.TgZ(15,"div",11),f._UZ(16,"input",12,13),f.qZA()(),f.TgZ(18,"div",8)(19,"div",9)(20,"label",14),f._uU(21,"Passcode"),f.qZA(),f.TgZ(22,"a",15),f._uU(23,"Forgot Code?"),f.qZA()(),f.TgZ(24,"div",11)(25,"a",16),f._UZ(26,"em",17)(27,"em",18),f.qZA(),f._UZ(28,"input",19,20),f.qZA()(),f.TgZ(30,"div",8)(31,"button",21),f.NdJ("click",function(){f.CHM(r);const s=f.MAs(17),o=f.MAs(29);return f.KtG(t.authService.SignIn(s.value,o.value))}),f._uU(32,"Sign in"),f.qZA()()(),f.TgZ(33,"div",22),f._uU(34," New on our platform? "),f.TgZ(35,"a",23),f._uU(36,"Create an account"),f.qZA()(),f.TgZ(37,"div",24)(38,"h6",25)(39,"span"),f._uU(40,"OR"),f.qZA()()(),f.TgZ(41,"ul",26)(42,"li",27)(43,"a",28),f.NdJ("click",function(){return t.authService.GoogleAuth()}),f._uU(44,"Google"),f.qZA()()()()()()}},dependencies:[C,Ey,vy,gg]});class IE{constructor(e){this.authService=e}ngOnInit(){}}function DE(n){return(DE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Bt(n,e,t){return(e=function h8(n){var e=function d8(n,e){if("object"!==DE(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var r=t.call(n,e||"default");if("object"!==DE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===DE(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nv(n){return n+.5|0}IE.\u0275fac=function(e){return new(e||IE)(f.Y36(Nl))},IE.\u0275cmp=f.Xpm({type:IE,selectors:[["app-sign-up"]],decls:43,vars:0,consts:[[1,"nk-block","nk-block-middle","mt-5","nk-auth-body","wide-xs"],[1,"card","card-bordered"],[1,"card-inner","card-inner-lg"],[1,"nk-block-head"],[1,"nk-block-head-content"],[1,"nk-block-title"],[1,"nk-block-des"],["action","html/index.html"],[1,"form-group"],[1,"form-label-group"],["for","password",1,"form-label"],[1,"form-control-wrap"],["type","text","id","default-01","placeholder","Email","required","",1,"form-control","form-control-lg"],["userName",""],["href","#","data-target","password",1,"form-icon","form-icon-right","passcode-switch","lg"],[1,"passcode-icon","icon-show","icon","ni","ni-eye"],[1,"passcode-icon","icon-hide","icon","ni","ni-eye-off"],["type","password","id","password","placeholder","Password","required","",1,"form-control","form-control-lg"],["userPassword",""],[1,"btn","btn-lg","btn-primary","btn-block",3,"click"],[1,"form-note-s2","text-center","pt-4"],["routerLink","/sign-in"],[1,"text-center","pt-4","pb-3"],[1,"overline-title","overline-title-sap"],[1,"nav","justify-center","gx-4"],[1,"nav-item"],[1,"nav-link",2,"cursor","pointer",3,"click"]],template:function(e,t){if(1&e){const r=f.EpF();f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),f._uU(6,"Sign-Un"),f.qZA(),f.TgZ(7,"div",6)(8,"p"),f._uU(9,"Creating an account using your email and passcode."),f.qZA()()()(),f.TgZ(10,"form",7)(11,"div",8)(12,"div",9)(13,"label",10),f._uU(14,"Passcode"),f.qZA()(),f.TgZ(15,"div",11),f._UZ(16,"input",12,13),f.qZA()(),f.TgZ(18,"div",8)(19,"div",9)(20,"label",10),f._uU(21,"Passcode"),f.qZA()(),f.TgZ(22,"div",11)(23,"a",14),f._UZ(24,"em",15)(25,"em",16),f.qZA(),f._UZ(26,"input",17,18),f.qZA()(),f.TgZ(28,"div",8)(29,"button",19),f.NdJ("click",function(){f.CHM(r);const s=f.MAs(17),o=f.MAs(27);return f.KtG(t.authService.SignUp(s.value,o.value))}),f._uU(30,"Sign Up"),f.qZA()()(),f.TgZ(31,"div",20),f._uU(32," Signed Up? "),f.TgZ(33,"a",21),f._uU(34,"Sign in to your account"),f.qZA()(),f.TgZ(35,"div",22)(36,"h6",23)(37,"span"),f._uU(38,"OR"),f.qZA()()(),f.TgZ(39,"ul",24)(40,"li",25)(41,"a",26),f.NdJ("click",function(){return t.authService.GoogleAuth()}),f._uU(42,"Google"),f.qZA()()()()()()}},dependencies:[C,Ey,vy,gg]});const Xd=(n,e,t)=>Math.max(Math.min(n,t),e);function TE(n){return Xd(nv(2.55*n),0,255)}function Rf(n){return Xd(nv(255*n),0,255)}function Jd(n){return Xd(nv(n/2.55)/100,0,1)}function oH(n){return Xd(nv(100*n),0,100)}const Ll={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ZO=[..."0123456789ABCDEF"],f8=n=>ZO[15&n],p8=n=>ZO[(240&n)>>4]+ZO[15&n],bx=n=>(240&n)>>4==(15&n);const v8=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function aH(n,e,t){const r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function w8(n,e,t){const r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function b8(n,e,t){const r=aH(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function KO(n){const t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),u=(s+o)/2;let h,g,y;return s!==o&&(y=s-o,g=u>.5?y/(2-s-o):y/(s+o),h=function E8(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}(t,r,i,y,s),h=60*h+.5),[0|h,g||0,u]}function YO(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(Rf)}function QO(n,e,t){return YO(aH,n,e,t)}function lH(n){return(n%360+360)%360}const cH={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},uH={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ex;const M8=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,XO=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,rv=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Cx(n,e,t){if(n){let r=KO(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,0===e?360:1)),r=QO(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function dH(n,e){return n&&Object.assign(e||{},n)}function hH(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Rf(n[3]))):(e=dH(n,{r:0,g:0,b:0,a:1})).a=Rf(e.a),e}function O8(n){return"r"===n.charAt(0)?function k8(n){const e=M8.exec(n);let r,i,s,t=255;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?TE(o):Xd(255*o,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?TE(r):Xd(r,0,255)),i=255&(e[4]?TE(i):Xd(i,0,255)),s=255&(e[6]?TE(s):Xd(s,0,255)),{r,g:i,b:s,a:t}}}(n):function D8(n){const e=v8.exec(n);let r,t=255;if(!e)return;e[5]!==r&&(t=e[6]?TE(+e[5]):Rf(+e[5]));const i=lH(+e[2]),s=+e[3]/100,o=+e[4]/100;return r="hwb"===e[1]?function C8(n,e,t){return YO(b8,n,e,t)}(i,s,o):"hsv"===e[1]?function I8(n,e,t){return YO(w8,n,e,t)}(i,s,o):QO(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}(n)}class iv{constructor(e){if(e instanceof iv)return e;const t=typeof e;let r;"object"===t?r=hH(e):"string"===t&&(r=function m8(n){var t,e=n.length;return"#"===n[0]&&(4===e||5===e?t={r:255&17*Ll[n[1]],g:255&17*Ll[n[2]],b:255&17*Ll[n[3]],a:5===e?17*Ll[n[4]]:255}:(7===e||9===e)&&(t={r:Ll[n[1]]<<4|Ll[n[2]],g:Ll[n[3]]<<4|Ll[n[4]],b:Ll[n[5]]<<4|Ll[n[6]],a:9===e?Ll[n[7]]<<4|Ll[n[8]]:255})),t}(e)||function A8(n){Ex||(Ex=function x8(){const n={},e=Object.keys(uH),t=Object.keys(cH);let r,i,s,o,u;for(r=0;r<e.length;r++){for(o=u=e[r],i=0;i<t.length;i++)s=t[i],u=u.replace(s,cH[s]);s=parseInt(uH[o],16),n[u]=[s>>16&255,s>>8&255,255&s]}return n}(),Ex.transparent=[0,0,0,0]);const e=Ex[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(e)||O8(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=dH(this._rgb);return e&&(e.a=Jd(e.a)),e}set rgb(e){this._rgb=hH(e)}rgbString(){return this._valid?function R8(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Jd(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):void 0}hexString(){return this._valid?function y8(n){var e=(n=>bx(n.r)&&bx(n.g)&&bx(n.b)&&bx(n.a))(n)?f8:p8;return n?"#"+e(n.r)+e(n.g)+e(n.b)+((n,e)=>n<255?e(n):"")(n.a,e):void 0}(this._rgb):void 0}hslString(){return this._valid?function S8(n){if(!n)return;const e=KO(n),t=e[0],r=oH(e[1]),i=oH(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${Jd(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let s;const o=t===s?.5:t,u=2*o-1,h=r.a-i.a,g=((u*h==-1?u:(u+h)/(1+u*h))+1)/2;s=1-g,r.r=255&g*r.r+s*i.r+.5,r.g=255&g*r.g+s*i.g+.5,r.b=255&g*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=function P8(n,e,t){const r=rv(Jd(n.r)),i=rv(Jd(n.g)),s=rv(Jd(n.b));return{r:Rf(XO(r+t*(rv(Jd(e.r))-r))),g:Rf(XO(i+t*(rv(Jd(e.g))-i))),b:Rf(XO(s+t*(rv(Jd(e.b))-s))),a:n.a+t*(e.a-n.a)}}(this._rgb,e._rgb,t)),this}clone(){return new iv(this.rgb)}alpha(e){return this._rgb.a=Rf(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=nv(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Cx(this._rgb,2,e),this}darken(e){return Cx(this._rgb,2,-e),this}saturate(e){return Cx(this._rgb,1,e),this}desaturate(e){return Cx(this._rgb,1,-e),this}rotate(e){return function T8(n,e){var t=KO(n);t[0]=lH(t[0]+e),t=QO(t),n.r=t[0],n.g=t[1],n.b=t[2]}(this._rgb,e),this}}function eh(){}const N8=(()=>{let n=0;return()=>n++})();function Xn(n){return null===n||typeof n>"u"}function $r(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function zn(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}function Ci(n){return("number"==typeof n||n instanceof Number)&&isFinite(+n)}function Ka(n,e){return Ci(n)?n:e}function xn(n,e){return typeof n>"u"?e:n}const fH=(n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Pr(n,e,t){if(n&&"function"==typeof n.call)return n.apply(t,e)}function gr(n,e,t,r){let i,s,o;if($r(n))if(s=n.length,r)for(i=s-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<s;i++)e.call(t,n[i],i);else if(zn(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function Ix(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Dx(n){if($r(n))return n.map(Dx);if(zn(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=Dx(n[t[i]]);return e}return n}function pH(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function F8(n,e,t,r){if(!pH(n))return;const i=e[n],s=t[n];zn(i)&&zn(s)?SE(i,s,r):e[n]=Dx(s)}function SE(n,e,t){const r=$r(e)?e:[e],i=r.length;if(!zn(n))return n;const s=(t=t||{}).merger||F8;let o;for(let u=0;u<i;++u){if(o=r[u],!zn(o))continue;const h=Object.keys(o);for(let g=0,y=h.length;g<y;++g)s(h[g],n,o,t)}return n}function xE(n,e){return SE(n,e,{merger:V8})}function V8(n,e,t){if(!pH(n))return;const r=e[n],i=t[n];zn(r)&&zn(i)?xE(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Dx(i))}const gH={"":n=>n,x:n=>n.x,y:n=>n.y};function Pf(n,e){return(gH[e]||(gH[e]=function B8(n){const e=function U8(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}(n);return t=>{for(const r of e){if(""===r)break;t=t&&t[r]}return t}}(e)))(n)}function JO(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Fl=n=>typeof n<"u",Of=n=>"function"==typeof n,mH=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0},ii=Math.PI,zr=2*ii,H8=zr+ii,Tx=Number.POSITIVE_INFINITY,$8=ii/180,Ii=ii/2,Gg=ii/4,_H=2*ii/3,Nf=Math.log10,Ru=Math.sign;function AE(n,e,t){return Math.abs(n-e)<t}function yH(n){const e=Math.round(n);n=AE(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Nf(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function sv(n){return!isNaN(parseFloat(n))&&isFinite(n)}function vH(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Mc(n){return n*(ii/180)}function eN(n){return n*(180/ii)}function wH(n){if(!Ci(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function bH(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*ii&&(s+=zr),{angle:s,distance:i}}function tN(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function G8(n,e){return(n-e+H8)%zr-ii}function Ya(n){return(n%zr+zr)%zr}function ME(n,e,t,r){const i=Ya(n),s=Ya(e),o=Ya(t),u=Ya(s-i),h=Ya(o-i),g=Ya(i-s),y=Ya(i-o);return i===s||i===o||r&&s===o||u>h&&g<y}function Ms(n,e,t){return Math.max(e,Math.min(t,n))}function th(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function nN(n,e,t){t=t||(o=>n[o]<e);let s,r=n.length-1,i=0;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}const nh=(n,e,t,r)=>nN(n,t,r?i=>{const s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),Z8=(n,e,t)=>nN(n,t,r=>n[r][e]>=t),EH=["push","pop","shift","splice","unshift"];function CH(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),!(r.length>0)&&(EH.forEach(s=>{delete n[s]}),delete n._chartjs)}function IH(n){const e=new Set;let t,r;for(t=0,r=n.length;t<r;++t)e.add(n[t]);return e.size===r?n:Array.from(e)}const DH=typeof window>"u"?function(n){return n()}:window.requestAnimationFrame;function TH(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,DH.call(window,()=>{r=!1,n.apply(e,t)}))}}const rN=n=>"start"===n?"left":"end"===n?"right":"center",fo=(n,e,t)=>"start"===n?e:"end"===n?t:(e+t)/2;function SH(n,e,t){const r=e.length;let i=0,s=r;if(n._sorted){const{iScale:o,_parsed:u}=n,h=o.axis,{min:g,max:y,minDefined:b,maxDefined:T}=o.getUserBounds();b&&(i=Ms(Math.min(nh(u,o.axis,g).lo,t?r:nh(e,h,o.getPixelForValue(g)).lo),0,r-1)),s=T?Ms(Math.max(nh(u,o.axis,y,!0).hi+1,t?0:nh(e,h,o.getPixelForValue(y),!0).hi+1),i,r)-i:r-i}return{start:i,count:s}}function xH(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}const Sx=n=>0===n||1===n,AH=(n,e,t)=>-Math.pow(2,10*(n-=1))*Math.sin((n-e)*zr/t),MH=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*zr/t)+1,kE={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*Ii),easeOutSine:n=>Math.sin(n*Ii),easeInOutSine:n=>-.5*(Math.cos(ii*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>Sx(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Sx(n)?n:AH(n,.075,.3),easeOutElastic:n=>Sx(n)?n:MH(n,.075,.3),easeInOutElastic:n=>Sx(n)?n:n<.5?.5*AH(2*n,.1125,.45):.5+.5*MH(2*n-1,.1125,.45),easeInBack:n=>n*n*(2.70158*n-1.70158),easeOutBack:n=>(n-=1)*n*(2.70158*n+1.70158)+1,easeInOutBack(n){let e=1.70158;return(n/=.5)<1?n*n*((1+(e*=1.525))*n-e)*.5:.5*((n-=2)*n*((1+(e*=1.525))*n+e)+2)},easeInBounce:n=>1-kE.easeOutBounce(1-n),easeOutBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,easeInOutBounce:n=>n<.5?.5*kE.easeInBounce(2*n):.5*kE.easeOutBounce(2*n-1)+.5};function kH(n){if(n&&"object"==typeof n){const e=n.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function RH(n){return kH(n)?n:new iv(n)}function iN(n){return kH(n)?n:new iv(n).saturate(.5).darken(.1).hexString()}const J8=["x","y","borderWidth","radius","tension"],eZ=["color","borderColor","backgroundColor"],PH=new Map;function RE(n,e,t){return function rZ(n,e){e=e||{};const t=n+JSON.stringify(e);let r=PH.get(t);return r||(r=new Intl.NumberFormat(n,e),PH.set(t,r)),r}(e,t).format(n)}const OH={values:n=>$r(n)?n:""+n,numeric(n,e,t){if(0===n)return"0";const r=this.chart.options.locale;let i,s=n;if(t.length>1){const g=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(g<1e-4||g>1e15)&&(i="scientific"),s=function iZ(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}(n,t)}const o=Nf(Math.abs(s)),u=Math.max(Math.min(-1*Math.floor(o),20),0),h={notation:i,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(h,this.options.ticks.format),RE(n,r,h)},logarithmic(n,e,t){if(0===n)return"0";const r=t[e].significand||n/Math.pow(10,Math.floor(Nf(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?OH.numeric.call(this,n,e,t):""}};var xx={formatters:OH};const qg=Object.create(null),sN=Object.create(null);function PE(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function oN(n,e,t){return"string"==typeof e?SE(PE(n,e),t):SE(PE(n,""),e)}class oZ{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>iN(i.backgroundColor),this.hoverBorderColor=(r,i)=>iN(i.borderColor),this.hoverColor=(r,i)=>iN(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return oN(this,e,t)}get(e){return PE(this,e)}describe(e,t){return oN(sN,e,t)}override(e,t){return oN(qg,e,t)}route(e,t,r,i){const s=PE(this,e),o=PE(this,r),u="_"+t;Object.defineProperties(s,{[u]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[u],g=o[i];return zn(h)?Object.assign({},g,h):xn(h,g)},set(h){this[u]=h}}})}apply(e){e.forEach(t=>t(this))}}var Bi=new oZ({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function tZ(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),n.set("animations",{colors:{type:"color",properties:eZ},numbers:{type:"number",properties:J8}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function nZ(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function sZ(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:xx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Ax(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function lZ(n,e,t,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let o=0;const u=t.length;let h,g,y,b,T;for(h=0;h<u;h++)if(b=t[h],null!=b&&!0!==$r(b))o=Ax(n,i,s,o,b);else if($r(b))for(g=0,y=b.length;g<y;g++)T=b[g],null!=T&&!$r(T)&&(o=Ax(n,i,s,o,T));n.restore();const k=s.length/2;if(k>t.length){for(h=0;h<k;h++)delete i[s[h]];s.splice(0,k)}return o}function Zg(n,e,t){const r=n.currentDevicePixelRatio,i=0!==t?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function NH(n,e){(e=e||n.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function aN(n,e,t,r){LH(n,e,t,r,null)}function LH(n,e,t,r,i){let s,o,u,h,g,y,b,T;const k=e.pointStyle,P=e.rotation,B=e.radius;let H=(P||0)*$8;if(k&&"object"==typeof k&&(s=k.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return n.save(),n.translate(t,r),n.rotate(H),n.drawImage(k,-k.width/2,-k.height/2,k.width,k.height),void n.restore();if(!(isNaN(B)||B<=0)){switch(n.beginPath(),k){default:i?n.ellipse(t,r,i/2,B,0,0,zr):n.arc(t,r,B,0,zr),n.closePath();break;case"triangle":y=i?i/2:B,n.moveTo(t+Math.sin(H)*y,r-Math.cos(H)*B),H+=_H,n.lineTo(t+Math.sin(H)*y,r-Math.cos(H)*B),H+=_H,n.lineTo(t+Math.sin(H)*y,r-Math.cos(H)*B),n.closePath();break;case"rectRounded":g=.516*B,h=B-g,o=Math.cos(H+Gg)*h,b=Math.cos(H+Gg)*(i?i/2-g:h),u=Math.sin(H+Gg)*h,T=Math.sin(H+Gg)*(i?i/2-g:h),n.arc(t-b,r-u,g,H-ii,H-Ii),n.arc(t+T,r-o,g,H-Ii,H),n.arc(t+b,r+u,g,H,H+Ii),n.arc(t-T,r+o,g,H+Ii,H+ii),n.closePath();break;case"rect":if(!P){h=Math.SQRT1_2*B,y=i?i/2:h,n.rect(t-y,r-h,2*y,2*h);break}H+=Gg;case"rectRot":b=Math.cos(H)*(i?i/2:B),o=Math.cos(H)*B,u=Math.sin(H)*B,T=Math.sin(H)*(i?i/2:B),n.moveTo(t-b,r-u),n.lineTo(t+T,r-o),n.lineTo(t+b,r+u),n.lineTo(t-T,r+o),n.closePath();break;case"crossRot":H+=Gg;case"cross":b=Math.cos(H)*(i?i/2:B),o=Math.cos(H)*B,u=Math.sin(H)*B,T=Math.sin(H)*(i?i/2:B),n.moveTo(t-b,r-u),n.lineTo(t+b,r+u),n.moveTo(t+T,r-o),n.lineTo(t-T,r+o);break;case"star":b=Math.cos(H)*(i?i/2:B),o=Math.cos(H)*B,u=Math.sin(H)*B,T=Math.sin(H)*(i?i/2:B),n.moveTo(t-b,r-u),n.lineTo(t+b,r+u),n.moveTo(t+T,r-o),n.lineTo(t-T,r+o),H+=Gg,b=Math.cos(H)*(i?i/2:B),o=Math.cos(H)*B,u=Math.sin(H)*B,T=Math.sin(H)*(i?i/2:B),n.moveTo(t-b,r-u),n.lineTo(t+b,r+u),n.moveTo(t+T,r-o),n.lineTo(t-T,r+o);break;case"line":o=i?i/2:Math.cos(H)*B,u=Math.sin(H)*B,n.moveTo(t-o,r-u),n.lineTo(t+o,r+u);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(H)*(i?i/2:B),r+Math.sin(H)*B);break;case!1:n.closePath()}n.fill(),e.borderWidth>0&&n.stroke()}}function OE(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Mx(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function kx(n){n.restore()}function cZ(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if("middle"===i){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else"after"===i!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function uZ(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function Kg(n,e,t,r,i,s={}){const o=$r(e)?e:[e],u=s.strokeWidth>0&&""!==s.strokeColor;let h,g;for(n.save(),n.font=i.string,function dZ(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Xn(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}(n,s),h=0;h<o.length;++h)g=o[h],s.backdrop&&fZ(n,s.backdrop),u&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Xn(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(g,t,r,s.maxWidth)),n.fillText(g,t,r,s.maxWidth),hZ(n,t,r,g,s),r+=i.lineHeight;n.restore()}function hZ(n,e,t,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),o=e-s.actualBoundingBoxLeft,u=e+s.actualBoundingBoxRight,g=t+s.actualBoundingBoxDescent,y=i.strikethrough?(t-s.actualBoundingBoxAscent+g)/2:g;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,y),n.lineTo(u,y),n.stroke()}}function fZ(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function NE(n,e){const{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,-Ii,ii,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,ii,Ii,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Ii,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-Ii,!0),n.lineTo(t+o.topLeft,r)}const pZ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,gZ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function mZ(n,e){const t=(""+n).match(pZ);if(!t||"normal"===t[1])return 1.2*e;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100}return e*n}const _Z=n=>+n||0;function lN(n,e){const t={},r=zn(e),i=r?Object.keys(e):e,s=zn(n)?r?o=>xn(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=_Z(s(o));return t}function FH(n){return lN(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Yg(n){return lN(n,["topLeft","topRight","bottomLeft","bottomRight"])}function po(n){const e=FH(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function hs(n,e){let t=xn((n=n||{}).size,(e=e||Bi.font).size);"string"==typeof t&&(t=parseInt(t,10));let r=xn(n.style,e.style);r&&!(""+r).match(gZ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:xn(n.family,e.family),lineHeight:mZ(xn(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:xn(n.weight,e.weight),string:""};return i.string=function aZ(n){return!n||Xn(n.size)||Xn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(i),i}function LE(n,e,t,r){let s,o,u,i=!0;for(s=0,o=n.length;s<o;++s)if(u=n[s],void 0!==u&&(void 0!==e&&"function"==typeof u&&(u=u(e),i=!1),void 0!==t&&$r(u)&&(u=u[t%u.length],i=!1),void 0!==u))return r&&!i&&(r.cacheable=!1),u}function Lf(n,e){return Object.assign(Object.create(n),e)}function cN(n,e=[""],t=n,r,i=(()=>n[0])){Fl(r)||(r=HH("_fallback",n));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:t,_fallback:r,_getTarget:i,override:o=>cN([o,...n],e,t,r)};return new Proxy(s,{deleteProperty:(o,u)=>(delete o[u],delete o._keys,delete n[0][u],!0),get:(o,u)=>UH(o,u,()=>function TZ(n,e,t,r){let i;for(const s of e)if(i=HH(vZ(s,n),t),Fl(i))return uN(n,i)?dN(t,r,n,i):i}(u,e,n,o)),getOwnPropertyDescriptor:(o,u)=>Reflect.getOwnPropertyDescriptor(o._scopes[0],u),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(o,u)=>$H(o).includes(u),ownKeys:o=>$H(o),set(o,u,h){const g=o._storage||(o._storage=i());return o[u]=g[u]=h,delete o._keys,!0}})}function ov(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:VH(n,r),setContext:s=>ov(n,s,t,r),override:s=>ov(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty:(s,o)=>(delete s[o],delete n[o],!0),get:(s,o,u)=>UH(s,o,()=>function wZ(n,e,t){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n;let u=r[e];return Of(u)&&o.isScriptable(e)&&(u=function bZ(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_stack:u}=t;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);return u.add(n),e=e(s,o||r),u.delete(n),uN(n,e)&&(e=dN(i._scopes,i,n,e)),e}(e,u,n,t)),$r(u)&&u.length&&(u=function EZ(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:u}=t;if(Fl(s.index)&&r(n))e=e[s.index%e.length];else if(zn(e[0])){const h=e,g=i._scopes.filter(y=>y!==h);e=[];for(const y of h){const b=dN(g,i,n,y);e.push(ov(b,s,o&&o[n],u))}}return e}(e,u,n,o.isIndexable)),uN(e,u)&&(u=ov(u,i,s&&s[e],o)),u}(s,o,u)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(s,o)=>Reflect.has(n,o),ownKeys:()=>Reflect.ownKeys(n),set:(s,o,u)=>(n[o]=u,delete s[o],!0)})}function VH(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Of(t)?t:()=>t,isIndexable:Of(r)?r:()=>r}}const vZ=(n,e)=>n?n+JO(e):e,uN=(n,e)=>zn(e)&&"adapters"!==n&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function UH(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];const r=t();return n[e]=r,r}function BH(n,e,t){return Of(n)?n(e,t):n}const CZ=(n,e)=>!0===n?e:"string"==typeof n?Pf(e,n):void 0;function IZ(n,e,t,r,i){for(const s of e){const o=CZ(t,s);if(o){n.add(o);const u=BH(o._fallback,t,i);if(Fl(u)&&u!==t&&u!==r)return u}else if(!1===o&&Fl(r)&&t!==r)return null}return!1}function dN(n,e,t,r){const i=e._rootScopes,s=BH(e._fallback,t,r),o=[...n,...i],u=new Set;u.add(r);let h=jH(u,o,t,s||t,r);return!(null===h||Fl(s)&&s!==t&&(h=jH(u,o,s,h,r),null===h))&&cN(Array.from(u),[""],i,s,()=>function DZ(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return $r(i)&&zn(t)?t:i||{}}(e,t,r))}function jH(n,e,t,r,i){for(;t;)t=IZ(n,e,t,r,i);return t}function HH(n,e){for(const t of e){if(!t)continue;const r=t[n];if(Fl(r))return r}}function $H(n){let e=n._keys;return e||(e=n._keys=function SZ(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}(n._scopes)),e}function zH(n,e,t,r){const{iScale:i}=n,{key:s="r"}=this._parsing,o=new Array(r);let u,h,g,y;for(u=0,h=r;u<h;++u)g=u+t,y=e[g],o[u]={r:i.parse(Pf(y,s),g)};return o}const xZ=Number.EPSILON||1e-14,av=(n,e)=>e<n.length&&!n[e].skip&&n[e],WH=n=>"x"===n?"y":"x";function AZ(n,e,t,r){const i=n.skip?e:n,s=e,o=t.skip?e:t,u=tN(s,i),h=tN(o,s);let g=u/(u+h),y=h/(u+h);g=isNaN(g)?0:g,y=isNaN(y)?0:y;const b=r*g,T=r*y;return{previous:{x:s.x-b*(o.x-i.x),y:s.y-b*(o.y-i.y)},next:{x:s.x+T*(o.x-i.x),y:s.y+T*(o.y-i.y)}}}function Rx(n,e,t){return Math.max(Math.min(n,t),e)}function OZ(n,e,t,r,i){let s,o,u,h;if(e.spanGaps&&(n=n.filter(g=>!g.skip)),"monotone"===e.cubicInterpolationMode)!function RZ(n,e="x"){const t=WH(e),r=n.length,i=Array(r).fill(0),s=Array(r);let o,u,h,g=av(n,0);for(o=0;o<r;++o)if(u=h,h=g,g=av(n,o+1),h){if(g){const y=g[e]-h[e];i[o]=0!==y?(g[t]-h[t])/y:0}s[o]=u?g?Ru(i[o-1])!==Ru(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}(function MZ(n,e,t){const r=n.length;let i,s,o,u,h,g=av(n,0);for(let y=0;y<r-1;++y)if(h=g,g=av(n,y+1),h&&g){if(AE(e[y],0,xZ)){t[y]=t[y+1]=0;continue}i=t[y]/e[y],s=t[y+1]/e[y],u=Math.pow(i,2)+Math.pow(s,2),!(u<=9)&&(o=3/Math.sqrt(u),t[y]=i*o*e[y],t[y+1]=s*o*e[y])}})(n,i,s),function kZ(n,e,t="x"){const r=WH(t),i=n.length;let s,o,u,h=av(n,0);for(let g=0;g<i;++g){if(o=u,u=h,h=av(n,g+1),!u)continue;const y=u[t],b=u[r];o&&(s=(y-o[t])/3,u[`cp1${t}`]=y-s,u[`cp1${r}`]=b-s*e[g]),h&&(s=(h[t]-y)/3,u[`cp2${t}`]=y+s,u[`cp2${r}`]=b+s*e[g])}}(n,s,e)}(n,i);else{let g=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)u=n[s],h=AZ(g,u,n[Math.min(s+1,o-(r?0:1))%o],e.tension),u.cp1x=h.previous.x,u.cp1y=h.previous.y,u.cp2x=h.next.x,u.cp2y=h.next.y,g=u}e.capBezierPoints&&function PZ(n,e){let t,r,i,s,o,u=OE(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=u,u=t<r-1&&OE(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=Rx(i.cp1x,e.left,e.right),i.cp1y=Rx(i.cp1y,e.top,e.bottom)),u&&(i.cp2x=Rx(i.cp2x,e.left,e.right),i.cp2y=Rx(i.cp2y,e.top,e.bottom)))}(n,t)}function GH(){return typeof window<"u"&&typeof document<"u"}function hN(n){let e=n.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Px(n,e,t){let r;return"string"==typeof n?(r=parseInt(n,10),-1!==n.indexOf("%")&&(r=r/100*e.parentNode[t])):r=n,r}const Ox=n=>n.ownerDocument.defaultView.getComputedStyle(n,null),LZ=["top","right","bottom","left"];function Qg(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=LZ[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Xg(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=Ox(t),s="border-box"===i.boxSizing,o=Qg(i,"padding"),u=Qg(i,"border","width"),{x:h,y:g,box:y}=function VZ(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r;let u,h,o=!1;if(((n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot))(i,s,n.target))u=i,h=s;else{const g=e.getBoundingClientRect();u=r.clientX-g.left,h=r.clientY-g.top,o=!0}return{x:u,y:h,box:o}}(n,t),b=o.left+(y&&u.left),T=o.top+(y&&u.top);let{width:k,height:P}=e;return s&&(k-=o.width+u.width,P-=o.height+u.height),{x:Math.round((h-b)/k*t.width/r),y:Math.round((g-T)/P*t.height/r)}}const Nx=n=>Math.round(10*n)/10;function qH(n,e,t){const r=e||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0)}const jZ=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n}();function ZH(n,e){const t=function NZ(n,e){return Ox(n).getPropertyValue(e)}(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Jg(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function HZ(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:"middle"===r?t<.5?n.y:e.y:"after"===r?t<1?n.y:e.y:t>0?e.y:n.y}}function $Z(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=Jg(n,i,t),u=Jg(i,s,t),h=Jg(s,e,t),g=Jg(o,u,t),y=Jg(u,h,t);return Jg(g,y,t)}function lv(n,e,t){return n?function(n,e){return{x:t=>n+n+e-t,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,r)=>t-r,leftForLtr:(t,r)=>t-r}}(e,t):{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,e)=>n+e,leftForLtr:(n,e)=>n}}function KH(n,e){let t,r;("ltr"===e||"rtl"===e)&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function YH(n,e){void 0!==e&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function QH(n){return"angle"===n?{between:ME,compare:G8,normalize:Ya}:{between:th,compare:(e,t)=>e-t,normalize:e=>e}}function XH({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t==0,style:i}}function JH(n,e,t){if(!t)return[n];const{property:r,start:i,end:s}=t,o=e.length,{compare:u,between:h,normalize:g}=QH(r),{start:y,end:b,loop:T,style:k}=function GZ(n,e,t){const{property:r,start:i,end:s}=t,{between:o,normalize:u}=QH(r),h=e.length;let T,k,{start:g,end:y,loop:b}=n;if(b){for(g+=h,y+=h,T=0,k=h;T<k&&o(u(e[g%h][r]),i,s);++T)g--,y--;g%=h,y%=h}return y<g&&(y+=h),{start:g,end:y,loop:b,style:n.style}}(n,e,t),P=[];let ne,ce,ve,B=!1,H=null;for(let gt=y,Jt=y;gt<=b;++gt)ce=e[gt%o],!ce.skip&&(ne=g(ce[r]),ne!==ve&&(B=h(ne,i,s),null===H&&(B||h(i,ve,ne)&&0!==u(i,ve))&&(H=0===u(ne,i)?gt:Jt),null!==H&&(!B||0===u(s,ne)||h(s,ve,ne))&&(P.push(XH({start:H,end:gt,loop:T,count:o,style:k})),H=null),Jt=gt,ve=ne));return null!==H&&P.push(XH({start:H,end:b,loop:T,count:o,style:k})),P}function e$(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const s=JH(r[i],n.points,e);s.length&&t.push(...s)}return t}function n$(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function QZ(n,e){return e&&JSON.stringify(n)!==JSON.stringify(e)}class XZ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const o=t.duration;t.listeners[i].forEach(u=>u({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=DH.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let h,o=s.length-1,u=!1;for(;o>=0;--o)h=s[o],h._active?(h._total>r.duration&&(r.duration=h._total),h.tick(e),u=!0):(s[o]=s[s.length-1],s.pop());u&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var rh=new XZ;const r$="transparent",JZ={boolean:(n,e,t)=>t>.5?e:n,color(n,e,t){const r=RH(n||r$),i=r.valid&&RH(e||r$);return i&&i.valid?i.mix(r,t).hexString():e},number:(n,e,t)=>n+(e-n)*t};class e7{constructor(e,t,r,i){const s=t[r];i=LE([e.to,i,s,e.from]);const o=LE([e.from,s,i]);this._active=!0,this._fn=e.fn||JZ[e.type||typeof o],this._easing=kE[e.easing]||kE.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=LE([e.to,t,i,e.from]),this._from=LE([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,u=this._to;let h;if(this._active=s!==u&&(o||t<r),!this._active)return this._target[i]=u,void this._notify(!0);t<0?this._target[i]=s:(h=t/r%2,h=o&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[i]=this._fn(s,u,h))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class i${constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!zn(e))return;const t=Object.keys(Bi.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!zn(s))return;const o={};for(const u of t)o[u]=s[u];($r(s.properties)&&s.properties||[i]).forEach(u=>{(u===i||!r.has(u))&&r.set(u,o)})})}_animateOptions(e,t){const r=t.options,i=function n7(n,e){if(!e)return;let t=n.options;if(t)return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t;n.options=e}(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&function t7(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),u=Date.now();let h;for(h=o.length-1;h>=0;--h){const g=o[h];if("$"===g.charAt(0))continue;if("options"===g){i.push(...this._animateOptions(e,t));continue}const y=t[g];let b=s[g];const T=r.get(g);if(b){if(T&&b.active()){b.update(T,y,u);continue}b.cancel()}T&&T.duration?(s[g]=b=new e7(T,e,g,y),i.push(b)):e[g]=y}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const r=this._createAnimations(e,t);return r.length?(rh.add(this._chart,r),!0):void 0}}function s$(n,e){const t=n&&n.options||{},r=t.reverse,i=void 0===t.min?e:0,s=void 0===t.max?e:0;return{start:r?s:i,end:r?i:s}}function o$(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function a$(n,e,t,r={}){const i=n.keys,s="single"===r.mode;let o,u,h,g;if(null!==e){for(o=0,u=i.length;o<u;++o){if(h=+i[o],h===t){if(r.all)continue;break}g=n.values[h],Ci(g)&&(s||0===e||Ru(e)===Ru(g))&&(e+=g)}return e}}function l$(n,e){const t=n&&n.options.stacked;return t||void 0===t&&void 0!==e.stack}function l7(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function c$(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function u$(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:u}=r,h=s.axis,g=o.axis,y=function o7(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}(s,o,r),b=e.length;let T;for(let k=0;k<b;++k){const P=e[k],{[h]:B,[g]:H}=P;T=(P._stacks||(P._stacks={}))[g]=l7(i,y,B),T[u]=H,T._top=c$(T,o,!0,r.type),T._bottom=c$(T,o,!1,r.type),(T._visualValues||(T._visualValues={}))[u]=H}}function fN(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function FE(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const s=i._stacks;if(!s||void 0===s[r]||void 0===s[r][t])return;delete s[r][t],void 0!==s[r]._visualValues&&void 0!==s[r]._visualValues[t]&&delete s[r]._visualValues[t]}}}const pN=n=>"reset"===n||"none"===n,d$=(n,e)=>e?n:Object.assign({},n);class kc{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=l$(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&FE(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(b,T,k,P)=>"x"===b?T:"r"===b?P:k,s=t.xAxisID=xn(r.xAxisID,fN(e,"x")),o=t.yAxisID=xn(r.yAxisID,fN(e,"y")),u=t.rAxisID=xn(r.rAxisID,fN(e,"r")),h=t.indexAxis,g=t.iAxisID=i(h,s,o,u),y=t.vAxisID=i(h,o,s,u);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(u),t.iScale=this.getScaleForId(g),t.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&CH(this._data,this),e._stacked&&FE(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(zn(t))this._data=function s7(n){const e=Object.keys(n),t=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],t[r]={x:s,y:n[s]};return t}(t);else if(r!==t){if(r){CH(r,this);const i=this._cachedMeta;FE(i),i._parsed=[]}t&&Object.isExtensible(t)&&function Y8(n,e){n._chartjs?n._chartjs.listeners.push(e):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),EH.forEach(t=>{const r="_onData"+JO(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return n._chartjs.listeners.forEach(u=>{"function"==typeof u[r]&&u[r](...s)}),o}})}))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=t._stacked;t._stacked=l$(t.vScale,t),t.stack!==r.stack&&(i=!0,FE(t),t.stack=r.stack),this._resyncElements(e),(i||s!==t._stacked)&&u$(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,u=s.axis;let y,b,T,h=0===e&&t===i.length||r._sorted,g=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=i,r._sorted=!0,T=i;else{T=$r(i[e])?this.parseArrayData(r,i,e,t):zn(i[e])?this.parseObjectData(r,i,e,t):this.parsePrimitiveData(r,i,e,t);const k=()=>null===b[u]||g&&b[u]<g[u];for(y=0;y<t;++y)r._parsed[y+e]=b=T[y],h&&(k()&&(h=!1),g=b);r._sorted=h}o&&u$(this,T)}parsePrimitiveData(e,t,r,i){const{iScale:s,vScale:o}=e,u=s.axis,h=o.axis,g=s.getLabels(),y=s===o,b=new Array(i);let T,k,P;for(T=0,k=i;T<k;++T)P=T+r,b[T]={[u]:y||s.parse(g[P],P),[h]:o.parse(t[P],P)};return b}parseArrayData(e,t,r,i){const{xScale:s,yScale:o}=e,u=new Array(i);let h,g,y,b;for(h=0,g=i;h<g;++h)y=h+r,b=t[y],u[h]={x:s.parse(b[0],y),y:o.parse(b[1],y)};return u}parseObjectData(e,t,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,g=new Array(i);let y,b,T,k;for(y=0,b=i;y<b;++y)T=y+r,k=t[T],g[y]={x:s.parse(Pf(k,u),T),y:o.parse(Pf(k,h),T)};return g}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const s=this._cachedMeta,o=t[e.axis];return a$({keys:o$(this.chart,!0),values:t._stacks[e.axis]._visualValues},o,s.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const s=r[t.axis];let o=null===s?NaN:s;const u=i&&r._stacks[t.axis];i&&u&&(i.values=u,o=a$(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,u=this._getOtherScale(e),h=((n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:o$(this.chart,!0),values:null})(t,r),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:b}=function a7(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}(u);let T,k;function P(){k=i[T];const B=k[u.axis];return!Ci(k[e.axis])||y>B||b<B}for(T=0;T<o&&(P()||(this.updateRangeFromParsed(g,e,k,h),!s));++T);if(s)for(T=o-1;T>=0;--T)if(!P()){this.updateRangeFromParsed(g,e,k,h);break}return g}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=t.length;i<s;++i)o=t[i][e.axis],Ci(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function i7(n){let e,t,r,i;return zn(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:!1===n}}(xn(this.options.clip,function r7(n,e,t){if(!1===t)return!1;const r=s$(n,t),i=s$(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this._cachedMeta,i=r.data||[],s=this.chart.chartArea,o=[],u=this._drawStart||0,h=this._drawCount||i.length-u,g=this.options.drawActiveElementsOnTop;let y;for(r.dataset&&r.dataset.draw(e,s,u,h),y=u;y<u+h;++y){const b=i[y];b.hidden||(b.active&&g?o.push(b):b.draw(e,s))}for(y=0;y<o.length;++y)o[y].draw(e,s)}getStyle(e,t){const r=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=function u7(n,e,t){return Lf(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function c7(n,e){return Lf(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i="active"===t,s=this._cachedDataOpts,o=e+"-"+t,u=s[o],h=this.enableOptionSharing&&Fl(r);if(u)return d$(u,h);const g=this.chart.config,y=g.datasetElementScopeKeys(this._type,e),b=i?[`${e}Hover`,"hover",e,""]:[e,""],T=g.getOptionScopes(this.getDataset(),y),k=Object.keys(Bi.elements[e]),B=g.resolveNamedOptions(T,k,()=>this.getContext(r,i,t),b);return B.$shared&&(B.$shared=h,s[o]=Object.freeze(d$(B,h))),B}_resolveAnimations(e,t,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,u=s[o];if(u)return u;let h;if(!1!==i.options.animation){const y=this.chart.config,b=y.datasetAnimationScopeKeys(this._type,t),T=y.getOptionScopes(this.getDataset(),b);h=y.createResolver(T,this.getContext(e,r,t))}const g=new i$(i,h&&h.animations);return h&&h._cacheable&&(s[o]=Object.freeze(g)),g}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||pN(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(t,s)||s!==i;return this.updateSharedOptions(s,t,r),{sharedOptions:s,includeOptions:o}}updateElement(e,t,r,i){pN(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!pN(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const s=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[u,h,g]of this._syncList)this[u](h,g);this._syncList=[];const i=r.length,s=t.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,t,r=!0){const i=this._cachedMeta,s=i.data,o=e+t;let u;const h=g=>{for(g.length+=t,u=g.length-1;u>=o;u--)g[u]=g[u-t]};for(h(s),u=e;u<o;++u)s[u]=new this.dataElementType;this._parsing&&h(i._parsed),this.parse(e,t),r&&this.updateElements(s,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&FE(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function f7(n){const e=n.iScale,t=function h7(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=IH(r.sort((i,s)=>i-s))}return n._cache.$bar}(e,n.type);let i,s,o,u,r=e._length;const h=()=>{32767===o||-32768===o||(Fl(u)&&(r=Math.min(r,Math.abs(o-u)||r)),u=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),h();for(u=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),h();return r}function h$(n,e,t,r){return $r(n)?function m7(n,e,t,r){const i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),u=Math.max(i,s);let h=o,g=u;Math.abs(o)>Math.abs(u)&&(h=u,g=o),e[t.axis]=g,e._custom={barStart:h,barEnd:g,start:i,end:s,min:o,max:u}}(n,e,t,r):e[t.axis]=t.parse(n,r),e}function f$(n,e,t,r){const i=n.iScale,s=n.vScale,o=i.getLabels(),u=i===s,h=[];let g,y,b,T;for(g=t,y=t+r;g<y;++g)T=e[g],b={},b[i.axis]=u||i.parse(o[g],g),h.push(h$(T,b,s,g));return h}function gN(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function v7(n,e,t,r){let i=e.borderSkipped;const s={};if(!i)return void(n.borderSkipped=s);if(!0===i)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:u,reverse:h,top:g,bottom:y}=function y7(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}(n);"middle"===i&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=g:(t._bottom||0)===r?i=y:(s[p$(y,o,u,h)]=!0,i=g)),s[p$(i,o,u,h)]=!0,n.borderSkipped=s}function p$(n,e,t,r){return r?(n=function w7(n,e,t){return n===e?t:n===t?e:n}(n,e,t),n=g$(n,t,e)):n=g$(n,e,t),n}function g$(n,e,t){return"start"===n?e:"end"===n?t:n}function b7(n,{inflateAmount:e},t){n.inflateAmount="auto"===e?1===t?.33:0:e}Bt(kc,"defaults",{}),Bt(kc,"datasetElementType",null),Bt(kc,"dataElementType",null);class Lx extends kc{parsePrimitiveData(e,t,r,i){return f$(e,t,r,i)}parseArrayData(e,t,r,i){return f$(e,t,r,i)}parseObjectData(e,t,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,g="x"===s.axis?u:h,y="x"===o.axis?u:h,b=[];let T,k,P,B;for(T=r,k=r+i;T<k;++T)B=t[T],P={},P[s.axis]=s.parse(Pf(B,g),T),b.push(h$(Pf(B,y),P,o,T));return b}updateRangeFromParsed(e,t,r,i){super.updateRangeFromParsed(e,t,r,i);const s=r._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:i}=t,s=this.getParsed(e),o=s._custom,u=gN(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,i){const s="reset"===i,{index:o,_cachedMeta:{vScale:u}}=this,h=u.getBasePixel(),g=u.isHorizontal(),y=this._getRuler(),{sharedOptions:b,includeOptions:T}=this._getSharedOptions(t,i);for(let k=t;k<t+r;k++){const P=this.getParsed(k),B=s||Xn(P[u.axis])?{base:h,head:h}:this._calculateBarValuePixels(k),H=this._calculateBarIndexPixels(k,y),ne=(P._stacks||{})[u.axis],ce={horizontal:g,base:B.base,enableBorderRadius:!ne||gN(P._custom)||o===ne._top||o===ne._bottom,x:g?B.head:H.center,y:g?H.center:B.head,height:g?H.size:Math.abs(B.size),width:g?Math.abs(B.size):H.size};T&&(ce.options=b||this.resolveDataElementOptions(k,e[k].active?"active":i));const ve=ce.options||e[k].options;v7(ce,ve,ne,o),b7(ce,ve,y.ratio),this.updateElement(e[k],k,ce,i)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=r.options.stacked,o=[],u=h=>{const g=h.controller.getParsed(t),y=g&&g[h.vScale.axis];if(Xn(y)||isNaN(y))return!0};for(const h of i)if((void 0===t||!u(h))&&((!1===s||-1===o.indexOf(h.stack)||void 0===s&&void 0===h.stack)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,r){const i=this._getStacks(e,r),s=void 0!==t?i.indexOf(t):-1;return-1===s?i.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,i=[];let s,o;for(s=0,o=t.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const u=e.barThickness;return{min:u||f7(t),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,u=s||0,h=this.getParsed(e),g=h._custom,y=gN(g);let P,B,b=h[t.axis],T=0,k=r?this.applyStack(t,h,r):b;k!==b&&(T=k-b,k=b),y&&(b=g.barStart,k=g.barEnd-g.barStart,0!==b&&Ru(b)!==Ru(g.barEnd)&&(T=0),T+=b);const H=Xn(s)||y?T:s;let ne=t.getPixelForValue(H);if(P=this.chart.getDataVisibility(e)?t.getPixelForValue(T+k):ne,B=P-ne,Math.abs(B)<o){B=function _7(n,e,t){return 0!==n?Ru(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}(B,t,u)*o,b===u&&(ne-=B/2);const ce=t.getPixelForDecimal(0),ve=t.getPixelForDecimal(1),Ie=Math.min(ce,ve),Ce=Math.max(ce,ve);ne=Math.max(Math.min(ne,Ce),Ie),P=ne+B,r&&!y&&(h._stacks[t.axis]._visualValues[i]=t.getValueForPixel(P)-t.getValueForPixel(ne))}if(ne===t.getPixelForValue(u)){const ce=Ru(B)*t.getLineWidthForValue(u)/2;ne+=ce,B-=ce}return{size:B,base:ne,head:P,center:P+B/2}}_calculateBarIndexPixels(e,t){const r=t.scale,i=this.options,s=i.skipNull,o=xn(i.maxBarThickness,1/0);let u,h;if(t.grouped){const g=s?this._getStackCount(e):t.stackCount,y="flex"===i.barThickness?function g7(n,e,t,r){const i=e.pixels,s=i[n];let o=n>0?i[n-1]:null,u=n<i.length-1?i[n+1]:null;const h=t.categoryPercentage;null===o&&(o=s-(null===u?e.end-e.start:u-s)),null===u&&(u=s+s-o);const g=s-(s-Math.min(o,u))/2*h;return{chunk:Math.abs(u-o)/2*h/r,ratio:t.barPercentage,start:g}}(e,t,i,g):function p7(n,e,t,r){const i=t.barThickness;let s,o;return Xn(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}(e,t,i,g),b=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);u=y.start+y.chunk*b+y.chunk/2,h=Math.min(o,y.chunk*y.ratio)}else u=r.getPixelForValue(this.getParsed(e)[r.axis],e),h=Math.min(o,t.min*t.ratio);return{base:u-h/2,head:u+h/2,center:u,size:h}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)null!==this.getParsed(s)[t.axis]&&r[s].draw(this._ctx)}}Bt(Lx,"id","bar"),Bt(Lx,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Bt(Lx,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Fx extends kc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,i){const s=super.parsePrimitiveData(e,t,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,t,r,i){const s=super.parseArrayData(e,t,r,i);for(let o=0;o<s.length;o++)s[o]._custom=xn(t[r+o][2],this.resolveDataElementOptions(o+r).radius);return s}parseObjectData(e,t,r,i){const s=super.parseObjectData(e,t,r,i);for(let o=0;o<s.length;o++){const u=t[r+o];s[o]._custom=xn(u&&u.r&&+u.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=t,o=this.getParsed(e),u=i.getLabelForValue(o.x),h=s.getLabelForValue(o.y),g=o._custom;return{label:r[e]||"",value:"("+u+", "+h+(g?", "+g:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,i){const s="reset"===i,{iScale:o,vScale:u}=this._cachedMeta,{sharedOptions:h,includeOptions:g}=this._getSharedOptions(t,i),y=o.axis,b=u.axis;for(let T=t;T<t+r;T++){const k=e[T],P=!s&&this.getParsed(T),B={},H=B[y]=s?o.getPixelForDecimal(.5):o.getPixelForValue(P[y]),ne=B[b]=s?u.getBasePixel():u.getPixelForValue(P[b]);B.skip=isNaN(H)||isNaN(ne),g&&(B.options=h||this.resolveDataElementOptions(T,k.active?"active":i),s&&(B.options.radius=0)),this.updateElement(k,T,B,i)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return"active"!==t&&(i.radius=0),i.radius+=xn(r&&r._custom,s),i}}Bt(Fx,"id","bubble"),Bt(Fx,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Bt(Fx,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class em extends kc{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=r;else{let o,u,s=h=>+r[h];if(zn(r[e])){const{key:h="value"}=this._parsing;s=g=>+Pf(r[g],h)}for(o=e,u=e+t;o<u;++o)i._parsed[o]=s(o)}}_getRotation(){return Mc(this.options.rotation-90)}_getCircumference(){return Mc(this.options.circumference)}_getRotationExtents(){let e=zr,t=-zr;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,u=Math.max((Math.min(r.width,r.height)-o)/2,0),h=Math.min(((n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:+n/e)(this.options.cutout,u),1),g=this._getRingWeight(this.index),{circumference:y,rotation:b}=this._getRotationExtents(),{ratioX:T,ratioY:k,offsetX:P,offsetY:B}=function E7(n,e,t){let r=1,i=1,s=0,o=0;if(e<zr){const u=n,h=u+e,g=Math.cos(u),y=Math.sin(u),b=Math.cos(h),T=Math.sin(h),k=(ve,Ie,Ce)=>ME(ve,u,h,!0)?1:Math.max(Ie,Ie*t,Ce,Ce*t),P=(ve,Ie,Ce)=>ME(ve,u,h,!0)?-1:Math.min(Ie,Ie*t,Ce,Ce*t),B=k(0,g,b),H=k(Ii,y,T),ne=P(ii,g,b),ce=P(ii+Ii,y,T);r=(B-ne)/2,i=(H-ce)/2,s=-(B+ne)/2,o=-(H+ce)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}(b,y,h),ce=Math.max(Math.min((r.width-o)/T,(r.height-o)/k)/2,0),ve=fH(this.options.radius,ce),Ce=(ve-Math.max(ve*h,0))/this._getVisibleDatasetWeightTotal();this.offsetX=P*ve,this.offsetY=B*ve,i.total=this.calculateTotal(),this.outerRadius=ve-Ce*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Ce*g,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/zr)}updateElements(e,t,r,i){const s="reset"===i,o=this.chart,u=o.chartArea,y=(u.left+u.right)/2,b=(u.top+u.bottom)/2,T=s&&o.options.animation.animateScale,k=T?0:this.innerRadius,P=T?0:this.outerRadius,{sharedOptions:B,includeOptions:H}=this._getSharedOptions(t,i);let ce,ne=this._getRotation();for(ce=0;ce<t;++ce)ne+=this._circumference(ce,s);for(ce=t;ce<t+r;++ce){const ve=this._circumference(ce,s),Ie=e[ce],Ce={x:y+this.offsetX,y:b+this.offsetY,startAngle:ne,endAngle:ne+ve,circumference:ve,outerRadius:P,innerRadius:k};H&&(Ce.options=B||this.resolveDataElementOptions(ce,Ie.active?"active":i)),ne+=ve,this.updateElement(Ie,ce,Ce,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i,r=0;for(i=0;i<t.length;i++){const s=e._parsed[i];null!==s&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?zr*(Math.abs(e)/t):0}getLabelAndValue(e){const r=this.chart,i=r.data.labels||[],s=RE(this._cachedMeta._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const r=this.chart;let i,s,o,u,h;if(!e)for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,u=o.controller;break}if(!e)return 0;for(i=0,s=e.length;i<s;++i)h=u.resolveDataElementOptions(i),"inner"!==h.borderAlign&&(t=Math.max(t,h.borderWidth||0,h.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(xn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Bt(em,"id","doughnut"),Bt(em,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Bt(em,"descriptors",{_scriptable:n=>"spacing"!==n,_indexable:n=>"spacing"!==n}),Bt(em,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:r}}=n.legend.options;return e.labels.map((i,s)=>{const u=n.getDatasetMeta(0).controller.getStyle(s);return{text:i,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:r,lineWidth:u.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(s),index:s}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}}});class Vx extends kc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:u,count:h}=SH(t,i,o);this._drawStart=u,this._drawCount=h,xH(t)&&(u=0,h=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const g=this.resolveDatasetElementOptions(e);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:g},e),this.updateElements(i,u,h,e)}updateElements(e,t,r,i){const s="reset"===i,{iScale:o,vScale:u,_stacked:h,_dataset:g}=this._cachedMeta,{sharedOptions:y,includeOptions:b}=this._getSharedOptions(t,i),T=o.axis,k=u.axis,{spanGaps:P,segment:B}=this.options,H=sv(P)?P:Number.POSITIVE_INFINITY,ne=this.chart._animationsDisabled||s||"none"===i,ce=t+r,ve=e.length;let Ie=t>0&&this.getParsed(t-1);for(let Ce=0;Ce<ve;++Ce){const Ve=e[Ce],rt=ne?Ve:{};if(Ce<t||Ce>=ce){rt.skip=!0;continue}const gt=this.getParsed(Ce),Jt=Xn(gt[k]),Ln=rt[T]=o.getPixelForValue(gt[T],Ce),Fn=rt[k]=s||Jt?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,gt,h):gt[k],Ce);rt.skip=isNaN(Ln)||isNaN(Fn)||Jt,rt.stop=Ce>0&&Math.abs(gt[T]-Ie[T])>H,B&&(rt.parsed=gt,rt.raw=g.data[Ce]),b&&(rt.options=y||this.resolveDataElementOptions(Ce,Ve.active?"active":i)),ne||this.updateElement(Ve,Ce,rt,i),Ie=gt}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Bt(Vx,"id","line"),Bt(Vx,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Bt(Vx,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class VE extends kc{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this.chart,i=r.data.labels||[],s=RE(this._cachedMeta._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,t,r,i){return zH.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(i/2,0),u=(s-Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=s-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(e,t,r,i){const s="reset"===i,o=this.chart,h=o.options.animation,g=this._cachedMeta.rScale,y=g.xCenter,b=g.yCenter,T=g.getIndexAngle(0)-.5*ii;let P,k=T;const B=360/this.countVisibleElements();for(P=0;P<t;++P)k+=this._computeAngle(P,i,B);for(P=t;P<t+r;P++){const H=e[P];let ne=k,ce=k+this._computeAngle(P,i,B),ve=o.getDataVisibility(P)?g.getDistanceFromCenterForValue(this.getParsed(P).r):0;k=ce,s&&(h.animateScale&&(ve=0),h.animateRotate&&(ne=ce=T));const Ie={x:y,y:b,innerRadius:0,outerRadius:ve,startAngle:ne,endAngle:ce,options:this.resolveDataElementOptions(P,H.active?"active":i)};this.updateElement(H,P,Ie,i)}}countVisibleElements(){let t=0;return this._cachedMeta.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?Mc(this.resolveDataElementOptions(e,t).angle||r):0}}Bt(VE,"id","polarArea"),Bt(VE,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Bt(VE,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:r}}=n.legend.options;return e.labels.map((i,s)=>{const u=n.getDatasetMeta(0).controller.getStyle(s);return{text:i,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:r,lineWidth:u.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(s),index:s}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class mN extends em{}Bt(mN,"id","pie"),Bt(mN,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Ux extends kc{getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,i){return zH.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta,r=t.dataset,i=t.data||[],s=t.iScale.getLabels();if(r.points=i,"resize"!==e){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:s.length===i.length,options:o},e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,r,i){const s=this._cachedMeta.rScale,o="reset"===i;for(let u=t;u<t+r;u++){const h=e[u],g=this.resolveDataElementOptions(u,h.active?"active":i),y=s.getPointPositionForValue(u,this.getParsed(u).r),b=o?s.xCenter:y.x,T=o?s.yCenter:y.y,k={x:b,y:T,angle:y.angle,skip:isNaN(b)||isNaN(T),options:g};this.updateElement(h,u,k,i)}}}Bt(Ux,"id","radar"),Bt(Ux,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Bt(Ux,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Bx extends kc{getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=t,o=this.getParsed(e),u=i.getLabelForValue(o.x),h=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+u+", "+h+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,i=this.chart._animationsDisabled;let{start:s,count:o}=SH(t,r,i);if(this._drawStart=s,this._drawCount=o,xH(t)&&(s=0,o=r.length),this.options.showLine){const{dataset:u,_dataset:h}=t;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!h._decimated,u.points=r;const g=this.resolveDatasetElementOptions(e);g.segment=this.options.segment,this.updateElement(u,void 0,{animated:!i,options:g},e)}this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,i){const s="reset"===i,{iScale:o,vScale:u,_stacked:h,_dataset:g}=this._cachedMeta,y=this.resolveDataElementOptions(t,i),b=this.getSharedOptions(y),T=this.includeOptions(i,b),k=o.axis,P=u.axis,{spanGaps:B,segment:H}=this.options,ne=sv(B)?B:Number.POSITIVE_INFINITY,ce=this.chart._animationsDisabled||s||"none"===i;let ve=t>0&&this.getParsed(t-1);for(let Ie=t;Ie<t+r;++Ie){const Ce=e[Ie],Ve=this.getParsed(Ie),rt=ce?Ce:{},gt=Xn(Ve[P]),Jt=rt[k]=o.getPixelForValue(Ve[k],Ie),Ln=rt[P]=s||gt?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,Ve,h):Ve[P],Ie);rt.skip=isNaN(Jt)||isNaN(Ln)||gt,rt.stop=Ie>0&&Math.abs(Ve[k]-ve[k])>ne,H&&(rt.parsed=Ve,rt.raw=g.data[Ie]),T&&(rt.options=b||this.resolveDataElementOptions(Ie,Ce.active?"active":i)),ce||this.updateElement(Ce,Ie,rt,i),ve=Ve}this.updateSharedOptions(b,i,y)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let u=0;for(let h=t.length-1;h>=0;--h)u=Math.max(u,t[h].size(this.resolveDataElementOptions(h))/2);return u>0&&u}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!t.length)return i;const s=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,s,o)/2}}Bt(Bx,"id","scatter"),Bt(Bx,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Bt(Bx,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var C7=Object.freeze({__proto__:null,BarController:Lx,BubbleController:Fx,DoughnutController:em,LineController:Vx,PolarAreaController:VE,PieController:mN,RadarController:Ux,ScatterController:Bx});function tm(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class _N{static override(e){Object.assign(_N.prototype,e)}constructor(e){this.options=e||{}}init(){}formats(){return tm()}parse(){return tm()}format(){return tm()}add(){return tm()}diff(){return tm()}startOf(){return tm()}endOf(){return tm()}}var I7__date=_N;function D7(n,e,t,r){const{controller:i,data:s,_sorted:o}=n,u=i._cachedMeta.iScale;if(u&&e===u.axis&&"r"!==e&&o&&s.length){const h=u._reversePixels?Z8:nh;if(!r)return h(s,e,t);if(i._sharedOptions){const g=s[0],y="function"==typeof g.getRange&&g.getRange(e);if(y){const b=h(s,e,t-y),T=h(s,e,t+y);return{lo:b.lo,hi:T.hi}}}}return{lo:0,hi:s.length-1}}function UE(n,e,t,r,i){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let u=0,h=s.length;u<h;++u){const{index:g,data:y}=s[u],{lo:b,hi:T}=D7(s[u],e,o,i);for(let k=b;k<=T;++k){const P=y[k];P.skip||r(P,g,k)}}}function yN(n,e,t,r,i){const s=[];return!i&&!n.isPointInArea(e)||UE(n,t,e,function(u,h,g){!i&&!OE(u,n.chartArea,0)||u.inRange(e.x,e.y,r)&&s.push({element:u,datasetIndex:h,index:g})},!0),s}function vN(n,e,t,r,i,s){return s||n.isPointInArea(e)?"r"!==t||r?function x7(n,e,t,r,i,s){let o=[];const u=function T7(n){const e=-1!==n.indexOf("x"),t=-1!==n.indexOf("y");return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(t);let h=Number.POSITIVE_INFINITY;return UE(n,t,e,function g(y,b,T){const k=y.inRange(e.x,e.y,i);if(r&&!k)return;const P=y.getCenterPoint(i);if(!s&&!n.isPointInArea(P)&&!k)return;const H=u(e,P);H<h?(o=[{element:y,datasetIndex:b,index:T}],h=H):H===h&&o.push({element:y,datasetIndex:b,index:T})}),o}(n,e,t,r,i,s):function S7(n,e,t,r){let i=[];return UE(n,t,e,function s(o,u,h){const{startAngle:g,endAngle:y}=o.getProps(["startAngle","endAngle"],r),{angle:b}=bH(o,{x:e.x,y:e.y});ME(b,g,y)&&i.push({element:o,datasetIndex:u,index:h})}),i}(n,e,t,i):[]}function m$(n,e,t,r,i){const s=[],o="x"===t?"inXRange":"inYRange";let u=!1;return UE(n,t,e,(h,g,y)=>{h[o](e[t],i)&&(s.push({element:h,datasetIndex:g,index:y}),u=u||h.inRange(e.x,e.y,i))}),r&&!u?[]:s}var A7={evaluateInteractionItems:UE,modes:{index(n,e,t,r){const i=Xg(e,n),s=t.axis||"x",o=t.includeInvisible||!1,u=t.intersect?yN(n,i,s,r,o):vN(n,i,s,!1,r,o),h=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(g=>{const y=u[0].index,b=g.data[y];b&&!b.skip&&h.push({element:b,datasetIndex:g.index,index:y})}),h):[]},dataset(n,e,t,r){const i=Xg(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let u=t.intersect?yN(n,i,s,r,o):vN(n,i,s,!1,r,o);if(u.length>0){const h=u[0].datasetIndex,g=n.getDatasetMeta(h).data;u=[];for(let y=0;y<g.length;++y)u.push({element:g[y],datasetIndex:h,index:y})}return u},point:(n,e,t,r)=>yN(n,Xg(e,n),t.axis||"xy",r,t.includeInvisible||!1),nearest:(n,e,t,r)=>vN(n,Xg(e,n),t.axis||"xy",t.intersect,r,t.includeInvisible||!1),x:(n,e,t,r)=>m$(n,Xg(e,n),"x",t.intersect,r),y:(n,e,t,r)=>m$(n,Xg(e,n),"y",t.intersect,r)}};const _$=["left","top","right","bottom"];function BE(n,e){return n.filter(t=>t.pos===e)}function y$(n,e){return n.filter(t=>-1===_$.indexOf(t.pos)&&t.box.axis===e)}function jE(n,e){return n.sort((t,r)=>{const i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function v$(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function w$(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function O7(n,e,t,r){const{pos:i,box:s}=t,o=n.maxPadding;if(!zn(i)){t.size&&(n[i]-=t.size);const b=r[t.stack]||{size:0,count:1};b.size=Math.max(b.size,t.horizontal?s.height:s.width),t.size=b.size/b.count,n[i]+=t.size}s.getPadding&&w$(o,s.getPadding());const u=Math.max(0,e.outerWidth-v$(o,n,"left","right")),h=Math.max(0,e.outerHeight-v$(o,n,"top","bottom")),g=u!==n.w,y=h!==n.h;return n.w=u,n.h=h,t.horizontal?{same:g,other:y}:{same:y,other:g}}function L7(n,e){const t=e.maxPadding;return function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}(n?["left","right"]:["top","bottom"])}function HE(n,e,t,r){const i=[];let s,o,u,h,g,y;for(s=0,o=n.length,g=0;s<o;++s){u=n[s],h=u.box,h.update(u.width||e.w,u.height||e.h,L7(u.horizontal,e));const{same:b,other:T}=O7(e,t,u,r);g|=b&&i.length,y=y||T,h.fullSize||i.push(u)}return g&&HE(i,e,t,r)||y}function jx(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function b$(n,e,t,r){const i=t.padding;let{x:s,y:o}=e;for(const u of n){const h=u.box,g=r[u.stack]||{count:1,placed:0,weight:1},y=u.stackWeight/g.weight||1;if(u.horizontal){const b=e.w*y,T=g.size||h.height;Fl(g.start)&&(o=g.start),h.fullSize?jx(h,i.left,o,t.outerWidth-i.right-i.left,T):jx(h,e.left+g.placed,o,b,T),g.start=o,g.placed+=b,o=h.bottom}else{const b=e.h*y,T=g.size||h.width;Fl(g.start)&&(s=g.start),h.fullSize?jx(h,s,i.top,T,t.outerHeight-i.bottom-i.top):jx(h,s,e.top+g.placed,T,b),g.start=s,g.placed+=b,s=h.right}}e.x=s,e.y=o}var go={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;-1!==t&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=po(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),u=function P7(n){const e=function M7(n){const e=[];let t,r,i,s,o,u;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],({position:s,options:{stack:o,stackWeight:u=1}}=i),e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:u});return e}(n),t=jE(e.filter(g=>g.box.fullSize),!0),r=jE(BE(e,"left"),!0),i=jE(BE(e,"right")),s=jE(BE(e,"top"),!0),o=jE(BE(e,"bottom")),u=y$(e,"x"),h=y$(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(h).concat(o).concat(u),chartArea:BE(e,"chartArea"),vertical:r.concat(i).concat(h),horizontal:s.concat(o).concat(u)}}(n.boxes),h=u.vertical,g=u.horizontal;gr(n.boxes,B=>{"function"==typeof B.beforeLayout&&B.beforeLayout()});const y=h.reduce((B,H)=>H.box.options&&!1===H.box.options.display?B:B+1,0)||1,b=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/y,hBoxMaxHeight:o/2}),T=Object.assign({},i);w$(T,po(r));const k=Object.assign({maxPadding:T,w:s,h:o,x:i.left,y:i.top},i),P=function R7(n,e){const t=function k7(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:s}=t;if(!r||!_$.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,u;for(s=0,o=n.length;s<o;++s){u=n[s];const{fullSize:h}=u.box,g=t[u.stack],y=g&&u.stackWeight/g.weight;u.horizontal?(u.width=y?y*r:h&&e.availableWidth,u.height=i):(u.width=r,u.height=y?y*i:h&&e.availableHeight)}return t}(h.concat(g),b);HE(u.fullSize,k,b,P),HE(h,k,b,P),HE(g,k,b,P)&&HE(h,k,b,P),function N7(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}(k),b$(u.leftAndTop,k,b,P),k.x+=k.w,k.y+=k.h,b$(u.rightAndBottom,k,b,P),n.chartArea={left:k.left,top:k.top,right:k.left+k.w,bottom:k.top+k.h,height:k.h,width:k.w},gr(u.chartArea,B=>{const H=B.box;Object.assign(H,n.chartArea),H.update(k.w,k.h,{left:0,top:0,right:0,bottom:0})})}};class E${acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class F7 extends E${acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Hx="$chartjs",V7={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},C$=n=>null===n||""===n,I$=!!jZ&&{passive:!0};function j7(n,e,t){n.canvas.removeEventListener(e,t,I$)}function $x(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function $7(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const u of s)o=o||$x(u.addedNodes,r),o=o&&!$x(u.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function z7(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const u of s)o=o||$x(u.removedNodes,r),o=o&&!$x(u.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const $E=new Map;let D$=0;function T$(){const n=window.devicePixelRatio;n!==D$&&(D$=n,$E.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function q7(n,e,t){const r=n.canvas,i=r&&hN(r);if(!i)return;const s=TH((u,h)=>{const g=i.clientWidth;t(u,h),g<i.clientWidth&&t()},window),o=new ResizeObserver(u=>{const h=u[0],g=h.contentRect.width,y=h.contentRect.height;0===g&&0===y||s(g,y)});return o.observe(i),function W7(n,e){$E.size||window.addEventListener("resize",T$),$E.set(n,e)}(n,s),o}function wN(n,e,t){t&&t.disconnect(),"resize"===e&&function G7(n){$E.delete(n),$E.size||window.removeEventListener("resize",T$)}(n)}function Z7(n,e,t){const r=n.canvas,i=TH(s=>{null!==n.ctx&&t(function H7(n,e){const t=V7[n.type]||n.type,{x:r,y:i}=Xg(n,e);return{type:t,chart:e,native:n,x:void 0!==r?r:null,y:void 0!==i?i:null}}(s,n))},n);return function B7(n,e,t){n.addEventListener(e,t,I$)}(r,e,i),i}class K7 extends E${acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(function U7(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[Hx]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",C$(i)){const s=ZH(n,"width");void 0!==s&&(n.width=s)}if(C$(r))if(""===n.style.height)n.height=n.width/(e||2);else{const s=ZH(n,"height");void 0!==s&&(n.height=s)}}(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[Hx])return!1;const r=t[Hx].initial;["height","width"].forEach(s=>{const o=r[s];Xn(o)?t.removeAttribute(s):t.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[Hx],!0}addEventListener(e,t,r){this.removeEventListener(e,t),(e.$proxies||(e.$proxies={}))[t]=({attach:$7,detach:z7,resize:q7}[t]||Z7)(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];i&&(({attach:wN,detach:wN,resize:wN}[t]||j7)(e,t,i),r[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return function BZ(n,e,t,r){const i=Ox(n),s=Qg(i,"margin"),o=Px(i.maxWidth,n,"clientWidth")||Tx,u=Px(i.maxHeight,n,"clientHeight")||Tx,h=function UZ(n,e,t){let r,i;if(void 0===e||void 0===t){const s=hN(n);if(s){const o=s.getBoundingClientRect(),u=Ox(s),h=Qg(u,"border","width"),g=Qg(u,"padding");e=o.width-g.width-h.width,t=o.height-g.height-h.height,r=Px(u.maxWidth,s,"clientWidth"),i=Px(u.maxHeight,s,"clientHeight")}else e=n.clientWidth,t=n.clientHeight}return{width:e,height:t,maxWidth:r||Tx,maxHeight:i||Tx}}(n,e,t);let{width:g,height:y}=h;if("content-box"===i.boxSizing){const T=Qg(i,"border","width"),k=Qg(i,"padding");g-=k.width+T.width,y-=k.height+T.height}return g=Math.max(0,g-s.width),y=Math.max(0,r?g/r:y-s.height),g=Nx(Math.min(g,o,h.maxWidth)),y=Nx(Math.min(y,u,h.maxHeight)),g&&!y&&(y=Nx(g/2)),(void 0!==e||void 0!==t)&&r&&h.height&&y>h.height&&(y=h.height,g=Nx(Math.floor(y*r))),{width:g,height:y}}(e,t,r,i)}isAttached(e){const t=hN(e);return!(!t||!t.isConnected)}}class Rc{constructor(){Bt(this,"active",!1)}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return sv(this.x)&&sv(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}function zx(n,e,t,r,i){const s=xn(r,0),o=Math.min(xn(i,n.length),n.length);let h,g,y,u=0;for(t=Math.ceil(t),i&&(h=i-r,t=h/Math.floor(h/t)),y=s;y<0;)u++,y=Math.round(s+u*t);for(g=Math.max(s,0);g<o;g++)g===y&&(e.push(n[g]),u++,y=Math.round(s+u*t))}Bt(Rc,"defaults",{}),Bt(Rc,"defaultRoutes",void 0);const S$=(n,e,t)=>"top"===e||"left"===e?n[e]+t:n[e]-t;function x$(n,e){const t=[],r=n.length/e,i=n.length;let s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function iK(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,u=1e-6;let g,h=n.getPixelForTick(i);if(!(t&&(g=1===r?Math.max(h-s,o-h):0===e?(n.getPixelForTick(1)-h)/2:(h-n.getPixelForTick(i-1))/2,h+=i<e?g:-g,h<s-u||h>o+u)))return h}function zE(n){return n.drawTicks?n.tickLength:0}function A$(n,e){if(!n.display)return 0;const t=hs(n.font,e),r=po(n.padding);return($r(n.text)?n.text.length:1)*t.lineHeight+r.height}function lK(n,e,t){let r=rN(n);return(t&&"right"!==e||!t&&"right"===e)&&(r=(n=>"left"===n?"right":"right"===n?"left":n)(r)),r}class nm extends Rc{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=Ka(e,Number.POSITIVE_INFINITY),t=Ka(t,Number.NEGATIVE_INFINITY),r=Ka(r,Number.POSITIVE_INFINITY),i=Ka(i,Number.NEGATIVE_INFINITY),{min:Ka(e,r),max:Ka(t,i),minDefined:Ci(e),maxDefined:Ci(t)}}getMinMax(e){let o,{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:t,max:r};const u=this.getMatchingVisibleMetas();for(let h=0,g=u.length;h<g;++h)o=u[h].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:Ka(t,Ka(r,t)),max:Ka(r,Ka(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pr(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,u=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function yZ(n,e,t){const{min:r,max:i}=n,s=fH(e,(i-r)/2),o=(u,h)=>t&&0===u?0:u+h;return{min:o(r,-Math.abs(s)),max:o(i,s)}}(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=u<this.ticks.length;this._convertTicksToLabels(h?x$(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function Q7(n,e){const t=n.options.ticks,r=function X7(n){const e=n.options.offset,t=n._tickSize();return Math.floor(Math.min(n._length/t+(e?0:1),n._maxLength/t))}(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?function eK(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}(e):[],o=s.length,u=s[0],h=s[o-1],g=[];if(o>i)return function tK(n,e,t,r){let o,i=0,s=t[0];for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}(e,g,s,o/i),g;const y=function J7(n,e,t){const r=function nK(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}(n),i=e.length/t;if(!r)return Math.max(i,1);const s=function z8(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r==0&&(e.push(r),e.push(n/r));return t===(0|t)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}(r);for(let o=0,u=s.length-1;o<u;o++){const h=s[o];if(h>i)return h}return Math.max(i,1)}(s,e,i);if(o>0){let b,T;const k=o>1?Math.round((h-u)/(o-1)):null;for(zx(e,g,y,Xn(k)?0:u-k,u),b=0,T=o-1;b<T;b++)zx(e,g,y,s[b],s[b+1]);return zx(e,g,y,h,Xn(k)?e.length:h+k),g}return zx(e,g,y),g}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,r,e=this.options.reverse;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pr(this.options.afterUpdate,[this])}beforeSetDimensions(){Pr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pr(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pr(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Pr(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Pr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=this.ticks.length,i=t.minRotation||0,s=t.maxRotation;let u,h,g,o=i;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal())return void(this.labelRotation=i);const y=this._getLabelSizes(),b=y.widest.width,T=y.highest.height,k=Ms(this.chart.width-b,0,this.maxWidth);u=e.offset?this.maxWidth/r:k/(r-1),b+6>u&&(u=k/(r-(e.offset?.5:1)),h=this.maxHeight-zE(e.grid)-t.padding-A$(e.title,this.chart.options.font),g=Math.sqrt(b*b+T*T),o=eN(Math.min(Math.asin(Ms((y.highest.height+6)/u,-1,1)),Math.asin(Ms(h/g,-1,1))-Math.asin(Ms(T/g,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Pr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pr(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),u=this.isHorizontal();if(o){const h=A$(i,t.options.font);if(u?(e.width=this.maxWidth,e.height=zE(s)+h):(e.height=this.maxHeight,e.width=zE(s)+h),r.display&&this.ticks.length){const{first:g,last:y,widest:b,highest:T}=this._getLabelSizes(),k=2*r.padding,P=Mc(this.labelRotation),B=Math.cos(P),H=Math.sin(P);u?e.height=Math.min(this.maxHeight,e.height+(r.mirror?0:H*b.width+B*T.height)+k):e.width=Math.min(this.maxWidth,e.width+(r.mirror?0:B*b.width+H*T.height)+k),this._calculatePadding(g,y,H,B)}}this._handleMargins(),u?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:s,padding:o},position:u}=this.options,h=0!==this.labelRotation,g="top"!==u&&"x"===this.axis;if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,b=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,k=0;h?g?(T=i*e.width,k=r*t.height):(T=r*e.height,k=i*t.width):"start"===s?k=t.width:"end"===s?T=e.width:"inner"!==s&&(T=e.width/2,k=t.width/2),this.paddingLeft=Math.max((T-y+o)*this.width/(this.width-y),0),this.paddingRight=Math.max((k-b+o)*this.width/(this.width-b),0)}else{let y=t.height/2,b=e.height/2;"start"===s?(y=0,b=e.height):"end"===s&&(y=t.height,b=0),this.paddingTop=y+o,this.paddingBottom=b+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pr(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,r=e.length;t<r;t++)Xn(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=x$(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length)}return e}_computeLabelSizes(e,t){const{ctx:r,_longestTextCache:i}=this,s=[],o=[];let g,y,b,T,k,P,B,H,ne,ce,ve,u=0,h=0;for(g=0;g<t;++g){if(T=e[g].label,k=this._resolveTickFontOptions(g),r.font=P=k.string,B=i[P]=i[P]||{data:{},gc:[]},H=k.lineHeight,ne=ce=0,Xn(T)||$r(T)){if($r(T))for(y=0,b=T.length;y<b;++y)ve=T[y],!Xn(ve)&&!$r(ve)&&(ne=Ax(r,B.data,B.gc,ne,ve),ce+=H)}else ne=Ax(r,B.data,B.gc,ne,T),ce=H;s.push(ne),o.push(ce),u=Math.max(ne,u),h=Math.max(ce,h)}!function sK(n,e){gr(n,t=>{const r=t.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}(i,t);const Ie=s.indexOf(u),Ce=o.indexOf(h),Ve=rt=>({width:s[rt]||0,height:o[rt]||0});return{first:Ve(0),last:Ve(t-1),widest:Ve(Ie),highest:Ve(Ce),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function q8(n){return Ms(n,-32768,32767)}(this._alignToPixels?Zg(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=function aK(n,e,t){return Lf(n,{tick:t,index:e,type:"tick"})}(this.getContext(),e,r))}return this.$context||(this.$context=function oK(n,e){return Lf(n,{scale:e,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Mc(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,u=s?s.widest.width+o:0,h=s?s.highest.height+o:0;return this.isHorizontal()?h*r>u*i?u/r:h/i:h*i<u*r?h/r:u/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:u}=i,h=s.offset,g=this.isHorizontal(),b=this.ticks.length+(h?1:0),T=zE(s),k=[],P=u.setContext(this.getContext()),B=P.display?P.width:0,H=B/2,ne=function(si){return Zg(r,si,B)};let ce,ve,Ie,Ce,Ve,rt,gt,Jt,Ln,Fn,nr,Xs;if("top"===o)ce=ne(this.bottom),rt=this.bottom-T,Jt=ce-H,Fn=ne(e.top)+H,Xs=e.bottom;else if("bottom"===o)ce=ne(this.top),Fn=e.top,Xs=ne(e.bottom)-H,rt=ce+H,Jt=this.top+T;else if("left"===o)ce=ne(this.right),Ve=this.right-T,gt=ce-H,Ln=ne(e.left)+H,nr=e.right;else if("right"===o)ce=ne(this.left),Ln=e.left,nr=ne(e.right)-H,Ve=ce+H,gt=this.left+T;else if("x"===t){if("center"===o)ce=ne((e.top+e.bottom)/2+.5);else if(zn(o)){const si=Object.keys(o)[0];ce=ne(this.chart.scales[si].getPixelForValue(o[si]))}Fn=e.top,Xs=e.bottom,rt=ce+H,Jt=rt+T}else if("y"===t){if("center"===o)ce=ne((e.left+e.right)/2);else if(zn(o)){const si=Object.keys(o)[0];ce=ne(this.chart.scales[si].getPixelForValue(o[si]))}Ve=ce-H,gt=Ve-T,Ln=e.left,nr=e.right}const Xa=xn(i.ticks.maxTicksLimit,b),br=Math.max(1,Math.ceil(b/Xa));for(ve=0;ve<b;ve+=br){const si=this.getContext(ve),ji=s.setContext(si),Oc=u.setContext(si),_o=ji.lineWidth,mv=ji.color,dA=Oc.dash||[],_v=Oc.dashOffset,rC=ji.tickWidth,iC=ji.tickColor,sC=ji.tickBorderDash||[],oC=ji.tickBorderDashOffset;Ie=iK(this,ve,h),void 0!==Ie&&(Ce=Zg(r,Ie,_o),g?Ve=gt=Ln=nr=Ce:rt=Jt=Fn=Xs=Ce,k.push({tx1:Ve,ty1:rt,tx2:gt,ty2:Jt,x1:Ln,y1:Fn,x2:nr,y2:Xs,width:_o,color:mv,borderDash:dA,borderDashOffset:_v,tickWidth:rC,tickColor:iC,tickBorderDash:sC,tickBorderDashOffset:oC}))}return this._ticksLength=b,this._borderValue=ce,k}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),u=this.ticks,{align:h,crossAlign:g,padding:y,mirror:b}=s,T=zE(r.grid),k=T+y,P=b?-y:k,B=-Mc(this.labelRotation),H=[];let ne,ce,ve,Ie,Ce,Ve,rt,gt,Jt,Ln,Fn,nr,Xs="middle";if("top"===i)Ve=this.bottom-P,rt=this._getXAxisLabelAlignment();else if("bottom"===i)Ve=this.top+P,rt=this._getXAxisLabelAlignment();else if("left"===i){const br=this._getYAxisLabelAlignment(T);rt=br.textAlign,Ce=br.x}else if("right"===i){const br=this._getYAxisLabelAlignment(T);rt=br.textAlign,Ce=br.x}else if("x"===t){if("center"===i)Ve=(e.top+e.bottom)/2+k;else if(zn(i)){const br=Object.keys(i)[0];Ve=this.chart.scales[br].getPixelForValue(i[br])+k}rt=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)Ce=(e.left+e.right)/2-k;else if(zn(i)){const br=Object.keys(i)[0];Ce=this.chart.scales[br].getPixelForValue(i[br])}rt=this._getYAxisLabelAlignment(T).textAlign}"y"===t&&("start"===h?Xs="top":"end"===h&&(Xs="bottom"));const Xa=this._getLabelSizes();for(ne=0,ce=u.length;ne<ce;++ne){ve=u[ne],Ie=ve.label;const br=s.setContext(this.getContext(ne));gt=this.getPixelForTick(ne)+s.labelOffset,Jt=this._resolveTickFontOptions(ne),Ln=Jt.lineHeight,Fn=$r(Ie)?Ie.length:1;const si=Fn/2,ji=br.color,Oc=br.textStrokeColor,_o=br.textStrokeWidth;let dA,mv=rt;if(o?(Ce=gt,"inner"===rt&&(mv=ne===ce-1?this.options.reverse?"left":"right":0===ne?this.options.reverse?"right":"left":"center"),nr="top"===i?"near"===g||0!==B?-Fn*Ln+Ln/2:"center"===g?-Xa.highest.height/2-si*Ln+Ln:Ln/2-Xa.highest.height:"near"===g||0!==B?Ln/2:"center"===g?Xa.highest.height/2-si*Ln:Xa.highest.height-Fn*Ln,b&&(nr*=-1),0!==B&&!br.showLabelBackdrop&&(Ce+=Ln/2*Math.sin(B))):(Ve=gt,nr=(1-Fn)*Ln/2),br.showLabelBackdrop){const _v=po(br.backdropPadding),rC=Xa.heights[ne],iC=Xa.widths[ne];let sC=nr-_v.top,oC=0-_v.left;switch(Xs){case"middle":sC-=rC/2;break;case"bottom":sC-=rC}switch(rt){case"center":oC-=iC/2;break;case"right":oC-=iC}dA={left:oC,top:sC,width:iC+_v.width,height:rC+_v.height,color:br.backdropColor}}H.push({label:Ie,font:Jt,textOffset:nr,options:{rotation:B,color:ji,strokeColor:Oc,strokeWidth:_o,textAlign:mv,textBaseline:Xs,translation:[Ce,Ve],backdrop:dA}})}return H}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Mc(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,u=e+s,h=this._getLabelSizes().widest.width;let g,y;return"left"===t?i?(y=this.right+s,"near"===r?g="left":"center"===r?(g="center",y+=h/2):(g="right",y+=h)):(y=this.right-u,"near"===r?g="right":"center"===r?(g="center",y-=h/2):(g="left",y=this.left)):"right"===t?i?(y=this.left+s,"near"===r?g="right":"center"===r?(g="center",y-=h/2):(g="left",y-=h)):(y=this.left+u,"near"===r?g="left":"center"===r?(g="center",y+=h/2):(g="right",y=this.right)):g="right",{textAlign:g,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const u=(h,g,y)=>{!y.width||!y.color||(r.save(),r.lineWidth=y.width,r.strokeStyle=y.color,r.setLineDash(y.borderDash||[]),r.lineDashOffset=y.borderDashOffset,r.beginPath(),r.moveTo(h.x,h.y),r.lineTo(g.x,g.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){const h=i[s];t.drawOnChartArea&&u({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&u({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const u=i.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let g,y,b,T;this.isHorizontal()?(g=Zg(e,this.left,o)-o/2,y=Zg(e,this.right,u)+u/2,b=T=h):(b=Zg(e,this.top,o)-o/2,T=Zg(e,this.bottom,u)+u/2,g=y=h),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(g,b),t.lineTo(y,T),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Mx(r,i);const s=this.getLabelItems(e);for(const o of s)Kg(r,o.label,0,o.textOffset,o.font,o.options);i&&kx(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const s=hs(r.font),o=po(r.padding),u=r.align;let h=s.lineHeight/2;"bottom"===t||"center"===t||zn(t)?(h+=o.bottom,$r(r.text)&&(h+=s.lineHeight*(r.text.length-1))):h+=o.top;const{titleX:g,titleY:y,maxWidth:b,rotation:T}=function cK(n,e,t,r){const{top:i,left:s,bottom:o,right:u,chart:h}=n,{chartArea:g,scales:y}=h;let T,k,P,b=0;const B=o-i,H=u-s;if(n.isHorizontal()){if(k=fo(r,s,u),zn(t)){const ne=Object.keys(t)[0];P=y[ne].getPixelForValue(t[ne])+B-e}else P="center"===t?(g.bottom+g.top)/2+B-e:S$(n,t,e);T=u-s}else{if(zn(t)){const ne=Object.keys(t)[0];k=y[ne].getPixelForValue(t[ne])-H+e}else k="center"===t?(g.left+g.right)/2-H+e:S$(n,t,e);P=fo(r,o,i),b="left"===t?-Ii:Ii}return{titleX:k,titleY:P,maxWidth:T,rotation:b}}(this,h,t,u);Kg(e,r.text,0,0,s,{color:r.color,maxWidth:b,rotation:T,textAlign:lK(u,t,i),textBaseline:"middle",translation:[g,y]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=xn(e.grid&&e.grid.z,-1),i=xn(e.border&&e.border.z,0);return this._isVisible()&&this.draw===nm.prototype.draw?[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]:[{z:t,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=t.length;s<o;++s){const u=t[s];u[r]===this.id&&(!e||u.type===e)&&i.push(u)}return i}_resolveTickFontOptions(e){return hs(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Wx{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;(function hK(n){return"id"in n&&"defaults"in n})(t)&&(r=this.register(t));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,function uK(n,e,t){const r=SE(Object.create(null),[t?Bi.get(t):{},Bi.get(e),n.defaults]);Bi.set(e,r),n.defaultRoutes&&function dK(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),u=o.pop(),h=o.join(".");Bi.route(s,i,h,u)})}(e,n.defaultRoutes),n.descriptors&&Bi.describe(e,n.descriptors)}(e,o,r),this.override&&Bi.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in Bi[i]&&(delete Bi[i][r],this.override&&delete qg[r])}}class fK{constructor(){this.controllers=new Wx(kc,"datasets",!0),this.elements=new Wx(Rc,"elements"),this.plugins=new Wx(Object,"plugins"),this.scales=new Wx(nm,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):gr(i,o=>{const u=r||this._getRegistryForType(o);this._exec(e,u,o)})})}_exec(e,t,r){const i=JO(e);Pr(r["before"+i],[],r),t[e](r),Pr(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Pu=new fK;class pK{constructor(){this._init=[]}notify(e,t,r,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,i){i=i||{};for(const s of e){const o=s.plugin;if(!1===Pr(o[r],[t,i,s.options],o)&&i.cancelable)return!1}return!0}invalidate(){Xn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=xn(r.options&&r.options.plugins,{}),s=function gK(n){const e={},t=[],r=Object.keys(Pu.plugins.items);for(let s=0;s<r.length;s++)t.push(Pu.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];-1===t.indexOf(o)&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}(r);return!1!==i||t?function _K(n,{plugins:e,localIds:t},r,i){const s=[],o=n.getContext();for(const u of e){const h=u.id,g=mK(r[h],i);null!==g&&s.push({plugin:u,options:yK(n.config,{plugin:u,local:t[h]},g,o)})}return s}(e,s,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(u=>!o.some(h=>u.plugin.id===h.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function mK(n,e){return e||!1!==n?!0===n?{}:n:null}function yK(n,{plugin:e,local:t},r,i){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function bN(n,e){return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||(Bi.datasets[n]||{}).indexAxis||"x"}function Gx(n,e){if("x"===n||"y"===n||"r"===n||(n=e.axis||function bK(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}(e.position)||n.length>1&&Gx(n[0].toLowerCase(),e)))return n;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function M$(n){const e=n.options||(n.options={});e.plugins=xn(e.plugins,{}),e.scales=function EK(n,e){const t=qg[n.type]||{scales:{}},r=e.scales||{},i=bN(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const u=r[o];if(!zn(u))return console.error(`Invalid scale configuration for scale: ${o}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const h=Gx(o,u),g=function wK(n,e){return n===e?"_index_":"_value_"}(h,i),y=t.scales||{};s[o]=xE(Object.create(null),[{axis:h},u,y[h],y[g]])}),n.data.datasets.forEach(o=>{const u=o.type||n.type,h=o.indexAxis||bN(u,e),y=(qg[u]||{}).scales||{};Object.keys(y).forEach(b=>{const T=function vK(n,e){let t=n;return"_index_"===n?t=e:"_value_"===n&&(t="x"===e?"y":"x"),t}(b,h),k=o[T+"AxisID"]||T;s[k]=s[k]||Object.create(null),xE(s[k],[{axis:T},r[k],y[b]])})}),Object.keys(s).forEach(o=>{const u=s[o];xE(u,[Bi.scales[u.type],Bi.scale])}),s}(n,e)}function k$(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const R$=new Map,P$=new Set;function qx(n,e){let t=R$.get(n);return t||(t=e(),R$.set(n,t),P$.add(t)),t}const WE=(n,e,t)=>{const r=Pf(e,t);void 0!==r&&n.add(r)};class IK{constructor(e){this._config=function CK(n){return(n=n||{}).data=k$(n.data),M$(n),n}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=k$(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),M$(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return qx(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return qx(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return qx(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return qx(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),u=o.get(t);if(u)return u;const h=new Set;t.forEach(y=>{e&&(h.add(e),y.forEach(b=>WE(h,e,b))),y.forEach(b=>WE(h,i,b)),y.forEach(b=>WE(h,qg[s]||{},b)),y.forEach(b=>WE(h,Bi,b)),y.forEach(b=>WE(h,sN,b))});const g=Array.from(h);return 0===g.length&&g.push(Object.create(null)),P$.has(t)&&o.set(t,g),g}chartOptionScopes(){const{options:e,type:t}=this;return[e,qg[t]||{},Bi.datasets[t]||{},{type:t},Bi,sN]}resolveNamedOptions(e,t,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:u}=O$(this._resolverCache,e,i);let h=o;(function TK(n,e){const{isScriptable:t,isIndexable:r}=VH(n);for(const i of e){const s=t(i),o=r(i),u=(o||s)&&n[i];if(s&&(Of(u)||DK(u))||o&&$r(u))return!0}return!1})(o,t)&&(s.$shared=!1,h=ov(o,r=Of(r)?r():r,this.createResolver(e,r,u)));for(const g of t)s[g]=h[g];return s}createResolver(e,t,r=[""],i){const{resolver:s}=O$(this._resolverCache,e,r);return zn(t)?ov(s,t,void 0,i):s}}function O$(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let s=r.get(i);return s||(s={resolver:cN(e,t),subPrefixes:t.filter(u=>!u.toLowerCase().includes("hover"))},r.set(i,s)),s}const DK=n=>zn(n)&&Object.getOwnPropertyNames(n).reduce((e,t)=>e||Of(n[t]),!1),xK=["top","bottom","left","right","chartArea"];function N$(n,e){return"top"===n||"bottom"===n||-1===xK.indexOf(n)&&"x"===e}function L$(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function F$(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Pr(t&&t.onComplete,[n],e)}function AK(n){const e=n.chart,t=e.options.animation;Pr(t&&t.onProgress,[n],e)}function V$(n){return GH()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Zx={},U$=n=>{const e=V$(n);return Object.values(Zx).filter(t=>t.canvas===e).pop()};function MK(n,e,t){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=e){const o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}class ih{static register(...e){Pu.add(...e),B$()}static unregister(...e){Pu.remove(...e),B$()}constructor(e,t){const r=this.config=new IK(t),i=V$(e),s=U$(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function Y7(n){return!GH()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?F7:K7}(i)),this.platform.updateConfig(r);const u=this.platform.acquireContext(i,o.aspectRatio),h=u&&u.canvas,g=h&&h.height,y=h&&h.width;this.id=N8(),this.ctx=u,this.canvas=h,this.width=y,this.height=g,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new pK,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function Q8(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}(b=>this.update(b),o.resizeDelay||0),this._dataChanges=[],Zx[this.id]=this,u&&h?(rh.listen(this,"complete",F$),rh.listen(this,"progress",AK),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:s}=this;return Xn(e)?t&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Pu}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qH(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return NH(this.canvas,this.ctx),this}stop(){return rh.stop(this),this}resize(e,t){rh.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,o=this.platform.getMaximumSize(this.canvas,e,t,r.maintainAspectRatio&&this.aspectRatio),u=r.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,qH(this,u,!0)&&(this.notifyPlugins("resize",{size:o}),Pr(r.onResize,[this,o],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){gr(this.options.scales||{},(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((o,u)=>(o[u]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const u=t[o],h=Gx(o,u),g="r"===h,y="x"===h;return{options:u,dposition:g?"chartArea":y?"bottom":"left",dtype:g?"radialLinear":y?"category":"linear"}}))),gr(s,o=>{const u=o.options,h=u.id,g=Gx(h,u),y=xn(u.type,o.dtype);(void 0===u.position||N$(u.position,g)!==N$(o.dposition))&&(u.position=o.dposition),i[h]=!0;let b=null;h in r&&r[h].type===y?b=r[h]:(b=new(Pu.getScale(y))({id:h,type:y,ctx:this.ctx,chart:this}),r[b.id]=b),b.init(u,e)}),gr(i,(o,u)=>{o||delete r[u]}),gr(r,o=>{go.configure(this,o,o.options),go.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(L$("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{0===t.filter(s=>s===r._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const s=t[r];let o=this.getDatasetMeta(r);const u=s.type||this.config.type;if(o.type&&o.type!==u&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=u,o.indexAxis=s.indexAxis||bN(u,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const h=Pu.getController(u),{datasetElementType:g,dataElementType:y}=Bi.datasets[u];Object.assign(h,{dataElementType:Pu.getElement(y),datasetElementType:g&&Pu.getElement(g)}),o.controller=new h(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){gr(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let g=0,y=this.data.datasets.length;g<y;g++){const{controller:b}=this.getDatasetMeta(g),T=!i&&-1===s.indexOf(b);b.buildOrUpdateElements(T),o=Math.max(+b.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||gr(s,g=>{g.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(L$("z","_idx"));const{_active:u,_lastEvent:h}=this;h?this._eventHandler(h,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){gr(this.scales,e=>{go.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!mH(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of t)MK(e,i,"_removeElements"===r?-s:s)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,u)=>u+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<t;s++)if(!mH(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;go.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],gr(this.boxes,i=>{r&&"chartArea"===i.position||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,Of(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(rh.has(this)?this.attached&&!rh.running(this)&&rh.start(this):(this.draw(),F$({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,s;for(i=0,s=t.length;i<s;++i){const o=t[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r=e._clip,i=!r.disabled,s=function RK(n){const{xScale:e,yScale:t}=n;if(e&&t)return{left:e.left,right:e.right,top:t.top,bottom:t.bottom}}(e)||this.chartArea,o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(i&&Mx(t,{left:!1===r.left?0:s.left-r.left,right:!1===r.right?this.width:s.right+r.right,top:!1===r.top?0:s.top-r.top,bottom:!1===r.bottom?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&kx(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return OE(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const s=A7.modes[t];return"function"==typeof s?s(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Lf(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return"boolean"==typeof r.hidden?!r.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Fl(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(u=>u.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),rh.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),NH(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Zx[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},i=(s,o,u)=>{s.offsetX=o,s.offsetY=u,this._eventHandler(s)};gr(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(h,g)=>{t.addEventListener(this,h,g),e[h]=g},i=(h,g)=>{e[h]&&(t.removeEventListener(this,h,g),delete e[h])},s=(h,g)=>{this.canvas&&this.resize(h,g)};let o;const u=()=>{i("attach",u),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",u)},t.isAttached(this.canvas)?u():o()}unbindEvents(){gr(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},gr(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let s,o,u,h;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),u=0,h=e.length;u<h;++u){o=e[u];const g=o&&this.getDatasetMeta(o.datasetIndex).controller;g&&g[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const u=this.getDatasetMeta(s);if(!u)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:u.data[o],index:o}});!Ix(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,r){const i=this.options.hover,s=(h,g)=>h.filter(y=>!g.some(b=>y.datasetIndex===b.datasetIndex&&y.index===b.index)),o=s(t,e),u=r?e:s(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),u.length&&i.mode&&this.updateHoverStyle(u,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,i))return;const s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:s}=this,u=this._getActiveElements(e,i,r,t),h=function j8(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(e),g=function kK(n,e,t,r){return t&&"mouseout"!==n.type?r?e:n:null}(e,this._lastEvent,r,h);r&&(this._lastEvent=null,Pr(s.onHover,[e,u,this],this),h&&Pr(s.onClick,[e,u,this],this));const y=!Ix(u,i);return(y||t)&&(this._active=u,this._updateHoverStyles(u,i,t)),this._lastEvent=g,y}_getActiveElements(e,t,r,i){if("mouseout"===e.type)return[];if(!r)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}function B$(){return gr(ih.instances,n=>n._plugins.invalidate())}function cv(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function Kx(n,e,t,r,i,s){const{x:o,y:u,startAngle:h,pixelMargin:g,innerRadius:y}=e,b=Math.max(e.outerRadius+r+t-g,0),T=y>0?y+r+t+g:0;let k=0;const P=i-h;if(r){const ji=((y>0?y-r:0)+(b>0?b-r:0))/2;k=(P-(0!==ji?P*ji/(ji+r):P))/2}const H=(P-Math.max(.001,P*b-t/ii)/b)/2,ne=h+H+k,ce=i-H-k,{outerStart:ve,outerEnd:Ie,innerStart:Ce,innerEnd:Ve}=function NK(n,e,t,r){const i=function OK(n){return lN(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),u=h=>{const g=(t-Math.min(s,h))*r/2;return Ms(h,0,Math.min(s,g))};return{outerStart:u(i.outerStart),outerEnd:u(i.outerEnd),innerStart:Ms(i.innerStart,0,o),innerEnd:Ms(i.innerEnd,0,o)}}(e,T,b,ce-ne),rt=b-ve,gt=b-Ie,Jt=ne+ve/rt,Ln=ce-Ie/gt,Fn=T+Ce,nr=T+Ve,Xs=ne+Ce/Fn,Xa=ce-Ve/nr;if(n.beginPath(),s){const br=(Jt+Ln)/2;if(n.arc(o,u,b,Jt,br),n.arc(o,u,b,br,Ln),Ie>0){const _o=cv(gt,Ln,o,u);n.arc(_o.x,_o.y,Ie,Ln,ce+Ii)}const si=cv(nr,ce,o,u);if(n.lineTo(si.x,si.y),Ve>0){const _o=cv(nr,Xa,o,u);n.arc(_o.x,_o.y,Ve,ce+Ii,Xa+Math.PI)}const ji=(ce-Ve/T+(ne+Ce/T))/2;if(n.arc(o,u,T,ce-Ve/T,ji,!0),n.arc(o,u,T,ji,ne+Ce/T,!0),Ce>0){const _o=cv(Fn,Xs,o,u);n.arc(_o.x,_o.y,Ce,Xs+Math.PI,ne-Ii)}const Oc=cv(rt,ne,o,u);if(n.lineTo(Oc.x,Oc.y),ve>0){const _o=cv(rt,Jt,o,u);n.arc(_o.x,_o.y,ve,ne-Ii,Jt)}}else{n.moveTo(o,u);const br=Math.cos(Jt)*b+o,si=Math.sin(Jt)*b+u;n.lineTo(br,si);const ji=Math.cos(Ln)*b+o,Oc=Math.sin(Ln)*b+u;n.lineTo(ji,Oc)}n.closePath()}Bt(ih,"defaults",Bi),Bt(ih,"instances",Zx),Bt(ih,"overrides",qg),Bt(ih,"registry",Pu),Bt(ih,"version","4.2.0"),Bt(ih,"getChart",U$);class Yx extends Rc{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.getProps(["x","y"],r),{angle:s,distance:o}=bH(i,{x:e,y:t}),{startAngle:u,endAngle:h,innerRadius:g,outerRadius:y,circumference:b}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),T=this.options.spacing/2,P=xn(b,h-u)>=zr||ME(s,u,h),B=th(o,g+T,y+T);return P&&B}getCenterPoint(e){const{x:t,y:r,startAngle:i,endAngle:s,innerRadius:o,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:h,spacing:g}=this.options,y=(i+s)/2,b=(o+u+g+h)/2;return{x:t+Math.cos(y)*b,y:r+Math.sin(y)*b}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,i=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=r>zr?Math.floor(r/zr):0,0===r||this.innerRadius<0||this.outerRadius<0)return;e.save();const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*i,Math.sin(u)*i);const g=i*(1-Math.sin(Math.min(ii,r||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function LK(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:u}=e;let h=e.endAngle;if(s){Kx(n,e,t,r,h,i);for(let g=0;g<s;++g)n.fill();isNaN(u)||(h=o+(u%zr||zr))}Kx(n,e,t,r,h,i),n.fill()}(e,this,g,s,o),function FK(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:u,options:h}=e,{borderWidth:g,borderJoinStyle:y}=h,b="inner"===h.borderAlign;if(!g)return;b?(n.lineWidth=2*g,n.lineJoin=y||"round"):(n.lineWidth=g,n.lineJoin=y||"bevel");let T=e.endAngle;if(s){Kx(n,e,t,r,T,i);for(let k=0;k<s;++k)n.stroke();isNaN(u)||(T=o+(u%zr||zr))}b&&function PK(n,e,t){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:u,innerRadius:h}=e;let g=i/u;n.beginPath(),n.arc(s,o,u,r-g,t+g),h>i?(g=i/h,n.arc(s,o,h,t+g,r-g,!0)):n.arc(s,o,i,t+Ii,r-Ii),n.closePath(),n.clip()}(n,e,T),s||(Kx(n,e,t,r,T,i),n.stroke())}(e,this,g,s,o),e.restore()}}function j$(n,e,t=e){n.lineCap=xn(t.borderCapStyle,e.borderCapStyle),n.setLineDash(xn(t.borderDash,e.borderDash)),n.lineDashOffset=xn(t.borderDashOffset,e.borderDashOffset),n.lineJoin=xn(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=xn(t.borderWidth,e.borderWidth),n.strokeStyle=xn(t.borderColor,e.borderColor)}function VK(n,e,t){n.lineTo(t.x,t.y)}function H$(n,e,t={}){const r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:u}=e,h=Math.max(i,o),g=Math.min(s,u);return{count:r,start:h,loop:e.loop,ilen:g<h&&!(i<o&&s<o||i>u&&s>u)?r+g-h:g-h}}function BK(n,e,t,r){const{points:i,options:s}=e,{count:o,start:u,loop:h,ilen:g}=H$(i,t,r),y=function UK(n){return n.stepped?cZ:n.tension||"monotone"===n.cubicInterpolationMode?uZ:VK}(s);let k,P,B,{move:b=!0,reverse:T}=r||{};for(k=0;k<=g;++k)P=i[(u+(T?g-k:k))%o],!P.skip&&(b?(n.moveTo(P.x,P.y),b=!1):y(n,B,P,T,s.stepped),B=P);return h&&(P=i[(u+(T?g:0))%o],y(n,B,P,T,s.stepped)),!!h}function jK(n,e,t,r){const i=e.points,{count:s,start:o,ilen:u}=H$(i,t,r),{move:h=!0,reverse:g}=r||{};let T,k,P,B,H,ne,y=0,b=0;const ce=Ie=>(o+(g?u-Ie:Ie))%s,ve=()=>{B!==H&&(n.lineTo(y,H),n.lineTo(y,B),n.lineTo(y,ne))};for(h&&(k=i[ce(0)],n.moveTo(k.x,k.y)),T=0;T<=u;++T){if(k=i[ce(T)],k.skip)continue;const Ie=k.x,Ce=k.y,Ve=0|Ie;Ve===P?(Ce<B?B=Ce:Ce>H&&(H=Ce),y=(b*y+Ie)/++b):(ve(),n.lineTo(Ie,Ce),P=Ve,b=0,B=H=Ce),ne=Ce}ve()}function EN(n){const e=n.options;return n._decimated||n._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||e.borderDash&&e.borderDash.length?BK:jK}Bt(Yx,"id","arc"),Bt(Yx,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Bt(Yx,"defaultRoutes",{backgroundColor:"backgroundColor"});const WK="function"==typeof Path2D;class Ff extends Rc{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(OZ(this._points,r,e,r.spanGaps?this._loop:this._fullLoop,t),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function KZ(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const s=!!n._loop,{start:o,end:u}=function qZ(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}(t,i,s,r);return function t$(n,e,t,r){return r&&r.setContext&&t?function YZ(n,e,t,r){const i=n._chart.getContext(),s=n$(n.options),{_datasetIndex:o,options:{spanGaps:u}}=n,h=t.length,g=[];let y=s,b=e[0].start,T=b;function k(P,B,H,ne){const ce=u?-1:1;if(P!==B){for(P+=h;t[P%h].skip;)P-=ce;for(;t[B%h].skip;)B+=ce;P%h!=B%h&&(g.push({start:P%h,end:B%h,loop:H,style:ne}),y=ne,b=B%h)}}for(const P of e){b=u?b:P.start;let H,B=t[b%h];for(T=b+1;T<=P.end;T++){const ne=t[T%h];H=n$(r.setContext(Lf(i,{type:"segment",p0:B,p1:ne,p0DataIndex:(T-1)%h,p1DataIndex:T%h,datasetIndex:o}))),QZ(H,y)&&k(b,T-1,P.loop,y),B=ne,y=H}b<T-1&&k(b,T-1,P.loop,y)}return g}(n,e,t,r):e}(n,!0===r?[{start:o,end:u,loop:s}]:function ZZ(n,e,t,r){const i=n.length,s=[];let h,o=e,u=n[e];for(h=e+1;h<=t;++h){const g=n[h%i];g.skip||g.stop?u.skip||(s.push({start:e%i,end:(h-1)%i,loop:r=!1}),e=o=g.stop?h:null):(o=h,u.skip&&(e=h)),u=g}return null!==o&&s.push({start:e%i,end:o%i,loop:r}),s}(t,o,u<o?u+i:u,!!n._fullLoop&&0===o&&u===i-1),t,e)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,r=e.length;return r&&this.points[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],s=this.points,o=e$(this,{property:t,start:i,end:i});if(!o.length)return;const u=[],h=function HK(n){return n.stepped?HZ:n.tension||"monotone"===n.cubicInterpolationMode?$Z:Jg}(r);let g,y;for(g=0,y=o.length;g<y;++g){const{start:b,end:T}=o[g],k=s[b],P=s[T];if(k===P){u.push(k);continue}const H=h(k,P,Math.abs((i-k[t])/(P[t]-k[t])),r.stepped);H[t]=e[t],u.push(H)}return 1===u.length?u[0]:u}pathSegment(e,t,r){return EN(this)(e,this,t,r)}path(e,t,r){const i=this.segments,s=EN(this);let o=this._loop;t=t||0,r=r||this.points.length-t;for(const u of i)o&=s(e,this,u,{start:t,end:t+r-1});return!!o}draw(e,t,r,i){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function GK(n,e,t,r){WK&&!e.options.segment?function $K(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),j$(n,e.options),n.stroke(i)}(n,e,t,r):function zK(n,e,t,r){const{segments:i,options:s}=e,o=EN(e);for(const u of i)j$(n,s,u.style),n.beginPath(),o(n,e,u,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}(n,e,t,r)}(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function $$(n,e,t,r){const i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}Bt(Ff,"id","line"),Bt(Ff,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Bt(Ff,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Bt(Ff,"descriptors",{_scriptable:!0,_indexable:n=>"borderDash"!==n&&"fill"!==n});class Qx extends Rc{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.options,{x:s,y:o}=this.getProps(["x","y"],r);return Math.pow(e-s,2)+Math.pow(t-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return $$(this,e,"x",t)}inYRange(e,t){return $$(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){let t=(e=e||this.options||{}).radius||0;return t=Math.max(t,t&&e.hoverRadius||0),2*(t+(t&&e.borderWidth||0))}draw(e,t){const r=this.options;this.skip||r.radius<.1||!OE(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,aN(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function z$(n,e){const{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e);let u,h,g,y,b;return n.horizontal?(b=o/2,u=Math.min(t,i),h=Math.max(t,i),g=r-b,y=r+b):(b=s/2,u=t-b,h=t+b,g=Math.min(r,i),y=Math.max(r,i)),{left:u,top:g,right:h,bottom:y}}function Vf(n,e,t,r){return n?0:Ms(e,t,r)}function CN(n,e,t,r){const i=null===e,s=null===t,u=n&&!(i&&s)&&z$(n,r);return u&&(i||th(e,u.left,u.right))&&(s||th(t,u.top,u.bottom))}function QK(n,e){n.rect(e.x,e.y,e.w,e.h)}function IN(n,e,t={}){const r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0;return{x:n.x+r,y:n.y+i,w:n.w+((n.x+n.w!==t.x+t.w?e:0)-r),h:n.h+((n.y+n.h!==t.y+t.h?e:0)-i),radius:n.radius}}Bt(Qx,"id","point"),Bt(Qx,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Bt(Qx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Xx extends Rc{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=function KK(n){const e=z$(n),t=e.right-e.left,r=e.bottom-e.top,i=function qK(n,e,t){const i=n.borderSkipped,s=FH(n.options.borderWidth);return{t:Vf(i.top,s.top,0,t),r:Vf(i.right,s.right,0,e),b:Vf(i.bottom,s.bottom,0,t),l:Vf(i.left,s.left,0,e)}}(n,t/2,r/2),s=function ZK(n,e,t){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=Yg(i),o=Math.min(e,t),u=n.borderSkipped,h=r||zn(i);return{topLeft:Vf(!h||u.top||u.left,s.topLeft,0,o),topRight:Vf(!h||u.top||u.right,s.topRight,0,o),bottomLeft:Vf(!h||u.bottom||u.left,s.bottomLeft,0,o),bottomRight:Vf(!h||u.bottom||u.right,s.bottomRight,0,o)}}(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}(this),u=function YK(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(o.radius)?NE:QK;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),u(e,IN(o,t,s)),e.clip(),u(e,IN(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),u(e,IN(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return CN(this,e,t,r)}inXRange(e,t){return CN(this,e,null,t)}inYRange(e,t){return CN(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Bt(Xx,"id","bar"),Bt(Xx,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Bt(Xx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var XK=Object.freeze({__proto__:null,ArcElement:Yx,LineElement:Ff,PointElement:Qx,BarElement:Xx});const DN=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],W$=DN.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function G$(n){return DN[n%DN.length]}function q$(n){return W$[n%W$.length]}function Z$(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}var i9={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:r},options:i}=n.config,{elements:s}=i;if(!t.forceOverride&&(Z$(r)||function r9(n){return n&&(n.borderColor||n.backgroundColor)}(i)||s&&Z$(s)))return;const o=function n9(n){let e=0;return(t,r)=>{const i=n.getDatasetMeta(r).controller;i instanceof em?e=function e9(n,e){return n.backgroundColor=n.data.map(()=>G$(e++)),e}(t,e):i instanceof VE?e=function t9(n,e){return n.backgroundColor=n.data.map(()=>q$(e++)),e}(t,e):i&&(e=function JK(n,e){return n.borderColor=G$(e),n.backgroundColor=q$(e),++e}(t,e))}}(n);r.forEach(o)}};function K$(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{value:e})}}function Y$(n){n.data.datasets.forEach(e=>{K$(e)})}var l9={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled)return void Y$(n);const r=n.width;n.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:u}=i,h=n.getDatasetMeta(s),g=o||i.data;if("y"===LE([u,n.options.indexAxis])||!h.controller.supportsDecimation)return;const y=n.scales[h.xAxisID];if("linear"!==y.type&&"time"!==y.type||n.options.parsing)return;let P,{start:b,count:T}=function a9(n,e){const t=e.length;let i,r=0;const{iScale:s}=n,{min:o,max:u,minDefined:h,maxDefined:g}=s.getUserBounds();return h&&(r=Ms(nh(e,s.axis,o).lo,0,t-1)),i=g?Ms(nh(e,s.axis,u).hi+1,r,t)-r:t-r,{start:r,count:i}}(h,g);if(T<=(t.threshold||4*r))K$(i);else{switch(Xn(o)&&(i._data=g,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(B){this._data=B}})),t.algorithm){case"lttb":P=function s9(n,e,t,r,i){const s=i.samples||r;if(s>=t)return n.slice(e,e+t);const o=[],u=(t-2)/(s-2);let h=0;const g=e+t-1;let b,T,k,P,B,y=e;for(o[h++]=n[y],b=0;b<s-2;b++){let ce,H=0,ne=0;const ve=Math.floor((b+1)*u)+1+e,Ie=Math.min(Math.floor((b+2)*u)+1,t)+e,Ce=Ie-ve;for(ce=ve;ce<Ie;ce++)H+=n[ce].x,ne+=n[ce].y;H/=Ce,ne/=Ce;const Ve=Math.floor(b*u)+1+e,rt=Math.min(Math.floor((b+1)*u)+1,t)+e,{x:gt,y:Jt}=n[y];for(k=P=-1,ce=Ve;ce<rt;ce++)P=.5*Math.abs((gt-H)*(n[ce].y-Jt)-(gt-n[ce].x)*(ne-Jt)),P>k&&(k=P,T=n[ce],B=ce);o[h++]=T,y=B}return o[h++]=n[g],o}(g,b,T,r,t);break;case"min-max":P=function o9(n,e,t,r){let o,u,h,g,y,b,T,k,P,B,i=0,s=0;const H=[],ce=n[e].x,Ie=n[e+t-1].x-ce;for(o=e;o<e+t;++o){u=n[o],h=(u.x-ce)/Ie*r,g=u.y;const Ce=0|h;if(Ce===y)g<P?(P=g,b=o):g>B&&(B=g,T=o),i=(s*i+u.x)/++s;else{const Ve=o-1;if(!Xn(b)&&!Xn(T)){const rt=Math.min(b,T),gt=Math.max(b,T);rt!==k&&rt!==Ve&&H.push({...n[rt],x:i}),gt!==k&&gt!==Ve&&H.push({...n[gt],x:i})}o>0&&Ve!==k&&H.push(n[Ve]),H.push(u),y=Ce,s=0,P=B=g,b=T=k=o}}return H}(g,b,T,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=P}})},destroy(n){Y$(n)}};function TN(n,e,t,r){if(r)return;let i=e[n],s=t[n];return"angle"===n&&(i=Ya(i),s=Ya(s)),{property:n,start:i,end:s}}function SN(n,e,t){for(;e>n;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Q$(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function X$(n,e){let t=[],r=!1;return $r(n)?(r=!0,t=n):t=function u9(n,e){const{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:u})=>{u=SN(o,u,i);const h=i[o],g=i[u];null!==r?(s.push({x:h.x,y:r}),s.push({x:g.x,y:r})):null!==t&&(s.push({x:t,y:h.y}),s.push({x:t,y:g.y}))}),s}(n,e),t.length?new Ff({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function J$(n){return n&&!1!==n.fill}function d9(n,e,t){let i=n[e].fill;const s=[e];let o;if(!t)return i;for(;!1!==i&&-1===s.indexOf(i);){if(!Ci(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function h9(n,e,t){const r=function m9(n){const e=n.options,t=e.fill;let r=xn(t&&t.target,t);return void 0===r&&(r=!!e.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}(n);if(zn(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return Ci(i)&&Math.floor(i)===i?function f9(n,e,t,r){return("-"===n||"+"===n)&&(t=e+t),!(t===e||t<0||t>=r)&&t}(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function v9(n,e,t){const r=[];for(let i=0;i<t.length;i++){const s=t[i],{first:o,last:u,point:h}=w9(s,e,"x");if(!(!h||o&&u))if(o)r.unshift(h);else if(n.push(h),!u)break}n.push(...r)}function w9(n,e,t){const r=n.interpolate(e,t);if(!r)return{};const i=r[t],s=n.segments,o=n.points;let u=!1,h=!1;for(let g=0;g<s.length;g++){const y=s[g],b=o[y.start][t],T=o[y.end][t];if(th(i,b,T)){u=i===b,h=i===T;break}}return{first:u,last:h,point:r}}class e3{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:i,y:s,radius:o}=this;return e.arc(i,s,o,(t=t||{start:0,end:zr}).end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function xN(n,e,t){const r=function b9(n){const{chart:e,fill:t,line:r}=n;if(Ci(t))return function E9(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}(e,t);if("stack"===t)return function _9(n){const{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,u=function y9(n,e){const t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}(e,t);u.push(X$({x:null,y:e.bottom},r));for(let h=0;h<s.length;h++){const g=s[h];for(let y=g.start;y<=g.end;y++)v9(i,o[y],u)}return new Ff({points:i,options:{}})}(n);if("shape"===t)return!0;const i=function C9(n){return(n.scale||{}).getPointPositionForValue?function D9(n){const{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=function g9(n,e,t){let r;return r="start"===n?t:"end"===n?e.options.reverse?e.min:e.max:zn(n)?n.value:e.getBaseValue(),r}(t,e,s),u=[];if(r.grid.circular){const h=e.getPointPositionForValue(0,s);return new e3({x:h.x,y:h.y,radius:e.getDistanceFromCenterForValue(o)})}for(let h=0;h<i;++h)u.push(e.getPointPositionForValue(h,o));return u}(n):function I9(n){const{scale:e={},fill:t}=n,r=function p9(n,e){let t=null;return"start"===n?t=e.bottom:"end"===n?t=e.top:zn(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}(t,e);if(Ci(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}(n)}(n);return i instanceof e3?i:X$(i,r)}(e),{line:i,scale:s,axis:o}=e,u=i.options,h=u.fill,g=u.backgroundColor,{above:y=g,below:b=g}=h||{};r&&i.points.length&&(Mx(n,t),function T9(n,e){const{line:t,target:r,above:i,below:s,area:o,scale:u}=e,h=t._loop?"angle":e.axis;n.save(),"x"===h&&s!==i&&(t3(n,r,o.top),n3(n,{line:t,target:r,color:i,scale:u,property:h}),n.restore(),n.save(),t3(n,r,o.bottom)),n3(n,{line:t,target:r,color:s,scale:u,property:h}),n.restore()}(n,{line:i,target:r,above:y,below:b,area:t,scale:s,axis:o}),kx(n))}function t3(n,e,t){const{segments:r,points:i}=e;let s=!0,o=!1;n.beginPath();for(const u of r){const{start:h,end:g}=u,y=i[h],b=i[SN(h,g,i)];s?(n.moveTo(y.x,y.y),s=!1):(n.lineTo(y.x,t),n.lineTo(y.x,y.y)),o=!!e.pathSegment(n,u,{move:o}),o?n.closePath():n.lineTo(b.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function n3(n,e){const{line:t,target:r,property:i,color:s,scale:o}=e,u=function c9(n,e,t){const r=n.segments,i=n.points,s=e.points,o=[];for(const u of r){let{start:h,end:g}=u;g=SN(h,g,i);const y=TN(t,i[h],i[g],u.loop);if(!e.segments){o.push({source:u,target:y,start:i[h],end:i[g]});continue}const b=e$(e,y);for(const T of b){const k=TN(t,s[T.start],s[T.end],T.loop),P=JH(u,i,k);for(const B of P)o.push({source:B,target:T,start:{[t]:Q$(y,k,"start",Math.max)},end:{[t]:Q$(y,k,"end",Math.min)}})}}return o}(t,r,i);for(const{source:h,target:g,start:y,end:b}of u){const{style:{backgroundColor:T=s}={}}=h,k=!0!==r;n.save(),n.fillStyle=T,S9(n,o,k&&TN(i,y,b)),n.beginPath();const P=!!t.pathSegment(n,h);let B;if(k){P?n.closePath():r3(n,r,b,i);const H=!!r.pathSegment(n,g,{move:P,reverse:!0});B=P&&H,B||r3(n,r,y,i)}n.closePath(),n.fill(B?"evenodd":"nonzero"),n.restore()}}function S9(n,e,t){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:u}=t||{};"x"===s&&(n.beginPath(),n.rect(o,r,u-o,i-r),n.clip())}function r3(n,e,t,r){const i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var x9={id:"filler",afterDatasetsUpdate(n,e,t){const r=(n.data.datasets||[]).length,i=[];let s,o,u,h;for(o=0;o<r;++o)s=n.getDatasetMeta(o),u=s.dataset,h=null,u&&u.options&&u instanceof Ff&&(h={visible:n.isDatasetVisible(o),index:o,fill:h9(u,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:u}),s.$filler=h,i.push(h);for(o=0;o<r;++o)h=i[o],h&&!1!==h.fill&&(h.fill=d9(i,o,t.propagate))},beforeDraw(n,e,t){const r="beforeDraw"===t.drawTime,i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){const u=i[o].$filler;u&&(u.line.updateControlPoints(s,u.axis),r&&u.fill&&xN(n.ctx,u,s))}},beforeDatasetsDraw(n,e,t){if("beforeDatasetsDraw"!==t.drawTime)return;const r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;J$(s)&&xN(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const r=e.meta.$filler;!J$(r)||"beforeDatasetDraw"!==t.drawTime||xN(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const i3=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}};class s3 extends Rc{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Pr(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const r=e.labels,i=hs(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:u,itemHeight:h}=i3(r,s);let g,y;t.font=i.string,this.isHorizontal()?(g=this.maxWidth,y=this._fitRows(o,s,u,h)+10):(y=this.maxHeight,g=this._fitCols(o,i,u,h)+10),this.width=Math.min(g,e.maxWidth||this.maxWidth),this.height=Math.min(y,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],g=this.lineWidths=[0],y=i+u;let b=e;s.textAlign="left",s.textBaseline="middle";let T=-1,k=-y;return this.legendItems.forEach((P,B)=>{const H=r+t/2+s.measureText(P.text).width;(0===B||g[g.length-1]+H+2*u>o)&&(b+=y,g[g.length-(B>0?0:1)]=0,k+=y,T++),h[B]={left:0,top:k,row:T,width:H,height:i},g[g.length-1]+=H+u}),b}_fitCols(e,t,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],g=this.columnSizes=[],y=o-e;let b=u,T=0,k=0,P=0,B=0;return this.legendItems.forEach((H,ne)=>{const{itemWidth:ce,itemHeight:ve}=function M9(n,e,t,r,i){const s=function k9(n,e,t,r){let i=n.text;return i&&"string"!=typeof i&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}(r,n,e,t),o=function R9(n,e,t){let r=n;return"string"!=typeof e.text&&(r=o3(e,t)),r}(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}(r,t,s,H,i);ne>0&&k+ve+2*u>y&&(b+=T+u,g.push({width:T,height:k}),P+=T+u,B++,T=k=0),h[ne]={left:P,top:k,col:B,width:ce,height:ve},T=Math.max(T,ce),k+=ve+u}),b+=T,g.push({width:T,height:k}),b}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=lv(s,this.left,this.width);if(this.isHorizontal()){let u=0,h=fo(r,this.left+i,this.right-this.lineWidths[u]);for(const g of t)u!==g.row&&(u=g.row,h=fo(r,this.left+i,this.right-this.lineWidths[u])),g.top+=this.top+e+i,g.left=o.leftForLtr(o.x(h),g.width),h+=g.width+i}else{let u=0,h=fo(r,this.top+e+i,this.bottom-this.columnSizes[u].height);for(const g of t)g.col!==u&&(u=g.col,h=fo(r,this.top+e+i,this.bottom-this.columnSizes[u].height)),g.top=h,g.left+=this.left+i,g.left=o.leftForLtr(o.x(g.left),g.width),h+=g.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Mx(e,this),this._draw(),kx(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,u=Bi.color,h=lv(e.rtl,this.left,this.width),g=hs(o.font),{padding:y}=o,b=g.size,T=b/2;let k;this.drawTitle(),i.textAlign=h.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=g.string;const{boxWidth:P,boxHeight:B,itemHeight:H}=i3(o,b),ve=this.isHorizontal(),Ie=this._computeTitleHeight();k=ve?{x:fo(s,this.left+y,this.right-r[0]),y:this.top+y+Ie,line:0}:{x:this.left+y,y:fo(s,this.top+Ie+y,this.bottom-t[0].height),line:0},KH(this.ctx,e.textDirection);const Ce=H+y;this.legendItems.forEach((Ve,rt)=>{i.strokeStyle=Ve.fontColor,i.fillStyle=Ve.fontColor;const gt=i.measureText(Ve.text).width,Jt=h.textAlign(Ve.textAlign||(Ve.textAlign=o.textAlign)),Ln=P+T+gt;let Fn=k.x,nr=k.y;h.setWidth(this.width),ve?rt>0&&Fn+Ln+y>this.right&&(nr=k.y+=Ce,k.line++,Fn=k.x=fo(s,this.left+y,this.right-r[k.line])):rt>0&&nr+Ce>this.bottom&&(Fn=k.x=Fn+t[k.line].width+y,k.line++,nr=k.y=fo(s,this.top+Ie+y,this.bottom-t[k.line].height)),function(Ve,rt,gt){if(isNaN(P)||P<=0||isNaN(B)||B<0)return;i.save();const Jt=xn(gt.lineWidth,1);if(i.fillStyle=xn(gt.fillStyle,u),i.lineCap=xn(gt.lineCap,"butt"),i.lineDashOffset=xn(gt.lineDashOffset,0),i.lineJoin=xn(gt.lineJoin,"miter"),i.lineWidth=Jt,i.strokeStyle=xn(gt.strokeStyle,u),i.setLineDash(xn(gt.lineDash,[])),o.usePointStyle){const Ln={radius:B*Math.SQRT2/2,pointStyle:gt.pointStyle,rotation:gt.rotation,borderWidth:Jt},Fn=h.xPlus(Ve,P/2);LH(i,Ln,Fn,rt+T,o.pointStyleWidth&&P)}else{const Ln=rt+Math.max((b-B)/2,0),Fn=h.leftForLtr(Ve,P),nr=Yg(gt.borderRadius);i.beginPath(),Object.values(nr).some(Xs=>0!==Xs)?NE(i,{x:Fn,y:Ln,w:P,h:B,radius:nr}):i.rect(Fn,Ln,P,B),i.fill(),0!==Jt&&i.stroke()}i.restore()}(h.x(Fn),nr,Ve),Fn=((n,e,t,r)=>n===(r?"left":"right")?t:"center"===n?(e+t)/2:e)(Jt,Fn+P+T,ve?Fn+Ln:this.right,e.rtl),function(Ve,rt,gt){Kg(i,gt.text,Ve,rt+H/2,g,{strikethrough:gt.hidden,textAlign:h.textAlign(gt.textAlign)})}(h.x(Fn),nr,Ve),ve?k.x+=Ln+y:k.y+="string"!=typeof Ve.text?o3(Ve,g.lineHeight):Ce}),YH(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=hs(t.font),i=po(t.padding);if(!t.display)return;const s=lv(e.rtl,this.left,this.width),o=this.ctx,u=t.position,g=i.top+r.size/2;let y,b=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),y=this.top+g,b=fo(e.align,b,this.right-T);else{const P=this.columnSizes.reduce((B,H)=>Math.max(B,H.height),0);y=g+fo(e.align,this.top,this.bottom-P-e.labels.padding-this._computeTitleHeight())}const k=fo(u,b,b+T);o.textAlign=s.textAlign(rN(u)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,Kg(o,t.text,k,y,r)}_computeTitleHeight(){const e=this.options.title,t=hs(e.font),r=po(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(th(e,this.left,this.right)&&th(t,this.top,this.bottom))for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],th(e,i.left,i.left+i.width)&&th(t,i.top,i.top+i.height))return this.legendItems[r];return null}handleEvent(e){const t=this.options;if(!function P9(n,e){return!(("mousemove"!==n&&"mouseout"!==n||!e.onHover&&!e.onLeave)&&(!e.onClick||"click"!==n&&"mouseup"!==n))}(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,s=((n,e)=>null!==n&&null!==e&&n.datasetIndex===e.datasetIndex&&n.index===e.index)(i,r);i&&!s&&Pr(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Pr(t.onHover,[e,r,this],this)}else r&&Pr(t.onClick,[e,r,this],this)}}function o3(n,e){return e*(n.text?n.text.length+.5:0)}var O9={id:"legend",_element:s3,start(n,e,t){const r=n.legend=new s3({ctx:n.ctx,options:t,chart:n});go.configure(n,r,t),go.addBox(n,r)},stop(n){go.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;go.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const g=h.controller.getStyle(t?0:void 0),y=po(g.borderWidth);return{text:e[h.index].label,fillStyle:g.backgroundColor,fontColor:s,hidden:!h.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:g.borderColor,pointStyle:r||g.pointStyle,rotation:g.rotation,textAlign:i||g.textAlign,borderRadius:o&&(u||g.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class AN extends Rc{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=$r(r.text)?r.text.length:1;this._padding=po(r.padding);const s=i*hs(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:r,bottom:i,right:s,options:o}=this,u=o.align;let g,y,b,h=0;return this.isHorizontal()?(y=fo(u,r,s),b=t+e,g=s-r):("left"===o.position?(y=r+e,b=fo(u,i,t),h=-.5*ii):(y=s-e,b=fo(u,t,i),h=.5*ii),g=i-t),{titleX:y,titleY:b,maxWidth:g,rotation:h}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=hs(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:u,maxWidth:h,rotation:g}=this._drawArgs(s);Kg(e,t.text,0,0,r,{color:t.color,maxWidth:h,rotation:g,textAlign:rN(t.align),textBaseline:"middle",translation:[o,u]})}}var L9={id:"title",_element:AN,start(n,e,t){!function N9(n,e){const t=new AN({ctx:n.ctx,options:e,chart:n});go.configure(n,t,e),go.addBox(n,t),n.titleBlock=t}(n,t)},stop(n){go.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;go.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Jx=new WeakMap;var F9={id:"subtitle",start(n,e,t){const r=new AN({ctx:n.ctx,options:t,chart:n});go.configure(n,r,t),go.addBox(n,r),Jx.set(n,r)},stop(n){go.removeBox(n,Jx.get(n)),Jx.delete(n)},beforeUpdate(n,e,t){const r=Jx.get(n);go.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const GE={average(n){if(!n.length)return!1;let e,t,r=0,i=0,s=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const u=o.tooltipPosition();r+=u.x,i+=u.y,++s}}return{x:r/s,y:i/s}},nearest(n,e){if(!n.length)return!1;let s,o,u,t=e.x,r=e.y,i=Number.POSITIVE_INFINITY;for(s=0,o=n.length;s<o;++s){const h=n[s].element;if(h&&h.hasValue()){const y=tN(e,h.getCenterPoint());y<i&&(i=y,u=h)}}if(u){const h=u.tooltipPosition();t=h.x,r=h.y}return{x:t,y:r}}};function Ou(n,e){return e&&($r(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function sh(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function V9(n,e){const{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:u}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:u,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function a3(n,e){const t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:u}=e,h=hs(e.bodyFont),g=hs(e.titleFont),y=hs(e.footerFont),b=s.length,T=i.length,k=r.length,P=po(e.padding);let B=P.height,H=0,ne=r.reduce((Ie,Ce)=>Ie+Ce.before.length+Ce.lines.length+Ce.after.length,0);ne+=n.beforeBody.length+n.afterBody.length,b&&(B+=b*g.lineHeight+(b-1)*e.titleSpacing+e.titleMarginBottom),ne&&(B+=k*(e.displayColors?Math.max(u,h.lineHeight):h.lineHeight)+(ne-k)*h.lineHeight+(ne-1)*e.bodySpacing),T&&(B+=e.footerMarginTop+T*y.lineHeight+(T-1)*e.footerSpacing);let ce=0;const ve=function(Ie){H=Math.max(H,t.measureText(Ie).width+ce)};return t.save(),t.font=g.string,gr(n.title,ve),t.font=h.string,gr(n.beforeBody.concat(n.afterBody),ve),ce=e.displayColors?o+2+e.boxPadding:0,gr(r,Ie=>{gr(Ie.before,ve),gr(Ie.lines,ve),gr(Ie.after,ve)}),ce=0,t.font=y.string,gr(n.footer,ve),t.restore(),H+=P.width,{width:H,height:B}}function j9(n,e,t,r){const{x:i,width:s}=t,{width:o,chartArea:{left:u,right:h}}=n;let g="center";return"center"===r?g=i<=(u+h)/2?"left":"right":i<=s/2?g="left":i>=o-s/2&&(g="right"),function B9(n,e,t,r){const{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if("left"===n&&i+s+o>e.width||"right"===n&&i-s-o<0)return!0}(g,n,e,t)&&(g="center"),g}function l3(n,e,t){const r=t.yAlign||e.yAlign||function U9(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}(n,t);return{xAlign:t.xAlign||e.xAlign||j9(n,e,t,r),yAlign:r}}function c3(n,e,t,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:u,yAlign:h}=t,g=i+s,{topLeft:y,topRight:b,bottomLeft:T,bottomRight:k}=Yg(o);let P=function H9(n,e){let{x:t,width:r}=n;return"right"===e?t-=r:"center"===e&&(t-=r/2),t}(e,u);const B=function $9(n,e,t){let{y:r,height:i}=n;return"top"===e?r+=t:r-="bottom"===e?i+t:i/2,r}(e,h,g);return"center"===h?"left"===u?P+=g:"right"===u&&(P-=g):"left"===u?P-=Math.max(y,T)+i:"right"===u&&(P+=Math.max(b,k)+i),{x:Ms(P,0,r.width-e.width),y:Ms(B,0,r.height-e.height)}}function eA(n,e,t){const r=po(t.padding);return"center"===e?n.x+n.width/2:"right"===e?n.x+n.width-r.right:n.x+r.left}function u3(n){return Ou([],sh(n))}function d3(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const h3={beforeTitle:eh,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:eh,beforeBody:eh,beforeLabel:eh,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Xn(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:eh,afterBody:eh,beforeFooter:eh,footer:eh,afterFooter:eh};function ba(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?h3[e].call(t,r):i}class MN extends Rc{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,s=new i$(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=function z9(n,e,t){return Lf(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=ba(r,"beforeTitle",this,e),s=ba(r,"title",this,e),o=ba(r,"afterTitle",this,e);let u=[];return u=Ou(u,sh(i)),u=Ou(u,sh(s)),u=Ou(u,sh(o)),u}getBeforeBody(e,t){return u3(ba(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return gr(e,s=>{const o={before:[],lines:[],after:[]},u=d3(r,s);Ou(o.before,sh(ba(u,"beforeLabel",this,s))),Ou(o.lines,ba(u,"label",this,s)),Ou(o.after,sh(ba(u,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,t){return u3(ba(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=ba(r,"beforeFooter",this,e),s=ba(r,"footer",this,e),o=ba(r,"afterFooter",this,e);let u=[];return u=Ou(u,sh(i)),u=Ou(u,sh(s)),u=Ou(u,sh(o)),u}_createItems(e){const t=this._active,r=this.chart.data,i=[],s=[],o=[];let h,g,u=[];for(h=0,g=t.length;h<g;++h)u.push(V9(this.chart,t[h]));return e.filter&&(u=u.filter((y,b,T)=>e.filter(y,b,T,r))),e.itemSort&&(u=u.sort((y,b)=>e.itemSort(y,b,r))),gr(u,y=>{const b=d3(e.callbacks,y);i.push(ba(b,"labelColor",this,y)),s.push(ba(b,"labelPointStyle",this,y)),o.push(ba(b,"labelTextColor",this,y))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=u,u}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(i.length){const u=GE[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const h=this._size=a3(this,r),g=Object.assign({},u,h),y=l3(this.chart,r,g),b=c3(r,g,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,s={opacity:1,x:b.x,y:b.y,width:h.width,height:h.height,caretX:u.x,caretY:u.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const s=this.getCaretPosition(e,r,i);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:u}=r,{topLeft:h,topRight:g,bottomLeft:y,bottomRight:b}=Yg(u),{x:T,y:k}=e,{width:P,height:B}=t;let H,ne,ce,ve,Ie,Ce;return"center"===s?(Ie=k+B/2,"left"===i?(H=T,ne=H-o,ve=Ie+o,Ce=Ie-o):(H=T+P,ne=H+o,ve=Ie-o,Ce=Ie+o),ce=H):(ne="left"===i?T+Math.max(h,y)+o:"right"===i?T+P-Math.max(g,b)-o:this.caretX,"top"===s?(ve=k,Ie=ve-o,H=ne-o,ce=ne+o):(ve=k+B,Ie=ve+o,H=ne+o,ce=ne-o),Ce=ve),{x1:H,x2:ne,x3:ce,y1:ve,y2:Ie,y3:Ce}}drawTitle(e,t,r){const i=this.title,s=i.length;let o,u,h;if(s){const g=lv(r.rtl,this.x,this.width);for(e.x=eA(this,r.titleAlign,r),t.textAlign=g.textAlign(r.titleAlign),t.textBaseline="middle",o=hs(r.titleFont),u=r.titleSpacing,t.fillStyle=r.titleColor,t.font=o.string,h=0;h<s;++h)t.fillText(i[h],g.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+u,h+1===s&&(e.y+=r.titleMarginBottom-u)}}_drawColorBox(e,t,r,i,s){const o=this.labelColors[r],u=this.labelPointStyles[r],{boxHeight:h,boxWidth:g,boxPadding:y}=s,b=hs(s.bodyFont),T=eA(this,"left",s),k=i.x(T),B=t.y+(h<b.lineHeight?(b.lineHeight-h)/2:0);if(s.usePointStyle){const H={radius:Math.min(g,h)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},ne=i.leftForLtr(k,g)+g/2,ce=B+h/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,aN(e,H,ne,ce),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,aN(e,H,ne,ce)}else{e.lineWidth=zn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const H=i.leftForLtr(k,g-y),ne=i.leftForLtr(i.xPlus(k,1),g-y-2),ce=Yg(o.borderRadius);Object.values(ce).some(ve=>0!==ve)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,NE(e,{x:H,y:B,w:g,h,radius:ce}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),NE(e,{x:ne,y:B+1,w:g-2,h:h-2,radius:ce}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(H,B,g,h),e.strokeRect(H,B,g,h),e.fillStyle=o.backgroundColor,e.fillRect(ne,B+1,g-2,h-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:u,boxHeight:h,boxWidth:g,boxPadding:y}=r,b=hs(r.bodyFont);let T=b.lineHeight,k=0;const P=lv(r.rtl,this.x,this.width),B=function(gt){t.fillText(gt,P.x(e.x+k),e.y+T/2),e.y+=T+s},H=P.textAlign(o);let ne,ce,ve,Ie,Ce,Ve,rt;for(t.textAlign=o,t.textBaseline="middle",t.font=b.string,e.x=eA(this,H,r),t.fillStyle=r.bodyColor,gr(this.beforeBody,B),k=u&&"right"!==H?"center"===o?g/2+y:g+2+y:0,Ie=0,Ve=i.length;Ie<Ve;++Ie){for(ne=i[Ie],ce=this.labelTextColors[Ie],t.fillStyle=ce,gr(ne.before,B),ve=ne.lines,u&&ve.length&&(this._drawColorBox(t,e,Ie,P,r),T=Math.max(b.lineHeight,h)),Ce=0,rt=ve.length;Ce<rt;++Ce)B(ve[Ce]),T=b.lineHeight;gr(ne.after,B)}k=0,T=b.lineHeight,gr(this.afterBody,B),e.y-=s}drawFooter(e,t,r){const i=this.footer,s=i.length;let o,u;if(s){const h=lv(r.rtl,this.x,this.width);for(e.x=eA(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=h.textAlign(r.footerAlign),t.textBaseline="middle",o=hs(r.footerFont),t.fillStyle=r.footerColor,t.font=o.string,u=0;u<s;++u)t.fillText(i[u],h.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:s,yAlign:o}=this,{x:u,y:h}=e,{width:g,height:y}=r,{topLeft:b,topRight:T,bottomLeft:k,bottomRight:P}=Yg(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(u+b,h),"top"===o&&this.drawCaret(e,t,r,i),t.lineTo(u+g-T,h),t.quadraticCurveTo(u+g,h,u+g,h+T),"center"===o&&"right"===s&&this.drawCaret(e,t,r,i),t.lineTo(u+g,h+y-P),t.quadraticCurveTo(u+g,h+y,u+g-P,h+y),"bottom"===o&&this.drawCaret(e,t,r,i),t.lineTo(u+k,h+y),t.quadraticCurveTo(u,h+y,u,h+y-k),"center"===o&&"left"===s&&this.drawCaret(e,t,r,i),t.lineTo(u,h+b),t.quadraticCurveTo(u,h,u+b,h),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=GE[e.position].call(this,this._active,this._eventPosition);if(!o)return;const u=this._size=a3(this,e),h=Object.assign({},o,this._size),g=l3(t,e,h),y=c3(e,h,g,t);(i._to!==y.x||s._to!==y.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=u.width,this.height=u.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=po(t.padding);t.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,t),KH(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),YH(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:u,index:h})=>{const g=this.chart.getDatasetMeta(u);if(!g)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:g.data[h],index:h}}),s=!Ix(r,i),o=this._positionChanged(i,t);(s||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,r),u=this._positionChanged(o,e),h=t||!Ix(o,s)||u;return h&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,r,i){const s=this.options;if("mouseout"===e.type)return[];if(!i)return t;const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:r,caretY:i,options:s}=this,o=GE[s.position].call(this,e,t);return!1!==o&&(r!==o.x||i!==o.y)}}Bt(MN,"positioners",GE);var W9={id:"tooltip",_element:MN,positioners:GE,afterInit(n,e,t){t&&(n.tooltip=new MN({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(!1===n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0}))return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){n.tooltip&&n.tooltip.handleEvent(e.event,e.replay,e.inChartArea)&&(e.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:h3},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},G9=Object.freeze({__proto__:null,Colors:i9,Decimation:l9,Filler:x9,Legend:O9,SubTitle:F9,Title:L9,Tooltip:W9});function f3(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class kN extends nm{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:i,label:s}of t)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Xn(e))return null;const r=this.getLabels();return((n,e)=>null===n?null:Ms(Math.round(n),0,e))(t=isFinite(t)&&r[t]===e?t:function Z9(n,e,t,r){const i=n.indexOf(e);return-1===i?((n,e,t,r)=>("string"==typeof e?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t))(n,e,t,r):i!==n.lastIndexOf(e)?t:i}(r,e,xn(t,e),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),t||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return f3.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function p3(n,e,{horizontal:t,minRotation:r}){const i=Mc(r),s=(t?Math.sin(i):Math.cos(i))||.001;return Math.min(e/s,.75*e*(""+n).length)}Bt(kN,"id","category"),Bt(kN,"defaults",{ticks:{callback:f3}});class tA extends nm{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Xn(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=h=>i=t?i:h,u=h=>s=r?s:h;if(e){const h=Ru(i),g=Ru(s);h<0&&g<0?u(0):h>0&&g>0&&o(0)}if(i===s){let h=0===s?1:Math.abs(.05*s);u(s+h),e||o(i-h)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let i,{maxTicksLimit:t,stepSize:r}=e;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const o=function Y9(n,e){const t=[],{bounds:i,step:s,min:o,max:u,precision:h,count:g,maxTicks:y,maxDigits:b,includeBounds:T}=n,k=s||1,P=y-1,{min:B,max:H}=e,ne=!Xn(o),ce=!Xn(u),ve=!Xn(g),Ie=(H-B)/(b+1);let Ve,rt,gt,Jt,Ce=yH((H-B)/P/k)*k;if(Ce<1e-14&&!ne&&!ce)return[{value:B},{value:H}];Jt=Math.ceil(H/Ce)-Math.floor(B/Ce),Jt>P&&(Ce=yH(Jt*Ce/P/k)*k),Xn(h)||(Ve=Math.pow(10,h),Ce=Math.ceil(Ce*Ve)/Ve),"ticks"===i?(rt=Math.floor(B/Ce)*Ce,gt=Math.ceil(H/Ce)*Ce):(rt=B,gt=H),ne&&ce&&s&&function W8(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}((u-o)/s,Ce/1e3)?(Jt=Math.round(Math.min((u-o)/Ce,y)),Ce=(u-o)/Jt,rt=o,gt=u):ve?(rt=ne?o:rt,gt=ce?u:gt,Jt=g-1,Ce=(gt-rt)/Jt):(Jt=(gt-rt)/Ce,Jt=AE(Jt,Math.round(Jt),Ce/1e3)?Math.round(Jt):Math.ceil(Jt));const Ln=Math.max(wH(Ce),wH(rt));Ve=Math.pow(10,Xn(h)?Ln:h),rt=Math.round(rt*Ve)/Ve,gt=Math.round(gt*Ve)/Ve;let Fn=0;for(ne&&(T&&rt!==o?(t.push({value:o}),rt<o&&Fn++,AE(Math.round((rt+Fn*Ce)*Ve)/Ve,o,p3(o,Ie,n))&&Fn++):rt<o&&Fn++);Fn<Jt;++Fn)t.push({value:Math.round((rt+Fn*Ce)*Ve)/Ve});return ce&&T&&gt!==u?t.length&&AE(t[t.length-1].value,u,p3(u,Ie,n))?t[t.length-1].value=u:t.push({value:u}):(!ce||gt===u)&&t.push({value:gt}),t}({maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&vH(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return RE(e,this.chart.options.locale,this.options.ticks.format)}}class RN extends tA{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ci(e)?e:0,this.max=Ci(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=Mc(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Bt(RN,"id","linear"),Bt(RN,"defaults",{ticks:{callback:xx.formatters.numeric}});const qE=n=>Math.floor(Nf(n)),rm=(n,e)=>Math.pow(10,qE(n)+e);function g3(n){return n/Math.pow(10,qE(n))==1}function m3(n,e,t){const r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}class PN extends nm{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=tA.prototype.parse.apply(this,[e,t]);if(0!==r)return Ci(r)&&r>0?r:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ci(e)?Math.max(0,e):null,this.max=Ci(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ci(this._userMin)&&(this.min=e===rm(this.min,0)?rm(this.min,-1):rm(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,i=this.max;const s=u=>r=e?r:u,o=u=>i=t?i:u;r===i&&(r<=0?(s(1),o(10)):(s(rm(r,-1)),o(rm(i,1)))),r<=0&&s(rm(i,-1)),i<=0&&o(rm(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,r=function X9(n,{min:e,max:t}){e=Ka(n.min,e);const r=[],i=qE(e);let s=function Q9(n,e){let r=qE(e-n);for(;m3(n,e,r)>10;)r++;for(;m3(n,e,r)<10;)r--;return Math.min(r,qE(n))}(e,t),o=s<0?Math.pow(10,Math.abs(s)):1;const u=Math.pow(10,s),h=i>s?Math.pow(10,i):0,g=Math.round((e-h)*o)/o,y=Math.floor((e-h)/u/10)*u*10;let b=Math.floor((g-y)/Math.pow(10,s)),T=Ka(n.min,Math.round((h+y+b*Math.pow(10,s))*o)/o);for(;T<t;)r.push({value:T,major:g3(T),significand:b}),b>=10?b=b<15?15:20:b++,b>=20&&(s++,b=2,o=s>=0?1:o),T=Math.round((h+y+b*Math.pow(10,s))*o)/o;const k=Ka(n.max,T);return r.push({value:k,major:g3(k),significand:b}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&vH(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return void 0===e?"0":RE(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Nf(e),this._valueRange=Nf(this.max)-Nf(e)}getPixelForValue(e){return(void 0===e||0===e)&&(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Nf(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function ON(n){const e=n.ticks;if(e.display&&n.display){const t=po(e.backdropPadding);return xn(e.font&&e.font.size,Bi.font.size)+t.height}return 0}function J9(n,e,t){return t=$r(t)?t:[t],{w:lZ(n,e.string,t),h:t.length*e.lineHeight}}function _3(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function tY(n,e,t,r,i){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let u=0,h=0;r.start<e.l?(u=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-u)):r.end>e.r&&(u=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+u)),i.start<e.t?(h=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-h)):i.end>e.b&&(h=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+h))}function rY(n){return 0===n||180===n?"center":n<180?"left":"right"}function iY(n,e,t){return"right"===t?n-=e:"center"===t&&(n-=e/2),n}function sY(n,e,t){return 90===t||270===t?n-=e/2:(t>270||t<90)&&(n-=e),n}function y3(n,e,t,r){const{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,zr);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,e),i.lineTo(s.x,s.y)}}Bt(PN,"id","logarithmic"),Bt(PN,"defaults",{ticks:{callback:xx.formatters.logarithmic,major:{enabled:!0}}});class ZE extends tA{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=po(ON(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Ci(e)&&!isNaN(e)?e:0,this.max=Ci(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ON(this.options))}generateTickLabels(e){tA.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const i=Pr(this.options.pointLabels.callback,[t,r],this);return i||0===i?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?function eY(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,u=o.centerPointLabels?ii/s:0;for(let h=0;h<s;h++){const g=o.setContext(n.getPointLabelContext(h));i[h]=g.padding;const y=n.getPointPosition(h,n.drawingArea+i[h],u),b=hs(g.font),T=J9(n.ctx,b,n._pointLabels[h]);r[h]=T;const k=Ya(n.getIndexAngle(h)+u),P=Math.round(eN(k));tY(t,e,k,_3(P,y.x,T.w,0,180),_3(P,y.y,T.h,90,270))}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=function nY(n,e,t){const r=[],i=n._pointLabels.length,s=n.options,o=ON(s)/2,u=n.drawingArea,h=s.pointLabels.centerPointLabels?ii/i:0;for(let g=0;g<i;g++){const y=n.getPointPosition(g,u+o+t[g],h),b=Math.round(eN(Ya(y.angle+Ii))),T=e[g],k=sY(y.y,T.h,b),P=rY(b),B=iY(y.x,T.w,P);r.push({x:y.x,y:k,textAlign:P,left:B,top:k,right:B+T.w,bottom:k+T.h})}return r}(n,r,i)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){return Ya(e*(zr/(this._pointLabels.length||1))+Mc(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Xn(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Xn(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return function lY(n,e,t){return Lf(n,{label:t,index:e,type:"pointLabel"})}(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const i=this.getIndexAngle(e)-Ii+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),y3(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,o=this._pointLabels.length;let u,h,g;if(t.pointLabels.display&&function oY(n,e){const{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){const s=r.setContext(n.getPointLabelContext(i)),o=hs(s.font),{x:u,y:h,textAlign:g,left:y,top:b,right:T,bottom:k}=n._pointLabelItems[i],{backdropColor:P}=s;if(!Xn(P)){const B=Yg(s.borderRadius),H=po(s.backdropPadding);t.fillStyle=P;const ne=y-H.left,ce=b-H.top,ve=T-y+H.width,Ie=k-b+H.height;Object.values(B).some(Ce=>0!==Ce)?(t.beginPath(),NE(t,{x:ne,y:ce,w:ve,h:Ie,radius:B}),t.fill()):t.fillRect(ne,ce,ve,Ie)}Kg(t,n._pointLabels[i],u,h+o.lineHeight/2,o,{color:s.color,textAlign:g,textBaseline:"middle"})}}(this,o),i.display&&this.ticks.forEach((y,b)=>{if(0!==b){h=this.getDistanceFromCenterForValue(y.value);const T=this.getContext(b),k=i.setContext(T),P=s.setContext(T);!function aY(n,e,t,r,i){const s=n.ctx,o=e.circular,{color:u,lineWidth:h}=e;!o&&!r||!u||!h||t<0||(s.save(),s.strokeStyle=u,s.lineWidth=h,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),y3(n,t,o,r),s.closePath(),s.stroke(),s.restore())}(this,k,h,o,P)}}),r.display){for(e.save(),u=o-1;u>=0;u--){const y=r.setContext(this.getPointLabelContext(u)),{color:b,lineWidth:T}=y;!T||!b||(e.lineWidth=T,e.strokeStyle=b,e.setLineDash(y.borderDash),e.lineDashOffset=y.borderDashOffset,h=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),g=this.getPointPosition(u,h),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(g.x,g.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((u,h)=>{if(0===h&&!t.reverse)return;const g=r.setContext(this.getContext(h)),y=hs(g.font);if(s=this.getDistanceFromCenterForValue(this.ticks[h].value),g.showLabelBackdrop){e.font=y.string,o=e.measureText(u.label).width,e.fillStyle=g.backdropColor;const b=po(g.backdropPadding);e.fillRect(-o/2-b.left,-s-y.size/2-b.top,o+b.width,y.size+b.height)}Kg(e,u.label,0,-s,y,{color:g.color})}),e.restore()}drawTitle(){}}Bt(ZE,"id","radialLinear"),Bt(ZE,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:xx.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:n=>n,padding:5,centerPointLabels:!1}}),Bt(ZE,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Bt(ZE,"descriptors",{angleLines:{_fallback:"grid"}});const nA={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ea=Object.keys(nA);function cY(n,e){return n-e}function v3(n,e){if(Xn(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let o=e;return"function"==typeof r&&(o=r(o)),Ci(o)||(o="string"==typeof r?t.parse(o,r):t.parse(o)),null===o?null:(i&&(o="week"!==i||!sv(s)&&!0!==s?t.startOf(o,i):t.startOf(o,"isoWeek",s)),+o)}function w3(n,e,t,r){const i=Ea.length;for(let s=Ea.indexOf(n);s<i-1;++s){const o=nA[Ea[s]];if(o.common&&Math.ceil((t-e)/((o.steps?o.steps:Number.MAX_SAFE_INTEGER)*o.size))<=r)return Ea[s]}return Ea[i-1]}function b3(n,e,t){if(t){if(t.length){const{lo:r,hi:i}=nN(t,e);n[t[r]>=e?t[r]:t[i]]=!0}}else n[e]=!0}function E3(n,e,t){const r=[],i={},s=e.length;let o,u;for(o=0;o<s;++o)u=e[o],i[u]=o,r.push({value:u,major:!1});return 0!==s&&t?function hY(n,e,t,r){const i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let u,h;for(u=s;u<=o;u=+i.add(u,1,r))h=t[u],h>=0&&(e[h].major=!0);return e}(n,r,i,t):r}class KE extends nm{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new I7__date(e.adapters.date);i.init(t),xE(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:v3(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:u}=this.getUserBounds();function h(g){!o&&!isNaN(g.min)&&(i=Math.min(i,g.min)),!u&&!isNaN(g.max)&&(s=Math.max(s,g.max))}(!o||!u)&&(h(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&h(this.getMinMax(!1))),i=Ci(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),s=Ci(s)&&!isNaN(s)?s:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,u=function K8(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}(i,s,this.max);return this._unit=t.unit||(r.autoSkip?w3(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function uY(n,e,t,r,i){for(let s=Ea.length-1;s>=Ea.indexOf(t);s--){const o=Ea[s];if(nA[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return Ea[t?Ea.indexOf(t):0]}(this,u.length,t.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function dY(n){for(let e=Ea.indexOf(n)+1,t=Ea.length;e<t;++e)if(nA[Ea[e]].common)return Ea[e]}(this._unit):void 0,this.initOffsets(i),e.reverse&&u.reverse(),E3(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i,s,t=0,r=0;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),t=1===e.length?1-i:(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),r=1===e.length?s:(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Ms(t,0,o),r=Ms(r,0,o),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||w3(s.minUnit,t,r,this._getLabelCapacity(t)),u=xn(i.ticks.stepSize,1),h="week"===o&&s.isoWeekday,g=sv(h)||!0===h,y={};let T,k,b=t;if(g&&(b=+e.startOf(b,"isoWeek",h)),b=+e.startOf(b,g?"day":o),e.diff(r,t,o)>1e5*u)throw new Error(t+" and "+r+" are too far apart with stepSize of "+u+" "+o);const P="data"===i.ticks.source&&this.getDataTimestamps();for(T=b,k=0;T<r;T=+e.add(T,u,o),k++)b3(y,T,P);return(T===r||"ticks"===i.bounds||1===k)&&b3(y,T,P),Object.keys(y).sort((B,H)=>B-H).map(B=>+B)}getLabelForValue(e){const r=this.options.time;return this._adapter.format(e,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}format(e,t){return this._adapter.format(e,t||this.options.time.displayFormats[this._unit])}_tickFormatFunction(e,t,r,i){const s=this.options,o=s.ticks.callback;if(o)return Pr(o,[e,t,r],this);const u=s.time.displayFormats,h=this._unit,g=this._majorUnit,b=g&&u[g],T=r[t];return this._adapter.format(e,i||(g&&b&&T&&T.major?b:h&&u[h]))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=Mc(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(i),o=Math.sin(i),u=this._resolveTickFontOptions(0).size;return{w:r*s+u*o,h:r*o+u*s}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,s=this._tickFormatFunction(e,0,E3(this,[e],this._majorUnit),i),o=this._getLabelSize(s),u=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return u>0?u:1}getDataTimestamps(){let t,r,e=this._cache.data||[];if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(v3(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return IH(e.sort(cY))}}function rA(n,e,t){let s,o,u,h,r=0,i=n.length-1;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=nh(n,"pos",e)),({pos:s,time:u}=n[r]),({pos:o,time:h}=n[i])):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=nh(n,"time",e)),({time:s,pos:u}=n[r]),({time:o,pos:h}=n[i]));const g=o-s;return g?u+(h-u)*(e-s)/g:u}Bt(KE,"id","time"),Bt(KE,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class NN extends KE{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=rA(t,this.min),this._tableRange=rA(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],s=[];let o,u,h,g,y;for(o=0,u=e.length;o<u;++o)g=e[o],g>=t&&g<=r&&i.push(g);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,u=i.length;o<u;++o)y=i[o+1],h=i[o-1],g=i[o],Math.round((y+h)/2)!==g&&s.push({time:g,pos:o/(u-1)});return s}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return e=t.length&&r.length?this.normalize(t.concat(r)):t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(rA(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return rA(this._table,r*this._tableRange+this._minPos,!0)}}Bt(NN,"id","timeseries"),Bt(NN,"defaults",KE.defaults),ih.register(C7,XK,G9,Object.freeze({__proto__:null,CategoryScale:kN,LinearScale:RN,LogarithmicScale:PN,RadialLinearScale:ZE,TimeScale:KE,TimeSeriesScale:NN}));const gY=ih;class YE{constructor(e){this.donoservice=e,this.WomenDonors=[],this.MenDonors=[],this.donors=[],this.MPP=[],this.WPP=[]}ngOnInit(){this.retrieveDonors()}retrieveDonors(){this.donoservice.getAll().snapshotChanges().pipe((0,xt.U)(e=>e.map(t=>({key:t.payload.key,...t.payload.val()})))).subscribe(e=>{this.donors=e,this.WomenDonors=e.filter(this.female),this.MenDonors=e.filter(this.male),this.MPP=100*this.MenDonors.length/this.donors.length,this.WPP=100*this.WomenDonors.length/this.donors.length,this.aPlus=e.filter(this.APlus).length,this.aMinus=e.filter(this.AMinus).length,this.bPlus=e.filter(this.BPlus).length,this.bMinus=e.filter(this.BMinus).length,this.oPlus=e.filter(this.OPlus).length,this.oMinus=e.filter(this.OMinus).length,this.abPlus=e.filter(this.ABPlus).length,this.abMinus=e.filter(this.ABMinus).length,this.chart=new gY("MyChart",{type:"bar",data:{labels:["positive (A+)","negative (A-)","positive (B+)","negative (B-)","positive (O+)","negative (O-)","positive (AB+)","negative (AB-)"],datasets:[{label:"Count",data:[this.aPlus,this.aMinus,this.bPlus,this.bMinus,this.oPlus,this.oMinus,this.abPlus,this.abMinus],backgroundColor:["#ff6384","#36a2eb","#cc65fe","#ffce56","#1ABC9C","#CD6155","#99DC33","#33DCCB"]}]},options:{aspectRatio:2.5}})})}female(e){return"female"==e.sexe}male(e){return"male"==e.sexe}APlus(e){return"A+"==e.bloodType}AMinus(e){return"A-"==e.bloodType}BPlus(e){return"B+"==e.bloodType}BMinus(e){return"B-"==e.bloodType}OPlus(e){return"O+"==e.bloodType}OMinus(e){return"O-"==e.bloodType}ABPlus(e){return"AB+"==e.bloodType}ABMinus(e){return"AB-"==e.bloodType}}function mY(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",4)(1,"p"),f._uU(2,"We have sent a confirmation email to "),f.TgZ(3,"strong"),f._uU(4),f.qZA(),f._uU(5,"."),f.qZA(),f.TgZ(6,"p"),f._uU(7,"Please check your email and click on the link to verfiy your email address."),f.qZA(),f.TgZ(8,"button",5),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.authService.SendVerificationMail())}),f._uU(9," Resend Verification Email "),f.qZA(),f._UZ(10,"br")(11,"br"),f.TgZ(12,"span"),f._uU(13,"Go back to?"),f.TgZ(14,"a",6),f._uU(15," Sign in"),f.qZA()()()}if(2&n){const t=e.ngIf;f.xp6(4),f.Oqu(t.email)}}YE.\u0275fac=function(e){return new(e||YE)(f.Y36(Hd))},YE.\u0275cmp=f.Xpm({type:YE,selectors:[["app-statistics"]],decls:53,vars:8,consts:[[1,"nk-block"],[1,"row","gy-gs"],[1,"col-md-3","col-xxl-2"],[1,"card","card-bordered","h-100"],[1,"card-inner","pb-0"],[1,"card-title-group","pt-1"],[1,"card-title"],[1,"title"],[1,"card-inner","pt-0"],[1,"invest-ov","gy-1"],[1,"subtitle"],[1,"invest-ov-details"],[1,"invest-ov-stats"],[1,"d-flex","align-items-end","text-primary"],[1,"invest-ov-info"],[1,"text-success"],[1,"text-warning"],[1,"invest-ov"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success","progress-bar-striped"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-warning","progress-bar-striped"],[1,"col-md-9","col-xxl-6"],[1,"card-inner","border-bottom"],[1,"card-title-group"],[1,"card-inner","p-0"],[1,"m-3"],["id","MyChart"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h6",7),f._uU(8,"Donors by Gender"),f.qZA()()()(),f.TgZ(9,"div",8)(10,"div",9)(11,"div",10),f._uU(12,"Donors"),f.qZA(),f.TgZ(13,"div",11)(14,"div",12)(15,"div")(16,"h2",13),f._uU(17),f.qZA()(),f.TgZ(18,"div",7),f._uU(19,"Total"),f.qZA()()()(),f.TgZ(20,"div",9)(21,"div",10),f._uU(22,"By Gender"),f.qZA(),f.TgZ(23,"div",11)(24,"div",14)(25,"div")(26,"h3",15),f._uU(27),f.qZA()(),f.TgZ(28,"div",7),f._uU(29,"Women"),f.qZA()(),f.TgZ(30,"div",14)(31,"div")(32,"h3",16),f._uU(33),f.qZA()(),f.TgZ(34,"div",7),f._uU(35,"Men"),f.qZA()()()(),f.TgZ(36,"div",17),f._UZ(37,"br")(38,"br"),f.TgZ(39,"div",18),f._UZ(40,"div",19)(41,"div",20),f.qZA()()()()(),f.TgZ(42,"div",21)(43,"div",3)(44,"div",22)(45,"div",23)(46,"div",6)(47,"h6",7),f._uU(48,"Donors By Blood Types"),f.qZA()()()(),f.TgZ(49,"div",24)(50,"div",25)(51,"canvas",26),f._uU(52),f.qZA()()()()()()()),2&e&&(f.xp6(17),f.Oqu(t.donors.length),f.xp6(10),f.Oqu(t.WomenDonors.length),f.xp6(6),f.Oqu(t.MenDonors.length),f.xp6(7),f.Udp("width",t.WPP,"%"),f.xp6(1),f.Udp("width",t.MPP,"%"),f.xp6(11),f.Oqu(t.chart))}});class QE{constructor(e){this.authService=e}ngOnInit(){}}QE.\u0275fac=function(e){return new(e||QE)(f.Y36(Nl))},QE.\u0275cmp=f.Xpm({type:QE,selectors:[["app-verify-email"]],decls:5,vars:1,consts:[[1,"nk-block","nk-block-middle","mt-5","nk-auth-body"],[1,"nk-block-head-content"],[1,"nk-block-title","text-success"],["class","nk-block-des text-success",4,"ngIf"],[1,"nk-block-des","text-success"],["type","button",1,"btn","btn-primary",3,"click"],["routerLink","/sign-in"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),f._uU(3,"Thank You for Registering"),f.qZA(),f.YNc(4,mY,16,1,"div",3),f.qZA()()),2&e&&(f.xp6(4),f.Q6J("ngIf",t.authService.userData))},dependencies:[Si,C]});class uv{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}uv.\u0275fac=function(e){return new(e||uv)(f.LFG(Nl),f.LFG(m))},uv.\u0275prov=f.Yz7({token:uv,factory:uv.\u0275fac,providedIn:"root"});const _Y=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:CE},{path:"register-user",component:IE},{path:"forgot-password",component:EE},{path:"verify-email-address",component:QE},{path:"dashboard",component:vE,canActivate:[uv],children:[{path:"statistics",component:YE},{path:"donors",component:bE},{path:"add",component:fb}]}];class dv{}dv.\u0275fac=function(e){return new(e||dv)},dv.\u0275mod=f.oAB({type:dv}),dv.\u0275inj=f.cJS({imports:[cF.forRoot(_Y),cF]});class XE{constructor(){this.title="blood-donation"}}XE.\u0275fac=function(e){return new(e||XE)},XE.\u0275cmp=f.Xpm({type:XE,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&f._UZ(0,"router-outlet")},dependencies:[ag]});const C3="firebasestorage.googleapis.com",I3="storageBucket";class hi extends j.ZR{constructor(e,t,r=0){super(LN(e),`Firebase Storage: ${t} (${LN(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return LN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function LN(n){return"storage/"+n}function FN(){return new hi("unknown","An unknown error occurred, please check the error payload for server response.")}function D3(){return new hi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function T3(){return new hi("canceled","User canceled the upload/download.")}function S3(){return new hi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function hv(n){return new hi("invalid-argument",n)}function x3(){return new hi("app-deleted","The Firebase app was deleted.")}function A3(n){return new hi("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function JE(n,e){return new hi("invalid-format","String does not match format '"+n+"': "+e)}function eC(n){throw new hi("internal-error","Internal error: "+n)}class mo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=mo.makeFromUrl(e,t)}catch{return new mo(e,"")}if(""===r.path)return r;throw function xY(n){return new hi("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",u=new RegExp("^gs://"+i+"(/(.*))?$","i");function g(Ie){Ie.path_=decodeURIComponent(Ie.path)}const b=t.replace(/[.]/g,"\\."),ve=[{regex:u,indices:{bucket:1,path:3},postModify:function s(Ie){"/"===Ie.path.charAt(Ie.path.length-1)&&(Ie.path_=Ie.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${b}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:g},{regex:new RegExp(`^https?://${t===C3?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:g}];for(let Ie=0;Ie<ve.length;Ie++){const Ce=ve[Ie],Ve=Ce.regex.exec(e);if(Ve){let gt=Ve[Ce.indices.path];gt||(gt=""),r=new mo(Ve[Ce.indices.bucket],gt),Ce.postModify(r);break}}if(null==r)throw function SY(n){return new hi("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class PY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function iA(n){return"string"==typeof n||n instanceof String}function M3(n){return VN()&&n instanceof Blob}function VN(){return typeof Blob<"u"&&!(0,j.UG)()}function UN(n,e,t,r){if(r<e)throw hv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw hv(`Invalid value for '${n}'. Expected ${t} or less.`)}function oh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function k3(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Uf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Uf||(Uf={})),Uf))();function R3(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class UY{constructor(e,t,r,i,s,o,u,h,g,y,b,T=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=h,this.timeout_=g,this.progressCallback_=y,this.connectionFactory_=b,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,P)=>{this.resolve_=k,this.reject_=P,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());!function LY(n){return void 0!==n}(h)?s():s(h)}catch(h){o(h)}else if(null!==u){const h=FN();h.serverResponse=u.getErrorText(),o(this.errorCallback_?this.errorCallback_(u,h):h)}else o(i.canceled?this.appDelete_?x3():T3():D3())};this.canceled_?t(0,new sA(!1,null,!0)):this.backoffId_=function OY(n,e,t){let r=1,i=null,s=null,o=!1,u=0;function h(){return 2===u}let g=!1;function y(...H){g||(g=!0,e.apply(null,H))}function b(H){i=setTimeout(()=>{i=null,n(k,h())},H)}function T(){s&&clearTimeout(s)}function k(H,...ne){if(g)return void T();if(H)return T(),void y.call(null,H,...ne);if(h()||o)return T(),void y.call(null,H,...ne);let ve;r<64&&(r*=2),1===u?(u=2,ve=0):ve=1e3*(r+Math.random()),b(ve)}let P=!1;function B(H){P||(P=!0,T(),!g&&(null!==i?(H||(u=2),clearTimeout(i),b(0)):H||(u=1)))}return b(0),s=setTimeout(()=>{o=!0,B(!0)},t),B}((r,i)=>{if(i)return void r(!1,new sA(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=u=>{null!==this.progressCallback_&&this.progressCallback_(u.loaded,u.lengthComputable?u.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const u=s.getErrorCode()===Uf.NO_ERROR,h=s.getStatus();if(!u||R3(h,this.additionalRetryCodes_)&&this.retry){const y=s.getErrorCode()===Uf.ABORT;return void r(!1,new sA(!1,null,y))}const g=-1!==this.successCodes_.indexOf(h);r(!0,new sA(g,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function NY(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class sA{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function GY(...n){const e=function WY(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(VN())return new Blob(n);throw new hi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Qa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class BN{constructor(e,t){this.data=e,this.contentType=t||null}}function jN(n,e){switch(n){case Qa.RAW:return new BN(P3(e));case Qa.BASE64:case Qa.BASE64URL:return new BN(O3(n,e));case Qa.DATA_URL:return new BN(function YY(n){const e=new N3(n);return e.base64?O3(Qa.BASE64,e.rest):function KY(n){let e;try{e=decodeURIComponent(n)}catch{throw JE(Qa.DATA_URL,"Malformed data URL.")}return P3(e)}(e.rest)}(e),function QY(n){return new N3(n).contentType}(e))}throw FN()}function P3(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function O3(n,e){switch(n){case Qa.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw JE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Qa.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw JE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function ZY(n){if(typeof atob>"u")throw function RY(n){return new hi("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:JE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class N3{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw JE(Qa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function XY(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Nu{constructor(e,t){let r=0,i="";M3(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(M3(this.data_)){const i=function qY(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Nu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Nu(r,!0)}}static getBlob(...e){if(VN()){const t=e.map(r=>r instanceof Nu?r.data_:r);return new Nu(GY.apply(null,t))}{const t=e.map(o=>iA(o)?jN(Qa.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let u=0;u<o.length;u++)i[s++]=o[u]}),new Nu(i,!0)}}uploadData(){return this.data_}}function HN(n){let e;try{e=JSON.parse(n)}catch{return null}return function VY(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function L3(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function tQ(n,e){return e}class zo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||tQ}}let oA=null;function tC(){if(oA)return oA;const n=[];n.push(new zo("bucket")),n.push(new zo("generation")),n.push(new zo("metageneration")),n.push(new zo("name","fullPath",!0));const t=new zo("name");t.xform=function e(s,o){return function nQ(n){return!iA(n)||n.length<2?n:L3(n)}(o)},n.push(t);const i=new zo("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new zo("timeCreated")),n.push(new zo("updated")),n.push(new zo("md5Hash",null,!0)),n.push(new zo("cacheControl",null,!0)),n.push(new zo("contentDisposition",null,!0)),n.push(new zo("contentEncoding",null,!0)),n.push(new zo("contentLanguage",null,!0)),n.push(new zo("contentType",null,!0)),n.push(new zo("metadata","customMetadata",!0)),oA=n,oA}function F3(n,e,t){const r=HN(e);return null===r?null:function iQ(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function rQ(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new mo(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function $N(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const V3="prefixes";class Lu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Fu(n){if(!n)throw FN()}function aA(n,e){return function t(r,i){const s=F3(n,i,e);return Fu(null!==s),s}}function fv(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function DY(){return new hi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function IY(){return new hi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function CY(n){return new hi("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function TY(n){return new hi("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function nC(n){const e=fv(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function EY(n){return new hi("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function B3(n,e,t){const i=oh(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,u=new Lu(i,"GET",aA(n,t),o);return u.errorHandler=nC(e),u}function uQ(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const u=oh(e.bucketOnlyServerUrl(),n.host,n._protocol),g=n.maxOperationRetryTime,y=new Lu(u,"GET",function lQ(n,e){return function t(r,i){const s=function aQ(n,e,t){const r=HN(t);return null===r?null:function oQ(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[V3])for(const i of t[V3]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new mo(e,s));r.prefixes.push(o)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new mo(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Fu(null!==s),s}}(n,e.bucket),g);return y.urlParams=s,y.errorHandler=fv(e),y}function H3(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function pQ(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class lA{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function zN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Fu(!1)}return Fu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const yQ={STATE_CHANGED:"state_changed"},Wo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function WN(n){switch(n){case"running":case"pausing":case"canceling":return Wo.RUNNING;case"paused":return Wo.PAUSED;case"success":return Wo.SUCCESS;case"canceled":return Wo.CANCELED;default:return Wo.ERROR}}class vQ{constructor(e,t,r){if(function FY(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function pv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class wQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Uf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Uf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Uf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw eC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw eC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class bQ extends wQ{initXhr(){this.xhr_.responseType="text"}}function Pc(){return new bQ}class G3{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=tC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(R3(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=D3()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function gQ(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=H3(e,r,i),u={name:o.fullPath},h=oh(s,n.host,n._protocol),y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},b=$N(o,t),P=new Lu(h,"POST",function k(B){let H;zN(B);try{H=B.getResponseHeader("X-Goog-Upload-URL")}catch{Fu(!1)}return Fu(iA(H)),H},n.maxUploadRetryTime);return P.urlParams=u,P.headers=y,P.body=b,P.errorHandler=fv(e),P}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function mQ(n,e,t,r){const h=new Lu(t,"POST",function s(g){const y=zN(g,["active","final"]);let b=null;try{b=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Fu(!1)}b||Fu(!1);const T=Number(b);return Fu(!isNaN(T)),new lA(T,r.size(),"final"===y)},n.maxUploadRetryTime);return h.headers={"X-Goog-Upload-Command":"query"},h.errorHandler=fv(e),h}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Pc,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new lA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function _Q(n,e,t,r,i,s,o,u){const h=new lA(0,0);if(o?(h.current=o.current,h.total=o.total):(h.current=0,h.total=r.size()),r.size()!==h.total)throw function MY(){return new hi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const g=h.total-h.current;let y=g;i>0&&(y=Math.min(y,i));const b=h.current;let k="";k=0===y?"finalize":g===y?"upload, finalize":"upload";const P={"X-Goog-Upload-Command":k,"X-Goog-Upload-Offset":`${h.current}`},B=r.slice(b,b+y);if(null===B)throw S3();const ve=new Lu(t,"POST",function H(Ie,Ce){const Ve=zN(Ie,["active","final"]),rt=h.current+y,gt=r.size();let Jt;return Jt="final"===Ve?aA(e,s)(Ie,Ce):null,new lA(rt,gt,"final"===Ve,Jt)},e.maxUploadRetryTime);return ve.headers=P,ve.body=B.uploadData(),ve.progressCallback=u||null,ve.errorHandler=fv(n),ve}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(h){return this._error=h,void this._transition("error")}const u=this._ref.storage._makeRequest(o,Pc,i,s,!1);this._request=u,u.getPromise().then(h=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(h.current),h.finalized?(this._metadata=h.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=B3(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Pc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function $3(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},h=function u(){let ve="";for(let Ie=0;Ie<2;Ie++)ve+=Math.random().toString().slice(2);return ve}();o["Content-Type"]="multipart/related; boundary="+h;const g=H3(e,r,i),y=$N(g,t),k=Nu.getBlob("--"+h+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+y+"\r\n--"+h+"\r\nContent-Type: "+g.contentType+"\r\n\r\n",r,"\r\n--"+h+"--");if(null===k)throw S3();const P={name:g.fullPath},B=oh(s,n.host,n._protocol),ne=n.maxUploadRetryTime,ce=new Lu(B,"POST",aA(n,t),ne);return ce.urlParams=P,ce.headers=o,ce.body=k.uploadData(),ce.errorHandler=fv(e),ce}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=T3(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=WN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new vQ(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(WN(this._state)){case Wo.SUCCESS:pv(this._resolve.bind(null,this.snapshot))();break;case Wo.CANCELED:case Wo.ERROR:pv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(WN(this._state)){case Wo.RUNNING:case Wo.PAUSED:e.next&&pv(e.next.bind(e,this.snapshot))();break;case Wo.SUCCESS:e.complete&&pv(e.complete.bind(e))();break;default:e.error&&pv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class im{constructor(e,t){this._service=e,this._location=t instanceof mo?t:mo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new im(e,t)}get root(){const e=new mo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return L3(this._location.path)}get storage(){return this._service}get parent(){const e=function JY(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new mo(this._location.bucket,e);return new im(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw A3(e)}}function Z3(n,e,t){return GN.apply(this,arguments)}function GN(){return GN=(0,he.Z)(function*(n,e,t){const i=yield K3(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Z3(n,e,i.nextPageToken))}),GN.apply(this,arguments)}function K3(n,e){null!=e&&"number"==typeof e.maxResults&&UN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=uQ(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Pc)}function PQ(n){n._throwIfRoot("getDownloadURL");const e=function dQ(n,e,t){const i=oh(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,u=new Lu(i,"GET",function cQ(n,e){return function t(r,i){const s=F3(n,i,e);return Fu(null!==s),function sQ(n,e,t,r){const i=HN(e);if(null===i||!iA(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(g=>{const b=n.fullPath;return oh("/b/"+o(n.bucket)+"/o/"+o(b),t,r)+k3({alt:"media",token:g})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return u.errorHandler=nC(e),u}(n.storage,n._location,tC());return n.storage.makeRequestWithTokens(e,Pc).then(t=>{if(null===t)throw function kY(){return new hi("no-download-url","The given file does not have any download URLs.")}();return t})}function Y3(n,e){const t=function eQ(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new mo(n._location.bucket,t);return new im(n.storage,r)}function Q3(n,e){if(n instanceof qN){const t=n;if(null==t._bucket)throw function AY(){return new hi("no-default-bucket","No default bucket found. Did you set the '"+I3+"' property when initializing the app?")}();const r=new im(t,t._bucket);return null!=e?Q3(r,e):r}return void 0!==e?Y3(n,e):n}function FQ(n,e){if(e&&function NQ(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof qN)return function LQ(n,e){return new im(n,e)}(n,e);throw hv("To use ref(service, url), the first argument must be a Storage instance.")}return Q3(n,e)}function X3(n,e){const t=e?.[I3];return null==t?null:mo.makeFromBucketSpec(t,n)}class qN{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=C3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?mo.makeFromBucketSpec(i,this._host):X3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?mo.makeFromBucketSpec(this._url,e):X3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){UN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){UN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,he.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,he.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new im(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new PY(x3());{const o=function zY(n,e,t,r,i,s,o=!0){const u=k3(n.urlParams),h=n.url+u,g=Object.assign({},n.headers);return function HY(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function BY(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function jY(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(g,s),function $Y(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new UY(h,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,he.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const J3="@firebase/storage";function nz(n,e){return FQ(n=(0,j.m9)(n),e)}function qQ(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new qN(t,r,i,e,tr.SDK_VERSION)}!function ZQ(){(0,tr._registerComponent)(new qt.wA("storage",qQ,"PUBLIC").setMultipleInstances(!0)),(0,tr.registerVersion)(J3,"0.10.1",""),(0,tr.registerVersion)(J3,"0.10.1","esm2017")}();class cA{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class iz{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new cA(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new cA(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new cA(o,this,this._ref)):{next:t.next?o=>t.next(new cA(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class sz{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ah(e,this._service))}get items(){return this._delegate.items.map(e=>new ah(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ah{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function GQ(n,e){return Y3(n,e)}(this._delegate,e);return new ah(t,this.storage)}get root(){return new ah(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ah(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new iz(function UQ(n,e,t){return function xQ(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new G3(n,new Nu(e),t)}(n=(0,j.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Qa.RAW,r){this._throwIfRoot("putString");const i=jN(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new iz(new G3(this._delegate,new Nu(i.data,!0),s),this)}listAll(){return function $Q(n){return function MQ(n){const e={prefixes:[],items:[]};return Z3(n,e).then(()=>e)}(n=(0,j.m9)(n))}(this._delegate).then(e=>new sz(e,this.storage))}list(e){return function HQ(n,e){return K3(n=(0,j.m9)(n),e)}(this._delegate,e||void 0).then(t=>new sz(t,this.storage))}getMetadata(){return function BQ(n){return function kQ(n){n._throwIfRoot("getMetadata");const e=B3(n.storage,n._location,tC());return n.storage.makeRequestWithTokens(e,Pc)}(n=(0,j.m9)(n))}(this._delegate)}updateMetadata(e){return function jQ(n,e){return function RQ(n,e){n._throwIfRoot("updateMetadata");const t=function hQ(n,e,t,r){const s=oh(e.fullServerUrl(),n.host,n._protocol),u=$N(t,r),g=n.maxOperationRetryTime,y=new Lu(s,"PATCH",aA(n,r),g);return y.headers={"Content-Type":"application/json; charset=utf-8"},y.body=u,y.errorHandler=nC(e),y}(n.storage,n._location,e,tC());return n.storage.makeRequestWithTokens(t,Pc)}(n=(0,j.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function zQ(n){return PQ(n=(0,j.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function WQ(n){return function OQ(n){n._throwIfRoot("deleteObject");const e=function fQ(n,e){const r=oh(e.fullServerUrl(),n.host,n._protocol),u=new Lu(r,"DELETE",function o(h,g){},n.maxOperationRetryTime);return u.successCodes=[200,204],u.errorHandler=nC(e),u}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Pc)}(n=(0,j.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw A3(e)}}class oz{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(az(e))throw hv("ref() expected a child path but got a URL, use refFromURL instead.");return new ah(nz(this._delegate,e),this)}refFromURL(e){if(!az(e))throw hv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{mo.makeFromUrl(e,this._delegate.host)}catch{throw hv("refFromUrl() expected a valid full URL but got an invalid one.")}return new ah(nz(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function rz(n,e,t,r={}){!function VQ(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,j.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function az(n){return/^[A-Za-z]+:\/\//.test(n)}function XQ(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new oz(t,r)}function lz(n){const e=function eX(n){return new js.y(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(function yY(n,e=di.z){return(0,yr.e)((t,r)=>{let i=null,s=null,o=null;const u=()=>{if(i){i.unsubscribe(),i=null;const g=s;s=null,r.next(g)}};function h(){const g=o+n,y=e.now();if(y<g)return i=this.schedule(void 0,g-y),void r.add(i);u()}t.subscribe((0,ur.x)(r,g=>{s=g,o=e.now(),i||(i=e.schedule(h,n),r.add(i))},()=>{u(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,xt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function uA(n){return{getDownloadURL:()=>Et(void 0).pipe(nt.fc,dr(()=>n.getDownloadURL()),nt.iC),getMetadata:()=>Et(void 0).pipe(nt.fc,dr(()=>n.getMetadata()),nt.iC),delete:()=>(0,Un.D)(n.delete()),child:e=>uA(n.child(e)),updateMetadata:e=>(0,Un.D)(n.updateMetadata(e)),put:(e,t)=>lz(n.put(e,t)),putString:(e,t,r)=>lz(n.putString(e,t,r)),list:e=>(0,Un.D)(n.list(e)),listAll:()=>(0,Un.D)(n.listAll())}}!function JQ(n){const e={TaskState:Wo,TaskEvent:yQ,StringFormat:Qa,Storage:oz,Reference:ah};n.INTERNAL.registerComponent(new qt.wA("storage-compat",XQ,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.1")}(Ot.Z);const tX=new f.OlP("angularfire2.storageBucket"),nX=new f.OlP("angularfire2.storage.maxUploadRetryTime"),rX=new f.OlP("angularfire2.storage.maxOperationRetryTime"),iX=new f.OlP("angularfire2.storage.use-emulator");let sX=(()=>{class n{constructor(t,r,i,s,o,u,h,g,y,b){const T=(0,Dr.on)(t,o,r);this.storage=(0,Dr.cc)(`${T.name}.storage.${i}`,"AngularFireStorage",T.name,()=>{const k=o.runOutsideAngular(()=>T.storage(i||void 0)),P=y;return P&&k.useEmulator(...P),h&&k.setMaxUploadRetryTime(h),g&&k.setMaxOperationRetryTime(g),k},[h,g])}ref(t){return uA(this.storage.ref(t))}refFromURL(t){return uA(this.storage.refFromURL(t))}upload(t,r,i){return uA(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Dr.Dh),f.LFG(Dr.xv,8),f.LFG(tX,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(nt.HU),f.LFG(nX,8),f.LFG(rX,8),f.LFG(iX,8),f.LFG(Ic,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),oX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),aX=(()=>{class n{constructor(){q_.Z.registerVersion("angularfire",nt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[sX],imports:[oX]}),n})();class gv{}gv.\u0275fac=function(e){return new(e||gv)},gv.\u0275mod=f.oAB({type:gv,bootstrap:[XE]}),gv.\u0275inj=f.cJS({providers:[Nl],imports:[Dr.hO.initializeApp({apiKey:"AIzaSyBHtudD73PLqhHTMf8aJ4WWoIC1TUnp3lE",authDomain:"bl00d-donation-center.firebaseapp.com",projectId:"bl00d-donation-center",storageBucket:"bl00d-donation-center.appspot.com",messagingSenderId:"452354443776",appId:"1:452354443776:web:174c61766cae8749a966e5"}),sm,dv,DD,b5,gD,aX,n8,E5]}),oa().bootstrapModule(gv).catch(n=>console.error(n))},9751:(Tt,Ue,W)=>{"use strict";W.d(Ue,{y:()=>Se});var f=W(930),G=W(727),V=W(8822),pe=W(9635),ye=W(2416),Te=W(576),Ne=W(2806);let Se=(()=>{class ae{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const ct=new ae;return ct.source=this,ct.operator=qe,ct}subscribe(qe,ct,bt){const ke=function ee(ae){return ae&&ae instanceof f.Lv||function J(ae){return ae&&(0,Te.m)(ae.next)&&(0,Te.m)(ae.error)&&(0,Te.m)(ae.complete)}(ae)&&(0,G.Nn)(ae)}(qe)?qe:new f.Hp(qe,ct,bt);return(0,Ne.x)(()=>{const{operator:Be,source:je}=this;ke.add(Be?Be.call(ke,je):je?this._subscribe(ke):this._trySubscribe(ke))}),ke}_trySubscribe(qe){try{return this._subscribe(qe)}catch(ct){qe.error(ct)}}forEach(qe,ct){return new(ct=Re(ct))((bt,ke)=>{const Be=new f.Hp({next:je=>{try{qe(je)}catch(Ze){ke(Ze),Be.unsubscribe()}},error:ke,complete:bt});this.subscribe(Be)})}_subscribe(qe){var ct;return null===(ct=this.source)||void 0===ct?void 0:ct.subscribe(qe)}[V.L](){return this}pipe(...qe){return(0,pe.U)(qe)(this)}toPromise(qe){return new(qe=Re(qe))((ct,bt)=>{let ke;this.subscribe(Be=>ke=Be,Be=>bt(Be),()=>ct(ke))})}}return ae.create=it=>new ae(it),ae})();function Re(ae){var it;return null!==(it=ae??ye.v.Promise)&&void 0!==it?it:Promise}},7579:(Tt,Ue,W)=>{"use strict";W.d(Ue,{x:()=>Ne});var f=W(9751),G=W(727);const pe=(0,W(3888).d)(Re=>function(){Re(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ye=W(8737),Te=W(2806);let Ne=(()=>{class Re extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ee){const ae=new Se(this,this);return ae.operator=ee,ae}_throwIfClosed(){if(this.closed)throw new pe}next(ee){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ae of this.currentObservers)ae.next(ee)}})}error(ee){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ee;const{observers:ae}=this;for(;ae.length;)ae.shift().error(ee)}})}complete(){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ee}=this;for(;ee.length;)ee.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ee;return(null===(ee=this.observers)||void 0===ee?void 0:ee.length)>0}_trySubscribe(ee){return this._throwIfClosed(),super._trySubscribe(ee)}_subscribe(ee){return this._throwIfClosed(),this._checkFinalizedStatuses(ee),this._innerSubscribe(ee)}_innerSubscribe(ee){const{hasError:ae,isStopped:it,observers:qe}=this;return ae||it?G.Lc:(this.currentObservers=null,qe.push(ee),new G.w0(()=>{this.currentObservers=null,(0,ye.P)(qe,ee)}))}_checkFinalizedStatuses(ee){const{hasError:ae,thrownError:it,isStopped:qe}=this;ae?ee.error(it):qe&&ee.complete()}asObservable(){const ee=new f.y;return ee.source=this,ee}}return Re.create=(J,ee)=>new Se(J,ee),Re})();class Se extends Ne{constructor(J,ee){super(),this.destination=J,this.source=ee}next(J){var ee,ae;null===(ae=null===(ee=this.destination)||void 0===ee?void 0:ee.next)||void 0===ae||ae.call(ee,J)}error(J){var ee,ae;null===(ae=null===(ee=this.destination)||void 0===ee?void 0:ee.error)||void 0===ae||ae.call(ee,J)}complete(){var J,ee;null===(ee=null===(J=this.destination)||void 0===J?void 0:J.complete)||void 0===ee||ee.call(J)}_subscribe(J){var ee,ae;return null!==(ae=null===(ee=this.source)||void 0===ee?void 0:ee.subscribe(J))&&void 0!==ae?ae:G.Lc}}},930:(Tt,Ue,W)=>{"use strict";W.d(Ue,{Hp:()=>bt,Lv:()=>ae});var f=W(576),G=W(727),V=W(2416),pe=W(7849),ye=W(5032);const Te=Re("C",void 0,void 0);function Re(Ye,$e,ze){return{kind:Ye,value:$e,error:ze}}var J=W(3410),ee=W(2806);class ae extends G.w0{constructor($e){super(),this.isStopped=!1,$e?(this.destination=$e,(0,G.Nn)($e)&&$e.add(this)):this.destination=Ze}static create($e,ze,st){return new bt($e,ze,st)}next($e){this.isStopped?je(function Se(Ye){return Re("N",Ye,void 0)}($e),this):this._next($e)}error($e){this.isStopped?je(function Ne(Ye){return Re("E",void 0,Ye)}($e),this):(this.isStopped=!0,this._error($e))}complete(){this.isStopped?je(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next($e){this.destination.next($e)}_error($e){try{this.destination.error($e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const it=Function.prototype.bind;function qe(Ye,$e){return it.call(Ye,$e)}class ct{constructor($e){this.partialObserver=$e}next($e){const{partialObserver:ze}=this;if(ze.next)try{ze.next($e)}catch(st){ke(st)}}error($e){const{partialObserver:ze}=this;if(ze.error)try{ze.error($e)}catch(st){ke(st)}else ke($e)}complete(){const{partialObserver:$e}=this;if($e.complete)try{$e.complete()}catch(ze){ke(ze)}}}class bt extends ae{constructor($e,ze,st){let z;if(super(),(0,f.m)($e)||!$e)z={next:$e??void 0,error:ze??void 0,complete:st??void 0};else{let Ee;this&&V.v.useDeprecatedNextContext?(Ee=Object.create($e),Ee.unsubscribe=()=>this.unsubscribe(),z={next:$e.next&&qe($e.next,Ee),error:$e.error&&qe($e.error,Ee),complete:$e.complete&&qe($e.complete,Ee)}):z=$e}this.destination=new ct(z)}}function ke(Ye){V.v.useDeprecatedSynchronousErrorHandling?(0,ee.O)(Ye):(0,pe.h)(Ye)}function je(Ye,$e){const{onStoppedNotification:ze}=V.v;ze&&J.z.setTimeout(()=>ze(Ye,$e))}const Ze={closed:!0,next:ye.Z,error:function Be(Ye){throw Ye},complete:ye.Z}},727:(Tt,Ue,W)=>{"use strict";W.d(Ue,{Lc:()=>Te,w0:()=>ye,Nn:()=>Ne});var f=W(576);const V=(0,W(3888).d)(Re=>function(ee){Re(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((ae,it)=>`${it+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee});var pe=W(8737);class ye{constructor(J){this.initialTeardown=J,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let J;if(!this.closed){this.closed=!0;const{_parentage:ee}=this;if(ee)if(this._parentage=null,Array.isArray(ee))for(const qe of ee)qe.remove(this);else ee.remove(this);const{initialTeardown:ae}=this;if((0,f.m)(ae))try{ae()}catch(qe){J=qe instanceof V?qe.errors:[qe]}const{_finalizers:it}=this;if(it){this._finalizers=null;for(const qe of it)try{Se(qe)}catch(ct){J=J??[],ct instanceof V?J=[...J,...ct.errors]:J.push(ct)}}if(J)throw new V(J)}}add(J){var ee;if(J&&J!==this)if(this.closed)Se(J);else{if(J instanceof ye){if(J.closed||J._hasParent(this))return;J._addParent(this)}(this._finalizers=null!==(ee=this._finalizers)&&void 0!==ee?ee:[]).push(J)}}_hasParent(J){const{_parentage:ee}=this;return ee===J||Array.isArray(ee)&&ee.includes(J)}_addParent(J){const{_parentage:ee}=this;this._parentage=Array.isArray(ee)?(ee.push(J),ee):ee?[ee,J]:J}_removeParent(J){const{_parentage:ee}=this;ee===J?this._parentage=null:Array.isArray(ee)&&(0,pe.P)(ee,J)}remove(J){const{_finalizers:ee}=this;ee&&(0,pe.P)(ee,J),J instanceof ye&&J._removeParent(this)}}ye.EMPTY=(()=>{const Re=new ye;return Re.closed=!0,Re})();const Te=ye.EMPTY;function Ne(Re){return Re instanceof ye||Re&&"closed"in Re&&(0,f.m)(Re.remove)&&(0,f.m)(Re.add)&&(0,f.m)(Re.unsubscribe)}function Se(Re){(0,f.m)(Re)?Re():Re.unsubscribe()}},2416:(Tt,Ue,W)=>{"use strict";W.d(Ue,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Tt,Ue,W)=>{"use strict";W.d(Ue,{E:()=>G});const G=new(W(9751).y)(ye=>ye.complete())},8996:(Tt,Ue,W)=>{"use strict";W.d(Ue,{D:()=>$e});var f=W(8421),G=W(5363),V=W(9468),Te=W(9751),Se=W(2202),Re=W(576),J=W(9672);function ae(ze,st){if(!ze)throw new Error("Iterable cannot be null");return new Te.y(z=>{(0,J.f)(z,st,()=>{const Ee=ze[Symbol.asyncIterator]();(0,J.f)(z,st,()=>{Ee.next().then(Me=>{Me.done?z.complete():z.next(Me.value)})},0,!0)})})}var it=W(3670),qe=W(8239),ct=W(1144),bt=W(6495),ke=W(2206),Be=W(4532),je=W(3260);function $e(ze,st){return st?function Ye(ze,st){if(null!=ze){if((0,it.c)(ze))return function pe(ze,st){return(0,f.Xf)(ze).pipe((0,V.R)(st),(0,G.Q)(st))}(ze,st);if((0,ct.z)(ze))return function Ne(ze,st){return new Te.y(z=>{let Ee=0;return st.schedule(function(){Ee===ze.length?z.complete():(z.next(ze[Ee++]),z.closed||this.schedule())})})}(ze,st);if((0,qe.t)(ze))return function ye(ze,st){return(0,f.Xf)(ze).pipe((0,V.R)(st),(0,G.Q)(st))}(ze,st);if((0,ke.D)(ze))return ae(ze,st);if((0,bt.T)(ze))return function ee(ze,st){return new Te.y(z=>{let Ee;return(0,J.f)(z,st,()=>{Ee=ze[Se.h](),(0,J.f)(z,st,()=>{let Me,oe;try{({value:Me,done:oe}=Ee.next())}catch(re){return void z.error(re)}oe?z.complete():z.next(Me)},0,!0)}),()=>(0,Re.m)(Ee?.return)&&Ee.return()})}(ze,st);if((0,je.L)(ze))return function Ze(ze,st){return ae((0,je.Q)(ze),st)}(ze,st)}throw(0,Be.z)(ze)}(ze,st):(0,f.Xf)(ze)}},8421:(Tt,Ue,W)=>{"use strict";W.d(Ue,{Xf:()=>it});var f=W(655),G=W(1144),V=W(8239),pe=W(9751),ye=W(3670),Te=W(2206),Ne=W(4532),Se=W(6495),Re=W(3260),J=W(576),ee=W(7849),ae=W(8822);function it(Ye){if(Ye instanceof pe.y)return Ye;if(null!=Ye){if((0,ye.c)(Ye))return function qe(Ye){return new pe.y($e=>{const ze=Ye[ae.L]();if((0,J.m)(ze.subscribe))return ze.subscribe($e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ye);if((0,G.z)(Ye))return function ct(Ye){return new pe.y($e=>{for(let ze=0;ze<Ye.length&&!$e.closed;ze++)$e.next(Ye[ze]);$e.complete()})}(Ye);if((0,V.t)(Ye))return function bt(Ye){return new pe.y($e=>{Ye.then(ze=>{$e.closed||($e.next(ze),$e.complete())},ze=>$e.error(ze)).then(null,ee.h)})}(Ye);if((0,Te.D)(Ye))return Be(Ye);if((0,Se.T)(Ye))return function ke(Ye){return new pe.y($e=>{for(const ze of Ye)if($e.next(ze),$e.closed)return;$e.complete()})}(Ye);if((0,Re.L)(Ye))return function je(Ye){return Be((0,Re.Q)(Ye))}(Ye)}throw(0,Ne.z)(Ye)}function Be(Ye){return new pe.y($e=>{(function Ze(Ye,$e){var ze,st,z,Ee;return(0,f.mG)(this,void 0,void 0,function*(){try{for(ze=(0,f.KL)(Ye);!(st=yield ze.next()).done;)if($e.next(st.value),$e.closed)return}catch(Me){z={error:Me}}finally{try{st&&!st.done&&(Ee=ze.return)&&(yield Ee.call(ze))}finally{if(z)throw z.error}}$e.complete()})})(Ye,$e).catch(ze=>$e.error(ze))})}},6451:(Tt,Ue,W)=>{"use strict";W.d(Ue,{T:()=>Te});var f=W(8189),G=W(8421),V=W(515),pe=W(7669),ye=W(8996);function Te(...Ne){const Se=(0,pe.yG)(Ne),Re=(0,pe._6)(Ne,1/0),J=Ne;return J.length?1===J.length?(0,G.Xf)(J[0]):(0,f.J)(Re)((0,ye.D)(J,Se)):V.E}},5403:(Tt,Ue,W)=>{"use strict";W.d(Ue,{x:()=>G});var f=W(930);function G(pe,ye,Te,Ne,Se){return new V(pe,ye,Te,Ne,Se)}class V extends f.Lv{constructor(ye,Te,Ne,Se,Re,J){super(ye),this.onFinalize=Re,this.shouldUnsubscribe=J,this._next=Te?function(ee){try{Te(ee)}catch(ae){ye.error(ae)}}:super._next,this._error=Se?function(ee){try{Se(ee)}catch(ae){ye.error(ae)}finally{this.unsubscribe()}}:super._error,this._complete=Ne?function(){try{Ne()}catch(ee){ye.error(ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ye;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(ye=this.onFinalize)||void 0===ye||ye.call(this))}}}},4004:(Tt,Ue,W)=>{"use strict";W.d(Ue,{U:()=>V});var f=W(4482),G=W(5403);function V(pe,ye){return(0,f.e)((Te,Ne)=>{let Se=0;Te.subscribe((0,G.x)(Ne,Re=>{Ne.next(pe.call(ye,Re,Se++))}))})}},8189:(Tt,Ue,W)=>{"use strict";W.d(Ue,{J:()=>V});var f=W(5577),G=W(4671);function V(pe=1/0){return(0,f.z)(G.y,pe)}},5577:(Tt,Ue,W)=>{"use strict";W.d(Ue,{z:()=>Se});var f=W(4004),G=W(8421),V=W(4482),pe=W(9672),ye=W(5403),Ne=W(576);function Se(Re,J,ee=1/0){return(0,Ne.m)(J)?Se((ae,it)=>(0,f.U)((qe,ct)=>J(ae,qe,it,ct))((0,G.Xf)(Re(ae,it))),ee):("number"==typeof J&&(ee=J),(0,V.e)((ae,it)=>function Te(Re,J,ee,ae,it,qe,ct,bt){const ke=[];let Be=0,je=0,Ze=!1;const Ye=()=>{Ze&&!ke.length&&!Be&&J.complete()},$e=st=>Be<ae?ze(st):ke.push(st),ze=st=>{qe&&J.next(st),Be++;let z=!1;(0,G.Xf)(ee(st,je++)).subscribe((0,ye.x)(J,Ee=>{it?.(Ee),qe?$e(Ee):J.next(Ee)},()=>{z=!0},void 0,()=>{if(z)try{for(Be--;ke.length&&Be<ae;){const Ee=ke.shift();ct?(0,pe.f)(J,ct,()=>ze(Ee)):ze(Ee)}Ye()}catch(Ee){J.error(Ee)}}))};return Re.subscribe((0,ye.x)(J,$e,()=>{Ze=!0,Ye()})),()=>{bt?.()}}(ae,it,Re,ee)))}},5363:(Tt,Ue,W)=>{"use strict";W.d(Ue,{Q:()=>pe});var f=W(9672),G=W(4482),V=W(5403);function pe(ye,Te=0){return(0,G.e)((Ne,Se)=>{Ne.subscribe((0,V.x)(Se,Re=>(0,f.f)(Se,ye,()=>Se.next(Re),Te),()=>(0,f.f)(Se,ye,()=>Se.complete(),Te),Re=>(0,f.f)(Se,ye,()=>Se.error(Re),Te)))})}},3099:(Tt,Ue,W)=>{"use strict";W.d(Ue,{B:()=>ye});var f=W(8421),G=W(7579),V=W(930),pe=W(4482);function ye(Ne={}){const{connector:Se=(()=>new G.x),resetOnError:Re=!0,resetOnComplete:J=!0,resetOnRefCountZero:ee=!0}=Ne;return ae=>{let it,qe,ct,bt=0,ke=!1,Be=!1;const je=()=>{qe?.unsubscribe(),qe=void 0},Ze=()=>{je(),it=ct=void 0,ke=Be=!1},Ye=()=>{const $e=it;Ze(),$e?.unsubscribe()};return(0,pe.e)(($e,ze)=>{bt++,!Be&&!ke&&je();const st=ct=ct??Se();ze.add(()=>{bt--,0===bt&&!Be&&!ke&&(qe=Te(Ye,ee))}),st.subscribe(ze),!it&&bt>0&&(it=new V.Hp({next:z=>st.next(z),error:z=>{Be=!0,je(),qe=Te(Ze,Re,z),st.error(z)},complete:()=>{ke=!0,je(),qe=Te(Ze,J),st.complete()}}),(0,f.Xf)($e).subscribe(it))})(ae)}}function Te(Ne,Se,...Re){if(!0===Se)return void Ne();if(!1===Se)return;const J=new V.Hp({next:()=>{J.unsubscribe(),Ne()}});return(0,f.Xf)(Se(...Re)).subscribe(J)}},9468:(Tt,Ue,W)=>{"use strict";W.d(Ue,{R:()=>G});var f=W(4482);function G(V,pe=0){return(0,f.e)((ye,Te)=>{Te.add(V.schedule(()=>ye.subscribe(Te),pe))})}},8505:(Tt,Ue,W)=>{"use strict";W.d(Ue,{b:()=>ye});var f=W(576),G=W(4482),V=W(5403),pe=W(4671);function ye(Te,Ne,Se){const Re=(0,f.m)(Te)||Ne||Se?{next:Te,error:Ne,complete:Se}:Te;return Re?(0,G.e)((J,ee)=>{var ae;null===(ae=Re.subscribe)||void 0===ae||ae.call(Re);let it=!0;J.subscribe((0,V.x)(ee,qe=>{var ct;null===(ct=Re.next)||void 0===ct||ct.call(Re,qe),ee.next(qe)},()=>{var qe;it=!1,null===(qe=Re.complete)||void 0===qe||qe.call(Re),ee.complete()},qe=>{var ct;it=!1,null===(ct=Re.error)||void 0===ct||ct.call(Re,qe),ee.error(qe)},()=>{var qe,ct;it&&(null===(qe=Re.unsubscribe)||void 0===qe||qe.call(Re)),null===(ct=Re.finalize)||void 0===ct||ct.call(Re)}))}):pe.y}},4408:(Tt,Ue,W)=>{"use strict";W.d(Ue,{o:()=>ye});var f=W(727);class G extends f.w0{constructor(Ne,Se){super()}schedule(Ne,Se=0){return this}}const V={setInterval(Te,Ne,...Se){const{delegate:Re}=V;return Re?.setInterval?Re.setInterval(Te,Ne,...Se):setInterval(Te,Ne,...Se)},clearInterval(Te){const{delegate:Ne}=V;return(Ne?.clearInterval||clearInterval)(Te)},delegate:void 0};var pe=W(8737);class ye extends G{constructor(Ne,Se){super(Ne,Se),this.scheduler=Ne,this.work=Se,this.pending=!1}schedule(Ne,Se=0){var Re;if(this.closed)return this;this.state=Ne;const J=this.id,ee=this.scheduler;return null!=J&&(this.id=this.recycleAsyncId(ee,J,Se)),this.pending=!0,this.delay=Se,this.id=null!==(Re=this.id)&&void 0!==Re?Re:this.requestAsyncId(ee,this.id,Se),this}requestAsyncId(Ne,Se,Re=0){return V.setInterval(Ne.flush.bind(Ne,this),Re)}recycleAsyncId(Ne,Se,Re=0){if(null!=Re&&this.delay===Re&&!1===this.pending)return Se;null!=Se&&V.clearInterval(Se)}execute(Ne,Se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Re=this._execute(Ne,Se);if(Re)return Re;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ne,Se){let J,Re=!1;try{this.work(Ne)}catch(ee){Re=!0,J=ee||new Error("Scheduled action threw falsy error")}if(Re)return this.unsubscribe(),J}unsubscribe(){if(!this.closed){const{id:Ne,scheduler:Se}=this,{actions:Re}=Se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,pe.P)(Re,this),null!=Ne&&(this.id=this.recycleAsyncId(Se,Ne,null)),this.delay=null,super.unsubscribe()}}}},7565:(Tt,Ue,W)=>{"use strict";W.d(Ue,{v:()=>V});var f=W(6063);class G{constructor(ye,Te=G.now){this.schedulerActionCtor=ye,this.now=Te}schedule(ye,Te=0,Ne){return new this.schedulerActionCtor(this,ye).schedule(Ne,Te)}}G.now=f.l.now;class V extends G{constructor(ye,Te=G.now){super(ye,Te),this.actions=[],this._active=!1}flush(ye){const{actions:Te}=this;if(this._active)return void Te.push(ye);let Ne;this._active=!0;do{if(Ne=ye.execute(ye.state,ye.delay))break}while(ye=Te.shift());if(this._active=!1,Ne){for(;ye=Te.shift();)ye.unsubscribe();throw Ne}}}},4986:(Tt,Ue,W)=>{"use strict";W.d(Ue,{z:()=>V});var f=W(4408);const V=new(W(7565).v)(f.o)},6063:(Tt,Ue,W)=>{"use strict";W.d(Ue,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(Tt,Ue,W)=>{"use strict";W.d(Ue,{z:()=>f});const f={setTimeout(G,V,...pe){const{delegate:ye}=f;return ye?.setTimeout?ye.setTimeout(G,V,...pe):setTimeout(G,V,...pe)},clearTimeout(G){const{delegate:V}=f;return(V?.clearTimeout||clearTimeout)(G)},delegate:void 0}},2202:(Tt,Ue,W)=>{"use strict";W.d(Ue,{h:()=>G});const G=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Tt,Ue,W)=>{"use strict";W.d(Ue,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Tt,Ue,W)=>{"use strict";W.d(Ue,{_6:()=>Te,jO:()=>pe,yG:()=>ye});var f=W(576);function V(Ne){return Ne[Ne.length-1]}function pe(Ne){return(0,f.m)(V(Ne))?Ne.pop():void 0}function ye(Ne){return function G(Ne){return Ne&&(0,f.m)(Ne.schedule)}(V(Ne))?Ne.pop():void 0}function Te(Ne,Se){return"number"==typeof V(Ne)?Ne.pop():Se}},8737:(Tt,Ue,W)=>{"use strict";function f(G,V){if(G){const pe=G.indexOf(V);0<=pe&&G.splice(pe,1)}}W.d(Ue,{P:()=>f})},3888:(Tt,Ue,W)=>{"use strict";function f(G){const pe=G(ye=>{Error.call(ye),ye.stack=(new Error).stack});return pe.prototype=Object.create(Error.prototype),pe.prototype.constructor=pe,pe}W.d(Ue,{d:()=>f})},2806:(Tt,Ue,W)=>{"use strict";W.d(Ue,{O:()=>pe,x:()=>V});var f=W(2416);let G=null;function V(ye){if(f.v.useDeprecatedSynchronousErrorHandling){const Te=!G;if(Te&&(G={errorThrown:!1,error:null}),ye(),Te){const{errorThrown:Ne,error:Se}=G;if(G=null,Ne)throw Se}}else ye()}function pe(ye){f.v.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=ye)}},9672:(Tt,Ue,W)=>{"use strict";function f(G,V,pe,ye=0,Te=!1){const Ne=V.schedule(function(){pe(),Te?G.add(this.schedule(null,ye)):this.unsubscribe()},ye);if(G.add(Ne),!Te)return Ne}W.d(Ue,{f:()=>f})},4671:(Tt,Ue,W)=>{"use strict";function f(G){return G}W.d(Ue,{y:()=>f})},1144:(Tt,Ue,W)=>{"use strict";W.d(Ue,{z:()=>f});const f=G=>G&&"number"==typeof G.length&&"function"!=typeof G},2206:(Tt,Ue,W)=>{"use strict";W.d(Ue,{D:()=>G});var f=W(576);function G(V){return Symbol.asyncIterator&&(0,f.m)(V?.[Symbol.asyncIterator])}},576:(Tt,Ue,W)=>{"use strict";function f(G){return"function"==typeof G}W.d(Ue,{m:()=>f})},3670:(Tt,Ue,W)=>{"use strict";W.d(Ue,{c:()=>V});var f=W(8822),G=W(576);function V(pe){return(0,G.m)(pe[f.L])}},6495:(Tt,Ue,W)=>{"use strict";W.d(Ue,{T:()=>V});var f=W(2202),G=W(576);function V(pe){return(0,G.m)(pe?.[f.h])}},8239:(Tt,Ue,W)=>{"use strict";W.d(Ue,{t:()=>G});var f=W(576);function G(V){return(0,f.m)(V?.then)}},3260:(Tt,Ue,W)=>{"use strict";W.d(Ue,{L:()=>pe,Q:()=>V});var f=W(655),G=W(576);function V(ye){return(0,f.FC)(this,arguments,function*(){const Ne=ye.getReader();try{for(;;){const{value:Se,done:Re}=yield(0,f.qq)(Ne.read());if(Re)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(Se)}}finally{Ne.releaseLock()}})}function pe(ye){return(0,G.m)(ye?.getReader)}},4482:(Tt,Ue,W)=>{"use strict";W.d(Ue,{A:()=>G,e:()=>V});var f=W(576);function G(pe){return(0,f.m)(pe?.lift)}function V(pe){return ye=>{if(G(ye))return ye.lift(function(Te){try{return pe(Te,this)}catch(Ne){this.error(Ne)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Tt,Ue,W)=>{"use strict";function f(){}W.d(Ue,{Z:()=>f})},9635:(Tt,Ue,W)=>{"use strict";W.d(Ue,{U:()=>V,z:()=>G});var f=W(4671);function G(...pe){return V(pe)}function V(pe){return 0===pe.length?f.y:1===pe.length?pe[0]:function(Te){return pe.reduce((Ne,Se)=>Se(Ne),Te)}}},7849:(Tt,Ue,W)=>{"use strict";W.d(Ue,{h:()=>V});var f=W(2416),G=W(3410);function V(pe){G.z.setTimeout(()=>{const{onUnhandledError:ye}=f.v;if(!ye)throw pe;ye(pe)})}},4532:(Tt,Ue,W)=>{"use strict";function f(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}W.d(Ue,{z:()=>f})},5226:function(Tt){Tt.exports=function(){"use strict";const Ue="SweetAlert2:",f=D=>D.charAt(0).toUpperCase()+D.slice(1),G=D=>Array.prototype.slice.call(D),V=D=>{console.warn("".concat(Ue," ").concat("object"==typeof D?D.join(" "):D))},pe=D=>{console.error("".concat(Ue," ").concat(D))},ye=[],Ne=(D,S)=>{(D=>{ye.includes(D)||(ye.push(D),V(D))})('"'.concat(D,'" is deprecated and will be removed in the next major release. Please use "').concat(S,'" instead.'))},Se=D=>"function"==typeof D?D():D,Re=D=>D&&"function"==typeof D.toPromise,J=D=>Re(D)?D.toPromise():Promise.resolve(D),ee=D=>D&&Promise.resolve(D)===D,ae={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},it=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],qe={},ct=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],bt=D=>Object.prototype.hasOwnProperty.call(ae,D),ke=D=>-1!==it.indexOf(D),Be=D=>qe[D],je=D=>{bt(D)||V('Unknown parameter "'.concat(D,'"'))},Ze=D=>{ct.includes(D)&&V('The parameter "'.concat(D,'" is incompatible with toasts'))},Ye=D=>{Be(D)&&Ne(D,Be(D))},st=D=>{const S={};for(const O in D)S[D[O]]="swal2-"+D[O];return S},z=st(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),Ee=st(["success","warning","info","question","error"]),Me=()=>document.body.querySelector(".".concat(z.container)),oe=D=>{const S=Me();return S?S.querySelector(D):null},re=D=>oe(".".concat(D)),fe=()=>re(z.popup),me=()=>re(z.icon),tt=()=>re(z.title),Xe=()=>re(z["html-container"]),At=()=>re(z.image),_n=()=>re(z["progress-steps"]),Rn=()=>re(z["validation-message"]),St=()=>oe(".".concat(z.actions," .").concat(z.confirm)),Gt=()=>oe(".".concat(z.actions," .").concat(z.deny)),an=()=>oe(".".concat(z.loader)),Qn=()=>oe(".".concat(z.actions," .").concat(z.cancel)),sn=()=>re(z.actions),Rt=()=>re(z.footer),Sr=()=>re(z["timer-progress-bar"]),Wr=()=>re(z.close),qn=()=>{const D=G(fe().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((O,X)=>{const We=parseInt(O.getAttribute("tabindex")),Ct=parseInt(X.getAttribute("tabindex"));return We>Ct?1:We<Ct?-1:0}),S=G(fe().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(O=>"-1"!==O.getAttribute("tabindex"));return(D=>{const S=[];for(let O=0;O<D.length;O++)-1===S.indexOf(D[O])&&S.push(D[O]);return S})(D.concat(S)).filter(O=>ln(O))},oi=()=>le(document.body,z.shown)&&!le(document.body,z["toast-shown"])&&!le(document.body,z["no-backdrop"]),Gr=()=>fe()&&le(fe(),z.toast),Bn={previousBodyPadding:null},ue=(D,S)=>{if(D.textContent="",S){const X=(new DOMParser).parseFromString(S,"text/html");G(X.querySelector("head").childNodes).forEach(We=>{D.appendChild(We)}),G(X.querySelector("body").childNodes).forEach(We=>{D.appendChild(We)})}},le=(D,S)=>{if(!S)return!1;const O=S.split(/\s+/);for(let X=0;X<O.length;X++)if(!D.classList.contains(O[X]))return!1;return!0},Oe=(D,S,O)=>{if(((D,S)=>{G(D.classList).forEach(O=>{!Object.values(z).includes(O)&&!Object.values(Ee).includes(O)&&!Object.values(S.showClass).includes(O)&&D.classList.remove(O)})})(D,S),S.customClass&&S.customClass[O]){if("string"!=typeof S.customClass[O]&&!S.customClass[O].forEach)return V("Invalid type of customClass.".concat(O,'! Expected string or iterable object, got "').concat(typeof S.customClass[O],'"'));ht(D,S.customClass[O])}},xe=(D,S)=>{if(!S)return null;switch(S){case"select":case"textarea":case"file":return D.querySelector(".".concat(z.popup," > .").concat(z[S]));case"checkbox":return D.querySelector(".".concat(z.popup," > .").concat(z.checkbox," input"));case"radio":return D.querySelector(".".concat(z.popup," > .").concat(z.radio," input:checked"))||D.querySelector(".".concat(z.popup," > .").concat(z.radio," input:first-child"));case"range":return D.querySelector(".".concat(z.popup," > .").concat(z.range," input"));default:return D.querySelector(".".concat(z.popup," > .").concat(z.input))}},ut=D=>{if(D.focus(),"file"!==D.type){const S=D.value;D.value="",D.value=S}},En=(D,S,O)=>{!D||!S||("string"==typeof S&&(S=S.split(/\s+/).filter(Boolean)),S.forEach(X=>{Array.isArray(D)?D.forEach(We=>{O?We.classList.add(X):We.classList.remove(X)}):O?D.classList.add(X):D.classList.remove(X)}))},ht=(D,S)=>{En(D,S,!0)},Ft=(D,S)=>{En(D,S,!1)},fn=(D,S)=>{const O=G(D.childNodes);for(let X=0;X<O.length;X++)if(le(O[X],S))return O[X]},Nt=(D,S,O)=>{O==="".concat(parseInt(O))&&(O=parseInt(O)),O||0===parseInt(O)?D.style[S]="number"==typeof O?"".concat(O,"px"):O:D.style.removeProperty(S)},ft=function(D){D.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},wt=D=>{D.style.display="none"},Nn=(D,S,O,X)=>{const We=D.querySelector(S);We&&(We.style[O]=X)},In=(D,S,O)=>{S?ft(D,O):wt(D)},ln=D=>!(!D||!(D.offsetWidth||D.offsetHeight||D.getClientRects().length)),Zn=D=>D.scrollHeight>D.clientHeight,ai=D=>{const S=window.getComputedStyle(D),O=parseFloat(S.getPropertyValue("animation-duration")||"0"),X=parseFloat(S.getPropertyValue("transition-duration")||"0");return O>0||X>0},Kt=function(D){let S=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const O=Sr();ln(O)&&(S&&(O.style.transition="none",O.style.width="100%"),setTimeout(()=>{O.style.transition="width ".concat(D/1e3,"s linear"),O.style.width="0%"},10))},cn=()=>typeof window>"u"||typeof document>"u",Mt={},He=D=>new Promise(S=>{if(!D)return S();const O=window.scrollX,X=window.scrollY;Mt.restoreFocusTimeout=setTimeout(()=>{Mt.previousActiveElement&&Mt.previousActiveElement.focus?(Mt.previousActiveElement.focus(),Mt.previousActiveElement=null):document.body&&document.body.focus(),S()},100),window.scrollTo(O,X)}),mt='\n <div aria-labelledby="'.concat(z.title,'" aria-describedby="').concat(z["html-container"],'" class="').concat(z.popup,'" tabindex="-1">\n   <button type="button" class="').concat(z.close,'"></button>\n   <ul class="').concat(z["progress-steps"],'"></ul>\n   <div class="').concat(z.icon,'"></div>\n   <img class="').concat(z.image,'" />\n   <h2 class="').concat(z.title,'" id="').concat(z.title,'"></h2>\n   <div class="').concat(z["html-container"],'" id="').concat(z["html-container"],'"></div>\n   <input class="').concat(z.input,'" />\n   <input type="file" class="').concat(z.file,'" />\n   <div class="').concat(z.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(z.select,'"></select>\n   <div class="').concat(z.radio,'"></div>\n   <label for="').concat(z.checkbox,'" class="').concat(z.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(z.label,'"></span>\n   </label>\n   <textarea class="').concat(z.textarea,'"></textarea>\n   <div class="').concat(z["validation-message"],'" id="').concat(z["validation-message"],'"></div>\n   <div class="').concat(z.actions,'">\n     <div class="').concat(z.loader,'"></div>\n     <button type="button" class="').concat(z.confirm,'"></button>\n     <button type="button" class="').concat(z.deny,'"></button>\n     <button type="button" class="').concat(z.cancel,'"></button>\n   </div>\n   <div class="').concat(z.footer,'"></div>\n   <div class="').concat(z["timer-progress-bar-container"],'">\n     <div class="').concat(z["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),jt=()=>{Mt.currentInstance.resetValidationMessage()},K=D=>{const S=(()=>{const D=Me();return!!D&&(D.remove(),Ft([document.documentElement,document.body],[z["no-backdrop"],z["toast-shown"],z["has-column"]]),!0)})();if(cn())return void pe("SweetAlert2 requires document to initialize");const O=document.createElement("div");O.className=z.container,S&&ht(O,z["no-transition"]),ue(O,mt);const X=(D=>"string"==typeof D?document.querySelector(D):D)(D.target);X.appendChild(O),(D=>{const S=fe();S.setAttribute("role",D.toast?"alert":"dialog"),S.setAttribute("aria-live",D.toast?"polite":"assertive"),D.toast||S.setAttribute("aria-modal","true")})(D),(D=>{"rtl"===window.getComputedStyle(D).direction&&ht(Me(),z.rtl)})(X),(()=>{const D=fe(),S=fn(D,z.input),O=fn(D,z.file),X=D.querySelector(".".concat(z.range," input")),We=D.querySelector(".".concat(z.range," output")),Ct=fn(D,z.select),lr=D.querySelector(".".concat(z.checkbox," input")),Mn=fn(D,z.textarea);S.oninput=jt,O.onchange=jt,Ct.onchange=jt,lr.onchange=jt,Mn.oninput=jt,X.oninput=()=>{jt(),We.value=X.value},X.onchange=()=>{jt(),X.nextSibling.value=X.value}})()},U=(D,S)=>{D instanceof HTMLElement?S.appendChild(D):"object"==typeof D?Z(D,S):D&&ue(S,D)},Z=(D,S)=>{D.jquery?De(S,D):ue(S,D.toString())},De=(D,S)=>{if(D.textContent="",0 in S)for(let O=0;O in S;O++)D.appendChild(S[O].cloneNode(!0));else D.appendChild(S.cloneNode(!0))},Ge=(()=>{if(cn())return!1;const D=document.createElement("div"),S={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const O in S)if(Object.prototype.hasOwnProperty.call(S,O)&&typeof D.style[O]<"u")return S[O];return!1})(),dt=(D,S)=>{const O=sn(),X=an();S.showConfirmButton||S.showDenyButton||S.showCancelButton?ft(O):wt(O),Oe(O,S,"actions"),function en(D,S,O){const X=St(),We=Gt(),Ct=Qn();Wn(X,"confirm",O),Wn(We,"deny",O),Wn(Ct,"cancel",O),function Pt(D,S,O,X){if(!X.buttonsStyling)return Ft([D,S,O],z.styled);ht([D,S,O],z.styled),X.confirmButtonColor&&(D.style.backgroundColor=X.confirmButtonColor,ht(D,z["default-outline"])),X.denyButtonColor&&(S.style.backgroundColor=X.denyButtonColor,ht(S,z["default-outline"])),X.cancelButtonColor&&(O.style.backgroundColor=X.cancelButtonColor,ht(O,z["default-outline"]))}(X,We,Ct,O),O.reverseButtons&&(O.toast?(D.insertBefore(Ct,X),D.insertBefore(We,X)):(D.insertBefore(Ct,S),D.insertBefore(We,S),D.insertBefore(X,S)))}(O,X,S),ue(X,S.loaderHtml),Oe(X,S,"loader")};function Wn(D,S,O){In(D,O["show".concat(f(S),"Button")],"inline-block"),ue(D,O["".concat(S,"ButtonText")]),D.setAttribute("aria-label",O["".concat(S,"ButtonAriaLabel")]),D.className=z[S],Oe(D,O,"".concat(S,"Button")),ht(D,O["".concat(S,"ButtonClass")])}const Vl=(D,S)=>{const O=Me();O&&(function Nr(D,S){"string"==typeof S?D.style.background=S:S||ht([document.documentElement,document.body],z["no-backdrop"])}(O,S.backdrop),function Yt(D,S){S in z?ht(D,z[S]):(V('The "position" parameter is not valid, defaulting to "center"'),ht(D,z.center))}(O,S.position),function ci(D,S){if(S&&"string"==typeof S){const O="grow-".concat(S);O in z&&ht(D,z[O])}}(O,S.grow),Oe(O,S,"container"))};var tn={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Ul=["input","file","range","select","radio","checkbox","textarea"],Lr=D=>{if(!vn[D.input])return pe('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(D.input,'"'));const S=An(D.input),O=vn[D.input](S,D);ft(O),setTimeout(()=>{ut(O)})},Nc=(D,S)=>{const O=xe(fe(),D);if(O){(D=>{for(let S=0;S<D.attributes.length;S++){const O=D.attributes[S].name;["type","value","style"].includes(O)||D.removeAttribute(O)}})(O);for(const X in S)O.setAttribute(X,S[X])}},jl=D=>{const S=An(D.input);D.customClass&&ht(S,D.customClass.input)},qo=(D,S)=>{(!D.placeholder||S.inputPlaceholder)&&(D.placeholder=S.inputPlaceholder)},fs=(D,S,O)=>{if(O.inputLabel){D.id=z.input;const X=document.createElement("label"),We=z["input-label"];X.setAttribute("for",D.id),X.className=We,ht(X,O.customClass.inputLabel),X.innerText=O.inputLabel,S.insertAdjacentElement("beforebegin",X)}},An=D=>{const S=z[D]?z[D]:z.input;return fn(fe(),S)},vn={};vn.text=vn.email=vn.password=vn.number=vn.tel=vn.url=(D,S)=>("string"==typeof S.inputValue||"number"==typeof S.inputValue?D.value=S.inputValue:ee(S.inputValue)||V('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof S.inputValue,'"')),fs(D,D,S),qo(D,S),D.type=S.input,D),vn.file=(D,S)=>(fs(D,D,S),qo(D,S),D),vn.range=(D,S)=>{const O=D.querySelector("input"),X=D.querySelector("output");return O.value=S.inputValue,O.type=S.input,X.value=S.inputValue,fs(O,D,S),D},vn.select=(D,S)=>{if(D.textContent="",S.inputPlaceholder){const O=document.createElement("option");ue(O,S.inputPlaceholder),O.value="",O.disabled=!0,O.selected=!0,D.appendChild(O)}return fs(D,D,S),D},vn.radio=D=>(D.textContent="",D),vn.checkbox=(D,S)=>{const O=xe(fe(),"checkbox");O.value="1",O.id=z.checkbox,O.checked=Boolean(S.inputValue);const X=D.querySelector("span");return ue(X,S.inputPlaceholder),D},vn.textarea=(D,S)=>{D.value=S.inputValue,qo(D,S),fs(D,D,S);return setTimeout(()=>{if("MutationObserver"in window){const X=parseInt(window.getComputedStyle(fe()).width);new MutationObserver(()=>{const Ct=D.offsetWidth+(X=>parseInt(window.getComputedStyle(X).marginLeft)+parseInt(window.getComputedStyle(X).marginRight))(D);fe().style.width=Ct>X?"".concat(Ct,"px"):null}).observe(D,{attributes:!0,attributeFilter:["style"]})}}),D};const qr=(D,S)=>{const O=Xe();Oe(O,S,"htmlContainer"),S.html?(U(S.html,O),ft(O,"block")):S.text?(O.textContent=S.text,ft(O,"block")):wt(O),((D,S)=>{const O=fe(),X=tn.innerParams.get(D),We=!X||S.input!==X.input;Ul.forEach(Ct=>{const lr=z[Ct],Mn=fn(O,lr);Nc(Ct,S.inputAttributes),Mn.className=lr,We&&wt(Mn)}),S.input&&(We&&Lr(S),jl(S))})(D,S)},yt=(D,S)=>{for(const O in Ee)S.icon!==O&&Ft(D,Ee[O]);ht(D,Ee[S.icon]),xr(D,S),nn(),Oe(D,S,"icon")},nn=()=>{const D=fe(),S=window.getComputedStyle(D).getPropertyValue("background-color"),O=D.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let X=0;X<O.length;X++)O[X].style.backgroundColor=S},Ji=(D,S)=>{D.textContent="",ue(D,S.iconHtml?Hi(S.iconHtml):"success"===S.icon?'\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n':"error"===S.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':Hi({question:"?",warning:"!",info:"i"}[S.icon]))},xr=(D,S)=>{if(S.iconColor){D.style.color=S.iconColor,D.style.borderColor=S.iconColor;for(const O of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Nn(D,O,"backgroundColor",S.iconColor);Nn(D,".swal2-success-ring","borderColor",S.iconColor)}},Hi=D=>'<div class="'.concat(z["icon-content"],'">').concat(D,"</div>"),un=(D,S)=>{const O=_n();if(!S.progressSteps||0===S.progressSteps.length)return wt(O);ft(O),O.textContent="",S.currentProgressStep>=S.progressSteps.length&&V("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),S.progressSteps.forEach((X,We)=>{const Ct=(D=>{const S=document.createElement("li");return ht(S,z["progress-step"]),ue(S,D),S})(X);if(O.appendChild(Ct),We===S.currentProgressStep&&ht(Ct,z["active-progress-step"]),We!==S.progressSteps.length-1){const lr=(D=>{const S=document.createElement("li");return ht(S,z["progress-step-line"]),D.progressStepsDistance&&(S.style.width=D.progressStepsDistance),S})(S);O.appendChild(lr)}})},Ia=(D,S)=>{D.className="".concat(z.popup," ").concat(ln(D)?S.showClass.popup:""),S.toast?(ht([document.documentElement,document.body],z["toast-shown"]),ht(D,z.toast)):ht(D,z.modal),Oe(D,S,"popup"),"string"==typeof S.customClass&&ht(D,S.customClass),S.icon&&ht(D,z["icon-".concat(S.icon)])},ps=(D,S)=>{((D,S)=>{const O=Me(),X=fe();S.toast?(Nt(O,"width",S.width),X.style.width="100%",X.insertBefore(an(),me())):Nt(X,"width",S.width),Nt(X,"padding",S.padding),S.color&&(X.style.color=S.color),S.background&&(X.style.background=S.background),wt(Rn()),Ia(X,S)})(0,S),Vl(0,S),un(0,S),((D,S)=>{const O=tn.innerParams.get(D),X=me();O&&S.icon===O.icon?(Ji(X,S),yt(X,S)):S.icon||S.iconHtml?S.icon&&-1===Object.keys(Ee).indexOf(S.icon)?(pe('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(S.icon,'"')),wt(X)):(ft(X),Ji(X,S),yt(X,S),ht(X,S.showClass.icon)):wt(X)})(D,S),((D,S)=>{const O=At();if(!S.imageUrl)return wt(O);ft(O,""),O.setAttribute("src",S.imageUrl),O.setAttribute("alt",S.imageAlt),Nt(O,"width",S.imageWidth),Nt(O,"height",S.imageHeight),O.className=z.image,Oe(O,S,"image")})(0,S),((D,S)=>{const O=tt();In(O,S.title||S.titleText,"block"),S.title&&U(S.title,O),S.titleText&&(O.innerText=S.titleText),Oe(O,S,"title")})(0,S),((D,S)=>{const O=Wr();ue(O,S.closeButtonHtml),Oe(O,S,"closeButton"),In(O,S.showCloseButton),O.setAttribute("aria-label",S.closeButtonAriaLabel)})(0,S),qr(D,S),dt(0,S),((D,S)=>{const O=Rt();In(O,S.footer),S.footer&&U(S.footer,O),Oe(O,S,"footer")})(0,S),"function"==typeof S.didRender&&S.didRender(fe())},ir=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),gs=()=>{G(document.body.children).forEach(S=>{S.hasAttribute("data-previous-aria-hidden")?(S.setAttribute("aria-hidden",S.getAttribute("data-previous-aria-hidden")),S.removeAttribute("data-previous-aria-hidden")):S.removeAttribute("aria-hidden")})},gi=["swal-title","swal-html","swal-footer"],Hl=D=>{const S={};return G(D.querySelectorAll("swal-param")).forEach(O=>{Ar(O,["name","value"]);const X=O.getAttribute("name"),We=O.getAttribute("value");"boolean"==typeof ae[X]&&"false"===We&&(S[X]=!1),"object"==typeof ae[X]&&(S[X]=JSON.parse(We))}),S},er=D=>{const S={};return G(D.querySelectorAll("swal-button")).forEach(O=>{Ar(O,["type","color","aria-label"]);const X=O.getAttribute("type");S["".concat(X,"ButtonText")]=O.innerHTML,S["show".concat(f(X),"Button")]=!0,O.hasAttribute("color")&&(S["".concat(X,"ButtonColor")]=O.getAttribute("color")),O.hasAttribute("aria-label")&&(S["".concat(X,"ButtonAriaLabel")]=O.getAttribute("aria-label"))}),S},Er=D=>{const S={},O=D.querySelector("swal-image");return O&&(Ar(O,["src","width","height","alt"]),O.hasAttribute("src")&&(S.imageUrl=O.getAttribute("src")),O.hasAttribute("width")&&(S.imageWidth=O.getAttribute("width")),O.hasAttribute("height")&&(S.imageHeight=O.getAttribute("height")),O.hasAttribute("alt")&&(S.imageAlt=O.getAttribute("alt"))),S},$l=D=>{const S={},O=D.querySelector("swal-icon");return O&&(Ar(O,["type","color"]),O.hasAttribute("type")&&(S.icon=O.getAttribute("type")),O.hasAttribute("color")&&(S.iconColor=O.getAttribute("color")),S.iconHtml=O.innerHTML),S},tl=D=>{const S={},O=D.querySelector("swal-input");O&&(Ar(O,["type","label","placeholder","value"]),S.input=O.getAttribute("type")||"text",O.hasAttribute("label")&&(S.inputLabel=O.getAttribute("label")),O.hasAttribute("placeholder")&&(S.inputPlaceholder=O.getAttribute("placeholder")),O.hasAttribute("value")&&(S.inputValue=O.getAttribute("value")));const X=D.querySelectorAll("swal-input-option");return X.length&&(S.inputOptions={},G(X).forEach(We=>{Ar(We,["value"]);const Ct=We.getAttribute("value");S.inputOptions[Ct]=We.innerHTML})),S},nl=(D,S)=>{const O={};for(const X in S){const We=S[X],Ct=D.querySelector(We);Ct&&(Ar(Ct,[]),O[We.replace(/^swal-/,"")]=Ct.innerHTML.trim())}return O},ks=D=>{const S=gi.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);G(D.children).forEach(O=>{const X=O.tagName.toLowerCase();-1===S.indexOf(X)&&V("Unrecognized element <".concat(X,">"))})},Ar=(D,S)=>{G(D.attributes).forEach(O=>{-1===S.indexOf(O.name)&&V(['Unrecognized attribute "'.concat(O.name,'" on <').concat(D.tagName.toLowerCase(),">."),"".concat(S.length?"Allowed attributes are: ".concat(S.join(", ")):"To set the value, use HTML within the element.")])})};var Mr={email:(D,S)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(D)?Promise.resolve():Promise.resolve(S||"Invalid email address"),url:(D,S)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(D)?Promise.resolve():Promise.resolve(S||"Invalid URL")};function Ai(D){(function lh(D){D.inputValidator||Object.keys(Mr).forEach(S=>{D.input===S&&(D.inputValidator=Mr[S])})})(D),D.showLoaderOnConfirm&&!D.preConfirm&&V("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function xi(D){(!D.target||"string"==typeof D.target&&!document.querySelector(D.target)||"string"!=typeof D.target&&!D.target.appendChild)&&(V('Target parameter is not valid, defaulting to "body"'),D.target="body")}(D),"string"==typeof D.title&&(D.title=D.title.split("\n").join("<br />")),K(D)}class Rs{constructor(S,O){this.callback=S,this.remaining=O,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(S){const O=this.running;return O&&this.stop(),this.remaining+=S,O&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Da=()=>{null===Bn.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(Bn.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Bn.previousBodyPadding+(()=>{const D=document.createElement("div");D.className=z["scrollbar-measure"],document.body.appendChild(D);const S=D.getBoundingClientRect().width-D.clientWidth;return document.body.removeChild(D),S})(),"px"))},ch=()=>{const D=navigator.userAgent,S=!!D.match(/iPad/i)||!!D.match(/iPhone/i),O=!!D.match(/WebKit/i);S&&O&&!D.match(/CriOS/i)&&fe().scrollHeight>window.innerHeight-44&&(Me().style.paddingBottom="".concat(44,"px"))},rl=()=>{const D=Me();let S;D.ontouchstart=O=>{S=Ps(O)},D.ontouchmove=O=>{S&&(O.preventDefault(),O.stopPropagation())}},Ps=D=>{const S=D.target,O=Me();return!(Ko(D)||Ta(D)||S!==O&&(Zn(O)||"INPUT"===S.tagName||"TEXTAREA"===S.tagName||Zn(Xe())&&Xe().contains(S)))},Ko=D=>D.touches&&D.touches.length&&"stylus"===D.touches[0].touchType,Ta=D=>D.touches&&D.touches.length>1,dh=D=>{const S=Me(),O=fe();"function"==typeof D.willOpen&&D.willOpen(O);const We=window.getComputedStyle(document.body).overflowY;ms(S,O,D),setTimeout(()=>{Sa(S,O)},10),oi()&&(Uu(S,D.scrollbarPadding,We),G(document.body.children).forEach(S=>{S===Me()||S.contains(Me())||(S.hasAttribute("aria-hidden")&&S.setAttribute("data-previous-aria-hidden",S.getAttribute("aria-hidden")),S.setAttribute("aria-hidden","true"))})),!Gr()&&!Mt.previousActiveElement&&(Mt.previousActiveElement=document.activeElement),"function"==typeof D.didOpen&&setTimeout(()=>D.didOpen(O)),Ft(S,z["no-transition"])},Vu=D=>{const S=fe();if(D.target!==S)return;const O=Me();S.removeEventListener(Ge,Vu),O.style.overflowY="auto"},Sa=(D,S)=>{Ge&&ai(S)?(D.style.overflowY="hidden",S.addEventListener(Ge,Vu)):D.style.overflowY="auto"},Uu=(D,S,O)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!le(document.body,z.iosfix)){const S=document.body.scrollTop;document.body.style.top="".concat(-1*S,"px"),ht(document.body,z.iosfix),rl(),ch()}})(),S&&"hidden"!==O&&Da(),setTimeout(()=>{D.scrollTop=0})},ms=(D,S,O)=>{ht(D,O.showClass.backdrop),S.style.setProperty("opacity","0","important"),ft(S,"grid"),setTimeout(()=>{ht(S,O.showClass.popup),S.style.removeProperty("opacity")},10),ht([document.documentElement,document.body],z.shown),O.heightAuto&&O.backdrop&&!O.toast&&ht([document.documentElement,document.body],z["height-auto"])},zi=D=>{let S=fe();S||new io,S=fe();const O=an();Gr()?wt(me()):hh(S,D),ft(O),S.setAttribute("data-loading",!0),S.setAttribute("aria-busy",!0),S.focus()},hh=(D,S)=>{const O=sn(),X=an();!S&&ln(St())&&(S=St()),ft(O),S&&(wt(S),X.setAttribute("data-button-to-replace",S.className)),X.parentNode.insertBefore(X,S),ht([D,O],z.loading)},sl=D=>D.checked?1:0,Lc=D=>D.checked?D.value:null,ol=D=>D.files.length?null!==D.getAttribute("multiple")?D.files:D.files[0]:null,Fc=(D,S)=>{const O=fe(),X=We=>yo[S.input](O,Js(We),S);Re(S.inputOptions)||ee(S.inputOptions)?(zi(St()),J(S.inputOptions).then(We=>{D.hideLoading(),X(We)})):"object"==typeof S.inputOptions?X(S.inputOptions):pe("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof S.inputOptions))},Vc=(D,S)=>{const O=D.getInput();wt(O),J(S.inputValue).then(X=>{O.value="number"===S.input?parseFloat(X)||0:"".concat(X),ft(O),O.focus(),D.hideLoading()}).catch(X=>{pe("Error in inputValue promise: ".concat(X)),O.value="",ft(O),O.focus(),D.hideLoading()})},yo={select:(D,S,O)=>{const X=fn(D,z.select),We=(Ct,lr,Mn)=>{const cr=document.createElement("option");cr.value=Mn,ue(cr,lr),cr.selected=vo(Mn,O.inputValue),Ct.appendChild(cr)};S.forEach(Ct=>{const lr=Ct[0],Mn=Ct[1];if(Array.isArray(Mn)){const cr=document.createElement("optgroup");cr.label=lr,cr.disabled=!1,X.appendChild(cr),Mn.forEach(Gi=>We(cr,Gi[1],Gi[0]))}else We(X,Mn,lr)}),X.focus()},radio:(D,S,O)=>{const X=fn(D,z.radio);S.forEach(Ct=>{const lr=Ct[0],Mn=Ct[1],cr=document.createElement("input"),Gi=document.createElement("label");cr.type="radio",cr.name=z.radio,cr.value=lr,vo(lr,O.inputValue)&&(cr.checked=!0);const Do=document.createElement("span");ue(Do,Mn),Do.className=z.label,Gi.appendChild(cr),Gi.appendChild(Do),X.appendChild(Gi)});const We=X.querySelectorAll("input");We.length&&We[0].focus()}},Js=D=>{const S=[];return typeof Map<"u"&&D instanceof Map?D.forEach((O,X)=>{let We=O;"object"==typeof We&&(We=Js(We)),S.push([X,We])}):Object.keys(D).forEach(O=>{let X=D[O];"object"==typeof X&&(X=Js(X)),S.push([O,X])}),S},vo=(D,S)=>S&&S.toString()===D.toString();function wo(){const D=tn.innerParams.get(this);if(!D)return;const S=tn.domCache.get(this);wt(S.loader),Gr()?D.icon&&ft(me()):al(S),Ft([S.popup,S.actions],z.loading),S.popup.removeAttribute("aria-busy"),S.popup.removeAttribute("data-loading"),S.confirmButton.disabled=!1,S.denyButton.disabled=!1,S.cancelButton.disabled=!1}const al=D=>{const S=D.popup.getElementsByClassName(D.loader.getAttribute("data-button-to-replace"));S.length?ft(S[0],"inline-block"):!ln(St())&&!ln(Gt())&&!ln(Qn())&&wt(D.actions)};var _s={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const cl=()=>St()&&St().click(),ui=D=>{D.keydownTarget&&D.keydownHandlerAdded&&(D.keydownTarget.removeEventListener("keydown",D.keydownHandler,{capture:D.keydownListenerCapture}),D.keydownHandlerAdded=!1)},Aa=(D,S,O)=>{const X=qn();if(X.length)return(S+=O)===X.length?S=0:-1===S&&(S=X.length-1),X[S].focus();fe().focus()},sr=["ArrowRight","ArrowDown"],Gl=["ArrowLeft","ArrowUp"],eo=(D,S,O)=>{const X=tn.innerParams.get(D);X&&(S.isComposing||229===S.keyCode||(X.stopKeydownPropagation&&S.stopPropagation(),"Enter"===S.key?Vr(D,S,X):"Tab"===S.key?Ma(S,X):[...sr,...Gl].includes(S.key)?ul(S.key):"Escape"===S.key&&Os(S,X,O)))},Vr=(D,S,O)=>{if(Se(O.allowEnterKey)&&S.target&&D.getInput()&&S.target.outerHTML===D.getInput().outerHTML){if(["textarea","file"].includes(O.input))return;cl(),S.preventDefault()}},Ma=(D,S)=>{const O=D.target,X=qn();let We=-1;for(let Ct=0;Ct<X.length;Ct++)if(O===X[Ct]){We=Ct;break}Aa(0,We,D.shiftKey?-1:1),D.stopPropagation(),D.preventDefault()},ul=D=>{if(![St(),Gt(),Qn()].includes(document.activeElement))return;const We=sr.includes(D)?"nextElementSibling":"previousElementSibling";let Ct=document.activeElement;for(let lr=0;lr<sn().children.length;lr++){if(Ct=Ct[We],!Ct)return;if(ln(Ct)&&Ct instanceof HTMLButtonElement)break}Ct instanceof HTMLButtonElement&&Ct.focus()},Os=(D,S,O)=>{Se(S.allowEscapeKey)&&(D.preventDefault(),O(ir.esc))};function Cr(D,S,O,X){Gr()?Qo(D,X):(He(O).then(()=>Qo(D,X)),ui(Mt)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(S.setAttribute("style","display:none !important"),S.removeAttribute("class"),S.innerHTML=""):S.remove(),oi()&&(null!==Bn.previousBodyPadding&&(document.body.style.paddingRight="".concat(Bn.previousBodyPadding,"px"),Bn.previousBodyPadding=null),(()=>{if(le(document.body,z.iosfix)){const D=parseInt(document.body.style.top,10);Ft(document.body,z.iosfix),document.body.style.top="",document.body.scrollTop=-1*D}})(),gs()),function dl(){Ft([document.documentElement,document.body],[z.shown,z["height-auto"],z["no-backdrop"],z["toast-shown"]])}()}function ys(D){D=rn(D);const S=_s.swalPromiseResolve.get(this),O=es(this);this.isAwaitingPromise()?D.isDismissed||(ts(this),S(D)):O&&S(D)}const es=D=>{const S=fe();if(!S)return!1;const O=tn.innerParams.get(D);if(!O||le(S,O.hideClass.popup))return!1;Ft(S,O.showClass.popup),ht(S,O.hideClass.popup);const X=Me();return Ft(X,O.showClass.backdrop),ht(X,O.hideClass.backdrop),Yo(D,S,O),!0};const ts=D=>{D.isAwaitingPromise()&&(tn.awaitingPromise.delete(D),tn.innerParams.get(D)||D._destroy())},rn=D=>typeof D>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},D),Yo=(D,S,O)=>{const X=Me(),We=Ge&&ai(S);"function"==typeof O.willClose&&O.willClose(S),We?ju(D,S,X,O.returnFocus,O.didClose):Cr(D,X,O.returnFocus,O.didClose)},ju=(D,S,O,X,We)=>{Mt.swalCloseEventFinishedCallback=Cr.bind(null,D,O,X,We),S.addEventListener(Ge,function(Ct){Ct.target===S&&(Mt.swalCloseEventFinishedCallback(),delete Mt.swalCloseEventFinishedCallback)})},Qo=(D,S)=>{setTimeout(()=>{"function"==typeof S&&S.bind(D.params)(),D._destroy()})};function Uc(D,S,O){const X=tn.domCache.get(D);S.forEach(We=>{X[We].disabled=O})}function Xo(D,S){if(!D)return!1;if("radio"===D.type){const X=D.parentNode.parentNode.querySelectorAll("input");for(let We=0;We<X.length;We++)X[We].disabled=S}else D.disabled=S}const Kl=D=>{const S={};return Object.keys(D).forEach(O=>{ke(O)?S[O]=D[O]:V('Invalid parameter to update: "'.concat(O,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))}),S};const ns=D=>{Co(D),delete D.params,delete Mt.keydownHandler,delete Mt.keydownTarget,delete Mt.currentInstance},Co=D=>{D.isAwaitingPromise()?(hl(tn,D),tn.awaitingPromise.set(D,!0)):(hl(_s,D),hl(tn,D))},hl=(D,S)=>{for(const O in D)D[O].delete(S)};var ka=Object.freeze({hideLoading:wo,disableLoading:wo,getInput:function bo(D){const S=tn.innerParams.get(D||this),O=tn.domCache.get(D||this);return O?xe(O.popup,S.input):null},close:ys,isAwaitingPromise:function Bu(){return!!tn.awaitingPromise.get(this)},rejectPromise:function ql(D){const S=_s.swalPromiseReject.get(this);ts(this),S&&S(D)},handleAwaitingPromise:ts,closePopup:ys,closeModal:ys,closeToast:ys,enableButtons:function Bc(){Uc(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function Zl(){Uc(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function Hu(){return Xo(this.getInput(),!1)},disableInput:function Le(){return Xo(this.getInput(),!0)},showValidationMessage:function Cn(D){const S=tn.domCache.get(this),O=tn.innerParams.get(this);ue(S.validationMessage,D),S.validationMessage.className=z["validation-message"],O.customClass&&O.customClass.validationMessage&&ht(S.validationMessage,O.customClass.validationMessage),ft(S.validationMessage);const X=this.getInput();X&&(X.setAttribute("aria-invalid",!0),X.setAttribute("aria-describedby",z["validation-message"]),ut(X),ht(X,z.inputerror))},resetValidationMessage:function $u(){const D=tn.domCache.get(this);D.validationMessage&&wt(D.validationMessage);const S=this.getInput();S&&(S.removeAttribute("aria-invalid"),S.removeAttribute("aria-describedby"),Ft(S,z.inputerror))},getProgressSteps:function jc(){return tn.domCache.get(this).progressSteps},update:function kr(D){const S=fe(),O=tn.innerParams.get(this);if(!S||le(S,O.hideClass.popup))return V("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const X=Kl(D),We=Object.assign({},O,X);ps(this,We),tn.innerParams.set(this,We),Object.defineProperties(this,{params:{value:Object.assign({},this.params,D),writable:!1,enumerable:!0}})},_destroy:function Jo(){const D=tn.domCache.get(this),S=tn.innerParams.get(this);S?(D.popup&&Mt.swalCloseEventFinishedCallback&&(Mt.swalCloseEventFinishedCallback(),delete Mt.swalCloseEventFinishedCallback),Mt.deferDisposalTimer&&(clearTimeout(Mt.deferDisposalTimer),delete Mt.deferDisposalTimer),"function"==typeof S.didDestroy&&S.didDestroy(),ns(this)):Co(this)}});const Yr=(D,S)=>{const O=tn.innerParams.get(D);if(!O.input)return pe('The "input" parameter is needed to be set when using returnInputValueOn'.concat(f(S)));const X=((D,S)=>{const O=D.getInput();if(!O)return null;switch(S.input){case"checkbox":return sl(O);case"radio":return Lc(O);case"file":return ol(O);default:return S.inputAutoTrim?O.value.trim():O.value}})(D,O);O.inputValidator?ta(D,X,S):D.getInput().checkValidity()?"deny"===S?rs(D,X):to(D,X):(D.enableButtons(),D.showValidationMessage(O.validationMessage))},ta=(D,S,O)=>{const X=tn.innerParams.get(D);D.disableInput(),Promise.resolve().then(()=>J(X.inputValidator(S,X.validationMessage))).then(Ct=>{D.enableButtons(),D.enableInput(),Ct?D.showValidationMessage(Ct):"deny"===O?rs(D,S):to(D,S)})},rs=(D,S)=>{const O=tn.innerParams.get(D||void 0);O.showLoaderOnDeny&&zi(Gt()),O.preDeny?(tn.awaitingPromise.set(D||void 0,!0),Promise.resolve().then(()=>J(O.preDeny(S,O.validationMessage))).then(We=>{!1===We?(D.hideLoading(),ts(D)):D.closePopup({isDenied:!0,value:typeof We>"u"?S:We})}).catch(We=>Yl(D||void 0,We))):D.closePopup({isDenied:!0,value:S})},Ns=(D,S)=>{D.closePopup({isConfirmed:!0,value:S})},Yl=(D,S)=>{D.rejectPromise(S)},to=(D,S)=>{const O=tn.innerParams.get(D||void 0);O.showLoaderOnConfirm&&zi(),O.preConfirm?(D.resetValidationMessage(),tn.awaitingPromise.set(D||void 0,!0),Promise.resolve().then(()=>J(O.preConfirm(S,O.validationMessage))).then(We=>{ln(Rn())||!1===We?(D.hideLoading(),ts(D)):Ns(D,typeof We>"u"?S:We)}).catch(We=>Yl(D||void 0,We))):Ns(D,S)},Wu=(D,S,O)=>{S.popup.onclick=()=>{const X=tn.innerParams.get(D);X&&(no(X)||X.timer||X.input)||O(ir.close)}},no=D=>D.showConfirmButton||D.showDenyButton||D.showCancelButton||D.showCloseButton;let ro=!1;const Gu=D=>{D.popup.onmousedown=()=>{D.container.onmouseup=function(S){D.container.onmouseup=void 0,S.target===D.container&&(ro=!0)}}},Xl=D=>{D.container.onmousedown=()=>{D.popup.onmouseup=function(S){D.popup.onmouseup=void 0,(S.target===D.popup||D.popup.contains(S.target))&&(ro=!0)}}},Hc=(D,S,O)=>{S.container.onclick=X=>{const We=tn.innerParams.get(D);ro?ro=!1:X.target===S.container&&Se(We.allowOutsideClick)&&O(ir.backdrop)}},Ra=D=>D instanceof Element||(D=>"object"==typeof D&&D.jquery)(D);const Zu=()=>{if(Mt.timeout)return(()=>{const D=Sr(),S=parseInt(window.getComputedStyle(D).width);D.style.removeProperty("transition"),D.style.width="100%";const X=S/parseInt(window.getComputedStyle(D).width)*100;D.style.removeProperty("transition"),D.style.width="".concat(X,"%")})(),Mt.timeout.stop()},mh=()=>{if(Mt.timeout){const D=Mt.timeout.start();return Kt(D),D}};let Vn=!1;const fl={};const Qr=D=>{for(let S=D.target;S&&S!==document;S=S.parentNode)for(const O in fl){const X=S.getAttribute(O);if(X)return void fl[O].fire({template:X})}};var Yu=Object.freeze({isValidParameter:bt,isUpdatableParameter:ke,isDeprecatedParameter:Be,argsToParams:D=>{const S={};return"object"!=typeof D[0]||Ra(D[0])?["title","html","icon"].forEach((O,X)=>{const We=D[X];"string"==typeof We||Ra(We)?S[O]=We:void 0!==We&&pe("Unexpected type of ".concat(O,'! Expected "string" or "Element", got ').concat(typeof We))}):Object.assign(S,D[0]),S},isVisible:()=>ln(fe()),clickConfirm:cl,clickDeny:()=>Gt()&&Gt().click(),clickCancel:()=>Qn()&&Qn().click(),getContainer:Me,getPopup:fe,getTitle:tt,getHtmlContainer:Xe,getImage:At,getIcon:me,getInputLabel:()=>re(z["input-label"]),getCloseButton:Wr,getActions:sn,getConfirmButton:St,getDenyButton:Gt,getCancelButton:Qn,getLoader:an,getFooter:Rt,getTimerProgressBar:Sr,getFocusableElements:qn,getValidationMessage:Rn,isLoading:()=>fe().hasAttribute("data-loading"),fire:function ph(){const D=this;for(var S=arguments.length,O=new Array(S),X=0;X<S;X++)O[X]=arguments[X];return new D(...O)},mixin:function gh(D){return class S extends(this){_main(X,We){return super._main(X,Object.assign({},D,We))}}},showLoading:zi,enableLoading:zi,getTimerLeft:()=>Mt.timeout&&Mt.timeout.getTimerLeft(),stopTimer:Zu,resumeTimer:mh,toggleTimer:()=>{const D=Mt.timeout;return D&&(D.running?Zu():mh())},increaseTimer:D=>{if(Mt.timeout){const S=Mt.timeout.increase(D);return Kt(S,!0),S}},isTimerRunning:()=>Mt.timeout&&Mt.timeout.isRunning(),bindClickHandler:function Ku(){fl[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Vn||(document.body.addEventListener("click",Qr),Vn=!0)}});let Wc;class Io{constructor(){if(typeof window>"u")return;Wc=this;for(var S=arguments.length,O=new Array(S),X=0;X<S;X++)O[X]=arguments[X];const We=Object.freeze(this.constructor.argsToParams(O));Object.defineProperties(this,{params:{value:We,writable:!1,enumerable:!0,configurable:!0}});const Ct=this._main(this.params);tn.promise.set(this,Ct)}_main(S){let O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(D=>{!D.backdrop&&D.allowOutsideClick&&V('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const S in D)je(S),D.toast&&Ze(S),Ye(S)})(Object.assign({},O,S)),Mt.currentInstance&&(Mt.currentInstance._destroy(),oi()&&gs()),Mt.currentInstance=this;const X=na(S,O);Ai(X),Object.freeze(X),Mt.timeout&&(Mt.timeout.stop(),delete Mt.timeout),clearTimeout(Mt.restoreFocusTimeout);const We=Fs(this);return ps(this,X),tn.innerParams.set(this,X),Pa(this,We,X)}then(S){return tn.promise.get(this).then(S)}finally(S){return tn.promise.get(this).finally(S)}}const Pa=(D,S,O)=>new Promise((X,We)=>{const Ct=lr=>{D.closePopup({isDismissed:!0,dismiss:lr})};_s.swalPromiseResolve.set(D,X),_s.swalPromiseReject.set(D,We),S.confirmButton.onclick=()=>(D=>{const S=tn.innerParams.get(D);D.disableButtons(),S.input?Yr(D,"confirm"):to(D,!0)})(D),S.denyButton.onclick=()=>(D=>{const S=tn.innerParams.get(D);D.disableButtons(),S.returnInputValueOnDeny?Yr(D,"deny"):rs(D,!1)})(D),S.cancelButton.onclick=()=>((D,S)=>{D.disableButtons(),S(ir.cancel)})(D,Ct),S.closeButton.onclick=()=>Ct(ir.close),((D,S,O)=>{tn.innerParams.get(D).toast?Wu(D,S,O):(Gu(S),Xl(S),Hc(D,S,O))})(D,S,Ct),((D,S,O,X)=>{ui(S),O.toast||(S.keydownHandler=We=>eo(D,We,X),S.keydownTarget=O.keydownListenerCapture?window:fe(),S.keydownListenerCapture=O.keydownListenerCapture,S.keydownTarget.addEventListener("keydown",S.keydownHandler,{capture:S.keydownListenerCapture}),S.keydownHandlerAdded=!0)})(D,Mt,O,Ct),((D,S)=>{"select"===S.input||"radio"===S.input?Fc(D,S):["text","email","number","tel","textarea"].includes(S.input)&&(Re(S.inputValue)||ee(S.inputValue))&&(zi(St()),Vc(D,S))})(D,O),dh(O),vs(Mt,O,Ct),Gc(S,O),setTimeout(()=>{S.container.scrollTop=0})}),na=(D,S)=>{const O=(D=>{const S="string"==typeof D.template?document.querySelector(D.template):D.template;if(!S)return{};const O=S.content;return ks(O),Object.assign(Hl(O),er(O),Er(O),$l(O),tl(O),nl(O,gi))})(D),X=Object.assign({},ae,S,O,D);return X.showClass=Object.assign({},ae.showClass,X.showClass),X.hideClass=Object.assign({},ae.hideClass,X.hideClass),X},Fs=D=>{const S={popup:fe(),container:Me(),actions:sn(),confirmButton:St(),denyButton:Gt(),cancelButton:Qn(),loader:an(),closeButton:Wr(),validationMessage:Rn(),progressSteps:_n()};return tn.domCache.set(D,S),S},vs=(D,S,O)=>{const X=Sr();wt(X),S.timer&&(D.timeout=new Rs(()=>{O("timer"),delete D.timeout},S.timer),S.timerProgressBar&&(ft(X),Oe(X,S,"timerProgressBar"),setTimeout(()=>{D.timeout&&D.timeout.running&&Kt(S.timer)})))},Gc=(D,S)=>{if(!S.toast){if(!Se(S.allowEnterKey))return ra();pl(D,S)||Aa(0,-1,1)}},pl=(D,S)=>S.focusDeny&&ln(D.denyButton)?(D.denyButton.focus(),!0):S.focusCancel&&ln(D.cancelButton)?(D.cancelButton.focus(),!0):!(!S.focusConfirm||!ln(D.confirmButton)||(D.confirmButton.focus(),0)),ra=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};Object.assign(Io.prototype,ka),Object.assign(Io,Yu),Object.keys(ka).forEach(D=>{Io[D]=function(){if(Wc)return Wc[D](...arguments)}}),Io.DismissReason=ir,Io.version="11.4.8";const io=Io;return io.default=io,io}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Ue,W){var f=Ue.createElement("style");if(Ue.getElementsByTagName("head")[0].appendChild(f),f.styleSheet)f.styleSheet.disabled||(f.styleSheet.cssText=W);else try{f.innerHTML=W}catch{f.innerText=W}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},655:(Tt,Ue,W)=>{"use strict";function pe(oe,re){var fe={};for(var me in oe)Object.prototype.hasOwnProperty.call(oe,me)&&re.indexOf(me)<0&&(fe[me]=oe[me]);if(null!=oe&&"function"==typeof Object.getOwnPropertySymbols){var tt=0;for(me=Object.getOwnPropertySymbols(oe);tt<me.length;tt++)re.indexOf(me[tt])<0&&Object.prototype.propertyIsEnumerable.call(oe,me[tt])&&(fe[me[tt]]=oe[me[tt]])}return fe}function Se(oe,re,fe,me){return new(fe||(fe=Promise))(function(Xe,At){function _n(Gt){try{St(me.next(Gt))}catch(Ut){At(Ut)}}function Rn(Gt){try{St(me.throw(Gt))}catch(Ut){At(Ut)}}function St(Gt){Gt.done?Xe(Gt.value):function tt(Xe){return Xe instanceof fe?Xe:new fe(function(At){At(Xe)})}(Gt.value).then(_n,Rn)}St((me=me.apply(oe,re||[])).next())})}function ke(oe){return this instanceof ke?(this.v=oe,this):new ke(oe)}function Be(oe,re,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var tt,me=fe.apply(oe,re||[]),Xe=[];return tt={},At("next"),At("throw"),At("return"),tt[Symbol.asyncIterator]=function(){return this},tt;function At(an){me[an]&&(tt[an]=function(Qn){return new Promise(function(sn,Rt){Xe.push([an,Qn,sn,Rt])>1||_n(an,Qn)})})}function _n(an,Qn){try{!function Rn(an){an.value instanceof ke?Promise.resolve(an.value.v).then(St,Gt):Ut(Xe[0][2],an)}(me[an](Qn))}catch(sn){Ut(Xe[0][3],sn)}}function St(an){_n("next",an)}function Gt(an){_n("throw",an)}function Ut(an,Qn){an(Qn),Xe.shift(),Xe.length&&_n(Xe[0][0],Xe[0][1])}}function Ze(oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,re=oe[Symbol.asyncIterator];return re?re.call(oe):(oe=function ae(oe){var re="function"==typeof Symbol&&Symbol.iterator,fe=re&&oe[re],me=0;if(fe)return fe.call(oe);if(oe&&"number"==typeof oe.length)return{next:function(){return oe&&me>=oe.length&&(oe=void 0),{value:oe&&oe[me++],done:!oe}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(oe),fe={},me("next"),me("throw"),me("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function me(Xe){fe[Xe]=oe[Xe]&&function(At){return new Promise(function(_n,Rn){!function tt(Xe,At,_n,Rn){Promise.resolve(Rn).then(function(St){Xe({value:St,done:_n})},At)}(_n,Rn,(At=oe[Xe](At)).done,At.value)})}}}W.d(Ue,{FC:()=>Be,KL:()=>Ze,_T:()=>pe,mG:()=>Se,qq:()=>ke})},4650:(Tt,Ue,W)=>{"use strict";W.d(Ue,{$8M:()=>id,$WT:()=>mr,$Z:()=>QC,AFp:()=>Ud,AaK:()=>Se,CHM:()=>$u,CRH:()=>Qp,CZH:()=>sy,CqO:()=>bI,D6c:()=>UT,DdM:()=>PD,EJc:()=>$k,EpF:()=>D0,F4k:()=>wI,FYo:()=>zv,FiY:()=>bl,Gf:()=>HD,GfV:()=>RC,Gpc:()=>ee,JOm:()=>ws,KtG:()=>jc,LFG:()=>ot,LSH:()=>Pv,Lbi:()=>Lw,Lck:()=>fk,MAs:()=>I_,MMx:()=>mw,NdJ:()=>S0,OlP:()=>Dn,Oqu:()=>L0,P3R:()=>Vm,PXZ:()=>Qk,Q6J:()=>D_,QGY:()=>T0,Qsj:()=>$m,R0b:()=>Wa,RDi:()=>_C,Rgc:()=>_a,SBq:()=>ru,Sil:()=>gT,Suo:()=>ry,TTD:()=>vo,TgZ:()=>Rp,Udp:()=>zs,X6Q:()=>AT,XFs:()=>xe,Xpm:()=>tn,Xts:()=>gd,Y36:()=>ou,YKP:()=>fw,YNc:()=>Mp,Yjl:()=>fs,Yz7:()=>Rt,Z0I:()=>qn,ZZ4:()=>Qw,_Bn:()=>CD,_UZ:()=>Oo,_Vd:()=>pc,_c5:()=>Jw,_uU:()=>Np,aQg:()=>yy,c2e:()=>Hk,cJS:()=>Wr,cg1:()=>B_,dDg:()=>bT,dqk:()=>Nt,eFA:()=>e1,ekj:()=>Pd,eoX:()=>ug,f3M:()=>mt,g9A:()=>Nw,h0i:()=>ef,hGG:()=>g1,hij:()=>F0,iGM:()=>Yp,ifc:()=>Ge,ip1:()=>Pw,jDz:()=>DD,kL8:()=>H0,lG2:()=>qo,lqb:()=>_d,lri:()=>vT,n5z:()=>rd,oAB:()=>Go,oxw:()=>TI,q4F:()=>fr,qLn:()=>wd,qOj:()=>y0,qZA:()=>Pp,rWj:()=>wT,s9C:()=>x0,sBO:()=>py,s_b:()=>ey,soG:()=>oy,tb:()=>Fw,tp0:()=>M,uIk:()=>E_,vHH:()=>ke,vpe:()=>$a,wAp:()=>Qt,xp6:()=>Km,z2F:()=>dy,zSh:()=>Bv,zs3:()=>Ed});var f=W(7579),G=W(727),V=W(9751),pe=W(6451),ye=W(3099);function Te(a){for(let l in a)if(a[l]===Te)return l;throw Error("Could not find renamed property on target object.")}function Ne(a,l){for(const c in l)l.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=l[c])}function Se(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(Se).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const c=l.indexOf("\n");return-1===c?l:l.substring(0,c)}function Re(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const J=Te({__forward_ref__:Te});function ee(a){return a.__forward_ref__=ee,a.toString=function(){return Se(this())},a}function ae(a){return it(a)?a():a}function it(a){return"function"==typeof a&&a.hasOwnProperty(J)&&a.__forward_ref__===ee}function qe(a){return a&&!!a.\u0275providers}const bt="https://g.co/ng/security#xss";class ke extends Error{constructor(l,c){super(function Be(a,l){return`NG0${Math.abs(a)}${l?": "+l.trim():""}`}(l,c)),this.code=l}}function je(a){return"string"==typeof a?a:null==a?"":String(a)}function st(a,l){throw new ke(-201,!1)}function Gt(a,l){null==a&&function Ut(a,l,c,d){throw new Error(`ASSERTION ERROR: ${a}`+(null==d?"":` [Expected=> ${c} ${d} ${l} <=Actual]`))}(l,a,null,"!=")}function Rt(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Wr(a){return{providers:a.providers||[],imports:a.imports||[]}}function Or(a){return oi(a,ue)||oi(a,we)}function qn(a){return null!==Or(a)}function oi(a,l){return a.hasOwnProperty(l)?a[l]:null}function Bn(a){return a&&(a.hasOwnProperty(le)||a.hasOwnProperty(Oe))?a[le]:null}const ue=Te({\u0275prov:Te}),le=Te({\u0275inj:Te}),we=Te({ngInjectableDef:Te}),Oe=Te({ngInjectorDef:Te});var xe=(()=>((xe=xe||{})[xe.Default=0]="Default",xe[xe.Host=1]="Host",xe[xe.Self=2]="Self",xe[xe.SkipSelf=4]="SkipSelf",xe[xe.Optional=8]="Optional",xe))();let ut;function ht(a){const l=ut;return ut=a,l}function Ft(a,l,c){const d=Or(a);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&xe.Optional?null:void 0!==l?l:void st(Se(a))}const Nt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),In={},ln="__NG_DI_FLAG__",Pn="ngTempTokenPath",ai=/\n/gm,fi="__source";let cn;function li(a){const l=cn;return cn=a,l}function Mt(a,l=xe.Default){if(void 0===cn)throw new ke(-203,!1);return null===cn?Ft(a,void 0,l):cn.get(a,l&xe.Optional?null:void 0,l)}function ot(a,l=xe.Default){return(function En(){return ut}()||Mt)(ae(a),l)}function mt(a,l=xe.Default){return ot(a,$t(l))}function $t(a){return typeof a>"u"||"number"==typeof a?a:0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)}function jt(a){const l=[];for(let c=0;c<a.length;c++){const d=ae(a[c]);if(Array.isArray(d)){if(0===d.length)throw new ke(900,!1);let p,m=xe.Default;for(let w=0;w<d.length;w++){const C=d[w],x=te(C);"number"==typeof x?-1===x?p=C.token:m|=x:p=C}l.push(ot(p,m))}else l.push(ot(d))}return l}function yn(a,l){return a[ln]=l,a.prototype[ln]=l,a}function te(a){return a[ln]}function K(a){return{toString:a}.toString()}var U=(()=>((U=U||{})[U.OnPush=0]="OnPush",U[U.Default=1]="Default",U))(),Ge=(()=>{return(a=Ge||(Ge={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Ge;var a})();const Dt={},dt=[],en=Te({\u0275cmp:Te}),Pt=Te({\u0275dir:Te}),Wn=Te({\u0275pipe:Te}),Nr=Te({\u0275mod:Te}),Yt=Te({\u0275fac:Te}),ci=Te({__NG_ELEMENT_ID__:Te});let Vl=0;function tn(a){return K(()=>{const c=!0===a.standalone,d={},p={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===U.OnPush,directiveDefs:null,pipeDefs:null,standalone:c,dependencies:c&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||dt,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Ge.Emulated,id:"c"+Vl++,styles:a.styles||dt,_:null,setInput:null,schemas:a.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},m=a.dependencies,w=a.features;return p.inputs=jl(a.inputs,d),p.outputs=jl(a.outputs),w&&w.forEach(C=>C(p)),p.directiveDefs=m?()=>("function"==typeof m?m():m).map(Bl).filter(Lr):null,p.pipeDefs=m?()=>("function"==typeof m?m():m).map(qr).filter(Lr):null,p})}function Bl(a){return An(a)||vn(a)}function Lr(a){return null!==a}function Go(a){return K(()=>({type:a.type,bootstrap:a.bootstrap||dt,declarations:a.declarations||dt,imports:a.imports||dt,exports:a.exports||dt,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function jl(a,l){if(null==a)return Dt;const c={};for(const d in a)if(a.hasOwnProperty(d)){let p=a[d],m=p;Array.isArray(p)&&(m=p[1],p=p[0]),c[p]=d,l&&(l[p]=m)}return c}const qo=tn;function fs(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function An(a){return a[en]||null}function vn(a){return a[Pt]||null}function qr(a){return a[Wn]||null}function mr(a){const l=An(a)||vn(a)||qr(a);return null!==l&&l.standalone}function pi(a,l){const c=a[Nr]||null;if(!c&&!0===l)throw new Error(`Type ${Se(a)} does not have '\u0275mod' property.`);return c}function xi(a){return Array.isArray(a)&&"object"==typeof a[1]}function Ai(a){return Array.isArray(a)&&!0===a[1]}function Rs(a){return 0!=(4&a.flags)}function Da(a){return a.componentOffset>-1}function zl(a){return 1==(1&a.flags)}function Fr(a){return null!==a.template}function ch(a){return 0!=(256&a[2])}function yo(a,l){return a.hasOwnProperty(Yt)?a[Yt]:null}class Js{constructor(l,c,d){this.previousValue=l,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function vo(){return wo}function wo(a){return a.type.prototype.ngOnChanges&&(a.setInput=bo),al}function al(){const a=ll(this),l=a?.current;if(l){const c=a.previous;if(c===Dt)a.previous=l;else for(let d in l)c[d]=l[d];a.current=null,this.ngOnChanges(l)}}function bo(a,l,c,d){const p=this.declaredInputs[c],m=ll(a)||function cl(a,l){return a[_s]=l}(a,{previous:Dt,current:null}),w=m.current||(m.current={}),C=m.previous,x=C[p];w[p]=new Js(x&&x.currentValue,l,C===Dt),a[d]=l}vo.ngInherit=!0;const _s="__ngSimpleChanges__";function ll(a){return a[_s]||null}function sr(a){for(;Array.isArray(a);)a=a[0];return a}function eo(a,l){return sr(l[a])}function Vr(a,l){return sr(l[a.index])}function ul(a,l){return a.data[l]}function Cr(a,l){const c=l[a];return xi(c)?c:c[0]}function ys(a){return 64==(64&a[2])}function es(a,l){return null==l?null:a[l]}function ql(a){a[18]=0}function ts(a,l){a[5]+=l;let c=a,d=a[3];for(;null!==d&&(1===l&&1===c[5]||-1===l&&0===c[5]);)d[5]+=l,c=d,d=d[3]}const rn={lFrame:ph(null),bindingsEnabled:!0};function Bc(){return rn.bindingsEnabled}function Le(){return rn.lFrame.lView}function Cn(){return rn.lFrame.tView}function $u(a){return rn.lFrame.contextLView=a,a[8]}function jc(a){return rn.lFrame.contextLView=null,a}function kr(){let a=Kl();for(;null!==a&&64===a.type;)a=a.parent;return a}function Kl(){return rn.lFrame.currentTNode}function ns(a,l){const c=rn.lFrame;c.currentTNode=a,c.isParent=l}function Co(){return rn.lFrame.isParent}function rs(){return rn.lFrame.bindingIndex++}function Ql(a,l){const c=rn.lFrame;c.bindingIndex=c.bindingRootIndex=a,no(l)}function no(a){rn.lFrame.currentDirectiveIndex=a}function Gu(){return rn.lFrame.currentQueryIndex}function Xl(a){rn.lFrame.currentQueryIndex=a}function Hc(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function qu(a,l,c){if(c&xe.SkipSelf){let p=l,m=a;for(;!(p=p.parent,null!==p||c&xe.Host||(p=Hc(m),null===p||(m=m[15],10&p.type))););if(null===p)return!1;l=p,a=m}const d=rn.lFrame=fh();return d.currentTNode=l,d.lView=a,!0}function Ra(a){const l=fh(),c=a[1];rn.lFrame=l,l.currentTNode=c.firstChild,l.lView=a,l.tView=c,l.contextLView=a,l.bindingIndex=c.bindingStartIndex,l.inI18n=!1}function fh(){const a=rn.lFrame,l=null===a?null:a.child;return null===l?ph(a):l}function ph(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function gh(){const a=rn.lFrame;return rn.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const $c=gh;function Zu(){const a=gh();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function mi(){return rn.lFrame.selectedIndex}function Ls(a){rn.lFrame.selectedIndex=a}function Vn(){const a=rn.lFrame;return ul(a.tView,a.selectedIndex)}function Pa(a,l){for(let c=l.directiveStart,d=l.directiveEnd;c<d;c++){const m=a.data[c].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:C,ngAfterViewInit:x,ngAfterViewChecked:R,ngOnDestroy:F}=m;w&&(a.contentHooks||(a.contentHooks=[])).push(-c,w),C&&((a.contentHooks||(a.contentHooks=[])).push(c,C),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(c,C)),x&&(a.viewHooks||(a.viewHooks=[])).push(-c,x),R&&((a.viewHooks||(a.viewHooks=[])).push(c,R),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(c,R)),null!=F&&(a.destroyHooks||(a.destroyHooks=[])).push(c,F)}}function na(a,l,c){Gc(a,l,3,c)}function Fs(a,l,c,d){(3&a[2])===c&&Gc(a,l,c,d)}function vs(a,l){let c=a[2];(3&c)===l&&(c&=2047,c+=1,a[2]=c)}function Gc(a,l,c,d){const m=d??-1,w=l.length-1;let C=0;for(let x=void 0!==d?65535&a[18]:0;x<w;x++)if("number"==typeof l[x+1]){if(C=l[x],null!=d&&C>=d)break}else l[x]<0&&(a[18]+=65536),(C<m||-1==m)&&(pl(a,c,l,x),a[18]=(4294901760&a[18])+x+2),x++}function pl(a,l,c,d){const p=c[d]<0,m=c[d+1],C=a[p?-c[d]:c[d]];if(p){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class io{constructor(l,c,d){this.factory=l,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function cr(a,l,c){let d=0;for(;d<c.length;){const p=c[d];if("number"==typeof p){if(0!==p)break;d++;const m=c[d++],w=c[d++],C=c[d++];a.setAttribute(l,w,C,m)}else{const m=p,w=c[++d];Do(m)?a.setProperty(l,m,w):a.setAttribute(l,m,w),d++}}return d}function Gi(a){return 3===a||4===a||6===a}function Do(a){return 64===a.charCodeAt(0)}function Vs(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let c=-1;for(let d=0;d<l.length;d++){const p=l[d];"number"==typeof p?c=p:0===c||Qu(a,c,p,null,-1===c||2===c?l[++d]:null)}}return a}function Qu(a,l,c,d,p){let m=0,w=a.length;if(-1===l)w=-1;else for(;m<a.length;){const C=a[m++];if("number"==typeof C){if(C===l){w=-1;break}if(C>l){w=m-1;break}}}for(;m<a.length;){const C=a[m];if("number"==typeof C)break;if(C===c){if(null===d)return void(null!==p&&(a[m+1]=p));if(d===a[m+1])return void(a[m+2]=p)}m++,null!==d&&m++,null!==p&&m++}-1!==w&&(a.splice(w,0,l),m=w+1),a.splice(m++,0,c),null!==d&&a.splice(m++,0,d),null!==p&&a.splice(m++,0,p)}function Xu(a){return-1!==a}function Jl(a){return 32767&a}function Oa(a,l){let c=function Ju(a){return a>>16}(a),d=l;for(;c>0;)d=d[15],c--;return d}let gl=!0;function so(a){const l=gl;return gl=a,l}let _h=0;const Mi={};function sa(a,l){const c=ed(a,l);if(-1!==c)return c;const d=l[1];d.firstCreatePass&&(a.injectorIndex=l.length,_l(d.data,a),_l(l,null),_l(d.blueprint,null));const p=ec(a,l),m=a.injectorIndex;if(Xu(p)){const w=Jl(p),C=Oa(p,l),x=C[1].data;for(let R=0;R<8;R++)l[m+R]=C[w+R]|x[w+R]}return l[m+8]=p,m}function _l(a,l){a.push(0,0,0,0,0,0,0,0,l)}function ed(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function ec(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let c=0,d=null,p=l;for(;null!==p;){if(d=Hf(p),null===d)return-1;if(c++,p=p[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function vh(a,l,c){!function yh(a,l,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(ci)&&(d=c[ci]),null==d&&(d=c[ci]=_h++);const p=255&d;l.data[a+(p>>5)]|=1<<p}(a,l,c)}function wh(a,l,c){if(c&xe.Optional||void 0!==a)return a;st()}function yl(a,l,c,d){if(c&xe.Optional&&void 0===d&&(d=null),!(c&(xe.Self|xe.Host))){const p=a[9],m=ht(void 0);try{return p?p.get(l,d,c&xe.Optional):Ft(l,d,c&xe.Optional)}finally{ht(m)}}return wh(d,0,c)}function Bf(a,l,c,d=xe.Default,p){if(null!==a){if(1024&l[2]){const w=function sm(a,l,c,d,p){let m=a,w=l;for(;null!==m&&null!==w&&1024&w[2]&&!(256&w[2]);){const C=Us(m,w,c,d|xe.Self,Mi);if(C!==Mi)return C;let x=m.parent;if(!x){const R=w[21];if(R){const F=R.get(c,Mi,d);if(F!==Mi)return F}x=Hf(w),w=w[15]}m=x}return p}(a,l,c,d,Mi);if(w!==Mi)return w}const m=Us(a,l,c,d,Mi);if(m!==Mi)return m}return yl(l,c,d,p)}function Us(a,l,c,d,p){const m=function bh(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(ci)?a[ci]:void 0;return"number"==typeof l?l>=0?255&l:jf:l}(c);if("function"==typeof m){if(!qu(l,a,d))return d&xe.Host?wh(p,0,d):yl(l,c,d,p);try{const w=m(d);if(null!=w||d&xe.Optional)return w;st()}finally{$c()}}else if("number"==typeof m){let w=null,C=ed(a,l),x=-1,R=d&xe.Host?l[16][6]:null;for((-1===C||d&xe.SkipSelf)&&(x=-1===C?ec(a,l):l[C+8],-1!==x&&qi(d,!1)?(w=l[1],C=Jl(x),l=Oa(x,l)):C=-1);-1!==C;){const F=l[1];if(nd(m,C,F.data)){const q=td(C,l,c,w,d,R);if(q!==Mi)return q}x=l[C+8],-1!==x&&qi(d,l[1].data[C+8]===R)&&nd(m,C,l)?(w=F,C=Jl(x),l=Oa(x,l)):C=-1}}return p}function td(a,l,c,d,p,m){const w=l[1],C=w.data[a+8],F=tc(C,w,c,null==d?Da(C)&&gl:d!=w&&0!=(3&C.type),p&xe.Host&&m===C);return null!==F?Bs(l,w,F,C):Mi}function tc(a,l,c,d,p){const m=a.providerIndexes,w=l.data,C=1048575&m,x=a.directiveStart,F=m>>20,se=p?C+F:a.directiveEnd;for(let _e=d?C:C+F;_e<se;_e++){const Fe=w[_e];if(_e<x&&c===Fe||_e>=x&&Fe.type===c)return _e}if(p){const _e=w[x];if(_e&&Fr(_e)&&_e.type===c)return x}return null}function Bs(a,l,c,d){let p=a[c];const m=l.data;if(function D(a){return a instanceof io}(p)){const w=p;w.resolving&&function Ye(a,l){const c=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new ke(-200,`Circular dependency in DI detected for ${a}${c}`)}(function Ze(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():je(a)}(m[c]));const C=so(w.canSeeViewProviders);w.resolving=!0;const x=w.injectImpl?ht(w.injectImpl):null;qu(a,d,xe.Default);try{p=a[c]=w.factory(void 0,m,a,d),l.firstCreatePass&&c>=d.directiveStart&&function Io(a,l,c){const{ngOnChanges:d,ngOnInit:p,ngDoCheck:m}=l.type.prototype;if(d){const w=wo(l);(c.preOrderHooks||(c.preOrderHooks=[])).push(a,w),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a,w)}p&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-a,p),m&&((c.preOrderHooks||(c.preOrderHooks=[])).push(a,m),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a,m))}(c,m[c],l)}finally{null!==x&&ht(x),so(C),w.resolving=!1,$c()}}return p}function nd(a,l,c){return!!(c[l+(a>>5)]&1<<a)}function qi(a,l){return!(a&xe.Self||a&xe.Host&&l)}class oa{constructor(l,c){this._tNode=l,this._lView=c}get(l,c,d){return Bf(this._tNode,this._lView,l,$t(d),c)}}function jf(){return new oa(kr(),Le())}function rd(a){return K(()=>{const l=a.prototype.constructor,c=l[Yt]||vl(l),d=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==d;){const m=p[Yt]||vl(p);if(m&&m!==c)return m;p=Object.getPrototypeOf(p)}return m=>new m})}function vl(a){return it(a)?()=>{const l=vl(ae(a));return l&&l()}:yo(a)}function Hf(a){const l=a[1],c=l.type;return 2===c?l.declTNode:1===c?a[6]:null}function id(a){return function Zc(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const c=a.attrs;if(c){const d=c.length;let p=0;for(;p<d;){const m=c[p];if(Gi(m))break;if(0===m)p+=2;else if("number"==typeof m)for(p++;p<d&&"string"==typeof c[p];)p++;else{if(m===l)return c[p+1];p+=2}}}return null}(kr(),a)}const nc="__parameters__";function Kc(a,l,c){return K(()=>{const d=function Eh(a){return function(...c){if(a){const d=a(...c);for(const p in d)this[p]=d[p]}}}(l);function p(...m){if(this instanceof p)return d.apply(this,m),this;const w=new p(...m);return C.annotation=w,C;function C(x,R,F){const q=x.hasOwnProperty(nc)?x[nc]:Object.defineProperty(x,nc,{value:[]})[nc];for(;q.length<=F;)q.push(null);return(q[F]=q[F]||[]).push(w),x}}return c&&(p.prototype=Object.create(c.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}class Dn{constructor(l,c){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Rt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function To(a,l){a.forEach(c=>Array.isArray(c)?To(c,l):l(c))}function ad(a,l,c){l>=a.length?a.push(c):a.splice(l,0,c)}function ic(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Zi(a,l,c){let d=di(a,l);return d>=0?a[1|d]=c:(d=~d,function wv(a,l,c,d){let p=a.length;if(p==l)a.push(c,d);else if(1===p)a.push(d,a[0]),a[0]=c;else{for(p--,a.push(a[p-1],a[p]);p>l;)a[p]=a[p-2],p--;a[l]=c,a[l+1]=d}}(a,d,l,c)),d}function Dr(a,l){const c=di(a,l);if(c>=0)return a[1|c]}function di(a,l){return function la(a,l,c){let d=0,p=a.length>>c;for(;p!==d;){const m=d+(p-d>>1),w=a[m<<c];if(l===w)return m<<c;w>l?p=m:d=m+1}return~(p<<c)}(a,l,1)}const bl=yn(Kc("Optional"),8),M=yn(Kc("SkipSelf"),4);var ws=(()=>((ws=ws||{})[ws.Important=1]="Important",ws[ws.DashCase=2]="DashCase",ws))();const Qf=new Map;let Xf=0;const ep="__ngContext__";function Yi(a,l){xi(l)?(a[ep]=l[20],function mm(a){Qf.set(a[20],a)}(l)):a[ep]=l}function Ke(a,l){return undefined(a,l)}function Vt(a){const l=a[3];return Ai(l)?l[3]:l}function bs(a){return dd(a[13])}function oo(a){return dd(a[4])}function dd(a){for(;null!==a&&!Ai(a);)a=a[4];return a}function cc(a,l,c,d,p){if(null!=d){let m,w=!1;Ai(d)?m=d:xi(d)&&(w=!0,d=d[0]);const C=sr(d);0===a&&null!==c?null==p?lC(l,c,C):dc(l,c,C,p||null,!0):1===a&&null!==c?dc(l,c,C,p||null,!0):2===a?function Sm(a,l,c){const d=ap(a,l);d&&function Im(a,l,c,d){a.removeChild(l,c,d)}(a,d,l,c)}(l,C,w):3===a&&l.destroyNode(C),null!=m&&function pC(a,l,c,d,p){const m=c[7];m!==sr(c)&&cc(l,a,d,m,p);for(let C=10;C<c.length;C++){const x=c[C];Ph(x[1],x,a,l,d,m)}}(l,a,m,c,p)}}function hd(a,l,c){return a.createElement(l,c)}function Em(a,l){const c=a[9],d=c.indexOf(l),p=l[3];512&l[2]&&(l[2]&=-513,ts(p,-1)),c.splice(d,1)}function Dv(a,l){if(a.length<=10)return;const c=10+l,d=a[c];if(d){const p=d[17];null!==p&&p!==a&&Em(p,d),l>0&&(a[c-1][4]=d[4]);const m=ic(a,10+l);!function rp(a,l){Ph(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(d[1],d);const w=m[19];null!==w&&w.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function Tv(a,l){if(!(128&l[2])){const c=l[11];c.destroyNode&&Ph(a,l,c,3,null,null),function bm(a){let l=a[13];if(!l)return Cm(a[1],a);for(;l;){let c=null;if(xi(l))c=l[13];else{const d=l[10];d&&(c=d)}if(!c){for(;l&&!l[4]&&l!==a;)xi(l)&&Cm(l[1],l),l=l[3];null===l&&(l=a),xi(l)&&Cm(l[1],l),c=l&&l[4]}l=c}}(l)}}function Cm(a,l){if(!(128&l[2])){l[2]&=-65,l[2]|=128,function fA(a,l){let c;if(null!=a&&null!=(c=a.destroyHooks))for(let d=0;d<c.length;d+=2){const p=l[c[d]];if(!(p instanceof io)){const m=c[d+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const C=p[m[w]],x=m[w+1];try{x.call(C)}finally{}}else try{m.call(p)}finally{}}}}(a,l),function hA(a,l){const c=a.cleanup,d=l[7];let p=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const w=c[m+3];w>=0?d[p=w]():d[p=-w].unsubscribe(),m+=2}else{const w=d[p=c[m+1]];c[m].call(w)}if(null!==d){for(let m=p+1;m<d.length;m++)(0,d[m])();l[7]=null}}(a,l),1===l[1].type&&l[11].destroy();const c=l[17];if(null!==c&&Ai(l[3])){c!==l[3]&&Em(c,l);const d=l[19];null!==d&&d.detachView(a)}!function Jf(a){Qf.delete(a[20])}(l)}}function aC(a,l,c){return function uc(a,l,c){let d=l;for(;null!==d&&40&d.type;)d=(l=d).parent;if(null===d)return c[0];{const{componentOffset:p}=d;if(p>-1){const{encapsulation:m}=a.data[d.directiveStart+p];if(m===Ge.None||m===Ge.Emulated)return null}return Vr(d,c)}}(a,l.parent,c)}function dc(a,l,c,d,p){a.insertBefore(l,c,d,p)}function lC(a,l,c){a.appendChild(l,c)}function cC(a,l,c,d,p){null!==d?dc(a,l,c,d,p):lC(a,l,c)}function ap(a,l){return a.parentNode(l)}let fd,bn,hC=function dC(a,l,c){return 40&a.type?Vr(a,c):null};function Dm(a,l,c,d){const p=aC(a,d,l),m=l[11],C=function uC(a,l,c){return hC(a,l,c)}(d.parent||l[6],d,l);if(null!=p)if(Array.isArray(c))for(let x=0;x<c.length;x++)cC(m,p,c[x],C,!1);else cC(m,p,c,C,!1)}function cp(a,l){if(null!==l){const c=l.type;if(3&c)return Vr(l,a);if(4&c)return Tm(-1,a[l.index]);if(8&c){const d=l.child;if(null!==d)return cp(a,d);{const p=a[l.index];return Ai(p)?Tm(-1,p):sr(p)}}if(32&c)return Ke(l,a)()||sr(a[l.index]);{const d=fC(a,l);return null!==d?Array.isArray(d)?d[0]:cp(Vt(a[16]),d):cp(a,l.next)}}return null}function fC(a,l){return null!==l?a[16][6].projection[l.projection]:null}function Tm(a,l){const c=10+a+1;if(c<l.length){const d=l[c],p=d[1].firstChild;if(null!==p)return cp(d,p)}return l[7]}function xm(a,l,c,d,p,m,w){for(;null!=c;){const C=d[c.index],x=c.type;if(w&&0===l&&(C&&Yi(sr(C),d),c.flags|=2),32!=(32&c.flags))if(8&x)xm(a,l,c.child,d,p,m,!1),cc(l,a,p,C,m);else if(32&x){const R=Ke(c,d);let F;for(;F=R();)cc(l,a,p,F,m);cc(l,a,p,C,m)}else 16&x?xv(a,l,d,c,p,m):cc(l,a,p,C,m);c=w?c.projectionNext:c.next}}function Ph(a,l,c,d,p,m){xm(c,d,a.firstChild,l,p,m,!1)}function xv(a,l,c,d,p,m){const w=c[16],x=w[6].projection[d.projection];if(Array.isArray(x))for(let R=0;R<x.length;R++)cc(l,a,p,x[R],m);else xm(a,l,x,w[3],p,m,!0)}function Av(a,l,c){""===c?a.removeAttribute(l,"class"):a.setAttribute(l,"class",c)}function Mv(a,l,c){const{mergedAttrs:d,classes:p,styles:m}=c;null!==d&&cr(a,l,d),null!==p&&Av(a,l,p),null!==m&&function Am(a,l,c){a.setAttribute(l,"style",c)}(a,l,m)}function _C(a){fd=a}function So(a){return function ss(){if(void 0===bn&&(bn=null,Nt.trustedTypes))try{bn=Nt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return bn}()?.createScriptURL(a)||a}class vC{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bt})`}}function ha(a){return a instanceof vC?a.changingThisBreaksApplicationSecurity:a}function up(a,l){const c=function bC(a){return a instanceof vC&&a.getTypeName()||null}(a);if(null!=c&&c!==l){if("ResourceURL"===c&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${c} (see ${bt})`)}return c===l}const Dl=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var ar=(()=>((ar=ar||{})[ar.NONE=0]="NONE",ar[ar.HTML=1]="HTML",ar[ar.STYLE=2]="STYLE",ar[ar.SCRIPT=3]="SCRIPT",ar[ar.URL=4]="URL",ar[ar.RESOURCE_URL=5]="RESOURCE_URL",ar))();function Pv(a){const l=hc();return l?l.sanitize(ar.URL,a)||"":up(a,"URL")?ha(a):function Nh(a){return(a=String(a)).match(Dl)?a:"unsafe:"+a}(je(a))}function Fh(a){const l=hc();if(l)return So(l.sanitize(ar.RESOURCE_URL,a)||"");if(up(a,"ResourceURL"))return So(ha(a));throw new ke(904,!1)}function Vm(a,l,c){return function TA(a,l){return"src"===l&&("embed"===a||"frame"===a||"iframe"===a||"media"===a||"script"===a)||"href"===l&&("base"===a||"link"===a)?Fh:Pv}(l,c)(a)}function hc(){const a=Le();return a&&a[12]}const gd=new Dn("ENVIRONMENT_INITIALIZER"),TC=new Dn("INJECTOR",-1),Um=new Dn("INJECTOR_DEF_TYPES");class Vh{get(l,c=In){if(c===In){const d=new Error(`NullInjectorError: No provider for ${Se(l)}!`);throw d.name="NullInjectorError",d}return c}}function Bm(...a){return{\u0275providers:SC(0,a),\u0275fromNgModule:!0}}function SC(a,...l){const c=[],d=new Set;let p;return To(l,m=>{const w=m;Nv(w,c,[],d)&&(p||(p=[]),p.push(w))}),void 0!==p&&xC(p,c),c}function xC(a,l){for(let c=0;c<a.length;c++){const{providers:p}=a[c];Lv(p,m=>{l.push(m)})}}function Nv(a,l,c,d){if(!(a=ae(a)))return!1;let p=null,m=Bn(a);const w=!m&&An(a);if(m||w){if(w&&!w.standalone)return!1;p=a}else{const x=a.ngModule;if(m=Bn(x),!m)return!1;p=x}const C=d.has(p);if(w){if(C)return!1;if(d.add(p),w.dependencies){const x="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const R of x)Nv(R,l,c,d)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let R;d.add(p);try{To(m.imports,F=>{Nv(F,l,c,d)&&(R||(R=[]),R.push(F))})}finally{}void 0!==R&&xC(R,l)}if(!C){const R=yo(p)||(()=>new p);l.push({provide:p,useFactory:R,deps:dt},{provide:Um,useValue:p,multi:!0},{provide:gd,useValue:()=>ot(p),multi:!0})}const x=m.providers;null==x||C||Lv(x,F=>{l.push(F)})}}return p!==a&&void 0!==a.providers}function Lv(a,l){for(let c of a)qe(c)&&(c=c.\u0275providers),Array.isArray(c)?Lv(c,l):l(c)}const Fv=Te({provide:String,useValue:Te});function Vv(a){return null!==a&&"object"==typeof a&&Fv in a}function tu(a){return"function"==typeof a}const Bv=new Dn("Set Injector scope."),md={},Uh={};let _p;function Bh(){return void 0===_p&&(_p=new Vh),_p}class _d{}class MC extends _d{get destroyed(){return this._destroyed}constructor(l,c,d,p){super(),this.parent=c,this.source=d,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jh(l,w=>this.processProvider(w)),this.records.set(TC,os(void 0,this)),p.has("environment")&&this.records.set(_d,os(void 0,this));const m=this.records.get(Bv);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Um.multi,dt,xe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const c=li(this),d=ht(void 0);try{return l()}finally{li(c),ht(d)}}get(l,c=In,d=xe.Default){this.assertNotDestroyed(),d=$t(d);const p=li(this),m=ht(void 0);try{if(!(d&xe.SkipSelf)){let C=this.records.get(l);if(void 0===C){const x=function $v(a){return"function"==typeof a||"object"==typeof a&&a instanceof Dn}(l)&&Or(l);C=x&&this.injectableDefInScope(x)?os(Hm(l),md):null,this.records.set(l,C)}if(null!=C)return this.hydrate(l,C)}return(d&xe.Self?Bh():this.parent).get(l,c=d&xe.Optional&&c===In?null:c)}catch(w){if("NullInjectorError"===w.name){if((w[Pn]=w[Pn]||[]).unshift(Se(l)),p)throw w;return function Q(a,l,c,d){const p=a[Pn];throw l[fi]&&p.unshift(l[fi]),a.message=function ie(a,l,c,d=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let p=Se(l);if(Array.isArray(l))p=l.map(Se).join(" -> ");else if("object"==typeof l){let m=[];for(let w in l)if(l.hasOwnProperty(w)){let C=l[w];m.push(w+":"+("string"==typeof C?JSON.stringify(C):Se(C)))}p=`{${m.join(", ")}}`}return`${c}${d?"("+d+")":""}[${p}]: ${a.replace(ai,"\n  ")}`}("\n"+a.message,p,c,d),a.ngTokenPath=p,a[Pn]=null,a}(w,l,"R3InjectorError",this.source)}throw w}finally{ht(m),li(p)}}resolveInjectorInitializers(){const l=li(this),c=ht(void 0);try{const d=this.get(gd.multi,dt,xe.Self);for(const p of d)p()}finally{li(l),ht(c)}}toString(){const l=[],c=this.records;for(const d of c.keys())l.push(Se(d));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processProvider(l){let c=tu(l=ae(l))?l:ae(l&&l.provide);const d=function AA(a){return Vv(a)?os(void 0,a.useValue):os(kC(a),md)}(l);if(tu(l)||!0!==l.multi)this.records.get(c);else{let p=this.records.get(c);p||(p=os(void 0,md,!0),p.factory=()=>jt(p.multi),this.records.set(c,p)),c=l,p.multi.push(l)}this.records.set(c,d)}hydrate(l,c){return c.value===md&&(c.value=Uh,c.value=c.factory()),"object"==typeof c.value&&c.value&&function Hv(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(l){if(!l.providedIn)return!1;const c=ae(l.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function Hm(a){const l=Or(a),c=null!==l?l.factory:yo(a);if(null!==c)return c;if(a instanceof Dn)throw new ke(204,!1);if(a instanceof Function)return function xA(a){const l=a.length;if(l>0)throw function aa(a,l){const c=[];for(let d=0;d<a;d++)c.push(l);return c}(l,"?"),new ke(204,!1);const c=function Gr(a){const l=a&&(a[ue]||a[we]);if(l){const c=function Di(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),l}return null}(a);return null!==c?()=>c.factory(a):()=>new a}(a);throw new ke(204,!1)}function kC(a,l,c){let d;if(tu(a)){const p=ae(a);return yo(p)||Hm(p)}if(Vv(a))d=()=>ae(a.useValue);else if(function Uv(a){return!(!a||!a.useFactory)}(a))d=()=>a.useFactory(...jt(a.deps||[]));else if(function mp(a){return!(!a||!a.useExisting)}(a))d=()=>ot(ae(a.useExisting));else{const p=ae(a&&(a.useClass||a.provide));if(!function jv(a){return!!a.deps}(a))return yo(p)||Hm(p);d=()=>new p(...jt(a.deps))}return d}function os(a,l,c=!1){return{factory:a,value:l,multi:c?[]:void 0}}function jh(a,l){for(const c of a)Array.isArray(c)?jh(c,l):c&&qe(c)?jh(c.\u0275providers,l):l(c)}class yp{}class nu{}class MA{resolveComponentFactory(l){throw function Hh(a){const l=Error(`No component factory found for ${Se(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let pc=(()=>{class a{}return a.NULL=new MA,a})();function kA(){return $h(kr(),Le())}function $h(a,l){return new ru(Vr(a,l))}let ru=(()=>{class a{constructor(c){this.nativeElement=c}}return a.__NG_ELEMENT_ID__=kA,a})();function vp(a){return a instanceof ru?a.nativeElement:a}class zv{}let $m=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function yd(){const a=Le(),c=Cr(kr().index,a);return(xi(c)?c:a)[11]}(),a})(),Wv=(()=>{class a{}return a.\u0275prov=Rt({token:a,providedIn:"root",factory:()=>null}),a})();class RC{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const fr=new RC("15.1.1"),xo={};function zm(a){return a.ngOriginalError}class wd{constructor(){this._console=console}handleError(l){const c=this._findOriginalError(l);this._console.error("ERROR",l),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(l){let c=l&&zm(l);for(;c&&zm(c);)c=zm(c);return c||null}}function gc(a){return a instanceof Function?a():a}function Zv(a,l,c){let d=a.length;for(;;){const p=a.indexOf(l,c);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const m=l.length;if(p+m===d||a.charCodeAt(p+m)<=32)return p}c=p+1}}const LC="ng-template";function NA(a,l,c){let d=0;for(;d<a.length;){let p=a[d++];if(c&&"class"===p){if(p=a[d],-1!==Zv(p.toLowerCase(),l,0))return!0}else if(1===p){for(;d<a.length&&"string"==typeof(p=a[d++]);)if(p.toLowerCase()===l)return!0;return!1}}return!1}function FC(a){return 4===a.type&&a.value!==LC}function LA(a,l,c){return l===(4!==a.type||c?a.value:LC)}function FA(a,l,c){let d=4;const p=a.attrs||[],m=function Zm(a){for(let l=0;l<a.length;l++)if(Gi(a[l]))return l;return a.length}(p);let w=!1;for(let C=0;C<l.length;C++){const x=l[C];if("number"!=typeof x){if(!w)if(4&d){if(d=2|1&d,""!==x&&!LA(a,x,c)||""===x&&1===l.length){if(Ba(d))return!1;w=!0}}else{const R=8&d?x:l[++C];if(8&d&&null!==a.attrs){if(!NA(a.attrs,R,c)){if(Ba(d))return!1;w=!0}continue}const q=Gm(8&d?"class":x,p,FC(a),c);if(-1===q){if(Ba(d))return!1;w=!0;continue}if(""!==R){let se;se=q>m?"":p[q+1].toLowerCase();const _e=8&d?se:null;if(_e&&-1!==Zv(_e,R,0)||2&d&&R!==se){if(Ba(d))return!1;w=!0}}}}else{if(!w&&!Ba(d)&&!Ba(x))return!1;if(w&&Ba(x))continue;w=!1,d=x|1&d}}return Ba(d)||w}function Ba(a){return 0==(1&a)}function Gm(a,l,c,d){if(null===l)return-1;let p=0;if(d||!c){let m=!1;for(;p<l.length;){const w=l[p];if(w===a)return p;if(3===w||6===w)m=!0;else{if(1===w||2===w){let C=l[++p];for(;"string"==typeof C;)C=l[++p];continue}if(4===w)break;if(0===w){p+=4;continue}}p+=m?1:2}return-1}return function VA(a,l){let c=a.indexOf(4);if(c>-1)for(c++;c<a.length;){const d=a[c];if("number"==typeof d)return-1;if(d===l)return c;c++}return-1}(l,a)}function qm(a,l,c=!1){for(let d=0;d<l.length;d++)if(FA(a,l[d],c))return!0;return!1}function Yv(a,l){return a?":not("+l.trim()+")":l}function UC(a){let l=a[0],c=1,d=2,p="",m=!1;for(;c<a.length;){let w=a[c];if("string"==typeof w)if(2&d){const C=a[++c];p+="["+w+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?p+="."+w:4&d&&(p+=" "+w);else""!==p&&!Ba(w)&&(l+=Yv(m,p),p=""),d=w,m=m||!Ba(d);c++}return""!==p&&(l+=Yv(m,p)),l}const hn={};function Km(a){BC(Cn(),Le(),mi()+a,!1)}function BC(a,l,c,d){if(!d)if(3==(3&l[2])){const m=a.preOrderCheckHooks;null!==m&&na(l,m,c)}else{const m=a.preOrderHooks;null!==m&&Fs(l,m,0,c)}Ls(c)}function Xm(a,l=null,c=null,d){const p=$C(a,l,c,d);return p.resolveInjectorInitializers(),p}function $C(a,l=null,c=null,d,p=new Set){const m=[c||dt,Bm(a)];return d=d||("object"==typeof a?void 0:Se(a)),new MC(m,l||Bh(),d||null,p)}let Ed=(()=>{class a{static create(c,d){if(Array.isArray(c))return Xm({name:""},d,c,"");{const p=c.name??"";return Xm({name:p},c.parent,c.providers,p)}}}return a.THROW_IF_NOT_FOUND=In,a.NULL=new Vh,a.\u0275prov=Rt({token:a,providedIn:"any",factory:()=>ot(TC)}),a.__NG_ELEMENT_ID__=-1,a})();function ou(a,l=xe.Default){const c=Le();return null===c?ot(a,l):Bf(kr(),c,ae(a),l)}function QC(){throw new Error("invalid")}function qh(a,l){const c=a.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const m=c[d+1];if(-1!==m){const w=a.data[m];Xl(c[d]),w.contentQueries(2,l[m],m)}}}function t_(a,l,c,d,p,m,w,C,x,R,F){const q=l.blueprint.slice();return q[0]=p,q[2]=76|d,(null!==F||a&&1024&a[2])&&(q[2]|=1024),ql(q),q[3]=q[15]=a,q[8]=c,q[10]=w||a&&a[10],q[11]=C||a&&a[11],q[12]=x||a&&a[12]||null,q[9]=R||a&&a[9]||null,q[6]=m,q[20]=function Cv(){return Xf++}(),q[21]=F,q[16]=2==l.type?a[16]:q,q}function yc(a,l,c,d,p){let m=a.data[l];if(null===m)m=function n_(a,l,c,d,p){const m=Kl(),w=Co(),x=a.data[l]=function o0(a,l,c,d,p,m){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,c,l,d,p);return null===a.firstChild&&(a.firstChild=x),null!==m&&(w?null==m.child&&null!==x.parent&&(m.child=x):null===m.next&&(m.next=x)),x}(a,l,c,d,p),function Yl(){return rn.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=c,m.value=d,m.attrs=p;const w=function Jo(){const a=rn.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return ns(m,!0),m}function bp(a,l,c,d){if(0===c)return-1;const p=l.length;for(let m=0;m<c;m++)l.push(d),a.blueprint.push(d),a.data.push(null);return p}function Ep(a,l,c){Ra(l);try{const d=a.viewQuery;null!==d&&Ip(1,d,c);const p=a.template;null!==p&&XC(a,l,p,1,c),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&qh(a,l),a.staticViewQueries&&Ip(2,a.viewQuery,c);const m=a.components;null!==m&&function eM(a,l){for(let c=0;c<l.length;c++)aM(a,l[c])}(l,m)}catch(d){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),d}finally{l[2]&=-5,Zu()}}function Cd(a,l,c,d){const p=l[2];if(128!=(128&p)){Ra(l);try{ql(l),function ta(a){return rn.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==c&&XC(a,l,c,2,d);const w=3==(3&p);if(w){const R=a.preOrderCheckHooks;null!==R&&na(l,R,null)}else{const R=a.preOrderHooks;null!==R&&Fs(l,R,0,null),vs(l,0)}if(function h0(a){for(let l=bs(a);null!==l;l=oo(l)){if(!l[2])continue;const c=l[9];for(let d=0;d<c.length;d++){const p=c[d];512&p[2]||ts(p[3],1),p[2]|=512}}}(l),function oM(a){for(let l=bs(a);null!==l;l=oo(l))for(let c=10;c<l.length;c++){const d=l[c],p=d[1];ys(d)&&Cd(p,d,p.template,d[8])}}(l),null!==a.contentQueries&&qh(a,l),w){const R=a.contentCheckHooks;null!==R&&na(l,R)}else{const R=a.contentHooks;null!==R&&Fs(l,R,1),vs(l,1)}!function au(a,l){const c=a.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const p=c[d];if(p<0)Ls(~p);else{const m=p,w=c[++d],C=c[++d];Ql(w,m),C(2,l[m])}}}finally{Ls(-1)}}(a,l);const C=a.components;null!==C&&function JA(a,l){for(let c=0;c<l.length;c++)h_(a,l[c])}(l,C);const x=a.viewQuery;if(null!==x&&Ip(2,x,d),w){const R=a.viewCheckHooks;null!==R&&na(l,R)}else{const R=a.viewHooks;null!==R&&Fs(l,R,2),vs(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[2]&=-41,512&l[2]&&(l[2]&=-513,ts(l[3],-1))}finally{Zu()}}}function XC(a,l,c,d,p){const m=mi(),w=2&d;try{Ls(-1),w&&l.length>22&&BC(a,l,22,!1),c(d,p)}finally{Ls(m)}}function lu(a,l,c){if(Rs(l)){const p=l.directiveEnd;for(let m=l.directiveStart;m<p;m++){const w=a.data[m];w.contentQueries&&w.contentQueries(1,c[m],m)}}}function r_(a,l,c){Bc()&&(function l0(a,l,c,d){const p=c.directiveStart,m=c.directiveEnd;Da(c)&&function rI(a,l,c){const d=Vr(l,a),p=r0(c),m=a[10],w=Mo(a,t_(a,p,null,c.onPush?32:16,d,l,m,m.createRenderer(d,c),null,null,null));a[l.index]=w}(l,c,a.data[p+c.componentOffset]),a.firstCreatePass||sa(c,l),Yi(d,l);const w=c.initialInputs;for(let C=p;C<m;C++){const x=a.data[C],R=Bs(l,a,C,c);Yi(R,l),null!==w&&d0(0,C-p,R,x,0,w),Fr(x)&&(Cr(c.index,l)[8]=Bs(l,a,C,c))}}(a,l,c,Vr(c,l)),64==(64&c.flags)&&c_(a,l,c))}function i_(a,l,c=Vr){const d=l.localNames;if(null!==d){let p=l.index+1;for(let m=0;m<d.length;m+=2){const w=d[m+1],C=-1===w?c(l,a):a[w];a[p++]=C}}}function r0(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=Id(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function Id(a,l,c,d,p,m,w,C,x,R){const F=22+d,q=F+p,se=function s_(a,l){const c=[];for(let d=0;d<l;d++)c.push(d<a?null:hn);return c}(F,q),_e="function"==typeof R?R():R;return se[1]={type:a,blueprint:se,template:c,queries:null,viewQuery:C,declTNode:l,data:se.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:x,consts:_e,incompleteFirstPass:!1}}function o_(a,l,c,d){const p=Kh(l);null===c?p.push(d):(p.push(c),a.firstCreatePass&&sI(a).push(d,p.length-1))}function JC(a,l,c,d){for(let p in a)if(a.hasOwnProperty(p)){c=null===c?{}:c;const m=a[p];null===d?Zh(c,l,p,m):d.hasOwnProperty(p)&&Zh(c,l,d[p],m)}return c}function Zh(a,l,c,d){a.hasOwnProperty(c)?a[c].push(l,d):a[c]=[l,d]}function Ao(a,l,c,d,p,m,w,C){const x=Vr(l,c);let F,R=l.inputs;!C&&null!=R&&(F=R[d])?(p0(a,c,F,d,p),Da(l)&&a_(c,l.index)):3&l.type&&(d=function nM(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(d),p=null!=w?w(p,l.value||"",d):p,m.setProperty(x,d,p))}function a_(a,l){const c=Cr(l,a);16&c[2]||(c[2]|=32)}function l_(a,l,c,d){let p=!1;if(Bc()){const m=null===d?null:{"":-1},w=function u_(a,l){const c=a.directiveRegistry;let d=null,p=null;if(c)for(let m=0;m<c.length;m++){const w=c[m];if(qm(l,w.selectors,!1))if(d||(d=[]),Fr(w))if(null!==w.findHostDirectiveDefs){const C=[];p=p||new Map,w.findHostDirectiveDefs(w,C,p),d.unshift(...C,w),vc(a,l,C.length)}else d.unshift(w),vc(a,l,0);else p=p||new Map,w.findHostDirectiveDefs?.(w,d,p),d.push(w)}return null===d?null:[d,p]}(a,c);let C,x;null===w?C=x=null:[C,x]=w,null!==C&&(p=!0,eI(a,l,c,C,m,x)),m&&function u0(a,l,c){if(l){const d=a.localNames=[];for(let p=0;p<l.length;p+=2){const m=c[l[p+1]];if(null==m)throw new ke(-301,!1);d.push(l[p],m)}}}(c,d,m)}return c.mergedAttrs=Vs(c.mergedAttrs,c.attrs),p}function eI(a,l,c,d,p,m){for(let R=0;R<d.length;R++)vh(sa(c,l),a,d[R].type);!function iM(a,l,c){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+c,a.providerIndexes=l}(c,a.data.length,d.length);for(let R=0;R<d.length;R++){const F=d[R];F.providersResolver&&F.providersResolver(F)}let w=!1,C=!1,x=bp(a,l,d.length,null);for(let R=0;R<d.length;R++){const F=d[R];c.mergedAttrs=Vs(c.mergedAttrs,F.hostAttrs),d_(a,c,l,x,F),nI(x,F,p),null!==F.contentQueries&&(c.flags|=4),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(c.flags|=64);const q=F.type.prototype;!w&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(c.index),w=!0),!C&&(q.ngOnChanges||q.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(c.index),C=!0),x++}!function tM(a,l,c){const p=l.directiveEnd,m=a.data,w=l.attrs,C=[];let x=null,R=null;for(let F=l.directiveStart;F<p;F++){const q=m[F],se=c?c.get(q):null,Fe=se?se.outputs:null;x=JC(q.inputs,F,x,se?se.inputs:null),R=JC(q.outputs,F,R,Fe);const lt=null===x||null===w||FC(l)?null:sM(x,F,w);C.push(lt)}null!==x&&(x.hasOwnProperty("class")&&(l.flags|=8),x.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=C,l.inputs=x,l.outputs=R}(a,c,m)}function c_(a,l,c){const d=c.directiveStart,p=c.directiveEnd,m=c.index,w=function Wu(){return rn.lFrame.currentDirectiveIndex}();try{Ls(m);for(let C=d;C<p;C++){const x=a.data[C],R=l[C];no(C),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&c0(x,R)}}finally{Ls(-1),no(w)}}function c0(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function vc(a,l,c){l.componentOffset=c,(a.components||(a.components=[])).push(l.index)}function nI(a,l,c){if(c){if(l.exportAs)for(let d=0;d<l.exportAs.length;d++)c[l.exportAs[d]]=a;Fr(l)&&(c[""]=a)}}function d_(a,l,c,d,p){a.data[d]=p;const m=p.factory||(p.factory=yo(p.type)),w=new io(m,Fr(p),ou);a.blueprint[d]=w,c[d]=w,function rM(a,l,c,d,p){const m=p.hostBindings;if(m){let w=a.hostBindingOpCodes;null===w&&(w=a.hostBindingOpCodes=[]);const C=~l.index;(function tI(a){let l=a.length;for(;l>0;){const c=a[--l];if("number"==typeof c&&c<0)return c}return 0})(w)!=C&&w.push(C),w.push(c,d,m)}}(a,l,d,bp(a,c,p.hostVars,hn),p)}function Tl(a,l,c,d,p,m){const w=Vr(a,l);!function Dd(a,l,c,d,p,m,w){if(null==m)a.removeAttribute(l,p,c);else{const C=null==w?je(m):w(m,d||"",p);a.setAttribute(l,p,C,c)}}(l[11],w,m,a.value,c,d,p)}function d0(a,l,c,d,p,m){const w=m[l];if(null!==w){const C=d.setInput;for(let x=0;x<w.length;){const R=w[x++],F=w[x++],q=w[x++];null!==C?d.setInput(c,q,R,F):c[F]=q}}}function sM(a,l,c){let d=null,p=0;for(;p<c.length;){const m=c[p];if(0!==m)if(5!==m){if("number"==typeof m)break;if(a.hasOwnProperty(m)){null===d&&(d=[]);const w=a[m];for(let C=0;C<w.length;C+=2)if(w[C]===l){d.push(m,w[C+1],c[p+1]);break}}p+=2}else p+=2;else p+=4}return d}function iI(a,l,c,d){return[a,!0,!1,l,null,0,d,c,null,null]}function h_(a,l){const c=Cr(l,a);if(ys(c)){const d=c[1];48&c[2]?Cd(d,c,d.template,c[8]):c[5]>0&&f_(c)}}function f_(a){for(let d=bs(a);null!==d;d=oo(d))for(let p=10;p<d.length;p++){const m=d[p];if(ys(m))if(512&m[2]){const w=m[1];Cd(w,m,w.template,m[8])}else m[5]>0&&f_(m)}const c=a[1].components;if(null!==c)for(let d=0;d<c.length;d++){const p=Cr(c[d],a);ys(p)&&p[5]>0&&f_(p)}}function aM(a,l){const c=Cr(l,a),d=c[1];(function Cp(a,l){for(let c=l.length;c<a.blueprint.length;c++)l.push(a.blueprint[c])})(d,c),Ep(d,c,c[8])}function Mo(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function Td(a){for(;a;){a[2]|=32;const l=Vt(a);if(ch(a)&&!l)return a;a=l}return null}function p_(a,l,c,d=!0){const p=l[10];p.begin&&p.begin();try{Cd(a,l,a.template,c)}catch(w){throw d&&f0(l,w),w}finally{p.end&&p.end()}}function Ip(a,l,c){Xl(0),l(a,c)}function Kh(a){return a[7]||(a[7]=[])}function sI(a){return a.cleanup||(a.cleanup=[])}function f0(a,l){const c=a[9],d=c?c.get(wd,null):null;d&&d.handleError(l)}function p0(a,l,c,d,p){for(let m=0;m<c.length;){const w=c[m++],C=c[m++],x=l[w],R=a.data[w];null!==R.setInput?R.setInput(x,p,d,C):x[C]=p}}function Dp(a,l,c){let d=c?a.styles:null,p=c?a.classes:null,m=0;if(null!==l)for(let w=0;w<l.length;w++){const C=l[w];"number"==typeof C?m=C:1==m?p=Re(p,C):2==m&&(d=Re(d,C+": "+l[++w]+";"))}c?a.styles=d:a.stylesWithoutHost=d,c?a.classes=p:a.classesWithoutHost=p}function Es(a,l,c,d,p=!1){for(;null!==c;){const m=l[c.index];if(null!==m&&d.push(sr(m)),Ai(m))for(let C=10;C<m.length;C++){const x=m[C],R=x[1].firstChild;null!==R&&Es(x[1],x,R,d)}const w=c.type;if(8&w)Es(a,l,c.child,d);else if(32&w){const C=Ke(c,l);let x;for(;x=C();)d.push(x)}else if(16&w){const C=fC(l,c);if(Array.isArray(C))d.push(...C);else{const x=Vt(l[16]);Es(x[1],x,C,d,!0)}}c=p?c.projectionNext:c.next}return d}class Yh{get rootNodes(){const l=this._lView,c=l[1];return Es(c,l,c.firstChild,[])}constructor(l,c){this._lView=l,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(Ai(l)){const c=l[8],d=c?c.indexOf(this):-1;d>-1&&(Dv(l,d),ic(c,d))}this._attachedToViewContainer=!1}Tv(this._lView[1],this._lView)}onDestroy(l){o_(this._lView[1],this._lView,null,l)}markForCheck(){Td(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){p_(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Rh(a,l){Ph(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new ke(902,!1);this._appRef=l}}class cM extends Yh{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;p_(l[1],l,l[8],!1)}checkNoChanges(){}get context(){return null}}class g0 extends pc{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const c=An(l);return new Qh(c,this.ngModule)}}function oI(a){const l=[];for(let c in a)a.hasOwnProperty(c)&&l.push({propName:a[c],templateName:c});return l}class dM{constructor(l,c){this.injector=l,this.parentInjector=c}get(l,c,d){d=$t(d);const p=this.injector.get(l,xo,d);return p!==xo||c===xo?p:this.parentInjector.get(l,c,d)}}class Qh extends nu{get inputs(){return oI(this.componentDef.inputs)}get outputs(){return oI(this.componentDef.outputs)}constructor(l,c){super(),this.componentDef=l,this.ngModule=c,this.componentType=l.type,this.selector=function UA(a){return a.map(UC).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!c}create(l,c,d,p){let m=(p=p||this.ngModule)instanceof _d?p:p?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const w=m?new dM(l,m):l,C=w.get(zv,null);if(null===C)throw new ke(407,!1);const x=w.get(Wv,null),R=C.createRenderer(null,this.componentDef),F=this.componentDef.selectors[0][0]||"div",q=d?function s0(a,l,c){return a.selectRootElement(l,c===Ge.ShadowDom)}(R,d,this.componentDef.encapsulation):hd(R,F,function uM(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(F)),se=this.componentDef.onPush?288:272,_e=Id(0,null,null,1,0,null,null,null,null,null),Fe=t_(null,_e,null,se,null,null,C,R,x,w,null);let lt,pt;Ra(Fe);try{const Lt=this.componentDef;let Xt,Qe=null;Lt.findHostDirectiveDefs?(Xt=[],Qe=new Map,Lt.findHostDirectiveDefs(Lt,Xt,Qe),Xt.push(Lt)):Xt=[Lt];const on=function aI(a,l){const c=a[1];return a[22]=l,yc(c,22,2,"#host",null)}(Fe,q),Rr=function fM(a,l,c,d,p,m,w,C){const x=p[1];!function m0(a,l,c,d){for(const p of a)l.mergedAttrs=Vs(l.mergedAttrs,p.hostAttrs);null!==l.mergedAttrs&&(Dp(l,l.mergedAttrs,!0),null!==c&&Mv(d,c,l))}(d,a,l,w);const R=m.createRenderer(l,c),F=t_(p,r0(c),null,c.onPush?32:16,p[a.index],a,m,R,C||null,null,null);return x.firstCreatePass&&vc(x,a,d.length-1),Mo(p,F),p[a.index]=F}(on,q,Lt,Xt,Fe,C,R);pt=ul(_e,22),q&&function pM(a,l,c,d){if(d)cr(a,c,["ng-version",fr.full]);else{const{attrs:p,classes:m}=function BA(a){const l=[],c=[];let d=1,p=2;for(;d<a.length;){let m=a[d];if("string"==typeof m)2===p?""!==m&&l.push(m,a[++d]):8===p&&c.push(m);else{if(!Ba(p))break;p=m}d++}return{attrs:l,classes:c}}(l.selectors[0]);p&&cr(a,c,p),m&&m.length>0&&Av(a,c,m.join(" "))}}(R,Lt,q,d),void 0!==c&&function _0(a,l,c){const d=a.projection=[];for(let p=0;p<l.length;p++){const m=c[p];d.push(null!=m?Array.from(m):null)}}(pt,this.ngContentSelectors,c),lt=function m_(a,l,c,d,p,m){const w=kr(),C=p[1],x=Vr(w,p);eI(C,p,w,c,null,d);for(let F=0;F<c.length;F++)Yi(Bs(p,C,w.directiveStart+F,w),p);c_(C,p,w),x&&Yi(x,p);const R=Bs(p,C,w.directiveStart+w.componentOffset,w);if(a[8]=p[8]=R,null!==m)for(const F of m)F(R,l);return lu(C,w,a),R}(Rr,Lt,Xt,Qe,Fe,[gM]),Ep(_e,Fe,null)}finally{Zu()}return new Tp(this.componentType,lt,$h(pt,Fe),Fe,pt)}}class Tp extends yp{constructor(l,c,d,p,m){super(),this.location=d,this._rootLView=p,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new cM(p),this.componentType=l}setInput(l,c){const d=this._tNode.inputs;let p;if(null!==d&&(p=d[l])){const m=this._rootLView;p0(m[1],m,p,l,c),a_(m,this._tNode.index)}}get injector(){return new oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function gM(){const a=kr();Pa(Le()[1],a)}function y0(a){let l=function lI(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),c=!0;const d=[a];for(;l;){let p;if(Fr(a))p=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new ke(903,!1);p=l.\u0275dir}if(p){if(c){d.push(p);const w=a;w.inputs=v0(a.inputs),w.declaredInputs=v0(a.declaredInputs),w.outputs=v0(a.outputs);const C=p.hostBindings;C&&w0(a,C);const x=p.viewQuery,R=p.contentQueries;if(x&&mM(a,x),R&&_M(a,R),Ne(a.inputs,p.inputs),Ne(a.declaredInputs,p.declaredInputs),Ne(a.outputs,p.outputs),Fr(p)&&p.data.animation){const F=a.data;F.animation=(F.animation||[]).concat(p.data.animation)}}const m=p.features;if(m)for(let w=0;w<m.length;w++){const C=m[w];C&&C.ngInherit&&C(a),C===y0&&(c=!1)}}l=Object.getPrototypeOf(l)}!function cI(a){let l=0,c=null;for(let d=a.length-1;d>=0;d--){const p=a[d];p.hostVars=l+=p.hostVars,p.hostAttrs=Vs(p.hostAttrs,c=Vs(c,p.hostAttrs))}}(d)}function v0(a){return a===Dt?{}:a===dt?[]:a}function mM(a,l){const c=a.viewQuery;a.viewQuery=c?(d,p)=>{l(d,p),c(d,p)}:l}function _M(a,l){const c=a.contentQueries;a.contentQueries=c?(d,p,m)=>{l(d,p,m),c(d,p,m)}:l}function w0(a,l){const c=a.hostBindings;a.hostBindings=c?(d,p)=>{l(d,p),c(d,p)}:l}let v_=null;function uu(){if(!v_){const a=Nt.Symbol;if(a&&a.iterator)v_=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<l.length;++c){const d=l[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(v_=d)}}}return v_}function Sp(a){return!!xp(a)&&(Array.isArray(a)||!(a instanceof Map)&&uu()in a)}function xp(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function Cs(a,l,c){return!Object.is(a[l],c)&&(a[l]=c,!0)}function E_(a,l,c,d){const p=Le();return Cs(p,rs(),l)&&(Cn(),Tl(Vn(),p,a,l,c,d)),E_}function Ad(a,l,c,d){return Cs(a,rs(),c)?l+je(c)+d:hn}function Mp(a,l,c,d,p,m,w,C){const x=Le(),R=Cn(),F=a+22,q=R.firstCreatePass?function Ap(a,l,c,d,p,m,w,C,x){const R=l.consts,F=yc(l,a,4,w||null,es(R,C));l_(l,c,F,es(R,x)),Pa(l,F);const q=F.tViews=Id(2,F,d,p,m,l.directiveRegistry,l.pipeRegistry,null,l.schemas,R);return null!==l.queries&&(l.queries.template(l,F),q.queries=l.queries.embeddedTView(F)),F}(F,R,x,l,c,d,p,m,w):R.data[F];ns(q,!1);const se=x[11].createComment("");Dm(R,x,se,q),Yi(se,x),Mo(x,x[F]=iI(se,x,se,q)),zl(q)&&r_(R,x,q),null!=w&&i_(x,q,C)}function I_(a){return function Os(a,l){return a[l]}(function ka(){return rn.lFrame.contextLView}(),22+a)}function D_(a,l,c){const d=Le();return Cs(d,rs(),l)&&Ao(Cn(),Vn(),d,a,l,d[11],c,!1),D_}function T_(a,l,c,d,p){const w=p?"class":"style";p0(a,c,l.inputs[w],w,d)}function Rp(a,l,c,d){const p=Le(),m=Cn(),w=22+a,C=p[11],x=p[w]=hd(C,l,function Wc(){return rn.lFrame.currentNamespace}()),R=m.firstCreatePass?function _I(a,l,c,d,p,m,w){const C=l.consts,R=yc(l,a,2,p,es(C,m));return l_(l,c,R,es(C,w)),null!==R.attrs&&Dp(R,R.attrs,!1),null!==R.mergedAttrs&&Dp(R,R.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,R),R}(w,m,p,0,l,c,d):m.data[w];return ns(R,!0),Mv(C,x,R),32!=(32&R.flags)&&Dm(m,p,x,R),0===function Qo(){return rn.lFrame.elementDepthCount}()&&Yi(x,p),function Uc(){rn.lFrame.elementDepthCount++}(),zl(R)&&(r_(m,p,R),lu(m,R,p)),null!==d&&i_(p,R),Rp}function Pp(){let a=kr();Co()?function hl(){rn.lFrame.isParent=!1}():(a=a.parent,ns(a,!1));const l=a;!function Xo(){rn.lFrame.elementDepthCount--}();const c=Cn();return c.firstCreatePass&&(Pa(c,a),Rs(a)&&c.queries.elementEnd(a)),null!=l.classesWithoutHost&&function We(a){return 0!=(8&a.flags)}(l)&&T_(c,l,Le(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Ct(a){return 0!=(16&a.flags)}(l)&&T_(c,l,Le(),l.stylesWithoutHost,!1),Pp}function Oo(a,l,c,d){return Rp(a,l,c,d),Pp(),Oo}function D0(){return Le()}function T0(a){return!!a&&"function"==typeof a.then}function wI(a){return!!a&&"function"==typeof a.subscribe}const bI=wI;function S0(a,l,c,d){const p=Le(),m=Cn(),w=kr();return function CI(a,l,c,d,p,m,w){const C=zl(d),R=a.firstCreatePass&&sI(a),F=l[8],q=Kh(l);let se=!0;if(3&d.type||w){const lt=Vr(d,l),pt=w?w(lt):lt,Lt=q.length,Xt=w?on=>w(sr(on[d.index])):d.index;let Qe=null;if(!w&&C&&(Qe=function CM(a,l,c,d){const p=a.cleanup;if(null!=p)for(let m=0;m<p.length-1;m+=2){const w=p[m];if(w===c&&p[m+1]===d){const C=l[7],x=p[m+2];return C.length>x?C[x]:null}"string"==typeof w&&(m+=2)}return null}(a,l,p,d.index)),null!==Qe)(Qe.__ngLastListenerFn__||Qe).__ngNextListenerFn__=m,Qe.__ngLastListenerFn__=m,se=!1;else{m=DI(d,l,F,m,!1);const on=c.listen(pt,p,m);q.push(m,on),R&&R.push(p,Xt,Lt,Lt+1)}}else m=DI(d,l,F,m,!1);const _e=d.outputs;let Fe;if(se&&null!==_e&&(Fe=_e[p])){const lt=Fe.length;if(lt)for(let pt=0;pt<lt;pt+=2){const Rr=l[Fe[pt]][Fe[pt+1]].subscribe(m),yi=q.length;q.push(m,Rr),R&&R.push(p,d.index,yi,-(yi+1))}}}(m,p,p[11],w,a,l,d),S0}function II(a,l,c,d){try{return!1!==c(d)}catch(p){return f0(a,p),!1}}function DI(a,l,c,d,p){return function m(w){if(w===Function)return d;Td(a.componentOffset>-1?Cr(a.index,l):l);let x=II(l,0,d,w),R=m.__ngNextListenerFn__;for(;R;)x=II(l,0,R,w)&&x,R=R.__ngNextListenerFn__;return p&&!1===x&&(w.preventDefault(),w.returnValue=!1),x}}function TI(a=1){return function mh(a){return(rn.lFrame.contextLView=function zc(a,l){for(;a>0;)l=l[15],a--;return l}(a,rn.lFrame.contextLView))[8]}(a)}function x0(a,l,c){return A0(a,"",l,"",c),x0}function A0(a,l,c,d,p){const m=Le(),w=Ad(m,l,c,d);return w!==hn&&Ao(Cn(),Vn(),m,a,w,m[11],p,!1),A0}function x_(a,l){return a<<17|l<<2}function pu(a){return a>>17&32767}function A_(a){return 2|a}function kd(a){return(131068&a)>>2}function R0(a,l){return-131069&a|l<<2}function M_(a){return 1|a}function kI(a,l,c,d,p){const m=a[c+1],w=null===l;let C=d?pu(m):kd(m),x=!1;for(;0!==C&&(!1===x||w);){const F=a[C+1];kM(a[C],l)&&(x=!0,a[C+1]=d?M_(F):A_(F)),C=d?pu(F):kd(F)}x&&(a[c+1]=d?A_(m):M_(m))}function kM(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&di(a,l)>=0}function zs(a,l,c){return Qi(a,l,c,!1),zs}function Pd(a,l){return Qi(a,l,null,!0),Pd}function Qi(a,l,c,d){const p=Le(),m=Cn(),w=function Ns(a){const l=rn.lFrame,c=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,c}(2);m.firstUpdatePass&&function FI(a,l,c,d){const p=a.data;if(null===p[c+1]){const m=p[mi()],w=function LI(a,l){return l>=a.expandoStartIndex}(a,c);(function N0(a,l){return 0!=(a.flags&(l?8:16))})(m,d)&&null===l&&!w&&(l=!1),l=function VI(a,l,c,d){const p=function ro(a){const l=rn.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}(a);let m=d?l.residualClasses:l.residualStyles;if(null===p)0===(d?l.classBindings:l.styleBindings)&&(c=Cc(c=Ml(null,a,l,c,d),l.attrs,d),m=null);else{const w=l.directiveStylingLast;if(-1===w||a[w]!==p)if(c=Ml(p,a,l,c,d),null===m){let x=function BM(a,l,c){const d=c?l.classBindings:l.styleBindings;if(0!==kd(d))return a[pu(d)]}(a,l,d);void 0!==x&&Array.isArray(x)&&(x=Ml(null,a,l,x[1],d),x=Cc(x,l.attrs,d),function k_(a,l,c,d){a[pu(c?l.classBindings:l.styleBindings)]=d}(a,l,d,x))}else m=function ja(a,l,c){let d;const p=l.directiveEnd;for(let m=1+l.directiveStylingLast;m<p;m++)d=Cc(d,a[m].hostAttrs,c);return Cc(d,l.attrs,c)}(a,l,d)}return void 0!==m&&(d?l.residualClasses=m:l.residualStyles=m),c}(p,m,l,d),function AM(a,l,c,d,p,m){let w=m?l.classBindings:l.styleBindings,C=pu(w),x=kd(w);a[d]=c;let F,R=!1;if(Array.isArray(c)?(F=c[1],(null===F||di(c,F)>0)&&(R=!0)):F=c,p)if(0!==x){const se=pu(a[C+1]);a[d+1]=x_(se,C),0!==se&&(a[se+1]=R0(a[se+1],d)),a[C+1]=function xM(a,l){return 131071&a|l<<17}(a[C+1],d)}else a[d+1]=x_(C,0),0!==C&&(a[C+1]=R0(a[C+1],d)),C=d;else a[d+1]=x_(x,0),0===C?C=d:a[x+1]=R0(a[x+1],d),x=d;R&&(a[d+1]=A_(a[d+1])),kI(a,F,d,!0),kI(a,F,d,!1),function MM(a,l,c,d,p){const m=p?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof l&&di(m,l)>=0&&(c[d+1]=M_(c[d+1]))}(l,F,a,d,m),w=x_(C,x),m?l.classBindings=w:l.styleBindings=w}(p,m,l,c,w,d)}}(m,a,w,d),l!==hn&&Cs(p,w,l)&&function kl(a,l,c,d,p,m,w,C){if(!(3&l.type))return;const x=a.data,R=x[C+1],F=function lL(a){return 1==(1&a)}(R)?P_(x,l,c,p,kd(R),w):void 0;Op(F)||(Op(m)||function SM(a){return 2==(2&a)}(R)&&(m=P_(x,null,c,p,C,w)),function gC(a,l,c,d,p){if(l)p?a.addClass(c,d):a.removeClass(c,d);else{let m=-1===d.indexOf("-")?void 0:ws.DashCase;null==p?a.removeStyle(c,d,m):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),m|=ws.Important),a.setStyle(c,d,p,m))}}(d,w,eo(mi(),c),p,m))}(m,m.data[mi()],p,p[11],a,p[w+1]=function O0(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=Se(ha(a)))),a}(l,c),d,w)}function Ml(a,l,c,d,p){let m=null;const w=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<w&&(m=l[C],d=Cc(d,m.hostAttrs,p),m!==a);)C++;return null!==a&&(c.directiveStylingLast=C),d}function Cc(a,l,c){const d=c?1:2;let p=-1;if(null!==l)for(let m=0;m<l.length;m++){const w=l[m];"number"==typeof w?p=w:p===d&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Zi(a,w,!!c||l[++m]))}return void 0===a?null:a}function P_(a,l,c,d,p,m){const w=null===l;let C;for(;p>0;){const x=a[p],R=Array.isArray(x),F=R?x[1]:x,q=null===F;let se=c[p+1];se===hn&&(se=q?dt:void 0);let _e=q?Dr(se,d):F===d?se:void 0;if(R&&!Op(_e)&&(_e=Dr(x,d)),Op(_e)&&(C=_e,w))return C;const Fe=a[p+1];p=w?pu(Fe):kd(Fe)}if(null!==l){let x=m?l.residualClasses:l.residualStyles;null!=x&&(C=Dr(x,d))}return C}function Op(a){return void 0!==a}function Np(a,l=""){const c=Le(),d=Cn(),p=a+22,m=d.firstCreatePass?yc(d,p,1,l,null):d.data[p],w=c[p]=function Jc(a,l){return a.createText(l)}(c[11],l);Dm(d,c,w,m),ns(m,!1)}function L0(a){return F0("",a,""),L0}function F0(a,l,c){const d=Le(),p=Ad(d,a,l,c);return p!==hn&&function fa(a,l,c){const d=eo(l,a);!function np(a,l,c){a.setValue(l,c)}(a[11],d,c)}(d,mi(),p),F0}const Od=void 0;var JM=["en",[["a","p"],["AM","PM"],Od],[["AM","PM"],Od,Od],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Od,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Od,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Od,"{1} 'at' {0}",Od],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function XM(a){const c=Math.floor(Math.abs(a)),d=a.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Jh={};function B_(a){const l=function ek(a){return a.toLowerCase().replace(/_/g,"-")}(a);let c=ZI(l);if(c)return c;const d=l.split("-")[0];if(c=ZI(d),c)return c;if("en"===d)return JM;throw new ke(701,!1)}function H0(a){return B_(a)[Qt.PluralCase]}function ZI(a){return a in Jh||(Jh[a]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[a]),Jh[a]}var Qt=(()=>((Qt=Qt||{})[Qt.LocaleId=0]="LocaleId",Qt[Qt.DayPeriodsFormat=1]="DayPeriodsFormat",Qt[Qt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qt[Qt.DaysFormat=3]="DaysFormat",Qt[Qt.DaysStandalone=4]="DaysStandalone",Qt[Qt.MonthsFormat=5]="MonthsFormat",Qt[Qt.MonthsStandalone=6]="MonthsStandalone",Qt[Qt.Eras=7]="Eras",Qt[Qt.FirstDayOfWeek=8]="FirstDayOfWeek",Qt[Qt.WeekendRange=9]="WeekendRange",Qt[Qt.DateFormat=10]="DateFormat",Qt[Qt.TimeFormat=11]="TimeFormat",Qt[Qt.DateTimeFormat=12]="DateTimeFormat",Qt[Qt.NumberSymbols=13]="NumberSymbols",Qt[Qt.NumberFormats=14]="NumberFormats",Qt[Qt.CurrencyCode=15]="CurrencyCode",Qt[Qt.CurrencySymbol=16]="CurrencySymbol",Qt[Qt.CurrencyName=17]="CurrencyName",Qt[Qt.Currencies=18]="Currencies",Qt[Qt.Directionality=19]="Directionality",Qt[Qt.PluralCase=20]="PluralCase",Qt[Qt.ExtraData=21]="ExtraData",Qt))();const Nd="en-US";let j_=Nd;function dw(a,l,c,d,p){if(a=ae(a),Array.isArray(a))for(let m=0;m<a.length;m++)dw(a[m],l,c,d,p);else{const m=Cn(),w=Le();let C=tu(a)?a:ae(a.provide),x=kC(a);const R=kr(),F=1048575&R.providerIndexes,q=R.directiveStart,se=R.providerIndexes>>20;if(tu(a)||!a.multi){const _e=new io(x,p,ou),Fe=hw(C,l,p?F:F+se,q);-1===Fe?(vh(sa(R,w),m,C),Z_(m,a,l.length),l.push(C),R.directiveStart++,R.directiveEnd++,p&&(R.providerIndexes+=1048576),c.push(_e),w.push(_e)):(c[Fe]=_e,w[Fe]=_e)}else{const _e=hw(C,l,F+se,q),Fe=hw(C,l,F,F+se),pt=Fe>=0&&c[Fe];if(p&&!pt||!p&&!(_e>=0&&c[_e])){vh(sa(R,w),m,C);const Lt=function hk(a,l,c,d,p){const m=new io(a,c,ou);return m.multi=[],m.index=l,m.componentProviders=0,wD(m,p,d&&!c),m}(p?ED:bD,c.length,p,d,x);!p&&pt&&(c[Fe].providerFactory=Lt),Z_(m,a,l.length,0),l.push(C),R.directiveStart++,R.directiveEnd++,p&&(R.providerIndexes+=1048576),c.push(Lt),w.push(Lt)}else Z_(m,a,_e>-1?_e:Fe,wD(c[p?Fe:_e],x,!p&&d));!p&&d&&pt&&c[Fe].componentProviders++}}}function Z_(a,l,c,d){const p=tu(l),m=function jm(a){return!!a.useClass}(l);if(p||m){const x=(m?ae(l.useClass):l).prototype.ngOnDestroy;if(x){const R=a.destroyHooks||(a.destroyHooks=[]);if(!p&&l.multi){const F=R.indexOf(c);-1===F?R.push(c,[d,x]):R[F+1].push(d,x)}else R.push(c,x)}}}function wD(a,l,c){return c&&a.componentProviders++,a.multi.push(l)-1}function hw(a,l,c,d){for(let p=c;p<d;p++)if(l[p]===a)return p;return-1}function bD(a,l,c,d){return K_(this.multi,[])}function ED(a,l,c,d){const p=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,C=Bs(c,c[1],this.providerFactory.index,d);m=C.slice(0,w),K_(p,m);for(let x=w;x<C.length;x++)m.push(C[x])}else m=[],K_(p,m);return m}function K_(a,l){for(let c=0;c<a.length;c++)l.push((0,a[c])());return l}function CD(a,l=[]){return c=>{c.providersResolver=(d,p)=>function zp(a,l,c){const d=Cn();if(d.firstCreatePass){const p=Fr(a);dw(c,d.data,d.blueprint,p,!0),dw(l,d.data,d.blueprint,p,!1)}}(d,p?p(a):a,l)}}class ef{}class fw{}function fk(a,l){return new pw(a,l??null)}class pw extends ef{constructor(l,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new g0(this);const d=pi(l);this._bootstrapComponents=gc(d.bootstrap),this._r3Injector=$C(l,c,[{provide:ef,useValue:this},{provide:pc,useValue:this.componentFactoryResolver}],Se(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class gw extends fw{constructor(l){super(),this.moduleType=l}create(l){return new pw(this.moduleType,l)}}class pk extends ef{constructor(l,c,d){super(),this.componentFactoryResolver=new g0(this),this.instance=null;const p=new MC([...l,{provide:ef,useValue:this},{provide:pc,useValue:this.componentFactoryResolver}],c||Bh(),d,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function mw(a,l,c=null){return new pk(a,l,c).injector}let ID=(()=>{class a{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const d=SC(0,c.type),p=d.length>0?mw([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,p)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=Rt({token:a,providedIn:"environment",factory:()=>new a(ot(_d))}),a})();function DD(a){a.getStandaloneInjector=l=>l.get(ID).getOrCreateStandaloneInjector(a)}function PD(a,l,c){const d=function Kr(){const a=rn.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}()+a,p=Le();return p[d]===hn?function Sl(a,l,c){return a[l]=c}(p,d,c?l.call(c):l()):function xd(a,l){return a[l]}(p,d)}function X_(a){return l=>{setTimeout(a,void 0,l)}}const $a=class VD extends f.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,c,d){let p=l,m=c||(()=>null),w=d;if(l&&"object"==typeof l){const x=l;p=x.next?.bind(x),m=x.error?.bind(x),w=x.complete?.bind(x)}this.__isAsync&&(m=X_(m),p&&(p=X_(p)),w&&(w=X_(w)));const C=super.subscribe({next:p,error:m,complete:w});return l instanceof G.w0&&l.add(C),C}};function NL(){return this._results[uu()]()}class Li{get changes(){return this._changes||(this._changes=new $a)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=uu(),d=Li.prototype;d[c]||(d[c]=NL)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,c){return this._results.reduce(l,c)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,c){const d=this;d.dirty=!1;const p=function ki(a){return a.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function od(a,l,c){if(a.length!==l.length)return!1;for(let d=0;d<a.length;d++){let p=a[d],m=l[d];if(c&&(p=c(p),m=c(m)),m!==p)return!1}return!0}(d._results,p,c))&&(d._results=p,d.length=p.length,d.last=p[this.length-1],d.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let _a=(()=>{class a{}return a.__NG_ELEMENT_ID__=UD,a})();const J_=_a,Dk=class extends J_{constructor(l,c,d){super(),this._declarationLView=l,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(l,c){const d=this._declarationTContainer.tViews,p=t_(this._declarationLView,d,l,16,null,d.declTNode,null,null,null,null,c||null);p[17]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[19];return null!==w&&(p[19]=w.createEmbeddedView(d)),Ep(d,p,l),new Yh(p)}};function UD(){return Zp(kr(),Le())}function Zp(a,l){return 4&a.type?new Dk(l,a,$h(a,l)):null}let ey=(()=>{class a{}return a.__NG_ELEMENT_ID__=BD,a})();function BD(){return mu(kr(),Le())}const Tk=ey,Cw=class extends Tk{constructor(l,c,d){super(),this._lContainer=l,this._hostTNode=c,this._hostLView=d}get element(){return $h(this._hostTNode,this._hostLView)}get injector(){return new oa(this._hostTNode,this._hostLView)}get parentInjector(){const l=ec(this._hostTNode,this._hostLView);if(Xu(l)){const c=Oa(l,this._hostLView),d=Jl(l);return new oa(c[1].data[d+8],c)}return new oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const c=Iw(this._lContainer);return null!==c&&c[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,c,d){let p,m;"number"==typeof d?p=d:null!=d&&(p=d.index,m=d.injector);const w=l.createEmbeddedView(c||{},m);return this.insert(w,p),w}createComponent(l,c,d,p,m){const w=l&&!function Yc(a){return"function"==typeof a}(l);let C;if(w)C=c;else{const q=c||{};C=q.index,d=q.injector,p=q.projectableNodes,m=q.environmentInjector||q.ngModuleRef}const x=w?l:new Qh(An(l)),R=d||this.parentInjector;if(!m&&null==x.ngModule){const se=(w?R:this.parentInjector).get(_d,null);se&&(m=se)}const F=x.create(R,p,void 0,m);return this.insert(F.hostView,C),F}insert(l,c){const d=l._lView,p=d[1];if(function Bu(a){return Ai(a[3])}(d)){const F=this.indexOf(l);if(-1!==F)this.detach(F);else{const q=d[3],se=new Cw(q,q[6],q[3]);se.detach(se.indexOf(l))}}const m=this._adjustIndex(c),w=this._lContainer;!function Iv(a,l,c,d){const p=10+d,m=c.length;d>0&&(c[p-1][4]=l),d<m-10?(l[4]=c[p],ad(c,10+d,l)):(c.push(l),l[4]=null),l[3]=c;const w=l[17];null!==w&&c!==w&&function sp(a,l){const c=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===c?a[9]=[l]:c.push(l)}(w,l);const C=l[19];null!==C&&C.insertView(a),l[2]|=64}(p,d,w,m);const C=Tm(m,w),x=d[11],R=ap(x,w[7]);return null!==R&&function ip(a,l,c,d,p,m){d[0]=p,d[6]=l,Ph(a,d,c,1,p,m)}(p,w[6],x,d,R,C),l.attachToViewContainerRef(),ad(nf(w),m,l),l}move(l,c){return this.insert(l,c)}indexOf(l){const c=Iw(this._lContainer);return null!==c?c.indexOf(l):-1}remove(l){const c=this._adjustIndex(l,-1),d=Dv(this._lContainer,c);d&&(ic(nf(this._lContainer),c),Tv(d[1],d))}detach(l){const c=this._adjustIndex(l,-1),d=Dv(this._lContainer,c);return d&&null!=ic(nf(this._lContainer),c)?new Yh(d):null}_adjustIndex(l,c=0){return l??this.length+c}};function Iw(a){return a[8]}function nf(a){return a[8]||(a[8]=[])}function mu(a,l){let c;const d=l[a.index];if(Ai(d))c=d;else{let p;if(8&a.type)p=sr(d);else{const m=l[11];p=m.createComment("");const w=Vr(a,l);dc(m,ap(m,w),p,function pA(a,l){return a.nextSibling(l)}(m,w),!1)}l[a.index]=c=iI(d,l,p,a),Mo(l,c)}return new Cw(c,a,l)}class Tn{constructor(l){this.queryList=l,this.matches=null}clone(){return new Tn(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vd{constructor(l=[]){this.queries=l}createEmbeddedView(l){const c=l.queries;if(null!==c){const d=null!==l.contentQueries?l.contentQueries[0]:c.length,p=[];for(let m=0;m<d;m++){const w=c.getByIndex(m);p.push(this.queries[w.indexInDeclarationView].clone())}return new Vd(p)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let c=0;c<this.queries.length;c++)null!==WD(l,c).matches&&this.queries[c].setDirty()}}class jD{constructor(l,c,d=null){this.predicate=l,this.flags=c,this.read=d}}class Tc{constructor(l=[]){this.queries=l}elementStart(l,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(l,c)}elementEnd(l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(l)}embeddedTView(l){let c=null;for(let d=0;d<this.length;d++){const p=null!==c?c.length:0,m=this.getByIndex(d).embeddedTView(l,p);m&&(m.indexInDeclarationView=d,null!==c?c.push(m):c=[m])}return null!==c?new Tc(c):null}template(l,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(l,c)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Dw{constructor(l,c=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(l,c){this.isApplyingToNode(c)&&this.matchTNode(l,c)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,c){this.elementStart(l,c)}embeddedTView(l,c){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,c),new Dw(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=l.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(l,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let p=0;p<d.length;p++){const m=d[p];this.matchTNodeWithReadOption(l,c,Kp(c,m)),this.matchTNodeWithReadOption(l,c,tc(c,l,m,!1,!1))}else d===_a?4&c.type&&this.matchTNodeWithReadOption(l,c,-1):this.matchTNodeWithReadOption(l,c,tc(c,l,d,!1,!1))}matchTNodeWithReadOption(l,c,d){if(null!==d){const p=this.metadata.read;if(null!==p)if(p===ru||p===ey||p===_a&&4&c.type)this.addMatch(c.index,-2);else{const m=tc(c,l,p,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,d)}}addMatch(l,c){null===this.matches?this.matches=[l,c]:this.matches.push(l,c)}}function Kp(a,l){const c=a.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===l)return c[d+1];return null}function Sk(a,l,c,d){return-1===c?function Tw(a,l){return 11&a.type?$h(a,l):4&a.type?Zp(a,l):null}(l,a):-2===c?function ty(a,l,c){return c===ru?$h(l,a):c===_a?Zp(l,a):c===ey?mu(l,a):void 0}(a,l,d):Bs(a,a[1],c,l)}function rf(a,l,c,d){const p=l[19].queries[d];if(null===p.matches){const m=a.data,w=c.matches,C=[];for(let x=0;x<w.length;x+=2){const R=w[x];C.push(R<0?null:Sk(l,m[R],w[x+1],c.metadata.read))}p.matches=C}return p.matches}function ny(a,l,c,d){const p=a.queries.getByIndex(c),m=p.matches;if(null!==m){const w=rf(a,l,p,c);for(let C=0;C<m.length;C+=2){const x=m[C];if(x>0)d.push(w[C/2]);else{const R=m[C+1],F=l[-x];for(let q=10;q<F.length;q++){const se=F[q];se[17]===se[3]&&ny(se[1],se,R,d)}if(null!==F[9]){const q=F[9];for(let se=0;se<q.length;se++){const _e=q[se];ny(_e[1],_e,R,d)}}}}}return d}function Yp(a){const l=Le(),c=Cn(),d=Gu();Xl(d+1);const p=WD(c,d);if(a.dirty&&function dl(a){return 4==(4&a[2])}(l)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const m=p.crossesNgTemplate?ny(c,l,d,[]):rf(c,l,p,d);a.reset(m,vp),a.notifyOnChanges()}return!0}return!1}function HD(a,l,c){const d=Cn();d.firstCreatePass&&(zD(d,new jD(a,l,c),-1),2==(2&l)&&(d.staticViewQueries=!0)),Sw(d,Le(),l)}function ry(a,l,c,d){const p=Cn();if(p.firstCreatePass){const m=kr();zD(p,new jD(l,c,d),m.index),function xk(a,l){const c=a.contentQueries||(a.contentQueries=[]);l!==(c.length?c[c.length-1]:-1)&&c.push(a.queries.length-1,l)}(p,a),2==(2&c)&&(p.staticContentQueries=!0)}Sw(p,Le(),c)}function Qp(){return function $D(a,l){return a[19].queries[l].queryList}(Le(),Gu())}function Sw(a,l,c){const d=new Li(4==(4&c));o_(a,l,d,d.destroy),null===l[19]&&(l[19]=new Vd),l[19].queries.push(new Tn(d))}function zD(a,l,c){null===a.queries&&(a.queries=new Tc),a.queries.track(new Dw(l,c))}function WD(a,l){return a.queries.getByIndex(l)}function Sc(...a){}const Pw=new Dn("Application Initializer");let sy=(()=>{class a{constructor(c){this.appInits=c,this.resolve=Sc,this.reject=Sc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,p)=>{this.resolve=d,this.reject=p})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const m=this.appInits[p]();if(T0(m))c.push(m);else if(bI(m)){const w=new Promise((C,x)=>{m.subscribe({complete:C,error:x})});c.push(w)}}Promise.all(c).then(()=>{d()}).catch(p=>{this.reject(p)}),0===c.length&&d(),this.initialized=!0}}return a.\u0275fac=function(c){return new(c||a)(ot(Pw,8))},a.\u0275prov=Rt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Ud=new Dn("AppId",{providedIn:"root",factory:function Ow(){return`${af()}${af()}${af()}`}});function af(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Nw=new Dn("Platform Initializer"),Lw=new Dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Fw=new Dn("appBootstrapListener");let Hk=(()=>{class a{log(c){console.log(c)}warn(c){console.warn(c)}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=Rt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const oy=new Dn("LocaleId",{providedIn:"root",factory:()=>mt(oy,xe.Optional|xe.SkipSelf)||function og(){return typeof $localize<"u"&&$localize.locale||Nd}()}),$k=new Dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class pT{constructor(l,c){this.ngModuleFactory=l,this.componentFactories=c}}let gT=(()=>{class a{compileModuleSync(c){return new gw(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),m=gc(pi(c).declarations).reduce((w,C)=>{const x=An(C);return x&&w.push(new Qh(x)),w},[]);return new pT(d,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=Rt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const _T=(()=>Promise.resolve(0))();function yT(a){typeof Zone>"u"?_T.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class Wa{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $a(!1),this.onMicrotaskEmpty=new $a(!1),this.onStable=new $a(!1),this.onError=new $a(!1),typeof Zone>"u")throw new ke(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!d&&c,p.shouldCoalesceRunChangeDetection=d,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function $L(){let a=Nt.requestAnimationFrame,l=Nt.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c);const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function Zk(a){const l=()=>{!function qk(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Nt,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,lg(a),a.isCheckStableRunning=!0,Uw(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),lg(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,p,m,w,C)=>{try{return Lo(a),c.invokeTask(p,m,w,C)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&l(),Bw(a)}},onInvoke:(c,d,p,m,w,C,x)=>{try{return Lo(a),c.invoke(p,m,w,C,x)}finally{a.shouldCoalesceRunChangeDetection&&l(),Bw(a)}},onHasTask:(c,d,p,m)=>{c.hasTask(p,m),d===p&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,lg(a),Uw(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,d,p,m)=>(c.handleError(p,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wa.isInAngularZone())throw new ke(909,!1)}static assertNotInAngularZone(){if(Wa.isInAngularZone())throw new ke(909,!1)}run(l,c,d){return this._inner.run(l,c,d)}runTask(l,c,d,p){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+p,l,Vw,Sc,Sc);try{return m.runTask(w,c,d)}finally{m.cancelTask(w)}}runGuarded(l,c,d){return this._inner.runGuarded(l,c,d)}runOutsideAngular(l){return this._outer.run(l)}}const Vw={};function Uw(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function lg(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function Lo(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function Bw(a){a._nesting--,Uw(a)}class cg{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $a,this.onMicrotaskEmpty=new $a,this.onStable=new $a,this.onError=new $a}run(l,c,d){return l.apply(c,d)}runGuarded(l,c,d){return l.apply(c,d)}runOutsideAngular(l){return l()}runTask(l,c,d,p){return l.apply(c,d)}}const vT=new Dn(""),wT=new Dn("");let jw,bT=(()=>{class a{constructor(c,d,p){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,jw||(function Kk(a){jw=a}(p),p.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wa.assertNotInAngularZone(),yT(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yT(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,p){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:p})}whenStable(c,d,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,p){return[]}}return a.\u0275fac=function(c){return new(c||a)(ot(Wa),ot(ug),ot(wT))},a.\u0275prov=Rt({token:a,factory:a.\u0275fac}),a})(),ug=(()=>{class a{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return jw?.findTestabilityInTree(this,c,d)??null}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=Rt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),Fo=null;const lf=new Dn("AllowMultipleToken"),Hw=new Dn("PlatformDestroyListeners");class Qk{constructor(l,c){this.name=l,this.token=c}}function e1(a,l,c=[]){const d=`Platform: ${l}`,p=new Dn(d);return(m=[])=>{let w=Eu();if(!w||w.injector.get(lf,!1)){const C=[...c,...m,{provide:p,useValue:!0}];a?a(C):function Xk(a){if(Fo&&!Fo.get(lf,!1))throw new ke(400,!1);Fo=a;const l=a.get(CT);(function ET(a){const l=a.get(Nw,null);l&&l.forEach(c=>c())})(a)}(function uy(a=[],l){return Ed.create({name:l,providers:[{provide:Bv,useValue:"platform"},{provide:Hw,useValue:new Set([()=>Fo=null])},...a]})}(C,d))}return function t1(a){const l=Eu();if(!l)throw new ke(401,!1);return l}()}}function Eu(){return Fo?.get(CT)??null}let CT=(()=>{class a{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const p=function DT(a,l){let c;return c="noop"===a?new cg:("zone.js"===a?void 0:a)||new Wa(l),c}(d?.ngZone,function IT(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(d)),m=[{provide:Wa,useValue:p}];return p.run(()=>{const w=Ed.create({providers:m,parent:this.injector,name:c.moduleType.name}),C=c.create(w),x=C.injector.get(wd,null);if(!x)throw new ke(402,!1);return p.runOutsideAngular(()=>{const R=p.onError.subscribe({next:F=>{x.handleError(F)}});C.onDestroy(()=>{hy(this._modules,C),R.unsubscribe()})}),function TT(a,l,c){try{const d=c();return T0(d)?d.catch(p=>{throw l.runOutsideAngular(()=>a.handleError(p)),p}):d}catch(d){throw l.runOutsideAngular(()=>a.handleError(d)),d}}(x,p,()=>{const R=C.injector.get(sy);return R.runInitializers(),R.donePromise.then(()=>(function QI(a){Gt(a,"Expected localeId to be defined"),"string"==typeof a&&(j_=a.toLowerCase().replace(/_/g,"-"))}(C.injector.get(oy,Nd)||Nd),this._moduleDoBootstrap(C),C))})})}bootstrapModule(c,d=[]){const p=ST({},d);return function dg(a,l,c){const d=new gw(c);return Promise.resolve(d)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,p))}_moduleDoBootstrap(c){const d=c.injector.get(dy);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(p=>d.bootstrap(p));else{if(!c.instance.ngDoBootstrap)throw new ke(-403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(Hw,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(c){return new(c||a)(ot(Ed))},a.\u0275prov=Rt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function ST(a,l){return Array.isArray(l)?l.reduce(ST,a):{...a,...l}}let dy=(()=>{class a{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(c,d,p){this._zone=c,this._injector=d,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new V.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),w=new V.y(C=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Wa.assertNotInAngularZone(),yT(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Wa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{x.unsubscribe(),R.unsubscribe()}});this.isStable=(0,pe.T)(m,w.pipe((0,ye.B)()))}bootstrap(c,d){const p=c instanceof nu;if(!this._injector.get(sy).done)throw!p&&mr(c),new ke(405,false);let w;w=p?c:this._injector.get(pc).resolveComponentFactory(c),this.componentTypes.push(w.componentType);const C=function Yk(a){return a.isBoundToModule}(w)?void 0:this._injector.get(ef),R=w.create(Ed.NULL,[],d||w.selector,C),F=R.location.nativeElement,q=R.injector.get(vT,null);return q?.registerApplication(F),R.onDestroy(()=>{this.detachView(R.hostView),hy(this.components,R),q?.unregisterApplication(F)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new ke(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;hy(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const d=this._injector.get(Fw,[]);d.push(...this._bootstrapListeners),d.forEach(p=>p(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>hy(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new ke(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(c){return new(c||a)(ot(Wa),ot(_d),ot(wd))},a.\u0275prov=Rt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function hy(a,l){const c=a.indexOf(l);c>-1&&a.splice(c,1)}function AT(){return!1}let py=(()=>{class a{}return a.__NG_ELEMENT_ID__=i1,a})();function i1(a){return function s1(a,l,c){if(Da(a)&&!c){const d=Cr(a.index,l);return new Yh(d,d)}return 47&a.type?new Yh(l[16],l):null}(kr(),Le(),16==(16&a))}class PT{constructor(){}supports(l){return Sp(l)}create(l){return new c1(l)}}const OT=(a,l)=>l;class c1{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||OT}forEachItem(l){let c;for(c=this._itHead;null!==c;c=c._next)l(c)}forEachOperation(l){let c=this._itHead,d=this._removalsHead,p=0,m=null;for(;c||d;){const w=!d||c&&c.currentIndex<Kw(d,p,m)?c:d,C=Kw(w,p,m),x=w.currentIndex;if(w===d)p--,d=d._nextRemoved;else if(c=c._next,null==w.previousIndex)p++;else{m||(m=[]);const R=C-p,F=x-p;if(R!=F){for(let se=0;se<R;se++){const _e=se<m.length?m[se]:m[se]=0,Fe=_e+se;F<=Fe&&Fe<R&&(m[se]=_e+1)}m[w.previousIndex]=F-R}}C!==x&&l(w,C,x)}}forEachPreviousItem(l){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachMovedItem(l){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}forEachIdentityChange(l){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)l(c)}diff(l){if(null==l&&(l=[]),!Sp(l))throw new ke(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let p,m,w,c=this._itHead,d=!1;if(Array.isArray(l)){this.length=l.length;for(let C=0;C<this.length;C++)m=l[C],w=this._trackByFn(C,m),null!==c&&Object.is(c.trackById,w)?(d&&(c=this._verifyReinsertion(c,m,w,C)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,w,C),d=!0),c=c._next}else p=0,function b0(a,l){if(Array.isArray(a))for(let c=0;c<a.length;c++)l(a[c]);else{const c=a[uu()]();let d;for(;!(d=c.next()).done;)l(d.value)}}(l,C=>{w=this._trackByFn(p,C),null!==c&&Object.is(c.trackById,w)?(d&&(c=this._verifyReinsertion(c,C,w,p)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,w,p),d=!0),c=c._next,p++}),this.length=p;return this._truncate(c),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,c,d,p){let m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._reinsertAfter(l,m,p)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(d,p))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._moveAfter(l,m,p)):l=this._addAfter(new NT(c,d),m,p),l}_verifyReinsertion(l,c,d,p){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?l=this._reinsertAfter(m,l._prev,p):l.currentIndex!=p&&(l.currentIndex=p,this._addToMoves(l,p)),l}_truncate(l){for(;null!==l;){const c=l._next;this._addToRemovals(this._unlink(l)),l=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const p=l._prevRemoved,m=l._nextRemoved;return null===p?this._removalsHead=m:p._nextRemoved=m,null===m?this._removalsTail=p:m._prevRemoved=p,this._insertAfter(l,c,d),this._addToMoves(l,d),l}_moveAfter(l,c,d){return this._unlink(l),this._insertAfter(l,c,d),this._addToMoves(l,d),l}_addAfter(l,c,d){return this._insertAfter(l,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,c,d){const p=null===c?this._itHead:c._next;return l._next=p,l._prev=c,null===p?this._itTail=l:p._prev=l,null===c?this._itHead=l:c._next=l,null===this._linkedRecords&&(this._linkedRecords=new u1),this._linkedRecords.put(l),l.currentIndex=d,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const c=l._prev,d=l._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,l}_addToMoves(l,c){return l.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new u1),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,c){return l.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class NT{constructor(l,c){this.item=l,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class LT{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,l))return d;return null}remove(l){const c=l._prevDup,d=l._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class u1{constructor(){this.map=new Map}put(l){const c=l.trackById;let d=this.map.get(c);d||(d=new LT,this.map.set(c,d)),d.add(l)}get(l,c){const p=this.map.get(l);return p?p.get(l,c):null}remove(l){const c=l.trackById;return this.map.get(c).remove(l)&&this.map.delete(c),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Kw(a,l,c){const d=a.previousIndex;if(null===d)return d;let p=0;return c&&d<c.length&&(p=c[d]),d+l+p}class Yw{constructor(){}supports(l){return l instanceof Map||xp(l)}create(){return new d1}}class d1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let c;for(c=this._mapHead;null!==c;c=c._next)l(c)}forEachPreviousItem(l){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)l(c)}forEachChangedItem(l){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}diff(l){if(l){if(!(l instanceof Map||xp(l)))throw new ke(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(l,(d,p)=>{if(c&&c.key===p)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(p,d);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,c){if(l){const d=l._prev;return c._next=l,c._prev=d,l._prev=c,d&&(d._next=c),l===this._mapHead&&(this._mapHead=c),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(l,c){if(this._records.has(l)){const p=this._records.get(l);this._maybeAddToChanges(p,c);const m=p._prev,w=p._next;return m&&(m._next=w),w&&(w._prev=m),p._next=null,p._prev=null,p}const d=new h1(l);return this._records.set(l,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,c){Object.is(c,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=c,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,c){l instanceof Map?l.forEach(c):Object.keys(l).forEach(d=>c(l[d],d))}}class h1{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function FT(){return new Qw([new PT])}let Qw=(()=>{class a{constructor(c){this.factories=c}static create(c,d){if(null!=d){const p=d.factories.slice();c=c.concat(p)}return new a(c)}static extend(c){return{provide:a,useFactory:d=>a.create(c,d||FT()),deps:[[a,new M,new bl]]}}find(c){const d=this.factories.find(p=>p.supports(c));if(null!=d)return d;throw new ke(901,!1)}}return a.\u0275prov=Rt({token:a,providedIn:"root",factory:FT}),a})();function VT(){return new yy([new Yw])}let yy=(()=>{class a{constructor(c){this.factories=c}static create(c,d){if(d){const p=d.factories.slice();c=c.concat(p)}return new a(c)}static extend(c){return{provide:a,useFactory:d=>a.create(c,d||VT()),deps:[[a,new M,new bl]]}}find(c){const d=this.factories.find(p=>p.supports(c));if(d)return d;throw new ke(901,!1)}}return a.\u0275prov=Rt({token:a,providedIn:"root",factory:VT}),a})();const Jw=e1(null,"core",[]);let g1=(()=>{class a{constructor(c){}}return a.\u0275fac=function(c){return new(c||a)(ot(dy))},a.\u0275mod=Go({type:a}),a.\u0275inj=Wr({}),a})();function UT(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}},1321:()=>{"use strict";class Gt extends Error{constructor(le){super(`No translation found for ${Sr(le)}.`),this.parsedMessage=le,this.type="MissingTranslationError"}}const Gr=function(ue,...le){if(Gr.translate){const Oe=Gr.translate(ue,le);ue=Oe[0],le=Oe[1]}let we=Bn(ue[0],ue.raw[0]);for(let Oe=1;Oe<ue.length;Oe++)we+=le[Oe-1]+Bn(ue[Oe],ue.raw[Oe]);return we};function Bn(ue,le){return":"===le.charAt(0)?ue.substring(function St(ue,le){for(let we=1,Oe=1;we<ue.length;we++,Oe++)if("\\"===le[Oe])Oe++;else if(":"===ue[we])return we;throw new Error(`Unterminated $localize metadata block in "${le}".`)}(ue,le)+1):ue}(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)().$localize=Gr},3942:(Tt,Ue,W)=>{"use strict";W.d(Ue,{Z:()=>ct});var f=W(2090),G=W(4859),V=W(9681),pe=W(1877);class ye{constructor(ke,Be){this._delegate=ke,this.firebase=Be,(0,V._addComponent)(ke,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this._delegate.automaticDataCollectionEnabled=ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ke=>{this._delegate.checkDestroyed(),ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(ke,Be=V._DEFAULT_ENTRY_NAME){var je;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(ke);return!Ze.isInitialized()&&"EXPLICIT"===(null===(je=Ze.getComponent())||void 0===je?void 0:je.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:Be})}_removeServiceInstance(ke,Be=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ke).clearInstance(Be)}_addComponent(ke){(0,V._addComponent)(this._delegate,ke)}_addOrOverwriteComponent(ke){(0,V._addOrOverwriteComponent)(this._delegate,ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ne=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),J=function Re(){const bt=function Se(bt){const ke={},Be={__esModule:!0,initializeApp:function Ye(z,Ee={}){const Me=V.initializeApp(z,Ee);if((0,f.r3)(ke,Me.name))return ke[Me.name];const oe=new bt(Me,Be);return ke[Me.name]=oe,oe},app:Ze,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function ze(z){const Ee=z.name,Me=Ee.replace("-compat","");if(V._registerComponent(z)&&"PUBLIC"===z.type){const oe=(re=Ze())=>{if("function"!=typeof re[Me])throw Ne.create("invalid-app-argument",{appName:Ee});return re[Me]()};void 0!==z.serviceProps&&(0,f.ZB)(oe,z.serviceProps),Be[Me]=oe,bt.prototype[Me]=function(...re){return this._getService.bind(this,Ee).apply(this,z.multipleInstances?re:[])}}return"PUBLIC"===z.type?Be[Me]:null},removeApp:function je(z){delete ke[z]},useAsService:function st(z,Ee){return"serverAuth"===Ee?null:Ee},modularAPIs:V}};function Ze(z){if(!(0,f.r3)(ke,z=z||V._DEFAULT_ENTRY_NAME))throw Ne.create("no-app",{appName:z});return ke[z]}return Be.default=Be,Object.defineProperty(Be,"apps",{get:function $e(){return Object.keys(ke).map(z=>ke[z])}}),Ze.App=bt,Be}(ye);return bt.INTERNAL=Object.assign(Object.assign({},bt.INTERNAL),{createFirebaseNamespace:Re,extendNamespace:function ke(Be){(0,f.ZB)(bt,Be)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),bt}(),ee=new pe.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const bt=self.firebase.SDK_VERSION;bt&&bt.indexOf("LITE")>=0&&ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ct=J;!function qe(bt){(0,V.registerVersion)("@firebase/app-compat","0.2.1",bt)}()},9681:(Tt,Ue,W)=>{"use strict";W.r(Ue),W.d(Ue,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>Gr,_DEFAULT_ENTRY_NAME:()=>Rn,_addComponent:()=>an,_addOrOverwriteComponent:()=>Qn,_apps:()=>Gt,_clearComponents:()=>Wr,_components:()=>Ut,_getProvider:()=>Rt,_registerComponent:()=>sn,_removeServiceInstance:()=>Sr,deleteApp:()=>le,getApp:()=>Bn,getApps:()=>ue,initializeApp:()=>Di,onLog:()=>xe,registerVersion:()=>Oe,setLogLevel:()=>ut});var f=W(5861),G=W(4859),V=W(1877),pe=W(2090),ye=W(8766);class Te{constructor(He){this.container=He}getPlatformInfoString(){return this.container.getProviders().map(mt=>{if(function Ne(ot){return"VERSION"===ot.getComponent()?.type}(mt)){const $t=mt.getImmediate();return`${$t.library}/${$t.version}`}return null}).filter(mt=>mt).join(" ")}}const Se="@firebase/app",J=new V.Yd("@firebase/app"),Rn="[DEFAULT]",St={[Se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gt=new Map,Ut=new Map;function an(ot,He){try{ot.container.addComponent(He)}catch(mt){J.debug(`Component ${He.name} failed to register with FirebaseApp ${ot.name}`,mt)}}function Qn(ot,He){ot.container.addOrOverwriteComponent(He)}function sn(ot){const He=ot.name;if(Ut.has(He))return J.debug(`There were multiple attempts to register component ${He}.`),!1;Ut.set(He,ot);for(const mt of Gt.values())an(mt,ot);return!0}function Rt(ot,He){const mt=ot.container.getProvider("heartbeat").getImmediate({optional:!0});return mt&&mt.triggerHeartbeat(),ot.container.getProvider(He)}function Sr(ot,He,mt=Rn){Rt(ot,He).clearInstance(mt)}function Wr(){Ut.clear()}const qn=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class oi{constructor(He,mt,$t){this._isDeleted=!1,this._options=Object.assign({},He),this._config=Object.assign({},mt),this._name=mt.name,this._automaticDataCollectionEnabled=mt.automaticDataCollectionEnabled,this._container=$t,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(He){this.checkDestroyed(),this._automaticDataCollectionEnabled=He}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(He){this._isDeleted=He}checkDestroyed(){if(this.isDeleted)throw qn.create("app-deleted",{appName:this._name})}}const Gr="9.16.0";function Di(ot,He={}){let mt=ot;"object"!=typeof He&&(He={name:He});const $t=Object.assign({name:Rn,automaticDataCollectionEnabled:!1},He),jt=$t.name;if("string"!=typeof jt||!jt)throw qn.create("bad-app-name",{appName:String(jt)});if(mt||(mt=(0,pe.aH)()),!mt)throw qn.create("no-options");const yn=Gt.get(jt);if(yn){if((0,pe.vZ)(mt,yn.options)&&(0,pe.vZ)($t,yn.config))return yn;throw qn.create("duplicate-app",{appName:jt})}const te=new G.H0(jt);for(const ie of Ut.values())te.addComponent(ie);const Q=new oi(mt,$t,te);return Gt.set(jt,Q),Q}function Bn(ot=Rn){const He=Gt.get(ot);if(!He&&ot===Rn)return Di();if(!He)throw qn.create("no-app",{appName:ot});return He}function ue(){return Array.from(Gt.values())}function le(ot){return we.apply(this,arguments)}function we(){return(we=(0,f.Z)(function*(ot){const He=ot.name;Gt.has(He)&&(Gt.delete(He),yield Promise.all(ot.container.getProviders().map(mt=>mt.delete())),ot.isDeleted=!0)})).apply(this,arguments)}function Oe(ot,He,mt){var $t;let jt=null!==($t=St[ot])&&void 0!==$t?$t:ot;mt&&(jt+=`-${mt}`);const yn=jt.match(/\s|\//),te=He.match(/\s|\//);if(yn||te){const Q=[`Unable to register library "${jt}" with version "${He}":`];return yn&&Q.push(`library name "${jt}" contains illegal characters (whitespace or "/")`),yn&&te&&Q.push("and"),te&&Q.push(`version name "${He}" contains illegal characters (whitespace or "/")`),void J.warn(Q.join(" "))}sn(new G.wA(`${jt}-version`,()=>({library:jt,version:He}),"VERSION"))}function xe(ot,He){if(null!==ot&&"function"!=typeof ot)throw qn.create("invalid-log-argument");(0,V.Am)(ot,He)}function ut(ot){(0,V.Ub)(ot)}const Ft="firebase-heartbeat-store";let fn=null;function Nt(){return fn||(fn=(0,ye.X3)("firebase-heartbeat-database",1,{upgrade:(ot,He)=>{0===He&&ot.createObjectStore(Ft)}}).catch(ot=>{throw qn.create("idb-open",{originalErrorMessage:ot.message})})),fn}function wt(){return(wt=(0,f.Z)(function*(ot){try{return(yield Nt()).transaction(Ft).objectStore(Ft).get(ln(ot))}catch(He){if(He instanceof pe.ZR)J.warn(He.message);else{const mt=qn.create("idb-get",{originalErrorMessage:He?.message});J.warn(mt.message)}}})).apply(this,arguments)}function Nn(ot,He){return In.apply(this,arguments)}function In(){return(In=(0,f.Z)(function*(ot,He){try{const $t=(yield Nt()).transaction(Ft,"readwrite");return yield $t.objectStore(Ft).put(He,ln(ot)),$t.done}catch(mt){if(mt instanceof pe.ZR)J.warn(mt.message);else{const $t=qn.create("idb-set",{originalErrorMessage:mt?.message});J.warn($t.message)}}})).apply(this,arguments)}function ln(ot){return`${ot.name}!${ot.options.appId}`}class ai{constructor(He){this.container=He,this._heartbeatsCache=null;const mt=this.container.getProvider("app").getImmediate();this._storage=new cn(mt),this._heartbeatsCachePromise=this._storage.read().then($t=>(this._heartbeatsCache=$t,$t))}triggerHeartbeat(){var He=this;return(0,f.Z)(function*(){const $t=He.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jt=Kt();if(null===He._heartbeatsCache&&(He._heartbeatsCache=yield He._heartbeatsCachePromise),He._heartbeatsCache.lastSentHeartbeatDate!==jt&&!He._heartbeatsCache.heartbeats.some(yn=>yn.date===jt))return He._heartbeatsCache.heartbeats.push({date:jt,agent:$t}),He._heartbeatsCache.heartbeats=He._heartbeatsCache.heartbeats.filter(yn=>{const te=new Date(yn.date).valueOf();return Date.now()-te<=2592e6}),He._storage.overwrite(He._heartbeatsCache)})()}getHeartbeatsHeader(){var He=this;return(0,f.Z)(function*(){if(null===He._heartbeatsCache&&(yield He._heartbeatsCachePromise),null===He._heartbeatsCache||0===He._heartbeatsCache.heartbeats.length)return"";const mt=Kt(),{heartbeatsToSend:$t,unsentEntries:jt}=function fi(ot,He=1024){const mt=[];let $t=ot.slice();for(const jt of ot){const yn=mt.find(te=>te.agent===jt.agent);if(yn){if(yn.dates.push(jt.date),li(mt)>He){yn.dates.pop();break}}else if(mt.push({agent:jt.agent,dates:[jt.date]}),li(mt)>He){mt.pop();break}$t=$t.slice(1)}return{heartbeatsToSend:mt,unsentEntries:$t}}(He._heartbeatsCache.heartbeats),yn=(0,pe.L)(JSON.stringify({version:2,heartbeats:$t}));return He._heartbeatsCache.lastSentHeartbeatDate=mt,jt.length>0?(He._heartbeatsCache.heartbeats=jt,yield He._storage.overwrite(He._heartbeatsCache)):(He._heartbeatsCache.heartbeats=[],He._storage.overwrite(He._heartbeatsCache)),yn})()}}function Kt(){return(new Date).toISOString().substring(0,10)}class cn{constructor(He){this.app=He,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,pe.hl)()&&(0,pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var He=this;return(0,f.Z)(function*(){return(yield He._canUseIndexedDBPromise)&&(yield function ft(ot){return wt.apply(this,arguments)}(He.app))||{heartbeats:[]}})()}overwrite(He){var mt=this;return(0,f.Z)(function*(){var $t;if(yield mt._canUseIndexedDBPromise){const yn=yield mt.read();return Nn(mt.app,{lastSentHeartbeatDate:null!==($t=He.lastSentHeartbeatDate)&&void 0!==$t?$t:yn.lastSentHeartbeatDate,heartbeats:He.heartbeats})}})()}add(He){var mt=this;return(0,f.Z)(function*(){var $t;if(yield mt._canUseIndexedDBPromise){const yn=yield mt.read();return Nn(mt.app,{lastSentHeartbeatDate:null!==($t=He.lastSentHeartbeatDate)&&void 0!==$t?$t:yn.lastSentHeartbeatDate,heartbeats:[...yn.heartbeats,...He.heartbeats]})}})()}}function li(ot){return(0,pe.L)(JSON.stringify({version:2,heartbeats:ot})).length}!function Mt(ot){sn(new G.wA("platform-logger",He=>new Te(He),"PRIVATE")),sn(new G.wA("heartbeat",He=>new ai(He),"PRIVATE")),Oe(Se,"0.9.1",ot),Oe(Se,"0.9.1","esm2017"),Oe("fire-js","")}("")},4859:(Tt,Ue,W)=>{"use strict";W.d(Ue,{H0:()=>Se,wA:()=>V,zt:()=>ye});var f=W(5861),G=W(2090);class V{constructor(J,ee,ae){this.name=J,this.instanceFactory=ee,this.type=ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(J){return this.instantiationMode=J,this}setMultipleInstances(J){return this.multipleInstances=J,this}setServiceProps(J){return this.serviceProps=J,this}setInstanceCreatedCallback(J){return this.onInstanceCreated=J,this}}const pe="[DEFAULT]";class ye{constructor(J,ee){this.name=J,this.container=ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(J){const ee=this.normalizeInstanceIdentifier(J);if(!this.instancesDeferred.has(ee)){const ae=new G.BH;if(this.instancesDeferred.set(ee,ae),this.isInitialized(ee)||this.shouldAutoInitialize())try{const it=this.getOrInitializeService({instanceIdentifier:ee});it&&ae.resolve(it)}catch{}}return this.instancesDeferred.get(ee).promise}getImmediate(J){var ee;const ae=this.normalizeInstanceIdentifier(J?.identifier),it=null!==(ee=J?.optional)&&void 0!==ee&&ee;if(!this.isInitialized(ae)&&!this.shouldAutoInitialize()){if(it)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ae})}catch(qe){if(it)return null;throw qe}}getComponent(){return this.component}setComponent(J){if(J.name!==this.name)throw Error(`Mismatching Component ${J.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=J,this.shouldAutoInitialize()){if(function Ne(Re){return"EAGER"===Re.instantiationMode}(J))try{this.getOrInitializeService({instanceIdentifier:pe})}catch{}for(const[ee,ae]of this.instancesDeferred.entries()){const it=this.normalizeInstanceIdentifier(ee);try{const qe=this.getOrInitializeService({instanceIdentifier:it});ae.resolve(qe)}catch{}}}}clearInstance(J=pe){this.instancesDeferred.delete(J),this.instancesOptions.delete(J),this.instances.delete(J)}delete(){var J=this;return(0,f.Z)(function*(){const ee=Array.from(J.instances.values());yield Promise.all([...ee.filter(ae=>"INTERNAL"in ae).map(ae=>ae.INTERNAL.delete()),...ee.filter(ae=>"_delete"in ae).map(ae=>ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(J=pe){return this.instances.has(J)}getOptions(J=pe){return this.instancesOptions.get(J)||{}}initialize(J={}){const{options:ee={}}=J,ae=this.normalizeInstanceIdentifier(J.instanceIdentifier);if(this.isInitialized(ae))throw Error(`${this.name}(${ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const it=this.getOrInitializeService({instanceIdentifier:ae,options:ee});for(const[qe,ct]of this.instancesDeferred.entries())ae===this.normalizeInstanceIdentifier(qe)&&ct.resolve(it);return it}onInit(J,ee){var ae;const it=this.normalizeInstanceIdentifier(ee),qe=null!==(ae=this.onInitCallbacks.get(it))&&void 0!==ae?ae:new Set;qe.add(J),this.onInitCallbacks.set(it,qe);const ct=this.instances.get(it);return ct&&J(ct,it),()=>{qe.delete(J)}}invokeOnInitCallbacks(J,ee){const ae=this.onInitCallbacks.get(ee);if(ae)for(const it of ae)try{it(J,ee)}catch{}}getOrInitializeService({instanceIdentifier:J,options:ee={}}){let ae=this.instances.get(J);if(!ae&&this.component&&(ae=this.component.instanceFactory(this.container,{instanceIdentifier:(Re=J,Re===pe?void 0:Re),options:ee}),this.instances.set(J,ae),this.instancesOptions.set(J,ee),this.invokeOnInitCallbacks(ae,J),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,J,ae)}catch{}var Re;return ae||null}normalizeInstanceIdentifier(J=pe){return this.component?this.component.multipleInstances?J:pe:J}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Se{constructor(J){this.name=J,this.providers=new Map}addComponent(J){const ee=this.getProvider(J.name);if(ee.isComponentSet())throw new Error(`Component ${J.name} has already been registered with ${this.name}`);ee.setComponent(J)}addOrOverwriteComponent(J){this.getProvider(J.name).isComponentSet()&&this.providers.delete(J.name),this.addComponent(J)}getProvider(J){if(this.providers.has(J))return this.providers.get(J);const ee=new ye(J,this);return this.providers.set(J,ee),ee}getProviders(){return Array.from(this.providers.values())}}},1877:(Tt,Ue,W)=>{"use strict";W.d(Ue,{Am:()=>Re,Ub:()=>Se,Yd:()=>Ne,in:()=>G});const f=[];var G=(()=>{return(J=G||(G={}))[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT",G;var J})();const V={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},pe=G.INFO,ye={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},Te=(J,ee,...ae)=>{if(ee<J.logLevel)return;const it=(new Date).toISOString(),qe=ye[ee];if(!qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${ee})`);console[qe](`[${it}]  ${J.name}:`,...ae)};class Ne{constructor(ee){this.name=ee,this._logLevel=pe,this._logHandler=Te,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(ee){if(!(ee in G))throw new TypeError(`Invalid value "${ee}" assigned to \`logLevel\``);this._logLevel=ee}setLogLevel(ee){this._logLevel="string"==typeof ee?V[ee]:ee}get logHandler(){return this._logHandler}set logHandler(ee){if("function"!=typeof ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(ee){this._userLogHandler=ee}debug(...ee){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...ee),this._logHandler(this,G.DEBUG,...ee)}log(...ee){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...ee),this._logHandler(this,G.VERBOSE,...ee)}info(...ee){this._userLogHandler&&this._userLogHandler(this,G.INFO,...ee),this._logHandler(this,G.INFO,...ee)}warn(...ee){this._userLogHandler&&this._userLogHandler(this,G.WARN,...ee),this._logHandler(this,G.WARN,...ee)}error(...ee){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...ee),this._logHandler(this,G.ERROR,...ee)}}function Se(J){f.forEach(ee=>{ee.setLogLevel(J)})}function Re(J,ee){for(const ae of f){let it=null;ee&&ee.level&&(it=V[ee.level]),ae.userLogHandler=null===J?null:(qe,ct,...bt)=>{const ke=bt.map(Be=>{if(null==Be)return null;if("string"==typeof Be)return Be;if("number"==typeof Be||"boolean"==typeof Be)return Be.toString();if(Be instanceof Error)return Be.message;try{return JSON.stringify(Be)}catch{return null}}).filter(Be=>Be).join(" ");ct>=(it??qe.logLevel)&&J({level:G[ct].toLowerCase(),message:ke,args:bt,type:qe.name})}}}},259:(Tt,Ue,W)=>{"use strict";W.d(Ue,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=W(9681);(0,f.registerVersion)("firebase","9.16.0","app")},9260:(Tt,Ue,W)=>{"use strict";W.d(Ue,{Z:()=>f.Z});var f=W(3942);f.Z.registerVersion("firebase","9.16.0","app-compat")},9568:(Tt,Ue,W)=>{"use strict";W.r(Ue);var f=W(5861),G=W(3942),V=W(1808),pe=W(2090),Ne=(W(9681),W(1877),W(4859));function Se(){return window}function ee(){return(ee=(0,f.Z)(function*(K,U,Z){var De;const{BuildInfo:Ge}=Se();(0,V.ap)(U.sessionId,"AuthEvent did not contain a session ID");const Dt=yield Be(U.sessionId),dt={};return(0,V.aq)()?dt.ibi=Ge.packageName:(0,V.ar)()?dt.apn=Ge.packageName:(0,V.as)(K,"operation-not-supported-in-this-environment"),Ge.displayName&&(dt.appDisplayName=Ge.displayName),dt.sessionId=Dt,(0,V.at)(K,Z,U.type,void 0,null!==(De=U.eventId)&&void 0!==De?De:void 0,dt)})).apply(this,arguments)}function it(){return(it=(0,f.Z)(function*(K){const{BuildInfo:U}=Se(),Z={};(0,V.aq)()?Z.iosBundleId=U.packageName:(0,V.ar)()?Z.androidPackageName=U.packageName:(0,V.as)(K,"operation-not-supported-in-this-environment"),yield(0,V.au)(K,Z)})).apply(this,arguments)}function bt(){return(bt=(0,f.Z)(function*(K,U,Z){const{cordova:De}=Se();let Ge=()=>{};try{yield new Promise((Dt,dt)=>{let en=null;function Pt(){var Yt;Dt();const ci=null===(Yt=De.plugins.browsertab)||void 0===Yt?void 0:Yt.close;"function"==typeof ci&&ci(),"function"==typeof Z?.close&&Z.close()}function Wn(){en||(en=window.setTimeout(()=>{dt((0,V.aw)(K,"redirect-cancelled-by-user"))},2e3))}function Nr(){"visible"===document?.visibilityState&&Wn()}U.addPassiveListener(Pt),document.addEventListener("resume",Wn,!1),(0,V.ar)()&&document.addEventListener("visibilitychange",Nr,!1),Ge=()=>{U.removePassiveListener(Pt),document.removeEventListener("resume",Wn,!1),document.removeEventListener("visibilitychange",Nr,!1),en&&window.clearTimeout(en)}})}finally{Ge()}})).apply(this,arguments)}function Be(K){return je.apply(this,arguments)}function je(){return(je=(0,f.Z)(function*(K){const U=Ze(K),Z=yield crypto.subtle.digest("SHA-256",U);return Array.from(new Uint8Array(Z)).map(Ge=>Ge.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(K){if((0,V.ap)(/[0-9a-zA-Z]+/.test(K),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(K);const U=new ArrayBuffer(K.length),Z=new Uint8Array(U);for(let De=0;De<K.length;De++)Z[De]=K.charCodeAt(De);return Z}class $e extends V.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(U=>{this.resolveInialized=U})}addPassiveListener(U){this.passiveListeners.add(U)}removePassiveListener(U){this.passiveListeners.delete(U)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(U){return this.resolveInialized(),this.passiveListeners.forEach(Z=>Z(U)),super.onEvent(U)}initialized(){var U=this;return(0,f.Z)(function*(){yield U.initPromise})()}}function z(K){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,f.Z)(function*(K){const U=yield re()._get(fe(K));return U&&(yield re()._remove(fe(K))),U})).apply(this,arguments)}function oe(){const K=[],U="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Z=0;Z<20;Z++){const De=Math.floor(Math.random()*U.length);K.push(U.charAt(De))}return K.join("")}function re(){return(0,V.az)(V.b)}function fe(K){return(0,V.aA)("authEvent",K.config.apiKey,K.name)}function Xe(K){if(!K?.includes("?"))return{};const[U,...Z]=K.split("?");return(0,pe.zd)(Z.join("?"))}const Rn=class _n{constructor(){this._redirectPersistence=V.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=V.aB,this._overrideRedirectResult=V.aC}_initialize(U){var Z=this;return(0,f.Z)(function*(){const De=U._key();let Ge=Z.eventManagers.get(De);return Ge||(Ge=new $e(U),Z.eventManagers.set(De,Ge),Z.attachCallbackListeners(U,Ge)),Ge})()}_openPopup(U){(0,V.as)(U,"operation-not-supported-in-this-environment")}_openRedirect(U,Z,De,Ge){var Dt=this;return(0,f.Z)(function*(){!function ke(K){var U,Z,De,Ge,Dt,dt,en,Pt,Wn,Nr;const Yt=Se();(0,V.ax)("function"==typeof(null===(U=Yt?.universalLinks)||void 0===U?void 0:U.subscribe),K,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,V.ax)(typeof(null===(Z=Yt?.BuildInfo)||void 0===Z?void 0:Z.packageName)<"u",K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,V.ax)("function"==typeof(null===(Dt=null===(Ge=null===(De=Yt?.cordova)||void 0===De?void 0:De.plugins)||void 0===Ge?void 0:Ge.browsertab)||void 0===Dt?void 0:Dt.openUrl),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,V.ax)("function"==typeof(null===(Pt=null===(en=null===(dt=Yt?.cordova)||void 0===dt?void 0:dt.plugins)||void 0===en?void 0:en.browsertab)||void 0===Pt?void 0:Pt.isAvailable),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,V.ax)("function"==typeof(null===(Nr=null===(Wn=Yt?.cordova)||void 0===Wn?void 0:Wn.InAppBrowser)||void 0===Nr?void 0:Nr.open),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(U);const dt=yield Dt._initialize(U);yield dt.initialized(),dt.resetRedirect(),(0,V.aD)(),yield Dt._originValidation(U);const en=function ze(K,U,Z=null){return{type:U,eventId:Z,urlResponse:null,sessionId:oe(),postBody:null,tenantId:K.tenantId,error:(0,V.aw)(K,"no-auth-event")}}(U,De,Ge);yield function st(K,U){return re()._set(fe(K),U)}(U,en);const Pt=yield function J(K,U,Z){return ee.apply(this,arguments)}(U,en,Z),Wn=yield function qe(K){const{cordova:U}=Se();return new Promise(Z=>{U.plugins.browsertab.isAvailable(De=>{let Ge=null;De?U.plugins.browsertab.openUrl(K):Ge=U.InAppBrowser.open(K,(0,V.av)()?"_blank":"_system","location=yes"),Z(Ge)})})}(Pt);return function ct(K,U,Z){return bt.apply(this,arguments)}(U,dt,Wn)})()}_isIframeWebStorageSupported(U,Z){throw new Error("Method not implemented.")}_originValidation(U){const Z=U._key();return this.originValidationPromises[Z]||(this.originValidationPromises[Z]=function ae(K){return it.apply(this,arguments)}(U)),this.originValidationPromises[Z]}attachCallbackListeners(U,Z){const{universalLinks:De,handleOpenURL:Ge,BuildInfo:Dt}=Se(),dt=setTimeout((0,f.Z)(function*(){yield z(U),Z.onEvent(St())}),500),en=function(){var Nr=(0,f.Z)(function*(Yt){clearTimeout(dt);const ci=yield z(U);let Vl=null;ci&&Yt?.url&&(Vl=function Me(K,U){var Z,De;const Ge=function tt(K){const U=Xe(K),Z=U.link?decodeURIComponent(U.link):void 0,De=Xe(Z).link,Ge=U.deep_link_id?decodeURIComponent(U.deep_link_id):void 0;return Xe(Ge).link||Ge||De||Z||K}(U);if(Ge.includes("/__/auth/callback")){const Dt=Xe(Ge),dt=Dt.firebaseError?function me(K){try{return JSON.parse(K)}catch{return null}}(decodeURIComponent(Dt.firebaseError)):null,en=null===(De=null===(Z=dt?.code)||void 0===Z?void 0:Z.split("auth/"))||void 0===De?void 0:De[1],Pt=en?(0,V.aw)(en):null;return Pt?{type:K.type,eventId:K.eventId,tenantId:K.tenantId,error:Pt,urlResponse:null,sessionId:null,postBody:null}:{type:K.type,eventId:K.eventId,tenantId:K.tenantId,sessionId:K.sessionId,urlResponse:Ge,postBody:null}}return null}(ci,Yt.url)),Z.onEvent(Vl||St())});return function(ci){return Nr.apply(this,arguments)}}();typeof De<"u"&&"function"==typeof De.subscribe&&De.subscribe(null,en);const Pt=Ge,Wn=`${Dt.packageName.toLowerCase()}://`;Se().handleOpenURL=function(){var Nr=(0,f.Z)(function*(Yt){if(Yt.toLowerCase().startsWith(Wn)&&en({url:Yt}),"function"==typeof Pt)try{Pt(Yt)}catch(ci){console.error(ci)}});return function(Yt){return Nr.apply(this,arguments)}}()}};function St(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,V.aw)("no-auth-event")}}function sn(){var K;return(null===(K=self?.location)||void 0===K?void 0:K.protocol)||null}function Sr(K=(0,pe.z$)()){return!("file:"!==sn()&&"ionic:"!==sn()&&"capacitor:"!==sn()||!K.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gr(){try{const K=self.localStorage,U=V.aI();if(K)return K.setItem(U,"1"),K.removeItem(U),!function oi(K=(0,pe.z$)()){return function Or(){return(0,pe.w1)()&&11===document?.documentMode}()||function qn(K=(0,pe.z$)()){return/Edge\/\d+/.test(K)}(K)}()||(0,pe.hl)()}catch{return Di()&&(0,pe.hl)()}return!1}function Di(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function Rt(){return"http:"===sn()||"https:"===sn()}()||(0,pe.ru)()||Sr())&&!function Wr(){return(0,pe.b$)()||(0,pe.UG)()}()&&Gr()&&!Di()}function ue(){return Sr()&&typeof document<"u"}function we(){return(we=(0,f.Z)(function*(){return!!ue()&&new Promise(K=>{const U=setTimeout(()=>{K(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(U),K(!0)})})})).apply(this,arguments)}const xe={LOCAL:"local",NONE:"none",SESSION:"session"},ut=V.ax,En="persistence";function Ft(K){return fn.apply(this,arguments)}function fn(){return(fn=(0,f.Z)(function*(K){yield K._initializationPromise;const U=ft(),Z=V.aA(En,K.config.apiKey,K.name);U&&U.setItem(Z,K._getPersistence())})).apply(this,arguments)}function ft(){var K;try{return(null===(K=function Oe(){return typeof window<"u"?window:null}())||void 0===K?void 0:K.sessionStorage)||null}catch{return null}}const wt=V.ax;class Nn{constructor(){this.browserResolver=V.az(V.k),this.cordovaResolver=V.az(Rn),this.underlyingResolver=null,this._redirectPersistence=V.a,this._completeRedirectFn=V.aB,this._overrideRedirectResult=V.aC}_initialize(U){var Z=this;return(0,f.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._initialize(U)})()}_openPopup(U,Z,De,Ge){var Dt=this;return(0,f.Z)(function*(){return yield Dt.selectUnderlyingResolver(),Dt.assertedUnderlyingResolver._openPopup(U,Z,De,Ge)})()}_openRedirect(U,Z,De,Ge){var Dt=this;return(0,f.Z)(function*(){return yield Dt.selectUnderlyingResolver(),Dt.assertedUnderlyingResolver._openRedirect(U,Z,De,Ge)})()}_isIframeWebStorageSupported(U,Z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(U,Z)}_originValidation(U){return this.assertedUnderlyingResolver._originValidation(U)}get _shouldInitProactively(){return ue()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var U=this;return(0,f.Z)(function*(){if(U.underlyingResolver)return;const Z=yield function le(){return we.apply(this,arguments)}();U.underlyingResolver=Z?U.cordovaResolver:U.browserResolver})()}}function In(K){return K.unwrap()}function Pn(K){return ai(K)}function ai(K){const{_tokenResponse:U}=K instanceof pe.ZR?K.customData:K;if(!U)return null;if(!(K instanceof pe.ZR)&&"temporaryProof"in U&&"phoneNumber"in U)return V.P.credentialFromResult(K);const Z=U.providerId;if(!Z||Z===V.o.PASSWORD)return null;let De;switch(Z){case V.o.GOOGLE:De=V.Q;break;case V.o.FACEBOOK:De=V.N;break;case V.o.GITHUB:De=V.T;break;case V.o.TWITTER:De=V.W;break;default:const{oauthIdToken:Ge,oauthAccessToken:Dt,oauthTokenSecret:dt,pendingToken:en,nonce:Pt}=U;return Dt||dt||Ge||en?en?Z.startsWith("saml.")?V.aL._create(Z,en):V.J._fromParams({providerId:Z,signInMethod:Z,pendingToken:en,idToken:Ge,accessToken:Dt}):new V.U(Z).credential({idToken:Ge,accessToken:Dt,rawNonce:Pt}):null}return K instanceof pe.ZR?De.credentialFromError(K):De.credentialFromResult(K)}function Kt(K,U){return U.catch(Z=>{throw Z instanceof pe.ZR&&function Zn(K,U){var Z;const De=null===(Z=U.customData)||void 0===Z?void 0:Z._tokenResponse;if("auth/multi-factor-auth-required"===U?.code)U.resolver=new li(K,V.an(K,U));else if(De){const Ge=ai(U),Dt=U;Ge&&(Dt.credential=Ge,Dt.tenantId=De.tenantId||void 0,Dt.email=De.email||void 0,Dt.phoneNumber=De.phoneNumber||void 0)}}(K,Z),Z}).then(Z=>{const Ge=Z.user;return{operationType:Z.operationType,credential:Pn(Z),additionalUserInfo:V.al(Z),user:Mt.getOrCreate(Ge)}})}function fi(K,U){return cn.apply(this,arguments)}function cn(){return(cn=(0,f.Z)(function*(K,U){const Z=yield U;return{verificationId:Z.verificationId,confirm:De=>Kt(K,Z.confirm(De))}})).apply(this,arguments)}class li{constructor(U,Z){this.resolver=Z,this.auth=function ln(K){return K.wrapped()}(U)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(U){return Kt(In(this.auth),this.resolver.resolveSignIn(U))}}class Mt{constructor(U){this._delegate=U,this.multiFactor=V.ao(U)}static getOrCreate(U){return Mt.USER_MAP.has(U)||Mt.USER_MAP.set(U,new Mt(U)),Mt.USER_MAP.get(U)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(U){return this._delegate.getIdTokenResult(U)}getIdToken(U){return this._delegate.getIdToken(U)}linkAndRetrieveDataWithCredential(U){return this.linkWithCredential(U)}linkWithCredential(U){var Z=this;return(0,f.Z)(function*(){return Kt(Z.auth,V.Z(Z._delegate,U))})()}linkWithPhoneNumber(U,Z){var De=this;return(0,f.Z)(function*(){return fi(De.auth,V.l(De._delegate,U,Z))})()}linkWithPopup(U){var Z=this;return(0,f.Z)(function*(){return Kt(Z.auth,V.d(Z._delegate,U,Nn))})()}linkWithRedirect(U){var Z=this;return(0,f.Z)(function*(){return yield Ft(V.aE(Z.auth)),V.g(Z._delegate,U,Nn)})()}reauthenticateAndRetrieveDataWithCredential(U){return this.reauthenticateWithCredential(U)}reauthenticateWithCredential(U){var Z=this;return(0,f.Z)(function*(){return Kt(Z.auth,V._(Z._delegate,U))})()}reauthenticateWithPhoneNumber(U,Z){return fi(this.auth,V.r(this._delegate,U,Z))}reauthenticateWithPopup(U){return Kt(this.auth,V.e(this._delegate,U,Nn))}reauthenticateWithRedirect(U){var Z=this;return(0,f.Z)(function*(){return yield Ft(V.aE(Z.auth)),V.h(Z._delegate,U,Nn)})()}sendEmailVerification(U){return V.ab(this._delegate,U)}unlink(U){var Z=this;return(0,f.Z)(function*(){return yield V.ak(Z._delegate,U),Z})()}updateEmail(U){return V.ag(this._delegate,U)}updatePassword(U){return V.ah(this._delegate,U)}updatePhoneNumber(U){return V.u(this._delegate,U)}updateProfile(U){return V.af(this._delegate,U)}verifyBeforeUpdateEmail(U,Z){return V.ac(this._delegate,U,Z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mt.USER_MAP=new WeakMap;const ot=V.ax;let He=(()=>{class K{constructor(Z,De){if(this.app=Z,De.isInitialized())return this._delegate=De.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ge}=Z.options;ot(Ge,"invalid-api-key",{appName:Z.name}),ot(Ge,"invalid-api-key",{appName:Z.name});const Dt=typeof window<"u"?Nn:void 0;this._delegate=De.initialize({options:{persistence:$t(Ge,Z.name),popupRedirectResolver:Dt}}),this._delegate._updateErrorMap(V.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Z){this._delegate.languageCode=Z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Z){this._delegate.tenantId=Z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Z,De){V.G(this._delegate,Z,De)}applyActionCode(Z){return V.a2(this._delegate,Z)}checkActionCode(Z){return V.a3(this._delegate,Z)}confirmPasswordReset(Z,De){return V.a1(this._delegate,Z,De)}createUserWithEmailAndPassword(Z,De){var Ge=this;return(0,f.Z)(function*(){return Kt(Ge._delegate,V.a5(Ge._delegate,Z,De))})()}fetchProvidersForEmail(Z){return this.fetchSignInMethodsForEmail(Z)}fetchSignInMethodsForEmail(Z){return V.aa(this._delegate,Z)}isSignInWithEmailLink(Z){return V.a8(this._delegate,Z)}getRedirectResult(){var Z=this;return(0,f.Z)(function*(){ot(Bn(),Z._delegate,"operation-not-supported-in-this-environment");const De=yield V.j(Z._delegate,Nn);return De?Kt(Z._delegate,Promise.resolve(De)):{credential:null,user:null}})()}addFrameworkForLogging(Z){!function Gt(K,U){(0,V.aE)(K)._logFramework(U)}(this._delegate,Z)}onAuthStateChanged(Z,De,Ge){const{next:Dt,error:dt,complete:en}=mt(Z,De,Ge);return this._delegate.onAuthStateChanged(Dt,dt,en)}onIdTokenChanged(Z,De,Ge){const{next:Dt,error:dt,complete:en}=mt(Z,De,Ge);return this._delegate.onIdTokenChanged(Dt,dt,en)}sendSignInLinkToEmail(Z,De){return V.a7(this._delegate,Z,De)}sendPasswordResetEmail(Z,De){return V.a0(this._delegate,Z,De||void 0)}setPersistence(Z){var De=this;return(0,f.Z)(function*(){let Ge;switch(function ht(K,U){ut(Object.values(xe).includes(U),K,"invalid-persistence-type"),(0,pe.b$)()?ut(U!==xe.SESSION,K,"unsupported-persistence-type"):(0,pe.UG)()?ut(U===xe.NONE,K,"unsupported-persistence-type"):Di()?ut(U===xe.NONE||U===xe.LOCAL&&(0,pe.hl)(),K,"unsupported-persistence-type"):ut(U===xe.NONE||Gr(),K,"unsupported-persistence-type")}(De._delegate,Z),Z){case xe.SESSION:Ge=V.a;break;case xe.LOCAL:Ge=(yield V.az(V.i)._isAvailable())?V.i:V.b;break;case xe.NONE:Ge=V.L;break;default:return V.as("argument-error",{appName:De._delegate.name})}return De._delegate.setPersistence(Ge)})()}signInAndRetrieveDataWithCredential(Z){return this.signInWithCredential(Z)}signInAnonymously(){return Kt(this._delegate,V.X(this._delegate))}signInWithCredential(Z){return Kt(this._delegate,V.Y(this._delegate,Z))}signInWithCustomToken(Z){return Kt(this._delegate,V.$(this._delegate,Z))}signInWithEmailAndPassword(Z,De){return Kt(this._delegate,V.a6(this._delegate,Z,De))}signInWithEmailLink(Z,De){return Kt(this._delegate,V.a9(this._delegate,Z,De))}signInWithPhoneNumber(Z,De){return fi(this._delegate,V.s(this._delegate,Z,De))}signInWithPopup(Z){var De=this;return(0,f.Z)(function*(){return ot(Bn(),De._delegate,"operation-not-supported-in-this-environment"),Kt(De._delegate,V.c(De._delegate,Z,Nn))})()}signInWithRedirect(Z){var De=this;return(0,f.Z)(function*(){return ot(Bn(),De._delegate,"operation-not-supported-in-this-environment"),yield Ft(De._delegate),V.f(De._delegate,Z,Nn)})()}updateCurrentUser(Z){return this._delegate.updateCurrentUser(Z)}verifyPasswordResetCode(Z){return V.a4(this._delegate,Z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return K.Persistence=xe,K})();function mt(K,U,Z){let De=K;"function"!=typeof K&&({next:De,error:U,complete:Z}=K);const Ge=De;return{next:dt=>Ge(dt&&Mt.getOrCreate(dt)),error:U,complete:Z}}function $t(K,U){const Z=function Nt(K,U){const Z=ft();if(!Z)return[];const De=V.aA(En,K,U);switch(Z.getItem(De)){case xe.NONE:return[V.L];case xe.LOCAL:return[V.i,V.a];case xe.SESSION:return[V.a];default:return[]}}(K,U);if(typeof self<"u"&&!Z.includes(V.i)&&Z.push(V.i),typeof window<"u")for(const De of[V.b,V.a])Z.includes(De)||Z.push(De);return Z.includes(V.L)||Z.push(V.L),Z}class jt{constructor(){this.providerId="phone",this._delegate=new V.P(In(G.Z.auth()))}static credential(U,Z){return V.P.credential(U,Z)}verifyPhoneNumber(U,Z){return this._delegate.verifyPhoneNumber(U,Z)}unwrap(){return this._delegate}}jt.PHONE_SIGN_IN_METHOD=V.P.PHONE_SIGN_IN_METHOD,jt.PROVIDER_ID=V.P.PROVIDER_ID;const yn=V.ax;class te{constructor(U,Z,De=G.Z.app()){var Ge;yn(null===(Ge=De.options)||void 0===Ge?void 0:Ge.apiKey,"invalid-api-key",{appName:De.name}),this._delegate=new V.R(U,Z,De.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ie(K){K.INTERNAL.registerComponent(new Ne.wA("auth-compat",U=>{const Z=U.getProvider("app-compat").getImmediate(),De=U.getProvider("auth");return new He(Z,De)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:V.A.EMAIL_SIGNIN,PASSWORD_RESET:V.A.PASSWORD_RESET,RECOVER_EMAIL:V.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:V.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:V.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:V.A.VERIFY_EMAIL}},EmailAuthProvider:V.M,FacebookAuthProvider:V.N,GithubAuthProvider:V.T,GoogleAuthProvider:V.Q,OAuthProvider:V.U,SAMLAuthProvider:V.V,PhoneAuthProvider:jt,PhoneMultiFactorGenerator:V.m,RecaptchaVerifier:te,TwitterAuthProvider:V.W,Auth:He,AuthCredential:V.H,Error:pe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),K.registerVersion("@firebase/auth-compat","0.3.1")}(G.Z)},8766:(Tt,Ue,W)=>{"use strict";W.d(Ue,{Lj:()=>Ye,X3:()=>Ze});var f=W(5861);let V,pe;const Ne=new WeakMap,Se=new WeakMap,Re=new WeakMap,J=new WeakMap,ee=new WeakMap;let qe={get(Ee,Me,oe){if(Ee instanceof IDBTransaction){if("done"===Me)return Se.get(Ee);if("objectStoreNames"===Me)return Ee.objectStoreNames||Re.get(Ee);if("store"===Me)return oe.objectStoreNames[1]?void 0:oe.objectStore(oe.objectStoreNames[0])}return Be(Ee[Me])},set:(Ee,Me,oe)=>(Ee[Me]=oe,!0),has:(Ee,Me)=>Ee instanceof IDBTransaction&&("done"===Me||"store"===Me)||Me in Ee};function ke(Ee){return"function"==typeof Ee?function bt(Ee){return Ee!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Te(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ee)?function(...Me){return Ee.apply(je(this),Me),Be(Ne.get(this))}:function(...Me){return Be(Ee.apply(je(this),Me))}:function(Me,...oe){const re=Ee.call(je(this),Me,...oe);return Re.set(re,Me.sort?Me.sort():[Me]),Be(re)}}(Ee):(Ee instanceof IDBTransaction&&function it(Ee){if(Se.has(Ee))return;const Me=new Promise((oe,re)=>{const fe=()=>{Ee.removeEventListener("complete",me),Ee.removeEventListener("error",tt),Ee.removeEventListener("abort",tt)},me=()=>{oe(),fe()},tt=()=>{re(Ee.error||new DOMException("AbortError","AbortError")),fe()};Ee.addEventListener("complete",me),Ee.addEventListener("error",tt),Ee.addEventListener("abort",tt)});Se.set(Ee,Me)}(Ee),((Ee,Me)=>Me.some(oe=>Ee instanceof oe))(Ee,function ye(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ee,qe):Ee)}function Be(Ee){if(Ee instanceof IDBRequest)return function ae(Ee){const Me=new Promise((oe,re)=>{const fe=()=>{Ee.removeEventListener("success",me),Ee.removeEventListener("error",tt)},me=()=>{oe(Be(Ee.result)),fe()},tt=()=>{re(Ee.error),fe()};Ee.addEventListener("success",me),Ee.addEventListener("error",tt)});return Me.then(oe=>{oe instanceof IDBCursor&&Ne.set(oe,Ee)}).catch(()=>{}),ee.set(Me,Ee),Me}(Ee);if(J.has(Ee))return J.get(Ee);const Me=ke(Ee);return Me!==Ee&&(J.set(Ee,Me),ee.set(Me,Ee)),Me}const je=Ee=>ee.get(Ee);function Ze(Ee,Me,{blocked:oe,upgrade:re,blocking:fe,terminated:me}={}){const tt=indexedDB.open(Ee,Me),Xe=Be(tt);return re&&tt.addEventListener("upgradeneeded",At=>{re(Be(tt.result),At.oldVersion,At.newVersion,Be(tt.transaction))}),oe&&tt.addEventListener("blocked",()=>oe()),Xe.then(At=>{me&&At.addEventListener("close",()=>me()),fe&&At.addEventListener("versionchange",()=>fe())}).catch(()=>{}),Xe}function Ye(Ee,{blocked:Me}={}){const oe=indexedDB.deleteDatabase(Ee);return Me&&oe.addEventListener("blocked",()=>Me()),Be(oe).then(()=>{})}const $e=["get","getKey","getAll","getAllKeys","count"],ze=["put","add","delete","clear"],st=new Map;function z(Ee,Me){if(!(Ee instanceof IDBDatabase)||Me in Ee||"string"!=typeof Me)return;if(st.get(Me))return st.get(Me);const oe=Me.replace(/FromIndex$/,""),re=Me!==oe,fe=ze.includes(oe);if(!(oe in(re?IDBIndex:IDBObjectStore).prototype)||!fe&&!$e.includes(oe))return;const me=function(){var tt=(0,f.Z)(function*(Xe,...At){const _n=this.transaction(Xe,fe?"readwrite":"readonly");let Rn=_n.store;return re&&(Rn=Rn.index(At.shift())),(yield Promise.all([Rn[oe](...At),fe&&_n.done]))[0]});return function(At){return tt.apply(this,arguments)}}();return st.set(Me,me),me}!function ct(Ee){qe=Ee(qe)}(Ee=>({...Ee,get:(Me,oe,re)=>z(Me,oe)||Ee.get(Me,oe,re),has:(Me,oe)=>!!z(Me,oe)||Ee.has(Me,oe)}))},5861:(Tt,Ue,W)=>{"use strict";function f(V,pe,ye,Te,Ne,Se,Re){try{var J=V[Se](Re),ee=J.value}catch(ae){return void ye(ae)}J.done?pe(ee):Promise.resolve(ee).then(Te,Ne)}function G(V){return function(){var pe=this,ye=arguments;return new Promise(function(Te,Ne){var Se=V.apply(pe,ye);function Re(ee){f(Se,Te,Ne,Re,J,"next",ee)}function J(ee){f(Se,Te,Ne,Re,J,"throw",ee)}Re(void 0)})}}W.d(Ue,{Z:()=>G})}},Tt=>{var Ue=f=>Tt(Tt.s=f);Ue(1321),Ue(825)}]);