(self.webpackChunkblood_donation=self.webpackChunkblood_donation||[]).push([[179],{2011:(_t,Ne,j)=>{"use strict";j.d(Ne,{Dh:()=>we,GT:()=>ve,cc:()=>je,hO:()=>Qe,on:()=>Y,pX:()=>pe,xv:()=>Te});var d=j(4650),G=j(9260),F=j(2122);_t=j.hmd(_t);const ce=["ngOnDestroy"],pe=(Fe,Pe,$e,Ge={})=>new Proxy(Fe,{get:(Le,Ue)=>$e.runOutsideAngular(()=>{var Je;if(Fe[Ue])return!(null===(Je=Ge?.spy)||void 0===Je)&&Je.get&&Ge.spy.get(Ue,Fe[Ue]),Fe[Ue];if(ce.indexOf(Ue)>-1)return()=>{};const B=Pe.toPromise().then(ye=>{const Ce=ye&&ye[Ue];return"function"==typeof Ce?Ce.bind(ye):Ce&&Ce.then?Ce.then(re=>$e.run(()=>re)):$e.run(()=>Ce)});return new Proxy(()=>{},{get:(ye,Ce)=>B[Ce],apply:(ye,Ce,re)=>B.then(ee=>{var ue;const he=ee&&ee(...re);return!(null===(ue=Ge?.spy)||void 0===ue)&&ue.apply&&Ge.spy.apply(Ue,re,he),he})})})}),ve=(Fe,Pe)=>{Pe.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(Ge=>{Object.defineProperty(Fe.prototype,Ge,Object.getOwnPropertyDescriptor($e.prototype||$e,Ge))})})};class xe{constructor(Pe){return Pe}}const we=new d.OlP("angularfire2.app.options"),Te=new d.OlP("angularfire2.app.name");function Y(Fe,Pe,$e){const Le="object"==typeof $e&&$e||{};Le.name=Le.name||"string"==typeof $e&&$e||"[DEFAULT]";const Je=G.Z.apps.filter(B=>B&&B.name===Le.name)[0]||Pe.runOutsideAngular(()=>G.Z.initializeApp(Fe,Le));try{JSON.stringify(Fe)!==JSON.stringify(Je.options)&&Q("error",`${Je.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new xe(Je)}const Q=(Fe,...Pe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Fe](...Pe)},ie={provide:xe,useFactory:Y,deps:[we,d.R0b,[new d.FiY,Te]]};let Qe=(()=>{class Fe{constructor($e){G.Z.registerVersion("angularfire",F.q4.full,"core"),G.Z.registerVersion("angularfire",F.q4.full,"app-compat"),G.Z.registerVersion("angular",d.q4F.full,$e.toString())}static initializeApp($e,Ge){return{ngModule:Fe,providers:[{provide:we,useValue:$e},{provide:Te,useValue:Ge}]}}}return Fe.\u0275fac=function($e){return new($e||Fe)(d.LFG(d.Lbi))},Fe.\u0275mod=d.oAB({type:Fe}),Fe.\u0275inj=d.cJS({providers:[ie]}),Fe})();function je(Fe,Pe,$e,Ge,Le){const[,Ue,Je]=globalThis.\u0275AngularfireInstanceCache.find(B=>B[0]===Fe)||[];if(Ue)return function nt(Fe,Pe){try{return Fe.toString()===Pe.toString()}catch{return Fe===Pe}}(Le,Je)||(Ie("error",`${Pe} was already initialized on the ${$e} Firebase App with different settings.${ft?" You may need to reload as Firebase is not HMR aware.":""}`),Ie("warn",{is:Le,was:Je})),Ue;{const B=Ge();return globalThis.\u0275AngularfireInstanceCache.push([Fe,B,Le]),B}}const ft=!!_t.hot,Ie=(Fe,...Pe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Fe](...Pe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(_t,Ne,j)=>{"use strict";j.d(Ne,{q4:()=>fu,iC:()=>ar,fc:()=>bc,HU:()=>kn,vb:()=>fr,JM:()=>Ai});var d=j(4650),G=j(259),F=j(5861),ce=j(9681),pe=j(2090),ve=j(4859),xe=j(1877),we=j(8766);const Te="@firebase/installations",Y="0.6.1",ie=`w:${Y}`,Qe="FIS_v2",Pe=new pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $e(S){return S instanceof pe.ZR&&S.code.includes("request-failed")}function Ge({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Le(S){return{token:S.token,requestStatus:2,expiresIn:ee(S.expiresIn),creationTime:Date.now()}}function Ue(S,A){return Je.apply(this,arguments)}function Je(){return(Je=(0,F.Z)(function*(S,A){const z=(yield A.json()).error;return Pe.create("request-failed",{requestName:S,serverCode:z.code,serverMessage:z.message,serverStatus:z.status})})).apply(this,arguments)}function B({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function ye(S,{refreshToken:A}){const N=B(S);return N.append("Authorization",function ue(S){return`${Qe} ${S}`}(A)),N}function Ce(S){return re.apply(this,arguments)}function re(){return(re=(0,F.Z)(function*(S){const A=yield S();return A.status>=500&&A.status<600?S():A})).apply(this,arguments)}function ee(S){return Number(S.replace("s","000"))}function he(S,A){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,F.Z)(function*({appConfig:S,heartbeatServiceProvider:A},{fid:N}){const z=Ge(S),ae=B(S),me=A.getImmediate({optional:!0});if(me){const St=yield me.getHeartbeatsHeader();St&&ae.append("x-firebase-client",St)}const Ye={method:"POST",headers:ae,body:JSON.stringify({fid:N,authVersion:Qe,appId:S.appId,sdkVersion:ie})},Ot=yield Ce(()=>fetch(z,Ye));if(Ot.ok){const St=yield Ot.json();return{fid:St.fid||N,registrationStatus:2,refreshToken:St.refreshToken,authToken:Le(St.authToken)}}throw yield Ue("Create Installation",Ot)})).apply(this,arguments)}function ze(S){return new Promise(A=>{setTimeout(A,S)})}const fn=/^[cdef][\w-]{21}$/;function vt(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const N=function jt(S){return function bt(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return fn.test(N)?N:""}catch{return""}}function Nt(S){return`${S.appName}!${S.appId}`}const tn=new Map;function Hn(S,A){const N=Nt(S);gr(N,A),function Mr(S,A){const N=function Vn(){return!br&&"BroadcastChannel"in self&&(br=new BroadcastChannel("[Firebase] FID Change"),br.onmessage=S=>{gr(S.data.key,S.data.fid)}),br}();N&&N.postMessage({key:S,fid:A}),function Hr(){0===tn.size&&br&&(br.close(),br=null)}()}(N,A)}function gr(S,A){const N=tn.get(S);if(N)for(const z of N)z(A)}let br=null;const Nn="firebase-installations-store";let oe=null;function se(){return oe||(oe=(0,we.X3)("firebase-installations-database",1,{upgrade:(S,A)=>{0===A&&S.createObjectStore(Nn)}})),oe}function ge(S,A){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,F.Z)(function*(S,A){const N=Nt(S),ae=(yield se()).transaction(Nn,"readwrite"),me=ae.objectStore(Nn),We=yield me.get(N);return yield me.put(A,N),yield ae.done,(!We||We.fid!==A.fid)&&Hn(S,A.fid),A})).apply(this,arguments)}function be(S){return rt.apply(this,arguments)}function rt(){return(rt=(0,F.Z)(function*(S){const A=Nt(S),z=(yield se()).transaction(Nn,"readwrite");yield z.objectStore(Nn).delete(A),yield z.done})).apply(this,arguments)}function _n(S,A){return st.apply(this,arguments)}function st(){return(st=(0,F.Z)(function*(S,A){const N=Nt(S),ae=(yield se()).transaction(Nn,"readwrite"),me=ae.objectStore(Nn),We=yield me.get(N),Ye=A(We);return void 0===Ye?yield me.delete(N):yield me.put(Ye,N),yield ae.done,Ye&&(!We||We.fid!==Ye.fid)&&Hn(S,Ye.fid),Ye})).apply(this,arguments)}function Mt(S){return un.apply(this,arguments)}function un(){return(un=(0,F.Z)(function*(S){let A;const N=yield _n(S.appConfig,z=>{const ae=At(z),me=ot(S,ae);return A=me.registrationPromise,me.installationEntry});return""===N.fid?{installationEntry:yield A}:{installationEntry:N,registrationPromise:A}})).apply(this,arguments)}function At(S){return Bn(S||{fid:vt(),registrationStatus:0})}function ot(S,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(Pe.create("app-offline"))};const N={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},z=function ht(S,A){return Mn.apply(this,arguments)}(S,N);return{installationEntry:N,registrationPromise:z}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:wn(S)}:{installationEntry:A}}function Mn(){return(Mn=(0,F.Z)(function*(S,A){try{const N=yield he(S,A);return ge(S.appConfig,N)}catch(N){throw $e(N)&&409===N.customData.serverCode?yield be(S.appConfig):yield ge(S.appConfig,{fid:A.fid,registrationStatus:0}),N}})).apply(this,arguments)}function wn(S){return nn.apply(this,arguments)}function nn(){return(nn=(0,F.Z)(function*(S){let A=yield An(S.appConfig);for(;1===A.registrationStatus;)yield ze(100),A=yield An(S.appConfig);if(0===A.registrationStatus){const{installationEntry:N,registrationPromise:z}=yield Mt(S);return z||N}return A})).apply(this,arguments)}function An(S){return _n(S,A=>{if(!A)throw Pe.create("installation-not-found");return Bn(A)})}function Bn(S){return function Gr(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Gt(S,A){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,F.Z)(function*({appConfig:S,heartbeatServiceProvider:A},N){const z=rn(S,N),ae=ye(S,N),me=A.getImmediate({optional:!0});if(me){const St=yield me.getHeartbeatsHeader();St&&ae.append("x-firebase-client",St)}const Ye={method:"POST",headers:ae,body:JSON.stringify({installation:{sdkVersion:ie,appId:S.appId}})},Ot=yield Ce(()=>fetch(z,Ye));if(Ot.ok)return Le(yield Ot.json());throw yield Ue("Generate Auth Token",Ot)})).apply(this,arguments)}function rn(S,{fid:A}){return`${Ge(S)}/${A}/authTokens:generate`}function qr(S){return Et.apply(this,arguments)}function Et(){return(Et=(0,F.Z)(function*(S,A=!1){let N;const z=yield _n(S.appConfig,me=>{if(!pn(me))throw Pe.create("not-registered");const We=me.authToken;if(!A&&J(We))return me;if(1===We.requestStatus)return N=Xe(S,A),me;{if(!navigator.onLine)throw Pe.create("app-offline");const Ye=te(me);return N=Lt(S,Ye),Ye}});return N?yield N:z.authToken})).apply(this,arguments)}function Xe(S,A){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,F.Z)(function*(S,A){let N=yield lt(S.appConfig);for(;1===N.authToken.requestStatus;)yield ze(100),N=yield lt(S.appConfig);const z=N.authToken;return 0===z.requestStatus?qr(S,A):z})).apply(this,arguments)}function lt(S){return _n(S,A=>{if(!pn(A))throw Pe.create("not-registered");return function q(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function Lt(S,A){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,F.Z)(function*(S,A){try{const N=yield Gt(S,A),z=Object.assign(Object.assign({},A),{authToken:N});return yield ge(S.appConfig,z),N}catch(N){if(!$e(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const z=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield ge(S.appConfig,z)}else yield be(S.appConfig);throw N}})).apply(this,arguments)}function pn(S){return void 0!==S&&2===S.registrationStatus}function J(S){return 2===S.requestStatus&&!function Z(S){const A=Date.now();return A<S.creationTime||S.creationTime+S.expiresIn<A+36e5}(S)}function te(S){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:A})}function H(){return(H=(0,F.Z)(function*(S){const A=S,{installationEntry:N,registrationPromise:z}=yield Mt(A);return z?z.catch(console.error):qr(A).catch(console.error),N.fid})).apply(this,arguments)}function Be(){return(Be=(0,F.Z)(function*(S,A=!1){const N=S;return yield yt(N),(yield qr(N,A)).token})).apply(this,arguments)}function yt(S){return it.apply(this,arguments)}function it(){return(it=(0,F.Z)(function*(S){const{registrationPromise:A}=yield Mt(S);A&&(yield A)})).apply(this,arguments)}function il(S){return Pe.create("missing-app-config-values",{valueName:S})}const sl="installations",vo=S=>{const A=S.getProvider("app").getImmediate(),N=function Yt(S){if(!S||!S.options)throw il("App Configuration");if(!S.name)throw il("App Name");const A=["projectId","apiKey","appId"];for(const N of A)if(!S.options[N])throw il(N);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(A);return{app:A,appConfig:N,heartbeatServiceProvider:(0,ce._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},Jl=S=>{const A=S.getProvider("app").getImmediate(),N=(0,ce._getProvider)(A,sl).getImmediate();return{getId:()=>function O(S){return H.apply(this,arguments)}(N),getToken:ae=>function _e(S){return Be.apply(this,arguments)}(N,ae)}};(function ol(){(0,ce._registerComponent)(new ve.wA(sl,vo,"PUBLIC")),(0,ce._registerComponent)(new ve.wA("installations-internal",Jl,"PRIVATE"))})(),(0,ce.registerVersion)(Te,Y),(0,ce.registerVersion)(Te,Y,"esm2017");const wo="@firebase/remote-config",sr=new pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Zi{constructor(A,N,z,ae){this.client=A,this.storage=N,this.storageCache=z,this.logger=ae}isCachedDataFresh(A,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const z=Date.now()-N,ae=z<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${z}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${ae}.`),ae}fetch(A){var N=this;return(0,F.Z)(function*(){const[z,ae]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(ae&&N.isCachedDataFresh(A.cacheMaxAgeMillis,z))return ae;A.eTag=ae&&ae.eTag;const me=yield N.client.fetch(A),We=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===me.status&&We.push(N.storage.setLastSuccessfulFetchResponse(me)),yield Promise.all(We),me})()}}function Xr(S=navigator){return S.languages&&S.languages[0]||S.language}class Ci{constructor(A,N,z,ae,me,We){this.firebaseInstallations=A,this.sdkVersion=N,this.namespace=z,this.projectId=ae,this.apiKey=me,this.appId=We}fetch(A){var N=this;return(0,F.Z)(function*(){const[z,ae]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),We=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},Ot={sdk_version:N.sdkVersion,app_instance_id:z,app_instance_id_token:ae,app_id:N.appId,language_code:Xr()},St={method:"POST",headers:Ye,body:JSON.stringify(Ot)},$t=fetch(We,St),le=new Promise((xi,ws)=>{A.signal.addEventListener(()=>{const Tl=new Error("The operation was aborted.");Tl.name="AbortError",ws(Tl)})});let zn;try{yield Promise.race([$t,le]),zn=yield $t}catch(xi){let ws="fetch-client-network";throw"AbortError"===xi?.name&&(ws="fetch-timeout"),sr.create(ws,{originalErrorMessage:xi?.message})}let U=zn.status;const fi=zn.headers.get("ETag")||void 0;let pu,Ga;if(200===zn.status){let xi;try{xi=yield zn.json()}catch(ws){throw sr.create("fetch-client-parse",{originalErrorMessage:ws?.message})}pu=xi.entries,Ga=xi.state}if("INSTANCE_STATE_UNSPECIFIED"===Ga?U=500:"NO_CHANGE"===Ga?U=304:("NO_TEMPLATE"===Ga||"EMPTY_CONFIG"===Ga)&&(pu={}),304!==U&&200!==U)throw sr.create("fetch-status",{httpStatus:U});return{status:U,eTag:fi,config:pu}})()}}class cr{constructor(A,N){this.client=A,this.storage=N}fetch(A){var N=this;return(0,F.Z)(function*(){const z=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(A,z)})()}attemptFetch(A,{throttleEndTimeMillis:N,backoffCount:z}){var ae=this;return(0,F.Z)(function*(){yield function al(S,A){return new Promise((N,z)=>{const ae=Math.max(A-Date.now(),0),me=setTimeout(N,ae);S.addEventListener(()=>{clearTimeout(me),z(sr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,N);try{const me=yield ae.client.fetch(A);return yield ae.storage.deleteThrottleMetadata(),me}catch(me){if(!function qn(S){if(!(S instanceof pe.ZR&&S.customData))return!1;const A=Number(S.customData.httpStatus);return 429===A||500===A||503===A||504===A}(me))throw me;const We={throttleEndTimeMillis:Date.now()+(0,pe.$s)(z),backoffCount:z+1};return yield ae.storage.setThrottleMetadata(We),ae.attemptFetch(A,We)}})()}}class Ia{constructor(A,N,z,ae,me){this.app=A,this._client=N,this._storageCache=z,this._storage=ae,this._logger=me,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function us(S,A){const N=S.target.error||void 0;return sr.create(A,{originalErrorMessage:N&&N?.message})}const yr="app_namespace_store";class ci{constructor(A,N,z,ae=function ui(){return new Promise((S,A)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=z=>{A(us(z,"storage-open"))},N.onsuccess=z=>{S(z.target.result)},N.onupgradeneeded=z=>{0===z.oldVersion&&z.target.result.createObjectStore(yr,{keyPath:"compositeKey"})}}catch(N){A(sr.create("storage-open",{originalErrorMessage:N?.message}))}})}()){this.appId=A,this.appName=N,this.namespace=z,this.openDbPromise=ae}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var N=this;return(0,F.Z)(function*(){const z=yield N.openDbPromise;return new Promise((ae,me)=>{const Ye=z.transaction([yr],"readonly").objectStore(yr),Ot=N.createCompositeKey(A);try{const St=Ye.get(Ot);St.onerror=$t=>{me(us($t,"storage-get"))},St.onsuccess=$t=>{const le=$t.target.result;ae(le?le.value:void 0)}}catch(St){me(sr.create("storage-get",{originalErrorMessage:St?.message}))}})})()}set(A,N){var z=this;return(0,F.Z)(function*(){const ae=yield z.openDbPromise;return new Promise((me,We)=>{const Ot=ae.transaction([yr],"readwrite").objectStore(yr),St=z.createCompositeKey(A);try{const $t=Ot.put({compositeKey:St,value:N});$t.onerror=le=>{We(us(le,"storage-set"))},$t.onsuccess=()=>{me()}}catch($t){We(sr.create("storage-set",{originalErrorMessage:$t?.message}))}})})()}delete(A){var N=this;return(0,F.Z)(function*(){const z=yield N.openDbPromise;return new Promise((ae,me)=>{const Ye=z.transaction([yr],"readwrite").objectStore(yr),Ot=N.createCompositeKey(A);try{const St=Ye.delete(Ot);St.onerror=$t=>{me(us($t,"storage-delete"))},St.onsuccess=()=>{ae()}}catch(St){me(sr.create("storage-delete",{originalErrorMessage:St?.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class cs{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,F.Z)(function*(){const N=A.storage.getLastFetchStatus(),z=A.storage.getLastSuccessfulFetchTimestampMillis(),ae=A.storage.getActiveConfig(),me=yield N;me&&(A.lastFetchStatus=me);const We=yield z;We&&(A.lastSuccessfulFetchTimestampMillis=We);const Ye=yield ae;Ye&&(A.activeConfig=Ye)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function fd(){return Da.apply(this,arguments)}function Da(){return(Da=(0,F.Z)(function*(){if(!(0,pe.hl)())return!1;try{return yield(0,pe.eu)()}catch{return!1}})).apply(this,arguments)}!function Yo(){(0,ce._registerComponent)(new ve.wA("remote-config",function S(A,{instanceIdentifier:N}){const z=A.getProvider("app").getImmediate(),ae=A.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw sr.create("registration-window");if(!(0,pe.hl)())throw sr.create("indexed-db-unavailable");const{projectId:me,apiKey:We,appId:Ye}=z.options;if(!me)throw sr.create("registration-project-id");if(!We)throw sr.create("registration-api-key");if(!Ye)throw sr.create("registration-app-id");const Ot=new ci(Ye,z.name,N=N||"firebase"),St=new cs(Ot),$t=new xe.Yd(wo);$t.logLevel=xe.in.ERROR;const le=new Ci(ae,ce.SDK_VERSION,N,me,We,Ye),zn=new cr(le,Ot),U=new Zi(zn,Ot,St,$t),fi=new Ia(z,U,St,Ot,$t);return function Gn(S){const A=(0,pe.m9)(S);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(fi),fi},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(wo,"0.4.1"),(0,ce.registerVersion)(wo,"0.4.1","esm2017")}();const ds="/firebase-messaging-sw.js",Eo="/firebase-cloud-messaging-push-scope",Qo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",cl="google.c.a.c_id",gd="google.c.a.c_l",Qu="google.c.a.ts",Jo="google.c.a.e";var Ki=(()=>{return(S=Ki||(Ki={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",Ki;var S})();function Ii(S){const A=new Uint8Array(S);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function md(S){const N=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),z=atob(N),ae=new Uint8Array(z.length);for(let me=0;me<z.length;++me)ae[me]=z.charCodeAt(me);return ae}const Ta="fcm_token_details_db",Sa="fcm_token_object_Store";function Xl(S){return Aa.apply(this,arguments)}function Aa(){return Aa=(0,F.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(me=>me.name).includes(Ta))return null;let A=null;return(yield(0,we.X3)(Ta,5,{upgrade:(z=(0,F.Z)(function*(ae,me,We,Ye){var Ot;if(me<2||!ae.objectStoreNames.contains(Sa))return;const St=Ye.objectStore(Sa),$t=yield St.index("fcmSenderId").get(S);if(yield St.clear(),$t)if(2===me){const le=$t;if(!le.auth||!le.p256dh||!le.endpoint)return;A={token:le.fcmToken,createTime:null!==(Ot=le.createTime)&&void 0!==Ot?Ot:Date.now(),subscriptionOptions:{auth:le.auth,p256dh:le.p256dh,endpoint:le.endpoint,swScope:le.swScope,vapidKey:"string"==typeof le.vapidKey?le.vapidKey:Ii(le.vapidKey)}}}else if(3===me){const le=$t;A={token:le.fcmToken,createTime:le.createTime,subscriptionOptions:{auth:Ii(le.auth),p256dh:Ii(le.p256dh),endpoint:le.endpoint,swScope:le.swScope,vapidKey:Ii(le.vapidKey)}}}else if(4===me){const le=$t;A={token:le.fcmToken,createTime:le.createTime,subscriptionOptions:{auth:Ii(le.auth),p256dh:Ii(le.p256dh),endpoint:le.endpoint,swScope:le.swScope,vapidKey:Ii(le.vapidKey)}}}}),function(me,We,Ye,Ot){return z.apply(this,arguments)})})).close(),yield(0,we.Lj)(Ta),yield(0,we.Lj)("fcm_vapid_details_db"),yield(0,we.Lj)("undefined"),eu(A)?A:null;var z}),Aa.apply(this,arguments)}function eu(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:A}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const xs="firebase-messaging-store";let qs=null;function zs(){return qs||(qs=(0,we.X3)("firebase-messaging-database",1,{upgrade:(S,A)=>{0===A&&S.createObjectStore(xs)}})),qs}function xa(S){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,F.Z)(function*(S){const A=Zs(S),z=yield(yield zs()).transaction(xs).objectStore(xs).get(A);if(z)return z;{const ae=yield Xl(S.appConfig.senderId);if(ae)return yield Yi(S,ae),ae}})).apply(this,arguments)}function Yi(S,A){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,F.Z)(function*(S,A){const N=Zs(S),ae=(yield zs()).transaction(xs,"readwrite");return yield ae.objectStore(xs).put(A,N),yield ae.done,A})).apply(this,arguments)}function Ra(S){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,F.Z)(function*(S){const A=Zs(S),z=(yield zs()).transaction(xs,"readwrite");yield z.objectStore(xs).delete(A),yield z.done})).apply(this,arguments)}function Zs({appConfig:S}){return S.appId}const or=new pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ea(S,A){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,F.Z)(function*(S,A){const N=yield hs(S),z=Na(A),ae={method:"POST",headers:N,body:JSON.stringify(z)};let me;try{me=yield(yield fetch(ka(S.appConfig),ae)).json()}catch(We){throw or.create("token-subscribe-failed",{errorInfo:We?.toString()})}if(me.error)throw or.create("token-subscribe-failed",{errorInfo:me.error.message});if(!me.token)throw or.create("token-subscribe-no-token");return me.token})).apply(this,arguments)}function dl(S,A){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,F.Z)(function*(S,A){const N=yield hs(S),z=Na(A.subscriptionOptions),ae={method:"PATCH",headers:N,body:JSON.stringify(z)};let me;try{me=yield(yield fetch(`${ka(S.appConfig)}/${A.token}`,ae)).json()}catch(We){throw or.create("token-update-failed",{errorInfo:We?.toString()})}if(me.error)throw or.create("token-update-failed",{errorInfo:me.error.message});if(!me.token)throw or.create("token-update-no-token");return me.token})).apply(this,arguments)}function Dr(S,A){return ta.apply(this,arguments)}function ta(){return(ta=(0,F.Z)(function*(S,A){const z={method:"DELETE",headers:yield hs(S)};try{const me=yield(yield fetch(`${ka(S.appConfig)}/${A}`,z)).json();if(me.error)throw or.create("token-unsubscribe-failed",{errorInfo:me.error.message})}catch(ae){throw or.create("token-unsubscribe-failed",{errorInfo:ae?.toString()})}})).apply(this,arguments)}function ka({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function hs(S){return dr.apply(this,arguments)}function dr(){return(dr=(0,F.Z)(function*({appConfig:S,installations:A}){const N=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Na({p256dh:S,auth:A,endpoint:N,vapidKey:z}){const ae={web:{endpoint:N,auth:A,p256dh:S}};return z!==Qo&&(ae.web.applicationPubKey=z),ae}const Qi=6048e5;function Xu(S){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,F.Z)(function*(S){const A=yield nu(S.swRegistration,S.vapidKey),N={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:A.endpoint,auth:Ii(A.getKey("auth")),p256dh:Ii(A.getKey("p256dh"))},z=yield xa(S.firebaseDependencies);if(z){if(ru(z.subscriptionOptions,N))return Date.now()>=z.createTime+Qi?Jt(S,{token:z.token,createTime:Date.now(),subscriptionOptions:N}):z.token;try{yield Dr(S.firebaseDependencies,z.token)}catch(ae){console.warn(ae)}return ec(S.firebaseDependencies,N)}return ec(S.firebaseDependencies,N)})).apply(this,arguments)}function hl(S){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,F.Z)(function*(S){const A=yield xa(S.firebaseDependencies);A&&(yield Dr(S.firebaseDependencies,A.token),yield Ra(S.firebaseDependencies));const N=yield S.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function Jt(S,A){return Co.apply(this,arguments)}function Co(){return(Co=(0,F.Z)(function*(S,A){try{const N=yield dl(S.firebaseDependencies,A),z=Object.assign(Object.assign({},A),{token:N,createTime:Date.now()});return yield Yi(S.firebaseDependencies,z),N}catch(N){throw yield hl(S),N}})).apply(this,arguments)}function ec(S,A){return Io.apply(this,arguments)}function Io(){return(Io=(0,F.Z)(function*(S,A){const z={token:yield ea(S,A),createTime:Date.now(),subscriptionOptions:A};return yield Yi(S,z),z.token})).apply(this,arguments)}function nu(S,A){return Do.apply(this,arguments)}function Do(){return(Do=(0,F.Z)(function*(S,A){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:md(A)})})).apply(this,arguments)}function ru(S,A){return A.vapidKey===S.vapidKey&&A.endpoint===S.endpoint&&A.auth===S.auth&&A.p256dh===S.p256dh}function fl(S){const A={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function tc(S,A){if(!A.notification)return;S.notification={};const N=A.notification.title;N&&(S.notification.title=N);const z=A.notification.body;z&&(S.notification.body=z);const ae=A.notification.image;ae&&(S.notification.image=ae);const me=A.notification.icon;me&&(S.notification.icon=me)}(A,S),function Me(S,A){A.data&&(S.data=A.data)}(A,S),function vn(S,A){var N,z,ae,me,We;if(!(A.fcmOptions||null!==(N=A.notification)&&void 0!==N&&N.click_action))return;S.fcmOptions={};const Ye=null!==(ae=null===(z=A.fcmOptions)||void 0===z?void 0:z.link)&&void 0!==ae?ae:null===(me=A.notification)||void 0===me?void 0:me.click_action;Ye&&(S.fcmOptions.link=Ye);const Ot=null===(We=A.fcmOptions)||void 0===We?void 0:We.analytics_label;Ot&&(S.fcmOptions.analyticsLabel=Ot)}(A,S),A}function nc(S){return"object"==typeof S&&!!S&&cl in S}function iu(S,A){const N=[];for(let z=0;z<S.length;z++)N.push(S.charAt(z)),z<A.length&&N.push(A.charAt(z));return N.join("")}function pl(S){return or.create("missing-app-config-values",{valueName:S})}iu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),iu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class To{constructor(A,N,z){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ae=function vr(S){if(!S||!S.options)throw pl("App Configuration Object");if(!S.name)throw pl("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:N}=S;for(const z of A)if(!N[z])throw pl(z);return{appName:S.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:ae,installations:N,analyticsProvider:z}}_delete(){return Promise.resolve()}}function Fi(S){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,F.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(ds,{scope:Eo}),S.swRegistration.update().catch(()=>{})}catch(A){throw or.create("failed-service-worker-registration",{browserErrorMessage:A?.message})}})).apply(this,arguments)}function Pa(S,A){return na.apply(this,arguments)}function na(){return(na=(0,F.Z)(function*(S,A){if(!A&&!S.swRegistration&&(yield Fi(S)),A||!S.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw or.create("invalid-sw-registration");S.swRegistration=A}})).apply(this,arguments)}function rc(S,A){return So.apply(this,arguments)}function So(){return(So=(0,F.Z)(function*(S,A){A?S.vapidKey=A:S.vapidKey||(S.vapidKey=Qo)})).apply(this,arguments)}function Or(){return(Or=(0,F.Z)(function*(S,A){if(!navigator)throw or.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw or.create("permission-blocked");return yield rc(S,A?.vapidKey),yield Pa(S,A?.serviceWorkerRegistration),Xu(S)})).apply(this,arguments)}function Ao(S,A,N){return Li.apply(this,arguments)}function Li(){return(Li=(0,F.Z)(function*(S,A,N){const z=fs(A);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(z,{message_id:N[cl],message_name:N[gd],message_time:N[Qu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function fs(S){switch(S){case Ki.NOTIFICATION_CLICKED:return"notification_open";case Ki.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Rs(){return(Rs=(0,F.Z)(function*(S,A){const N=A.data;if(!N.isFirebaseMessaging)return;S.onMessageHandler&&N.messageType===Ki.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(fl(N)):S.onMessageHandler.next(fl(N)));const z=N.data;nc(z)&&"1"===z[Jo]&&(yield Ao(S,N.messageType,z))})).apply(this,arguments)}const ml="@firebase/messaging",ks=S=>{const A=new To(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function gl(S,A){return Rs.apply(this,arguments)}(A,N)),A},Ns=S=>{const A=S.getProvider("messaging").getImmediate();return{getToken:z=>function Pr(S,A){return Or.apply(this,arguments)}(A,z)}};function yl(){return su.apply(this,arguments)}function su(){return(su=(0,F.Z)(function*(){try{yield(0,pe.eu)()}catch{return!1}return typeof window<"u"&&(0,pe.hl)()&&(0,pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function sc(){(0,ce._registerComponent)(new ve.wA("messaging",ks,"PUBLIC")),(0,ce._registerComponent)(new ve.wA("messaging-internal",Ns,"PRIVATE")),(0,ce.registerVersion)(ml,"0.12.1"),(0,ce.registerVersion)(ml,"0.12.1","esm2017")}();const au="analytics",ei="firebase_id",Oa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lc="https://www.googletagmanager.com/gtag/js",Fr=new xe.Yd("@firebase/analytics");function uc(S){return Promise.all(S.map(A=>A.catch(N=>N)))}function lu(S,A){const N=document.createElement("script");N.src=`${lc}?l=${S}&id=${A}`,N.async=!0,document.head.appendChild(N)}function ia(S,A,N,z,ae,me){return xo.apply(this,arguments)}function xo(){return(xo=(0,F.Z)(function*(S,A,N,z,ae,me){const We=z[ae];try{if(We)yield A[We];else{const Ot=(yield uc(N)).find(St=>St.measurementId===ae);Ot&&(yield A[Ot.appId])}}catch(Ye){Fr.error(Ye)}S("config",ae,me)})).apply(this,arguments)}function gs(S,A,N,z,ae){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,F.Z)(function*(S,A,N,z,ae){try{let me=[];if(ae&&ae.send_to){let We=ae.send_to;Array.isArray(We)||(We=[We]);const Ye=yield uc(N);for(const Ot of We){const St=Ye.find(le=>le.measurementId===Ot),$t=St&&A[St.appId];if(!$t){me=[];break}me.push($t)}}0===me.length&&(me=Object.values(A)),yield Promise.all(me),S("event",z,ae||{})}catch(me){Fr.error(me)}})).apply(this,arguments)}function Mo(S){const A=window.document.getElementsByTagName("script");for(const N of Object.values(A))if(N.src&&N.src.includes(lc)&&N.src.includes(S))return N;return null}const C=new pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ve=new class K{constructor(A={},N=1e3){this.throttleMetadata=A,this.intervalMillis=N}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,N){this.throttleMetadata[A]=N}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function gt(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Jn(S){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,F.Z)(function*(S){var A;const{appId:N,apiKey:z}=S,ae={method:"GET",headers:gt(z)},me=Oa.replace("{app-id}",N),We=yield fetch(me,ae);if(200!==We.status&&304!==We.status){let Ye="";try{const Ot=yield We.json();null!==(A=Ot.error)&&void 0!==A&&A.message&&(Ye=Ot.error.message)}catch{}throw C.create("config-fetch-failed",{httpStatus:We.status,responseMessage:Ye})}return We.json()})).apply(this,arguments)}function Xn(S){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,F.Z)(function*(S,A=Ve,N){const{appId:z,apiKey:ae,measurementId:me}=S.options;if(!z)throw C.create("no-app-id");if(!ae){if(me)return{measurementId:me,appId:z};throw C.create("no-api-key")}const We=A.getThrottleMetadata(z)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new _l;return setTimeout((0,F.Z)(function*(){Ye.abort()}),void 0!==N?N:6e4),Qs({appId:z,apiKey:ae,measurementId:me},We,Ye,A)})).apply(this,arguments)}function Qs(S,A,N){return ms.apply(this,arguments)}function ms(){return(ms=(0,F.Z)(function*(S,{throttleEndTimeMillis:A,backoffCount:N},z,ae=Ve){var me;const{appId:We,measurementId:Ye}=S;try{yield cc(z,A)}catch(Ot){if(Ye)return Fr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${Ot?.message}]`),{appId:We,measurementId:Ye};throw Ot}try{const Ot=yield Jn(S);return ae.deleteThrottleMetadata(We),Ot}catch(Ot){const St=Ot;if(!dc(St)){if(ae.deleteThrottleMetadata(We),Ye)return Fr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${St?.message}]`),{appId:We,measurementId:Ye};throw Ot}const $t=503===Number(null===(me=St?.customData)||void 0===me?void 0:me.httpStatus)?(0,pe.$s)(N,ae.intervalMillis,30):(0,pe.$s)(N,ae.intervalMillis),le={throttleEndTimeMillis:Date.now()+$t,backoffCount:N+1};return ae.setThrottleMetadata(We,le),Fr.debug(`Calling attemptFetch again in ${$t} millis`),Qs(S,le,z,ae)}})).apply(this,arguments)}function cc(S,A){return new Promise((N,z)=>{const ae=Math.max(A-Date.now(),0),me=setTimeout(N,ae);S.addEventListener(()=>{clearTimeout(me),z(C.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function dc(S){if(!(S instanceof pe.ZR&&S.customData))return!1;const A=Number(S.customData.httpStatus);return 429===A||500===A||503===A||504===A}class _l{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let hc,Va;function La(){return(La=(0,F.Z)(function*(S,A,N,z,ae){if(ae&&ae.global)S("event",N,z);else{const me=yield A;S("event",N,Object.assign(Object.assign({},z),{send_to:me}))}})).apply(this,arguments)}function fc(S){Va=S}function vl(S){hc=S}function Cd(){return du.apply(this,arguments)}function du(){return(du=(0,F.Z)(function*(){if(!(0,pe.hl)())return Fr.warn(C.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,pe.eu)()}catch(S){return Fr.warn(C.create("indexeddb-unavailable",{errorInfo:S?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ba(){return(Ba=(0,F.Z)(function*(S,A,N,z,ae,me,We){var Ye;const Ot=Xn(S);Ot.then(U=>{N[U.measurementId]=U.appId,S.options.measurementId&&U.measurementId!==S.options.measurementId&&Fr.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${U.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(U=>Fr.error(U)),A.push(Ot);const St=Cd().then(U=>{if(U)return z.getId()}),[$t,le]=yield Promise.all([Ot,St]);Mo(me)||lu(me,$t.measurementId),Va&&(ae("consent","default",Va),fc(void 0)),ae("js",new Date);const zn=null!==(Ye=We?.config)&&void 0!==Ye?Ye:{};return zn.origin="firebase",zn.update=!0,null!=le&&(zn[ei]=le),ae("config",$t.measurementId,zn),hc&&(ae("set",hc),vl(void 0)),$t.measurementId})).apply(this,arguments)}class Fh{constructor(A){this.app=A}_delete(){return delete ys[this.app.options.appId],Promise.resolve()}}let ys={},pc=[];const wl={};let gc,Si,_s="dataLayer",No=!1;function ja(S,A,N){!function mc(){const S=[];if((0,pe.ru)()&&S.push("This is a browser extension environment."),(0,pe.zI)()||S.push("Cookies are not available."),S.length>0){const A=S.map((z,ae)=>`(${ae+1}) ${z}`).join(" "),N=C.create("invalid-analytics-context",{errorInfo:A});Fr.warn(N.message)}}();const z=S.options.appId;if(!z)throw C.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw C.create("no-api-key");Fr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ys[z])throw C.create("already-exists",{id:z});if(!No){!function Ys(S){let A=[];Array.isArray(window[S])?A=window[S]:window[S]=A}(_s);const{wrappedGtag:me,gtagCore:We}=function Fa(S,A,N,z,ae){let me=function(...We){window[z].push(arguments)};return window[ae]&&"function"==typeof window[ae]&&(me=window[ae]),window[ae]=function uu(S,A,N,z){function me(){return(me=(0,F.Z)(function*(We,Ye,Ot){try{"event"===We?yield gs(S,A,N,Ye,Ot):"config"===We?yield ia(S,A,N,z,Ye,Ot):"consent"===We?S("consent","update",Ot):S("set",Ye)}catch(St){Fr.error(St)}})).apply(this,arguments)}return function ae(We,Ye,Ot){return me.apply(this,arguments)}}(me,S,A,N),{gtagCore:me,wrappedGtag:window[ae]}}(ys,pc,wl,_s,"gtag");Si=me,gc=We,No=!0}return ys[z]=function Id(S,A,N,z,ae,me,We){return Ba.apply(this,arguments)}(S,pc,wl,A,gc,_s,N),new Fh(S)}function yc(){return oa.apply(this,arguments)}function oa(){return(oa=(0,F.Z)(function*(){if((0,pe.ru)()||!(0,pe.zI)()||!(0,pe.hl)())return!1;try{return yield(0,pe.eu)()}catch{return!1}})).apply(this,arguments)}const bn="@firebase/analytics";!function Sd(){(0,ce._registerComponent)(new ve.wA(au,(A,{options:N})=>ja(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ce._registerComponent)(new ve.wA("analytics-internal",function S(A){try{const N=A.getProvider(au).getImmediate();return{logEvent:(z,ae,me)=>function Bh(S,A,N,z){S=(0,pe.m9)(S),function sa(S,A,N,z,ae){return La.apply(this,arguments)}(Si,ys[S.app.options.appId],A,N,z).catch(ae=>Fr.error(ae))}(N,z,ae,me)}}catch(N){throw C.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ce.registerVersion)(bn,"0.9.1"),(0,ce.registerVersion)(bn,"0.9.1","esm2017")}();var Ad=j(4408),xd=j(7565);const qy=new class Hh extends xd.v{}(class _c extends Ad.o{constructor(A,N){super(A,N),this.scheduler=A,this.work=N}schedule(A,N=0){return N>0?super.schedule(A,N):(this.delay=N,this.state=A,this.scheduler.flush(this),this)}execute(A,N){return N>0||this.closed?super.execute(A,N):this._execute(A,N)}requestAsyncId(A,N,z=0){return null!=z&&z>0||null==z&&this.delay>0?super.requestAsyncId(A,N,z):(A.flush(this),0)}});var zy=j(4986),El=j(8505),hr=j(5363),Md=j(9468);const fu=new d.GfV("7.5.0"),vc="__angularfire_symbol__analyticsIsSupportedValue",hi="__angularfire_symbol__analyticsIsSupported",Js="__angularfire_symbol__remoteConfigIsSupportedValue",wc="__angularfire_symbol__remoteConfigIsSupported",Cl="__angularfire_symbol__messagingIsSupportedValue",Po="__angularfire_symbol__messagingIsSupported";function Ai(S,A,N){if(A){if(1===A.length)return A[0];const me=A.filter(We=>We.app===N);if(1===me.length)return me[0]}return N.container.getProvider(S).getImmediate({optional:!0})}globalThis[hi]||(globalThis[hi]=yc().then(S=>globalThis[vc]=S).catch(()=>globalThis[vc]=!1)),globalThis[Po]||(globalThis[Po]=yl().then(S=>globalThis[Cl]=S).catch(()=>globalThis[Cl]=!1)),globalThis[wc]||(globalThis[wc]=fd().then(S=>globalThis[Js]=S).catch(()=>globalThis[Js]=!1));const fr=(S,A)=>{const N=A?[A]:(0,G.C6)(),z=[];return N.forEach(ae=>{ae.container.getProvider(S).instances.forEach(We=>{z.includes(We)||z.push(We)})}),z};function Zr(){}class vs{constructor(A,N=qy){this.zone=A,this.delegate=N}now(){return this.delegate.now()}schedule(A,N,z){const ae=this.zone;return this.delegate.schedule(function(We){ae.runGuarded(()=>{A.apply(this,[We])})},N,z)}}class Oo{constructor(A){this.zone=A,this.task=null}call(A,N){const z=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zr,{},Zr,Zr)),N.pipe((0,El.b)({next:z,complete:z,error:z})).subscribe(A).add(z)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let kn=(()=>{class S{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new vs(Zone.current)),this.insideAngular=N.run(()=>new vs(Zone.current,zy.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(N){return new(N||S)(d.LFG(d.R0b))},S.\u0275prov=d.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function pt(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function bc(S){return S.pipe((0,hr.Q)(pt().outsideAngular))}function ar(S){return pt(),function er(S){return function(N){return(N=N.lift(new Oo(S.ngZone))).pipe((0,Md.R)(S.outsideAngular),(0,hr.Q)(S.insideAngular))}}(pt())(S)}},1808:(_t,Ne,j)=>{"use strict";j.d(Ne,{$:()=>ka,A:()=>Q,B:()=>je,G:()=>Jl,H:()=>gn,J:()=>cr,L:()=>J,M:()=>Da,N:()=>pd,P:()=>zy,Q:()=>cl,R:()=>Td,T:()=>gd,U:()=>Qo,V:()=>Ki,W:()=>Ii,X:()=>Xl,Y:()=>Wr,Z:()=>ea,_:()=>dl,a:()=>R,a0:()=>Xu,a1:()=>hl,a2:()=>Jt,a3:()=>ec,a4:()=>nu,a5:()=>ru,a6:()=>tc,a7:()=>Me,a8:()=>nc,a9:()=>iu,aA:()=>Z,aB:()=>Ot,aC:()=>bc,aD:()=>Ct,aE:()=>Cr,aI:()=>gt,aL:()=>Jo,aa:()=>Fi,ab:()=>Pa,ac:()=>rc,af:()=>Ao,ag:()=>fs,ah:()=>gl,ak:()=>xs,al:()=>ra,an:()=>lc,ao:()=>xo,ap:()=>Ce,aq:()=>Tt,ar:()=>yt,as:()=>$e,at:()=>Ec,au:()=>xi,av:()=>Ln,aw:()=>Ge,ax:()=>B,ay:()=>U,az:()=>ee,b:()=>C,c:()=>Cl,d:()=>Wy,e:()=>Rd,f:()=>er,g:()=>z,h:()=>S,i:()=>du,j:()=>We,k:()=>tg,l:()=>$h,m:()=>rg,o:()=>we,r:()=>Ad,s:()=>jh,u:()=>qy});var d=j(5861),G=j(2090),F=j(9681),ce=j(1877),pe=j(655),ve=j(4859);const we={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const je=function ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function Qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ft=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fe=new ce.Yd("@firebase/auth");function Pe(w,...g){Fe.logLevel<=ce.in.ERROR&&Fe.error(`Auth (${F.SDK_VERSION}): ${w}`,...g)}function $e(w,...g){throw Je(w,...g)}function Ge(w,...g){return Je(w,...g)}function Le(w,g,y){const E=Object.assign(Object.assign({},nt()),{[g]:y});return new G.LL("auth","Firebase",E).create(g,{appName:w.name})}function Ue(w,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&$e(w,"argument-error"),Le(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Je(w,...g){if("string"!=typeof w){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(y,...E)}return ft.create(w,...g)}function B(w,g,...y){if(!w)throw Je(g,...y)}function ye(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Pe(g),new Error(g)}function Ce(w,g){w||ye(g)}const re=new Map;function ee(w){Ce(w instanceof Function,"Expected a class definition");let g=re.get(w);return g?(Ce(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,re.set(w,g),g)}function Ke(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function ze(){return"http:"===bt()||"https:"===bt()}function bt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class vt{constructor(g,y){this.shortDelay=g,this.longDelay=y,Ce(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function fn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ze()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jt(w,g){Ce(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class Nt{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Hn=new vt(3e4,6e4);function Xt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Dt(w,g,y,E){return gr.apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(w,g,y,E,k={}){return Mr(w,k,(0,d.Z)(function*(){let V={},de={};E&&("GET"===g?de=E:V={body:JSON.stringify(E)});const He=(0,G.xO)(Object.assign({key:w.config.apiKey},de)).slice(1),mt=yield w._getAdditionalHeaders();return mt["Content-Type"]="application/json",w.languageCode&&(mt["X-Firebase-Locale"]=w.languageCode),Nt.fetch()(Rr(w,w.config.apiHost,y,He),Object.assign({method:g,headers:mt,referrerPolicy:"no-referrer"},V))}))})).apply(this,arguments)}function Mr(w,g,y){return br.apply(this,arguments)}function br(){return(br=(0,d.Z)(function*(w,g,y){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},tn),g);try{const k=new ai(w),V=yield Promise.race([y(),k.promise]);k.clearNetworkTimeout();const de=yield V.json();if("needConfirmation"in de)throw Nn(w,"account-exists-with-different-credential",de);if(V.ok&&!("errorMessage"in de))return de;{const He=V.ok?de.errorMessage:de.error.message,[mt,Rt]=He.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===mt)throw Nn(w,"credential-already-in-use",de);if("EMAIL_EXISTS"===mt)throw Nn(w,"email-already-in-use",de);if("USER_DISABLED"===mt)throw Nn(w,"user-disabled",de);const mn=E[mt]||mt.toLowerCase().replace(/[_\s]+/g,"-");if(Rt)throw Le(w,mn,Rt);$e(w,mn)}}catch(k){if(k instanceof G.ZR)throw k;$e(w,"network-request-failed")}})).apply(this,arguments)}function Vn(w,g,y,E){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,d.Z)(function*(w,g,y,E,k={}){const V=yield Dt(w,g,y,E,k);return"mfaPendingCredential"in V&&$e(w,"multi-factor-auth-required",{_serverResponse:V}),V})).apply(this,arguments)}function Rr(w,g,y,E){const k=`${g}${y}?${E}`;return w.config.emulator?jt(w.config,k):`${w.config.apiScheme}://${k}`}class ai{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Ge(this.auth,"network-request-failed")),Hn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nn(w,g,y){const E={appName:w.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const k=Ge(w,g,E);return k.customData._tokenResponse=y,k}function se(){return(se=(0,d.Z)(function*(w,g){return Dt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function ge(w,g){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,d.Z)(function*(w,g){return Dt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function be(w,g){return rt.apply(this,arguments)}function rt(){return(rt=(0,d.Z)(function*(w,g){return Dt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function _n(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function un(){return(un=(0,d.Z)(function*(w,g=!1){const y=(0,G.m9)(w),E=yield y.getIdToken(g),k=ot(E);B(k&&k.exp&&k.auth_time&&k.iat,y.auth,"internal-error");const V="object"==typeof k.firebase?k.firebase:void 0,de=V?.sign_in_provider;return{claims:k,token:E,authTime:_n(At(k.auth_time)),issuedAtTime:_n(At(k.iat)),expirationTime:_n(At(k.exp)),signInProvider:de||null,signInSecondFactor:V?.sign_in_second_factor||null}})).apply(this,arguments)}function At(w){return 1e3*Number(w)}function ot(w){const[g,y,E]=w.split(".");if(void 0===g||void 0===y||void 0===E)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,G.tV)(y);return k?JSON.parse(k):(Pe("Failed to decode base64 JWT payload"),null)}catch(k){return Pe("Caught error parsing JWT payload as JSON",k?.toString()),null}}function Mn(w,g){return wn.apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(w,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof G.ZR&&nn(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function nn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class An{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const k=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,d.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&g.schedule(!0))}g.schedule()})()}}class Bn{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=_n(this.lastLoginAt),this.creationTime=_n(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Gr(w){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,d.Z)(function*(w){var g;const y=w.auth,E=yield w.getIdToken(),k=yield Mn(w,be(y,{idToken:E}));B(k?.users.length,y,"internal-error");const V=k.users[0];w._notifyReloadListener(V);const de=null!==(g=V.providerUserInfo)&&void 0!==g&&g.length?Et(V.providerUserInfo):[],He=qr(w.providerData,de),mn=!!w.isAnonymous&&!(w.email&&V.passwordHash||He?.length),Yn={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:He,metadata:new Bn(V.createdAt,V.lastLoginAt),isAnonymous:mn};Object.assign(w,Yn)})).apply(this,arguments)}function rn(){return(rn=(0,d.Z)(function*(w){const g=(0,G.m9)(w);yield Gr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function qr(w,g){return[...w.filter(E=>!g.some(k=>k.providerId===E.providerId)),...g]}function Et(w){return w.map(g=>{var{providerId:y}=g,E=(0,pe._T)(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Oe(){return(Oe=(0,d.Z)(function*(w,g){const y=yield Mr(w,{},(0,d.Z)(function*(){const E=(0,G.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:k,apiKey:V}=w.config,de=Rr(w,k,"/v1/token",`key=${V}`),He=yield w._getAdditionalHeaders();return He["Content-Type"]="application/x-www-form-urlencoded",Nt.fetch()(de,{method:"POST",headers:He,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class lt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){B(g.idToken,"internal-error"),B(typeof g.idToken<"u","internal-error"),B(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function ht(w){const g=ot(w);return B(g,"internal-error"),B(typeof g.exp<"u","internal-error"),B(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,d.Z)(function*(){return B(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,d.Z)(function*(){const{accessToken:k,refreshToken:V,expiresIn:de}=yield function Xe(w,g){return Oe.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(k,V,Number(de))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:k,expirationTime:V}=y,de=new lt;return E&&(B("string"==typeof E,"internal-error",{appName:g}),de.refreshToken=E),k&&(B("string"==typeof k,"internal-error",{appName:g}),de.accessToken=k),V&&(B("number"==typeof V,"internal-error",{appName:g}),de.expirationTime=V),de}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new lt,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Lt(w,g){B("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class Pt{constructor(g){var{uid:y,auth:E,stsTokenManager:k}=g,V=(0,pe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new An(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=V.displayName||null,this.email=V.email||null,this.emailVerified=V.emailVerified||!1,this.phoneNumber=V.phoneNumber||null,this.photoURL=V.photoURL||null,this.isAnonymous=V.isAnonymous||!1,this.tenantId=V.tenantId||null,this.providerData=V.providerData?[...V.providerData]:[],this.metadata=new Bn(V.createdAt||void 0,V.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,d.Z)(function*(){const E=yield Mn(y,y.stsTokenManager.getToken(y.auth,g));return B(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function Mt(w){return un.apply(this,arguments)}(this,g)}reload(){return function Qr(w){return rn.apply(this,arguments)}(this)}_assign(g){this!==g&&(B(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Pt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,d.Z)(function*(){let k=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),k=!0),y&&(yield Gr(E)),yield E.auth._persistUserIfCurrent(E),k&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,d.Z)(function*(){const y=yield g.getIdToken();return yield Mn(g,function oe(w,g){return se.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,k,V,de,He,mt,Rt,mn;const Yn=null!==(E=y.displayName)&&void 0!==E?E:void 0,es=null!==(k=y.email)&&void 0!==k?k:void 0,Fs=null!==(V=y.phoneNumber)&&void 0!==V?V:void 0,Ic=null!==(de=y.photoURL)&&void 0!==de?de:void 0,Al=null!==(He=y.tenantId)&&void 0!==He?He:void 0,mu=null!==(mt=y._redirectEventId)&&void 0!==mt?mt:void 0,Qh=null!==(Rt=y.createdAt)&&void 0!==Rt?Rt:void 0,og=null!==(mn=y.lastLoginAt)&&void 0!==mn?mn:void 0,{uid:Dc,emailVerified:Jh,isAnonymous:Xh,providerData:Fd,stsTokenManager:ag}=y;B(Dc&&ag,g,"internal-error");const Qy=lt.fromJSON(this.name,ag);B("string"==typeof Dc,g,"internal-error"),Lt(Yn,g.name),Lt(es,g.name),B("boolean"==typeof Jh,g,"internal-error"),B("boolean"==typeof Xh,g,"internal-error"),Lt(Fs,g.name),Lt(Ic,g.name),Lt(Al,g.name),Lt(mu,g.name),Lt(Qh,g.name),Lt(og,g.name);const ef=new Pt({uid:Dc,auth:g,email:es,emailVerified:Jh,displayName:Yn,isAnonymous:Xh,photoURL:Ic,phoneNumber:Fs,tenantId:Al,stsTokenManager:Qy,createdAt:Qh,lastLoginAt:og});return Fd&&Array.isArray(Fd)&&(ef.providerData=Fd.map(lg=>Object.assign({},lg))),mu&&(ef._redirectEventId=mu),ef}static _fromIdTokenResponse(g,y,E=!1){return(0,d.Z)(function*(){const k=new lt;k.updateFromServerResponse(y);const V=new Pt({uid:y.localId,auth:g,stsTokenManager:k,isAnonymous:E});return yield Gr(V),V})()}}const J=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(y,E){var k=this;return(0,d.Z)(function*(){k.storage[y]=E})()}_get(y){var E=this;return(0,d.Z)(function*(){const k=E.storage[y];return void 0===k?null:k})()}_remove(y){var E=this;return(0,d.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return w.type="NONE",w})();function Z(w,g,y){return`firebase:${w}:${g}:${y}`}class te{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:k,name:V}=this.auth;this.fullUserKey=Z(this.userKey,k.apiKey,V),this.fullPersistenceKey=Z("persistence",k.apiKey,V),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Pt._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,d.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,d.Z)(function*(){if(!y.length)return new te(ee(J),g,E);const k=(yield Promise.all(y.map(function(){var Rt=(0,d.Z)(function*(mn){if(yield mn._isAvailable())return mn});return function(mn){return Rt.apply(this,arguments)}}()))).filter(Rt=>Rt);let V=k[0]||ee(J);const de=Z(E,g.config.apiKey,g.name);let He=null;for(const Rt of y)try{const mn=yield Rt._get(de);if(mn){const Yn=Pt._fromJSON(g,mn);Rt!==V&&(He=Yn),V=Rt;break}}catch{}const mt=k.filter(Rt=>Rt._shouldAllowMigration);return V._shouldAllowMigration&&mt.length?(V=mt[0],He&&(yield V._set(de,He.toJSON())),yield Promise.all(y.map(function(){var Rt=(0,d.Z)(function*(mn){if(mn!==V)try{yield mn._remove(de)}catch{}});return function(mn){return Rt.apply(this,arguments)}}())),new te(V,g,E)):new te(V,g,E)})()}}function q(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Be(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(O(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(it(g))return"Blackberry";if(Kt(g))return"Webos";if(H(g))return"Safari";if((g.includes("chrome/")||_e(g))&&!g.includes("edge/"))return"Chrome";if(yt(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function O(w=(0,G.z$)()){return/firefox\//i.test(w)}function H(w=(0,G.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function _e(w=(0,G.z$)()){return/crios\//i.test(w)}function Be(w=(0,G.z$)()){return/iemobile/i.test(w)}function yt(w=(0,G.z$)()){return/android/i.test(w)}function it(w=(0,G.z$)()){return/blackberry/i.test(w)}function Kt(w=(0,G.z$)()){return/webos/i.test(w)}function Tt(w=(0,G.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Ln(w=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function zr(w=(0,G.z$)()){return Tt(w)||yt(w)||Kt(w)||it(w)||/windows phone/i.test(w)||Be(w)}function Yt(w,g=[]){let y;switch(w){case"Browser":y=q((0,G.z$)());break;case"Worker":y=`${q((0,G.z$)())}-${w}`;break;default:y=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${F.SDK_VERSION}/${E}`}class il{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const E=V=>new Promise((de,He)=>{try{de(g(V))}catch(mt){He(mt)}});E.onAbort=y,this.queue.push(E);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,d.Z)(function*(){if(y.auth.currentUser===g)return;const E=[];try{for(const k of y.queue)yield k(g),k.onAbort&&E.push(k.onAbort)}catch(k){E.reverse();for(const V of E)try{V()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:k?.message})}})()}}class sl{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vo(this),this.idTokenSubscription=new vo(this),this.beforeStateQueue=new il(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ft,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=ee(y)),this._initializationPromise=this.queue((0,d.Z)(function*(){var k,V;if(!E._deleted&&(E.persistenceManager=yield te.create(E,g),!E._deleted)){if(null!==(k=E._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(V=E.currentUser)||void 0===V?void 0:V.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,d.Z)(function*(){var E;const k=yield y.assertedPersistence.getCurrentUser();let V=k,de=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const He=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,mt=V?._redirectEventId,Rt=yield y.tryRedirectSignIn(g);(!He||He===mt)&&Rt?.user&&(V=Rt.user,de=!0)}if(!V)return y.directlySetCurrentUser(null);if(!V._redirectEventId){if(de)try{yield y.beforeStateQueue.runMiddleware(V)}catch(He){V=k,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(He))}return V?y.reloadAndSetCurrentUserOrClear(V):y.directlySetCurrentUser(null)}return B(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===V._redirectEventId?y.directlySetCurrentUser(V):y.reloadAndSetCurrentUserOrClear(V)})()}tryRedirectSignIn(g){var y=this;return(0,d.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,d.Z)(function*(){try{yield Gr(g)}catch(E){if("auth/network-request-failed"!==E?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Sn(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,d.Z)(function*(){const E=g?(0,G.m9)(g):null;return E&&B(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g,y=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return g&&B(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),y||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,d.Z)(function*(){yield y.assertedPersistence.setPersistence(ee(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new G.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,d.Z)(function*(){const k=yield E.getOrInitRedirectPersistenceManager(y);return null===g?k.removeCurrentUser():k.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,d.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&ee(g)||y._popupRedirectResolver;B(E,y,"argument-error"),y.redirectPersistenceManager=yield te.create(y,[ee(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,d.Z)(function*(){var E,k;return y._isInitialized&&(yield y.queue((0,d.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(k=y.redirectUser)||void 0===k?void 0:k._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,d.Z)(function*(){if(g===y.currentUser)return y.queue((0,d.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,k){if(this._deleted)return()=>{};const V="function"==typeof y?y:y.next.bind(y),de=this._isInitialized?Promise.resolve():this._initializationPromise;return B(de,this,"internal-error"),de.then(()=>V(this.currentUser)),"function"==typeof y?g.addObserver(y,E,k):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,d.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Yt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const k=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return k&&(E["X-Firebase-Client"]=k),E})()}}function Cr(w){return(0,G.m9)(w)}class vo{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,G.ne)(y=>this.observer=y)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Jl(w,g,y){const E=Cr(w);B(E._canInitEmulator,E,"emulator-config-failed"),B(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const k=!!y?.disableWarnings,V=ol(g),{host:de,port:He}=function wo(w){const g=ol(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(E);if(k){const V=k[1];return{host:V,port:zi(E.substr(V.length+1))}}{const[V,de]=E.split(":");return{host:V,port:zi(de)}}}(g);E.config.emulator={url:`${V}//${de}${null===He?"":`:${He}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:de,port:He,protocol:V.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function In(){function w(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function ol(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function zi(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class gn{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return ye("not implemented")}_getIdTokenResponse(g){return ye("not implemented")}_linkToIdToken(g,y){return ye("not implemented")}_getReauthenticationResolver(g){return ye("not implemented")}}function kr(w,g){return sr.apply(this,arguments)}function sr(){return(sr=(0,d.Z)(function*(w,g){return Dt(w,"POST","/v1/accounts:resetPassword",Xt(w,g))})).apply(this,arguments)}function Jr(w,g){return li.apply(this,arguments)}function li(){return(li=(0,d.Z)(function*(w,g){return Dt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ct(w,g){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,d.Z)(function*(w,g){return Dt(w,"POST","/v1/accounts:update",Xt(w,g))})).apply(this,arguments)}function Nr(){return(Nr=(0,d.Z)(function*(w,g){return Vn(w,"POST","/v1/accounts:signInWithPassword",Xt(w,g))})).apply(this,arguments)}function Ni(w,g){return mr.apply(this,arguments)}function mr(){return(mr=(0,d.Z)(function*(w,g){return Dt(w,"POST","/v1/accounts:sendOobCode",Xt(w,g))})).apply(this,arguments)}function bi(w,g){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,d.Z)(function*(w,g){return Ni(w,g)})).apply(this,arguments)}function ba(w,g){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,d.Z)(function*(w,g){return Ni(w,g)})).apply(this,arguments)}function sn(w,g){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,d.Z)(function*(w,g){return Ni(w,g)})).apply(this,arguments)}function bo(w,g){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,d.Z)(function*(w,g){return Ni(w,g)})).apply(this,arguments)}function Zn(){return(Zn=(0,d.Z)(function*(w,g){return Vn(w,"POST","/v1/accounts:signInWithEmailLink",Xt(w,g))})).apply(this,arguments)}function Zi(){return(Zi=(0,d.Z)(function*(w,g){return Vn(w,"POST","/v1/accounts:signInWithEmailLink",Xt(w,g))})).apply(this,arguments)}class Xr extends gn{constructor(g,y,E,k=null){super("password",E),this._email=g,this._password=y,this._tenantId=k}static _fromEmailAndPassword(g,y){return new Xr(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new Xr(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,d.Z)(function*(){switch(y.signInMethod){case"password":return function Wn(w,g){return Nr.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function Wi(w,g){return Zn.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:$e(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return Jr(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Ea(w,g){return Zi.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:$e(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ci(w,g){return al.apply(this,arguments)}function al(){return(al=(0,d.Z)(function*(w,g){return Vn(w,"POST","/v1/accounts:signInWithIdp",Xt(w,g))})).apply(this,arguments)}class cr extends gn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new cr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):$e("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:k}=y,V=(0,pe._T)(y,["providerId","signInMethod"]);if(!E||!k)return null;const de=new cr(E,k);return de.idToken=V.idToken||void 0,de.accessToken=V.accessToken||void 0,de.secret=V.secret,de.nonce=V.nonce,de.pendingToken=V.pendingToken||null,de}_getIdTokenResponse(g){return Ci(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Ci(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Ci(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,G.xO)(y)}return g}}function ll(w,g){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,d.Z)(function*(w,g){return Dt(w,"POST","/v1/accounts:sendVerificationCode",Xt(w,g))})).apply(this,arguments)}function us(){return(us=(0,d.Z)(function*(w,g){return Vn(w,"POST","/v1/accounts:signInWithPhoneNumber",Xt(w,g))})).apply(this,arguments)}function _r(){return(_r=(0,d.Z)(function*(w,g){const y=yield Vn(w,"POST","/v1/accounts:signInWithPhoneNumber",Xt(w,g));if(y.temporaryProof)throw Nn(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const hd={USER_NOT_FOUND:"user-not-found"};function ci(){return(ci=(0,d.Z)(function*(w,g){return Vn(w,"POST","/v1/accounts:signInWithPhoneNumber",Xt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),hd)})).apply(this,arguments)}class cs extends gn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new cs({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new cs({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function Ia(w,g){return us.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function yr(w,g){return _r.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function ui(w,g){return ci.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:k}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:k}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:k,temporaryProof:V}=g;return E||y||k||V?new cs({verificationId:y,verificationCode:E,phoneNumber:k,temporaryProof:V}):null}}class Ir{constructor(g){var y,E,k,V,de,He;const mt=(0,G.zd)((0,G.pd)(g)),Rt=null!==(y=mt.apiKey)&&void 0!==y?y:null,mn=null!==(E=mt.oobCode)&&void 0!==E?E:null,Yn=function Yo(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=mt.mode)&&void 0!==k?k:null);B(Rt&&mn&&Yn,"argument-error"),this.apiKey=Rt,this.operation=Yn,this.code=mn,this.continueUrl=null!==(V=mt.continueUrl)&&void 0!==V?V:null,this.languageCode=null!==(de=mt.languageCode)&&void 0!==de?de:null,this.tenantId=null!==(He=mt.tenantId)&&void 0!==He?He:null}static parseLink(g){const y=function ul(w){const g=(0,G.zd)((0,G.pd)(w)).link,y=g?(0,G.zd)((0,G.pd)(g)).deep_link_id:null,E=(0,G.zd)((0,G.pd)(w)).deep_link_id;return(E?(0,G.zd)((0,G.pd)(E)).link:null)||E||y||g||w}(g);try{return new Ir(y)}catch{return null}}}let Da=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,E){return Xr._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const k=Ir.parseLink(E);return B(k,"argument-error"),Xr._fromEmailAndCode(y,k.code,k.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class ds{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Eo extends ds{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Qo extends Eo{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return B("providerId"in y&&"signInMethod"in y,"argument-error"),cr._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return B(g.idToken||g.accessToken,"argument-error"),cr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Qo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Qo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:k,pendingToken:V,nonce:de,providerId:He}=g;if(!E&&!k&&!y&&!V||!He)return null;try{return new Qo(He)._credential({idToken:y,accessToken:E,nonce:de,pendingToken:V})}catch{return null}}}let pd=(()=>{class w extends Eo{constructor(){super("facebook.com")}static credential(y){return cr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),cl=(()=>{class w extends Eo{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return cr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:k}=y;if(!E&&!k)return null;try{return w.credential(E,k)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),gd=(()=>{class w extends Eo{constructor(){super("github.com")}static credential(y){return cr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Jo extends gn{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Ci(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Ci(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Ci(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:k,pendingToken:V}=y;return E&&k&&V&&E===k?new Jo(E,V):null}static _create(g,y){return new Jo(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ki extends ds{constructor(g){B(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ki.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ki.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Jo.fromJSON(g);return B(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return Jo._create(E,y)}catch{return null}}}let Ii=(()=>{class w extends Eo{constructor(){super("twitter.com")}static credential(y,E){return cr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:k}=y;if(!E||!k)return null;try{return w.credential(E,k)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function md(w,g){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,d.Z)(function*(w,g){return Vn(w,"POST","/v1/accounts:signUp",Xt(w,g))})).apply(this,arguments)}class Di{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,k=!1){return(0,d.Z)(function*(){const V=yield Pt._fromIdTokenResponse(g,E,k),de=Sa(E);return new Di({user:V,providerId:de,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const k=Sa(E);return new Di({user:g,providerId:k,_tokenResponse:E,operationType:y})})()}}function Sa(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Xl(w){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,d.Z)(function*(w){var g;const y=Cr(w);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new Di({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield md(y,{returnSecureToken:!0}),k=yield Di._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(k.user),k})).apply(this,arguments)}class eu extends G.ZR{constructor(g,y,E,k){var V;super(y.code,y.message),this.operationType=E,this.user=k,Object.setPrototypeOf(this,eu.prototype),this.customData={appName:g.name,tenantId:null!==(V=g.tenantId)&&void 0!==V?V:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,k){return new eu(g,y,E,k)}}function tu(w,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(V=>{throw"auth/multi-factor-auth-required"===V.code?eu._fromErrorAndOperation(w,V,g,E):V})}function Gs(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function xs(w,g){return qs.apply(this,arguments)}function qs(){return(qs=(0,d.Z)(function*(w,g){const y=(0,G.m9)(w);yield Ws(!0,y,g);const{providerUserInfo:E}=yield ge(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),k=Gs(E||[]);return y.providerData=y.providerData.filter(V=>k.has(V.providerId)),k.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function zs(w,g){return xa.apply(this,arguments)}function xa(){return(xa=(0,d.Z)(function*(w,g,y=!1){const E=yield Mn(w,g._linkToIdToken(w.auth,yield w.getIdToken()),y);return Di._forOperation(w,"link",E)})).apply(this,arguments)}function Ws(w,g,y){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,d.Z)(function*(w,g,y){yield Gr(g);const k=!1===w?"provider-already-linked":"no-such-provider";B(Gs(g.providerData).has(y)===w,g.auth,k)})).apply(this,arguments)}function Ma(w,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(w,g,y=!1){const{auth:E}=w,k="reauthenticate";try{const V=yield Mn(w,tu(E,k,g,w),y);B(V.idToken,E,"internal-error");const de=ot(V.idToken);B(de,E,"internal-error");const{sub:He}=de;return B(w.uid===He,E,"user-mismatch"),Di._forOperation(w,k,V)}catch(V){throw"auth/user-not-found"===V?.code&&$e(E,"user-mismatch"),V}})).apply(this,arguments)}function Xo(w,g){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,d.Z)(function*(w,g,y=!1){const E="signIn",k=yield tu(w,E,g),V=yield Di._fromIdTokenResponse(w,E,k);return y||(yield w._updateCurrentUser(V.user)),V})).apply(this,arguments)}function Wr(w,g){return or.apply(this,arguments)}function or(){return(or=(0,d.Z)(function*(w,g){return Xo(Cr(w),g)})).apply(this,arguments)}function ea(w,g){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,d.Z)(function*(w,g){const y=(0,G.m9)(w);return yield Ws(!1,y,g.providerId),zs(y,g)})).apply(this,arguments)}function dl(w,g){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,d.Z)(function*(w,g){return Ma((0,G.m9)(w),g)})).apply(this,arguments)}function Dr(w,g){return ta.apply(this,arguments)}function ta(){return(ta=(0,d.Z)(function*(w,g){return Vn(w,"POST","/v1/accounts:signInWithCustomToken",Xt(w,g))})).apply(this,arguments)}function ka(w,g){return hs.apply(this,arguments)}function hs(){return(hs=(0,d.Z)(function*(w,g){const y=Cr(w),E=yield Dr(y,{token:g,returnSecureToken:!0}),k=yield Di._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(k.user),k})).apply(this,arguments)}class dr{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Na._fromServerResponse(g,y):$e(g,"internal-error")}}class Na extends dr{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Na(y)}}function Qi(w,g,y){var E;B((null===(E=y.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),B(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(B(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(B(y.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function Xu(w,g,y){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,d.Z)(function*(w,g,y){const E=(0,G.m9)(w),k={requestType:"PASSWORD_RESET",email:g};y&&Qi(E,k,y),yield ba(E,k)})).apply(this,arguments)}function hl(w,g,y){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,d.Z)(function*(w,g,y){yield kr((0,G.m9)(w),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Jt(w,g){return Co.apply(this,arguments)}function Co(){return(Co=(0,d.Z)(function*(w,g){yield ct((0,G.m9)(w),{oobCode:g})})).apply(this,arguments)}function ec(w,g){return Io.apply(this,arguments)}function Io(){return(Io=(0,d.Z)(function*(w,g){const y=(0,G.m9)(w),E=yield kr(y,{oobCode:g}),k=E.requestType;switch(B(k,y,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(E.mfaInfo,y,"internal-error");default:B(E.email,y,"internal-error")}let V=null;return E.mfaInfo&&(V=dr._fromServerResponse(Cr(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:V},operation:k}})).apply(this,arguments)}function nu(w,g){return Do.apply(this,arguments)}function Do(){return(Do=(0,d.Z)(function*(w,g){const{data:y}=yield ec((0,G.m9)(w),g);return y.email})).apply(this,arguments)}function ru(w,g,y){return fl.apply(this,arguments)}function fl(){return(fl=(0,d.Z)(function*(w,g,y){const E=Cr(w),k=yield md(E,{returnSecureToken:!0,email:g,password:y}),V=yield Di._fromIdTokenResponse(E,"signIn",k);return yield E._updateCurrentUser(V.user),V})).apply(this,arguments)}function tc(w,g,y){return Wr((0,G.m9)(w),Da.credential(g,y))}function Me(w,g,y){return vn.apply(this,arguments)}function vn(){return(vn=(0,d.Z)(function*(w,g,y){const E=(0,G.m9)(w),k={requestType:"EMAIL_SIGNIN",email:g};B(y.handleCodeInApp,E,"argument-error"),y&&Qi(E,k,y),yield sn(E,k)})).apply(this,arguments)}function nc(w,g){return"EMAIL_SIGNIN"===Ir.parseLink(g)?.operation}function iu(w,g,y){return vr.apply(this,arguments)}function vr(){return(vr=(0,d.Z)(function*(w,g,y){const E=(0,G.m9)(w),k=Da.credentialWithLink(g,y||Ke());return B(k._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Wr(E,k)})).apply(this,arguments)}function pl(w,g){return To.apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(w,g){return Dt(w,"POST","/v1/accounts:createAuthUri",Xt(w,g))})).apply(this,arguments)}function Fi(w,g){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,d.Z)(function*(w,g){const E={identifier:g,continueUri:ze()?Ke():"http://localhost"},{signinMethods:k}=yield pl((0,G.m9)(w),E);return k||[]})).apply(this,arguments)}function Pa(w,g){return na.apply(this,arguments)}function na(){return(na=(0,d.Z)(function*(w,g){const y=(0,G.m9)(w),k={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&Qi(y.auth,k,g);const{email:V}=yield bi(y.auth,k);V!==w.email&&(yield w.reload())})).apply(this,arguments)}function rc(w,g,y){return So.apply(this,arguments)}function So(){return(So=(0,d.Z)(function*(w,g,y){const E=(0,G.m9)(w),V={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};y&&Qi(E.auth,V,y);const{email:de}=yield bo(E.auth,V);de!==w.email&&(yield w.reload())})).apply(this,arguments)}function Pr(w,g){return Or.apply(this,arguments)}function Or(){return(Or=(0,d.Z)(function*(w,g){return Dt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ao(w,g){return Li.apply(this,arguments)}function Li(){return(Li=(0,d.Z)(function*(w,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,G.m9)(w),V={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},de=yield Mn(E,Pr(E.auth,V));E.displayName=de.displayName||null,E.photoURL=de.photoUrl||null;const He=E.providerData.find(({providerId:mt})=>"password"===mt);He&&(He.displayName=E.displayName,He.photoURL=E.photoURL),yield E._updateTokensIfNecessary(de)})).apply(this,arguments)}function fs(w,g){return Rs((0,G.m9)(w),g,null)}function gl(w,g){return Rs((0,G.m9)(w),null,g)}function Rs(w,g,y){return ml.apply(this,arguments)}function ml(){return(ml=(0,d.Z)(function*(w,g,y){const{auth:E}=w,V={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(V.email=g),y&&(V.password=y);const de=yield Mn(w,Jr(E,V));yield w._updateTokensIfNecessary(de,!0)})).apply(this,arguments)}class ks{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class Ns extends ks{constructor(g,y,E,k){super(g,y,E),this.username=k}}class sc extends ks{constructor(g,y){super(g,"facebook.com",y)}}class yl extends Ns{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class su extends ks{constructor(g,y){super(g,"google.com",y)}}class oc extends Ns{constructor(g,y,E){super(g,"twitter.com",y,E)}}function ra(w){const{user:g,_tokenResponse:y}=w;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function ic(w){var g,y;if(!w)return null;const{providerId:E}=w,k=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},V=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const de=null===(y=null===(g=ot(w.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(de)return new ks(V,"anonymous"!==de&&"custom"!==de?de:null)}if(!E)return null;switch(E){case"facebook.com":return new sc(V,k);case"github.com":return new yl(V,k);case"google.com":return new su(V,k);case"twitter.com":return new oc(V,k,w.screenName||null);case"custom":case"anonymous":return new ks(V,null);default:return new ks(V,E,k)}}(y)}class Rn{constructor(g,y,E){this.type=g,this.credential=y,this.auth=E}static _fromIdtoken(g,y){return new Rn("enroll",g,y)}static _fromMfaPendingCredential(g){return new Rn("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Rn._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return Rn._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Oa{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=Cr(g),k=y.customData._serverResponse,V=(k.mfaInfo||[]).map(He=>dr._fromServerResponse(E,He));B(k.mfaPendingCredential,E,"internal-error");const de=Rn._fromMfaPendingCredential(k.mfaPendingCredential);return new Oa(de,V,function(){var He=(0,d.Z)(function*(mt){const Rt=yield mt._process(E,de);delete k.mfaInfo,delete k.mfaPendingCredential;const mn=Object.assign(Object.assign({},k),{idToken:Rt.idToken,refreshToken:Rt.refreshToken});switch(y.operationType){case"signIn":const Yn=yield Di._fromIdTokenResponse(E,y.operationType,mn);return yield E._updateCurrentUser(Yn.user),Yn;case"reauthenticate":return B(y.user,E,"internal-error"),Di._forOperation(y.user,y.operationType,mn);default:$e(E,"internal-error")}});return function(mt){return He.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,d.Z)(function*(){return y.signInResolver(g)})()}}function lc(w,g){var y;const E=(0,G.m9)(w),k=g;return B(g.customData.operationType,E,"argument-error"),B(null===(y=k.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),Oa._fromError(E,k)}function Fr(w,g){return Dt(w,"POST","/v2/accounts/mfaEnrollment:start",Xt(w,g))}class Ys{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>dr._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Ys(g)}getSession(){var g=this;return(0,d.Z)(function*(){return Rn._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var E=this;return(0,d.Z)(function*(){const k=g,V=yield E.getSession(),de=yield Mn(E.user,k._process(E.user.auth,V,y));return yield E.user._updateTokensIfNecessary(de),E.user.reload()})()}unenroll(g){var y=this;return(0,d.Z)(function*(){const E="string"==typeof g?g:g.uid,k=yield y.user.getIdToken(),V=yield Mn(y.user,function lu(w,g){return Dt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Xt(w,g))}(y.user.auth,{idToken:k,mfaEnrollmentId:E}));y.enrolledFactors=y.enrolledFactors.filter(({uid:de})=>de!==E),yield y.user._updateTokensIfNecessary(V);try{yield y.user.reload()}catch(de){if("auth/user-token-expired"!==de?.code)throw de}})()}}const ia=new WeakMap;function xo(w){const g=(0,G.m9)(w);return ia.has(g)||ia.set(g,Ys._fromUser(g)),ia.get(g)}const gs="__sak";class Ji{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(gs,"1"),this.storage.removeItem(gs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const C=(()=>{class w extends Ji{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function uu(){const w=(0,G.z$)();return H(w)||Tt(w)}()&&function rl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=zr(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const k=this.storage.getItem(E),V=this.localCache[E];k!==V&&y(E,V,k)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((He,mt,Rt)=>{this.notifyListeners(He,Rt)});const k=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const He=this.storage.getItem(k);if(y.newValue!==He)null!==y.newValue?this.storage.setItem(k,y.newValue):this.storage.removeItem(k);else if(this.localCache[k]===y.newValue&&!E)return}const V=()=>{const He=this.storage.getItem(k);!E&&this.localCache[k]===He||this.notifyListeners(k,He)},de=this.storage.getItem(k);!function qt(){return(0,G.w1)()&&10===document.documentMode}()||de===y.newValue||y.newValue===y.oldValue?V():setTimeout(V,10)}notifyListeners(y,E){this.localCache[y]=E;const k=this.listeners[y];if(k)for(const V of Array.from(k))V(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var k=()=>super._set,V=this;return(0,d.Z)(function*(){yield k().call(V,y,E),V.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,k=this;return(0,d.Z)(function*(){const V=yield E().call(k,y);return k.localCache[y]=JSON.stringify(V),V})()}_remove(y){var E=()=>super._remove,k=this;return(0,d.Z)(function*(){yield E().call(k,y),delete k.localCache[y]})()}}return w.type="LOCAL",w})(),R=(()=>{class w extends Ji{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return w.type="SESSION",w})();let Ve=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(V=>V.isListeningto(y));if(E)return E;const k=new w(y);return this.receivers.push(k),k}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,d.Z)(function*(){const k=y,{eventId:V,eventType:de,data:He}=k.data,mt=E.handlersMap[de];if(!mt?.size)return;k.ports[0].postMessage({status:"ack",eventId:V,eventType:de});const Rt=Array.from(mt).map(function(){var Yn=(0,d.Z)(function*(es){return es(k.origin,He)});return function(es){return Yn.apply(this,arguments)}}()),mn=yield function K(w){return Promise.all(w.map(function(){var g=(0,d.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(Rt);k.ports[0].postMessage({status:"done",eventId:V,eventType:de,response:mn})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function gt(w="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return w+y}class Jn{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var k=this;return(0,d.Z)(function*(){const V=typeof MessageChannel<"u"?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let de,He;return new Promise((mt,Rt)=>{const mn=gt("",20);V.port1.start();const Yn=setTimeout(()=>{Rt(new Error("unsupported_event"))},E);He={messageChannel:V,onMessage(es){const Fs=es;if(Fs.data.eventId===mn)switch(Fs.data.status){case"ack":clearTimeout(Yn),de=setTimeout(()=>{Rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(de),mt(Fs.data.response);break;default:clearTimeout(Yn),clearTimeout(de),Rt(new Error("invalid_response"))}}},k.handlers.add(He),V.port1.addEventListener("message",He.onMessage),k.target.postMessage({eventType:g,eventId:mn,data:y},[V.port2])}).finally(()=>{He&&k.removeMessageHandler(He)})})()}}function Dn(){return window}function Ti(){return typeof Dn().WorkerGlobalScope<"u"&&"function"==typeof Dn().importScripts}function ms(){return(ms=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const _l="firebaseLocalStorageDb",sa="firebaseLocalStorage",La="fbase_key";class Os{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Ua(w,g){return w.transaction([sa],g?"readwrite":"readonly").objectStore(sa)}function Ro(){const w=indexedDB.open(_l,1);return new Promise((g,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(sa,{keyPath:La})}catch(k){y(k)}}),w.addEventListener("success",(0,d.Z)(function*(){const E=w.result;E.objectStoreNames.contains(sa)?g(E):(E.close(),yield function cu(){const w=indexedDB.deleteDatabase(_l);return new Os(w).toPromise()}(),g(yield Ro()))}))})}function bd(w,g,y){return di.apply(this,arguments)}function di(){return(di=(0,d.Z)(function*(w,g,y){const E=Ua(w,!0).put({[La]:g,value:y});return new Os(E).toPromise()})).apply(this,arguments)}function ko(){return(ko=(0,d.Z)(function*(w,g){const y=Ua(w,!1).get(g),E=yield new Os(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Va(w,g){const y=Ua(w,!0).delete(g);return new Os(y).toPromise()}const du=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,d.Z)(function*(){return y.db||(y.db=yield Ro()),y.db})()}_withRetries(y){var E=this;return(0,d.Z)(function*(){let k=0;for(;;)try{const V=yield E._openDb();return yield y(V)}catch(V){if(k++>3)throw V;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,d.Z)(function*(){return Ti()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,d.Z)(function*(){y.receiver=Ve._getInstance(function dc(){return Ti()?self:null}()),y.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(k,V){return{keyProcessed:(yield y._poll()).includes(V.key)}});return function(k,V){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(k,V){return["keyChanged"]});return function(k,V){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,d.Z)(function*(){var E,k;if(y.activeServiceWorker=yield function Qs(){return ms.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Jn(y.activeServiceWorker);const V=yield y.sender._send("ping",{},800);V&&null!==(E=V[0])&&void 0!==E&&E.fulfilled&&null!==(k=V[0])&&void 0!==k&&k.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function cc(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Ro();return yield bd(y,gs,"1"),yield Va(y,gs),!0}catch{}return!1})()}_withPendingWrite(y){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var k=this;return(0,d.Z)(function*(){return k._withPendingWrite((0,d.Z)(function*(){return yield k._withRetries(V=>bd(V,y,E)),k.localCache[y]=E,k.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,d.Z)(function*(){const k=yield E._withRetries(V=>function Ed(w,g){return ko.apply(this,arguments)}(V,y));return E.localCache[y]=k,k})()}_remove(y){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(k=>Va(k,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,d.Z)(function*(){const E=yield y._withRetries(de=>{const He=Ua(de,!1).getAll();return new Os(He).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const k=[],V=new Set;for(const{fbase_key:de,value:He}of E)V.add(de),JSON.stringify(y.localCache[de])!==JSON.stringify(He)&&(y.notifyListeners(de,He),k.push(de));for(const de of Object.keys(y.localCache))y.localCache[de]&&!V.has(de)&&(y.notifyListeners(de,null),k.push(de));return k})()}notifyListeners(y,E){this.localCache[y]=E;const k=this.listeners[y];if(k)for(const V of Array.from(k))V(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Id(w,g){return Dt(w,"POST","/v2/accounts/mfaSignIn:start",Xt(w,g))}function ys(){return(ys=(0,d.Z)(function*(w){return(yield Dt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wl(w){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=k=>{const V=Ge("internal-error");V.customData=k,y(V)},E.type="text/javascript",E.charset="UTF-8",function pc(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function _s(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Si=1e12;class No{constructor(g){this.auth=g,this.counter=Si,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new Lh(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||Si;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Si))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,d.Z)(function*(){var E;return null===(E=y._widgets.get(g||Si))||void 0===E||E.execute(),""})()}}class Lh{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof g?document.getElementById(g):g;B(k,"argument-error",{appName:y}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function mc(w){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ja=_s("rcb"),Gp=new vt(3e4,6e4);class yc{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Dn().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return B(function oa(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Dn().grecaptcha):new Promise((E,k)=>{const V=Dn().setTimeout(()=>{k(Ge(g,"network-request-failed"))},Gp.get());Dn()[ja]=()=>{Dn().clearTimeout(V),delete Dn()[ja];const He=Dn().grecaptcha;if(!He)return void k(Ge(g,"internal-error"));const mt=He.render;He.render=(Rt,mn)=>{const Yn=mt(Rt,mn);return this.counter++,Yn},this.hostLanguage=y,E(He)},wl(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:ja,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(V),k(Ge(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=Dn().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bl{load(g){return(0,d.Z)(function*(){return new No(g)})()}clearedOneInstance(){}}const aa="recaptcha",Vh={theme:"light",type:"image"};class Td{constructor(g,y=Object.assign({},Vh),E){this.parameters=y,this.type=aa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cr(E),this.isInvisible="invisible"===this.parameters.size,B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof g?document.getElementById(g):g;B(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bl:new yc,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise(V=>{const de=He=>{He&&(g.tokenChangeListeners.delete(de),V(He))};g.tokenChangeListeners.add(de),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=Dn()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){B(ze()&&!Ti(),g.auth,"internal-error"),yield function hu(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function Fh(w){return ys.apply(this,arguments)}(g.auth);B(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Bh{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=cs._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function jh(w,g,y){return bn.apply(this,arguments)}function bn(){return(bn=(0,d.Z)(function*(w,g,y){const E=Cr(w),k=yield xd(E,g,(0,G.m9)(y));return new Bh(k,V=>Wr(E,V))})).apply(this,arguments)}function $h(w,g,y){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,d.Z)(function*(w,g,y){const E=(0,G.m9)(w);yield Ws(!1,E,"phone");const k=yield xd(E.auth,g,(0,G.m9)(y));return new Bh(k,V=>ea(E,V))})).apply(this,arguments)}function Ad(w,g,y){return _c.apply(this,arguments)}function _c(){return(_c=(0,d.Z)(function*(w,g,y){const E=(0,G.m9)(w),k=yield xd(E.auth,g,(0,G.m9)(y));return new Bh(k,V=>dl(E,V))})).apply(this,arguments)}function xd(w,g,y){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,d.Z)(function*(w,g,y){var E;const k=yield y.verify();try{let V;if(B("string"==typeof k,w,"argument-error"),B(y.type===aa,w,"argument-error"),V="string"==typeof g?{phoneNumber:g}:g,"session"in V){const de=V.session;if("phoneNumber"in V)return B("enroll"===de.type,w,"internal-error"),(yield Fr(w,{idToken:de.credential,phoneEnrollmentInfo:{phoneNumber:V.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{B("signin"===de.type,w,"internal-error");const He=(null===(E=V.multiFactorHint)||void 0===E?void 0:E.uid)||V.multiFactorUid;return B(He,w,"missing-multi-factor-info"),(yield Id(w,{mfaPendingCredential:de.credential,mfaEnrollmentId:He,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:de}=yield ll(w,{phoneNumber:V.phoneNumber,recaptchaToken:k});return de}}finally{y._reset()}})).apply(this,arguments)}function qy(w,g){return $a.apply(this,arguments)}function $a(){return($a=(0,d.Z)(function*(w,g){yield zs((0,G.m9)(w),g)})).apply(this,arguments)}let zy=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=Cr(y)}verifyPhoneNumber(y,E){return xd(this.auth,y,(0,G.m9)(E))}static credential(y,E){return cs._fromVerification(y,E)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:k}=y;return E&&k?cs._fromTokenResponse(E,k):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function El(w,g){return g?ee(g):(B(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class hr extends gn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ci(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Ci(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Ci(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Md(w){return Xo(w.auth,new hr(w),w.bypassAuthState)}function fu(w){const{auth:g,user:y}=w;return B(y,g,"internal-error"),Ma(y,new hr(w),w.bypassAuthState)}function vc(w){return hi.apply(this,arguments)}function hi(){return(hi=(0,d.Z)(function*(w){const{auth:g,user:y}=w;return B(y,g,"internal-error"),zs(y,new hr(w),w.bypassAuthState)})).apply(this,arguments)}class Js{constructor(g,y,E,k,V=!1){this.auth=g,this.resolver=E,this.user=k,this.bypassAuthState=V,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,d.Z)(function*(E,k){g.pendingPromise={resolve:E,reject:k};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(V){g.reject(V)}});return function(E,k){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:k,postBody:V,tenantId:de,error:He,type:mt}=g;if(He)return void y.reject(He);const Rt={auth:y.auth,requestUri:E,sessionId:k,tenantId:de||void 0,postBody:V||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(mt)(Rt))}catch(mn){y.reject(mn)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Md;case"linkViaPopup":case"linkViaRedirect":return vc;case"reauthViaPopup":case"reauthViaRedirect":return fu;default:$e(this.auth,"internal-error")}}resolve(g){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wc=new vt(2e3,1e4);function Cl(w,g,y){return Po.apply(this,arguments)}function Po(){return(Po=(0,d.Z)(function*(w,g,y){const E=Cr(w);Ue(w,g,ds);const k=El(E,y);return new Ai(E,"signInViaPopup",g,k).executeNotNull()})).apply(this,arguments)}function Rd(w,g,y){return qp.apply(this,arguments)}function qp(){return(qp=(0,d.Z)(function*(w,g,y){const E=(0,G.m9)(w);Ue(E.auth,g,ds);const k=El(E.auth,y);return new Ai(E.auth,"reauthViaPopup",g,k,E).executeNotNull()})).apply(this,arguments)}function Wy(w,g,y){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,d.Z)(function*(w,g,y){const E=(0,G.m9)(w);Ue(E.auth,g,ds);const k=El(E.auth,y);return new Ai(E.auth,"linkViaPopup",g,k,E).executeNotNull()})).apply(this,arguments)}let Ai=(()=>{class w extends Js{constructor(y,E,k,V,de){super(y,E,V,de),this.provider=k,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,d.Z)(function*(){const E=yield y.execute();return B(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,d.Z)(function*(){Ce(1===y.filter.length,"Popup operations only handle one event");const E=gt();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(k=>{y.reject(k)}),y.resolver._isIframeWebStorageSupported(y.auth,k=>{k||y.reject(Ge(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ge(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,k;this.pollId=null!==(k=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ge(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,wc.get())};y()}}return w.currentPopupAction=null,w})();const Zr=new Map;class vs extends Js{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,d.Z)(function*(){let E=Zr.get(y.auth._key());if(!E){try{const V=(yield function Oo(w,g){return kn.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve(V)}catch(k){E=()=>Promise.reject(k)}Zr.set(y.auth._key(),E)}return y.bypassAuthState||Zr.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const k=yield E.auth._redirectUserForId(g.eventId);if(k)return E.user=k,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function kn(){return(kn=(0,d.Z)(function*(w,g){const y=ar(g),E=Dl(w);if(!(yield E._isAvailable()))return!1;const k="true"===(yield E._get(y));return yield E._remove(y),k})).apply(this,arguments)}function pt(w,g){return Il.apply(this,arguments)}function Il(){return(Il=(0,d.Z)(function*(w,g){return Dl(w)._set(ar(g),"true")})).apply(this,arguments)}function Ct(){Zr.clear()}function bc(w,g){Zr.set(w._key(),g)}function Dl(w){return ee(w._redirectPersistence)}function ar(w){return Z("pendingRedirect",w.config.apiKey,w.name)}function er(w,g,y){return function tr(w,g,y){return Ha.apply(this,arguments)}(w,g,y)}function Ha(){return(Ha=(0,d.Z)(function*(w,g,y){const E=Cr(w);Ue(w,g,ds),yield E._initializationPromise;const k=El(E,y);return yield pt(k,E),k._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function S(w,g,y){return function A(w,g,y){return N.apply(this,arguments)}(w,g,y)}function N(){return(N=(0,d.Z)(function*(w,g,y){const E=(0,G.m9)(w);Ue(E.auth,g,ds),yield E.auth._initializationPromise;const k=El(E.auth,y);yield pt(k,E.auth);const V=yield $t(E);return k._openRedirect(E.auth,g,"reauthViaRedirect",V)})).apply(this,arguments)}function z(w,g,y){return function ae(w,g,y){return me.apply(this,arguments)}(w,g,y)}function me(){return(me=(0,d.Z)(function*(w,g,y){const E=(0,G.m9)(w);Ue(E.auth,g,ds),yield E.auth._initializationPromise;const k=El(E.auth,y);yield Ws(!1,E,g.providerId),yield pt(k,E.auth);const V=yield $t(E);return k._openRedirect(E.auth,g,"linkViaRedirect",V)})).apply(this,arguments)}function We(w,g){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,d.Z)(function*(w,g){return yield Cr(w)._initializationPromise,Ot(w,g,!1)})).apply(this,arguments)}function Ot(w,g){return St.apply(this,arguments)}function St(){return(St=(0,d.Z)(function*(w,g,y=!1){const E=Cr(w),k=El(E,g),de=yield new vs(E,k,y).execute();return de&&!y&&(delete de.user._redirectEventId,yield E._persistUserIfCurrent(de.user),yield E._setRedirectUser(null,g)),de})).apply(this,arguments)}function $t(w){return le.apply(this,arguments)}function le(){return(le=(0,d.Z)(function*(w){const g=gt(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class U{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Ga(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pu(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!pu(g)){const k=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Ge(this.auth,k))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fi(g))}saveEventToCache(g){this.cachedEventUids.add(fi(g)),this.lastProcessedEventTime=Date.now()}}function fi(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function pu({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function xi(w){return ws.apply(this,arguments)}function ws(){return(ws=(0,d.Z)(function*(w,g={}){return Dt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Tl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zp=/^https?/;function Fo(){return(Fo=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield xi(w);for(const y of g)try{if(Zp(y))return}catch{}$e(w,"unauthorized-domain")})).apply(this,arguments)}function Zp(w){const g=Ke(),{protocol:y,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const de=new URL(w);return""===de.hostname&&""===E?"chrome-extension:"===y&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&de.hostname===E}if(!zp.test(y))return!1;if(Tl.test(w))return E===w;const k=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(E)}const Sl=new vt(3e4,6e4);function Kp(){const w=Dn().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let qa=null;function la(w){return qa=qa||function Yp(w){return new Promise((g,y)=>{var E,k,V;function de(){Kp(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Kp(),y(Ge(w,"network-request-failed"))},timeout:Sl.get()})}if(null!==(k=null===(E=Dn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==k&&k.Iframe)g(gapi.iframes.getContext());else{if(null===(V=Dn().gapi)||void 0===V||!V.load){const He=_s("iframefcb");return Dn()[He]=()=>{gapi.load?de():y(Ge(w,"network-request-failed"))},wl(`https://apis.google.com/js/api.js?onload=${He}`).catch(mt=>y(mt))}de()}}).catch(g=>{throw qa=null,g})}(w),qa}const Zy=new vt(5e3,15e3),kd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ua(w){const g=w.config;B(g.authDomain,w,"auth-domain-config-required");const y=g.emulator?jt(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:F.SDK_VERSION},k=Qp.get(w.config.apiHost);k&&(E.eid=k);const V=w._getFrameworks();return V.length&&(E.fw=V.join(",")),`${y}?${(0,G.xO)(E).slice(1)}`}function Jp(){return Jp=(0,d.Z)(function*(w){const g=yield la(w),y=Dn().gapi;return B(y,w,"internal-error"),g.open({where:document.body,url:ua(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kd,dontclear:!0},E=>new Promise(function(){var k=(0,d.Z)(function*(V,de){yield E.restyle({setHideOnLeave:!1});const He=Ge(w,"network-request-failed"),mt=Dn().setTimeout(()=>{de(He)},Zy.get());function Rt(){Dn().clearTimeout(mt),V(E)}E.ping(Rt).then(Rt,()=>{de(He)})});return function(V,de){return k.apply(this,arguments)}}()))}),Jp.apply(this,arguments)}const Nd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qh{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ec(w,g,y,E,k,V){B(w.config.authDomain,w,"auth-domain-config-required"),B(w.config.apiKey,w,"invalid-api-key");const de={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:E,v:F.SDK_VERSION,eventId:k};if(g instanceof ds){g.setDefaultLanguage(w.languageCode),de.providerId=g.providerId||"",(0,G.xb)(g.getCustomParameters())||(de.customParameters=JSON.stringify(g.getCustomParameters()));for(const[mt,Rt]of Object.entries(V||{}))de[mt]=Rt}if(g instanceof Eo){const mt=g.getScopes().filter(Rt=>""!==Rt);mt.length>0&&(de.scopes=mt.join(","))}w.tenantId&&(de.tid=w.tenantId);const He=de;for(const mt of Object.keys(He))void 0===He[mt]&&delete He[mt];return`${function Wh({config:w}){return w.emulator?jt(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,G.xO)(He).slice(1)}`}const Zh="webStorageSupport",tg=class Yy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R,this._completeRedirectFn=Ot,this._overrideRedirectResult=bc}_openPopup(g,y,E,k){var V=this;return(0,d.Z)(function*(){var de;Ce(null===(de=V.eventManagers[g._key()])||void 0===de?void 0:de.manager,"_initialize() not called before _openPopup()");const He=Ec(g,y,E,Ke(),k);return function Xi(w,g,y,E=500,k=600){const V=Math.max((window.screen.availHeight-k)/2,0).toString(),de=Math.max((window.screen.availWidth-E)/2,0).toString();let He="";const mt=Object.assign(Object.assign({},Nd),{width:E.toString(),height:k.toString(),top:V,left:de}),Rt=(0,G.z$)().toLowerCase();y&&(He=_e(Rt)?"_blank":y),O(Rt)&&(g=g||"http://localhost",mt.scrollbars="yes");const mn=Object.entries(mt).reduce((es,[Fs,Ic])=>`${es}${Fs}=${Ic},`,"");if(function Er(w=(0,G.z$)()){var g;return Tt(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Rt)&&"_self"!==He)return function zh(w,g){const y=document.createElement("a");y.href=w,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",He),new qh(null);const Yn=window.open(g||"",He,mn);B(Yn,w,"popup-blocked");try{Yn.focus()}catch{}return new qh(Yn)}(g,He,gt())})()}_openRedirect(g,y,E,k){var V=this;return(0,d.Z)(function*(){return yield V._originValidation(g),function Xn(w){Dn().location.href=w}(Ec(g,y,E,Ke(),k)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:k,promise:V}=this.eventManagers[y];return k?Promise.resolve(k):(Ce(V,"If manager is not set, promise should be"),V)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,d.Z)(function*(){const E=yield function Ui(w){return Jp.apply(this,arguments)}(g),k=new U(g);return E.register("authEvent",V=>(B(V?.authEvent,g,"invalid-auth-event"),{status:k.onEvent(V.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:k},y.iframes[g._key()]=E,k})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Zh,{type:Zh},k=>{var V;const de=null===(V=k?.[0])||void 0===V?void 0:V[Zh];void 0!==de&&y(!!de),$e(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Wp(w){return Fo.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return zr()||H()||Tt()}};class ng{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return ye("unexpected MultiFactorSessionType")}}}class Kh extends ng{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Kh(g)}_finalizeEnroll(g,y,E){return function uc(w,g){return Dt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Xt(w,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function Ba(w,g){return Dt(w,"POST","/v2/accounts/mfaSignIn:finalize",Xt(w,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rg=(()=>{class w{constructor(){}static assertion(y){return Kh._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var Ur="@firebase/auth";class gu{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,d.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{g(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);y&&(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,G.Pz)("authIdTokenMaxAge"),function Mi(w){(0,F._registerComponent)(new ve.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),k=g.getProvider("heartbeat"),{apiKey:V,authDomain:de}=E.options;return((He,mt)=>{B(V&&!V.includes(":"),"invalid-api-key",{appName:He.name}),B(!de?.includes(":"),"argument-error",{appName:He.name});const Rt={apiKey:V,authDomain:de,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yt(w)},mn=new sl(He,mt,Rt);return function he(w,g){const y=g?.persistence||[],E=(Array.isArray(y)?y:[y]).map(ee);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,g?.popupRedirectResolver)}(mn,y),mn})(E,k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new ve.wA("auth-internal",g=>{const y=Cr(g.getProvider("auth").getImmediate());return new gu(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)(Ur,"0.21.1",function Yh(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,F.registerVersion)(Ur,"0.21.1","esm2017")}("Browser")},2090:(_t,Ne,j)=>{"use strict";j.d(Ne,{$s:()=>lt,BH:()=>Le,DV:()=>Nn,Dv:()=>wn,G6:()=>bt,GJ:()=>Rr,L:()=>we,LL:()=>tn,Pz:()=>Ge,Sg:()=>Ue,UG:()=>ye,UI:()=>se,US:()=>ve,Wj:()=>Bn,Wl:()=>gr,Yr:()=>ze,ZB:()=>Q,ZR:()=>Nt,aH:()=>$e,b$:()=>ee,cI:()=>Dt,dS:()=>Gt,eu:()=>Sn,g5:()=>F,gK:()=>nn,gQ:()=>Mt,h$:()=>xe,hl:()=>fn,hu:()=>G,jU:()=>Ce,lb:()=>Gr,m9:()=>pn,ne:()=>un,p$:()=>Y,pd:()=>st,r3:()=>ai,ru:()=>re,tV:()=>Te,uI:()=>B,ug:()=>Qr,vZ:()=>ge,w1:()=>he,w9:()=>Hr,xO:()=>rt,xb:()=>oe,z$:()=>Je,zI:()=>vt,zd:()=>_n});const G=function(J,Z){if(!J)throw F(Z)},F=function(J){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+J)},ce=function(J){const Z=[];let te=0;for(let q=0;q<J.length;q++){let O=J.charCodeAt(q);O<128?Z[te++]=O:O<2048?(Z[te++]=O>>6|192,Z[te++]=63&O|128):55296==(64512&O)&&q+1<J.length&&56320==(64512&J.charCodeAt(q+1))?(O=65536+((1023&O)<<10)+(1023&J.charCodeAt(++q)),Z[te++]=O>>18|240,Z[te++]=O>>12&63|128,Z[te++]=O>>6&63|128,Z[te++]=63&O|128):(Z[te++]=O>>12|224,Z[te++]=O>>6&63|128,Z[te++]=63&O|128)}return Z},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(J,Z){if(!Array.isArray(J))throw Error("encodeByteArray takes an array as a parameter");this.init_();const te=Z?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let O=0;O<J.length;O+=3){const H=J[O],_e=O+1<J.length,Be=_e?J[O+1]:0,yt=O+2<J.length,it=yt?J[O+2]:0;let Ln=(15&Be)<<2|it>>6,Er=63&it;yt||(Er=64,_e||(Ln=64)),q.push(te[H>>2],te[(3&H)<<4|Be>>4],te[Ln],te[Er])}return q.join("")},encodeString(J,Z){return this.HAS_NATIVE_SUPPORT&&!Z?btoa(J):this.encodeByteArray(ce(J),Z)},decodeString(J,Z){return this.HAS_NATIVE_SUPPORT&&!Z?atob(J):function(J){const Z=[];let te=0,q=0;for(;te<J.length;){const O=J[te++];if(O<128)Z[q++]=String.fromCharCode(O);else if(O>191&&O<224){const H=J[te++];Z[q++]=String.fromCharCode((31&O)<<6|63&H)}else if(O>239&&O<365){const yt=((7&O)<<18|(63&J[te++])<<12|(63&J[te++])<<6|63&J[te++])-65536;Z[q++]=String.fromCharCode(55296+(yt>>10)),Z[q++]=String.fromCharCode(56320+(1023&yt))}else{const H=J[te++],_e=J[te++];Z[q++]=String.fromCharCode((15&O)<<12|(63&H)<<6|63&_e)}}return Z.join("")}(this.decodeStringToByteArray(J,Z))},decodeStringToByteArray(J,Z){this.init_();const te=Z?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let O=0;O<J.length;){const H=te[J.charAt(O++)],Be=O<J.length?te[J.charAt(O)]:0;++O;const it=O<J.length?te[J.charAt(O)]:64;++O;const Tt=O<J.length?te[J.charAt(O)]:64;if(++O,null==H||null==Be||null==it||null==Tt)throw Error();q.push(H<<2|Be>>4),64!==it&&(q.push(Be<<4&240|it>>2),64!==Tt&&q.push(it<<6&192|Tt))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let J=0;J<this.ENCODED_VALS.length;J++)this.byteToCharMap_[J]=this.ENCODED_VALS.charAt(J),this.charToByteMap_[this.byteToCharMap_[J]]=J,this.byteToCharMapWebSafe_[J]=this.ENCODED_VALS_WEBSAFE.charAt(J),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[J]]=J,J>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(J)]=J,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(J)]=J)}}},xe=function(J){const Z=ce(J);return ve.encodeByteArray(Z,!0)},we=function(J){return xe(J).replace(/\./g,"")},Te=function(J){try{return ve.decodeString(J,!0)}catch(Z){console.error("base64Decode failed: ",Z)}return null};function Y(J){return Q(void 0,J)}function Q(J,Z){if(!(Z instanceof Object))return Z;switch(Z.constructor){case Date:return new Date(Z.getTime());case Object:void 0===J&&(J={});break;case Array:J=[];break;default:return Z}for(const te in Z)!Z.hasOwnProperty(te)||!ie(te)||(J[te]=Q(J[te],Z[te]));return J}function ie(J){return"__proto__"!==J}const Ie=()=>{try{return function Qe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const J=process.env.__FIREBASE_DEFAULTS__;return J?JSON.parse(J):void 0})()||(()=>{if(typeof document>"u")return;let J;try{J=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Z=J&&Te(J[1]);return Z&&JSON.parse(Z)})()}catch(J){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${J}`)}},$e=()=>{var J;return null===(J=Ie())||void 0===J?void 0:J.config},Ge=J=>{var Z;return null===(Z=Ie())||void 0===Z?void 0:Z[`_${J}`]};class Le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Z,te)=>{this.resolve=Z,this.reject=te})}wrapCallback(Z){return(te,q)=>{te?this.reject(te):this.resolve(q),"function"==typeof Z&&(this.promise.catch(()=>{}),1===Z.length?Z(te):Z(te,q))}}}function Ue(J,Z){if(J.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=Z||"demo-project",O=J.iat||0,H=J.sub||J.user_id;if(!H)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _e=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:O,exp:O+3600,auth_time:O,sub:H,user_id:H,firebase:{sign_in_provider:"custom",identities:{}}},J);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(_e)),""].join(".")}function Je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function B(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function ye(){var J;const Z=null===(J=Ie())||void 0===J?void 0:J.forceEnvironment;if("node"===Z)return!0;if("browser"===Z)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ce(){return"object"==typeof self&&self.self===self}function re(){const J="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof J&&void 0!==J.id}function ee(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function he(){const J=Je();return J.indexOf("MSIE ")>=0||J.indexOf("Trident/")>=0}function ze(){return!1}function bt(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fn(){try{return"object"==typeof indexedDB}catch{return!1}}function Sn(){return new Promise((J,Z)=>{try{let te=!0;const q="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(q);O.onsuccess=()=>{O.result.close(),te||self.indexedDB.deleteDatabase(q),J(!0)},O.onupgradeneeded=()=>{te=!1},O.onerror=()=>{var H;Z((null===(H=O.error)||void 0===H?void 0:H.message)||"")}}catch(te){Z(te)}})}function vt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Nt extends Error{constructor(Z,te,q){super(te),this.code=Z,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,Nt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tn.prototype.create)}}class tn{constructor(Z,te,q){this.service=Z,this.serviceName=te,this.errors=q}create(Z,...te){const q=te[0]||{},O=`${this.service}/${Z}`,H=this.errors[Z],_e=H?function Hn(J,Z){return J.replace(Xt,(te,q)=>{const O=Z[q];return null!=O?String(O):`<${q}?>`})}(H,q):"Error";return new Nt(O,`${this.serviceName}: ${_e} (${O}).`,q)}}const Xt=/\{\$([^}]+)}/g;function Dt(J){return JSON.parse(J)}function gr(J){return JSON.stringify(J)}const Mr=function(J){let Z={},te={},q={},O="";try{const H=J.split(".");Z=Dt(Te(H[0])||""),te=Dt(Te(H[1])||""),O=H[2],q=te.d||{},delete te.d}catch{}return{header:Z,claims:te,data:q,signature:O}},Hr=function(J){const te=Mr(J).claims;return!!te&&"object"==typeof te&&te.hasOwnProperty("iat")},Rr=function(J){const Z=Mr(J).claims;return"object"==typeof Z&&!0===Z.admin};function ai(J,Z){return Object.prototype.hasOwnProperty.call(J,Z)}function Nn(J,Z){if(Object.prototype.hasOwnProperty.call(J,Z))return J[Z]}function oe(J){for(const Z in J)if(Object.prototype.hasOwnProperty.call(J,Z))return!1;return!0}function se(J,Z,te){const q={};for(const O in J)Object.prototype.hasOwnProperty.call(J,O)&&(q[O]=Z.call(te,J[O],O,J));return q}function ge(J,Z){if(J===Z)return!0;const te=Object.keys(J),q=Object.keys(Z);for(const O of te){if(!q.includes(O))return!1;const H=J[O],_e=Z[O];if(Ae(H)&&Ae(_e)){if(!ge(H,_e))return!1}else if(H!==_e)return!1}for(const O of q)if(!te.includes(O))return!1;return!0}function Ae(J){return null!==J&&"object"==typeof J}function rt(J){const Z=[];for(const[te,q]of Object.entries(J))Array.isArray(q)?q.forEach(O=>{Z.push(encodeURIComponent(te)+"="+encodeURIComponent(O))}):Z.push(encodeURIComponent(te)+"="+encodeURIComponent(q));return Z.length?"&"+Z.join("&"):""}function _n(J){const Z={};return J.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[O,H]=q.split("=");Z[decodeURIComponent(O)]=decodeURIComponent(H)}}),Z}function st(J){const Z=J.indexOf("?");if(!Z)return"";const te=J.indexOf("#",Z);return J.substring(Z,te>0?te:void 0)}class Mt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Z=1;Z<this.blockSize;++Z)this.pad_[Z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Z,te){te||(te=0);const q=this.W_;if("string"==typeof Z)for(let Tt=0;Tt<16;Tt++)q[Tt]=Z.charCodeAt(te)<<24|Z.charCodeAt(te+1)<<16|Z.charCodeAt(te+2)<<8|Z.charCodeAt(te+3),te+=4;else for(let Tt=0;Tt<16;Tt++)q[Tt]=Z[te]<<24|Z[te+1]<<16|Z[te+2]<<8|Z[te+3],te+=4;for(let Tt=16;Tt<80;Tt++){const Ln=q[Tt-3]^q[Tt-8]^q[Tt-14]^q[Tt-16];q[Tt]=4294967295&(Ln<<1|Ln>>>31)}let it,Kt,O=this.chain_[0],H=this.chain_[1],_e=this.chain_[2],Be=this.chain_[3],yt=this.chain_[4];for(let Tt=0;Tt<80;Tt++){Tt<40?Tt<20?(it=Be^H&(_e^Be),Kt=1518500249):(it=H^_e^Be,Kt=1859775393):Tt<60?(it=H&_e|Be&(H|_e),Kt=2400959708):(it=H^_e^Be,Kt=3395469782);const Ln=(O<<5|O>>>27)+it+yt+Kt+q[Tt]&4294967295;yt=Be,Be=_e,_e=4294967295&(H<<30|H>>>2),H=O,O=Ln}this.chain_[0]=this.chain_[0]+O&4294967295,this.chain_[1]=this.chain_[1]+H&4294967295,this.chain_[2]=this.chain_[2]+_e&4294967295,this.chain_[3]=this.chain_[3]+Be&4294967295,this.chain_[4]=this.chain_[4]+yt&4294967295}update(Z,te){if(null==Z)return;void 0===te&&(te=Z.length);const q=te-this.blockSize;let O=0;const H=this.buf_;let _e=this.inbuf_;for(;O<te;){if(0===_e)for(;O<=q;)this.compress_(Z,O),O+=this.blockSize;if("string"==typeof Z){for(;O<te;)if(H[_e]=Z.charCodeAt(O),++_e,++O,_e===this.blockSize){this.compress_(H),_e=0;break}}else for(;O<te;)if(H[_e]=Z[O],++_e,++O,_e===this.blockSize){this.compress_(H),_e=0;break}}this.inbuf_=_e,this.total_+=te}digest(){const Z=[];let te=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let O=this.blockSize-1;O>=56;O--)this.buf_[O]=255&te,te/=256;this.compress_(this.buf_);let q=0;for(let O=0;O<5;O++)for(let H=24;H>=0;H-=8)Z[q]=this.chain_[O]>>H&255,++q;return Z}}function un(J,Z){const te=new At(J,Z);return te.subscribe.bind(te)}class At{constructor(Z,te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=te,this.task.then(()=>{Z(this)}).catch(q=>{this.error(q)})}next(Z){this.forEachObserver(te=>{te.next(Z)})}error(Z){this.forEachObserver(te=>{te.error(Z)}),this.close(Z)}complete(){this.forEachObserver(Z=>{Z.complete()}),this.close()}subscribe(Z,te,q){let O;if(void 0===Z&&void 0===te&&void 0===q)throw new Error("Missing Observer.");O=function ht(J,Z){if("object"!=typeof J||null===J)return!1;for(const te of Z)if(te in J&&"function"==typeof J[te])return!0;return!1}(Z,["next","error","complete"])?Z:{next:Z,error:te,complete:q},void 0===O.next&&(O.next=Mn),void 0===O.error&&(O.error=Mn),void 0===O.complete&&(O.complete=Mn);const H=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch{}}),this.observers.push(O),H}unsubscribeOne(Z){void 0===this.observers||void 0===this.observers[Z]||(delete this.observers[Z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Z){if(!this.finalized)for(let te=0;te<this.observers.length;te++)this.sendOne(te,Z)}sendOne(Z,te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Z])try{te(this.observers[Z])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(Z){this.finalized||(this.finalized=!0,void 0!==Z&&(this.finalError=Z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mn(){}const wn=function(J,Z,te,q){let O;if(q<Z?O="at least "+Z:q>te&&(O=0===te?"none":"no more than "+te),O)throw new Error(J+" failed: Was called with "+q+(1===q?" argument.":" arguments.")+" Expects "+O+".")};function nn(J,Z){return`${J} failed: ${Z} argument `}function Bn(J,Z,te,q){if((!q||te)&&"function"!=typeof te)throw new Error(nn(J,Z)+"must be a valid function.")}function Gr(J,Z,te,q){if((!q||te)&&("object"!=typeof te||null===te))throw new Error(nn(J,Z)+"must be a valid context object.")}const Gt=function(J){const Z=[];let te=0;for(let q=0;q<J.length;q++){let O=J.charCodeAt(q);if(O>=55296&&O<=56319){const H=O-55296;q++,G(q<J.length,"Surrogate pair missing trail surrogate."),O=65536+(H<<10)+(J.charCodeAt(q)-56320)}O<128?Z[te++]=O:O<2048?(Z[te++]=O>>6|192,Z[te++]=63&O|128):O<65536?(Z[te++]=O>>12|224,Z[te++]=O>>6&63|128,Z[te++]=63&O|128):(Z[te++]=O>>18|240,Z[te++]=O>>12&63|128,Z[te++]=O>>6&63|128,Z[te++]=63&O|128)}return Z},Qr=function(J){let Z=0;for(let te=0;te<J.length;te++){const q=J.charCodeAt(te);q<128?Z++:q<2048?Z+=2:q>=55296&&q<=56319?(Z+=4,te++):Z+=3}return Z};function lt(J,Z=1e3,te=2){const q=Z*Math.pow(te,J),O=Math.round(.5*q*(Math.random()-.5)*2);return Math.min(144e5,q+O)}function pn(J){return J&&J._delegate?J._delegate:J}},3064:(_t,Ne,j)=>{"use strict";var d=j(4650);let G=null;function F(){return G}class pe{}const ve=new d.OlP("DocumentToken");let xe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function we(){return(0,d.LFG)(Y)}()},providedIn:"platform"}),n})();const Te=new d.OlP("Location Initialized");let Y=(()=>{class n extends xe{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ve))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ie(){return new Y((0,d.LFG)(ve))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Qe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function je(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function nt(n){return n&&"?"!==n[0]?"?"+n:n}let ft=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Fe)},providedIn:"root"}),n})();const Ie=new d.OlP("appBaseHref");let Fe=(()=>{class n extends ft{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Qe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+nt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+nt(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+nt(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xe),d.LFG(Ie,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pe=(()=>{class n extends ft{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Qe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+nt(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+nt(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xe),d.LFG(Ie,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Je(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(je(Ue(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nt(r))}normalize(t){return n.stripTrailingSlash(function Le(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=nt,n.joinWithSlash=Qe,n.stripTrailingSlash=je,n.\u0275fac=function(t){return new(t||n)(d.LFG(ft))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ge(){return new $e((0,d.LFG)(ft))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}class mr{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new mr(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,u),Gn(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Gn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Gn(n,e){n.context.$implicit=e.item}let Ei=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new sn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Zo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Zo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class sn{constructor(){this.$implicit=null,this.ngIf=null}}function Zo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Ta=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function tu(n){return"server"===n}let zs=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new xa((0,d.LFG)(ve),window)}),n})();class xa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Yi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ws(this.window.history)||Ws(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ws(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xo extends pe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class gs extends xo{static makeCurrent(){!function ce(n){G||(G=n)}(new gs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function uu(){return Ji=Ji||document.querySelector("base"),Ji?Ji.getAttribute("href"):null}();return null==t?null:function Mo(n){Fa=Fa||document.createElement("a"),Fa.setAttribute("href",n);const e=Fa.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ji=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Jr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Fa,Ji=null;const Ps=new d.OlP("TRANSITION_ID"),I=[{provide:d.ip1,useFactory:function C(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Ps,ve,d.zs3],multi:!0}];let K=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ve=new d.OlP("EventManagerPlugins");let gt=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ve),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Jn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Dn=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Xn=(()=>{class n extends Dn{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ti),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ti))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ve))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Ti(n){F().remove(n)}const Qs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ms=/%COMP%/g;function Os(n,e){return e.flat(100).map(t=>t.replace(ms,n))}function Ua(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let cu=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ro(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ko(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case d.ifc.ShadowDom:return new Va(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Os(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gt),d.LFG(Xn),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Ro{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Qs[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ed(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ed(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Qs[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Qs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ua(r)):this.eventManager.addEventListener(e,t,Ua(r))}}function Ed(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ko extends Ro{constructor(e,t,r,i){super(e),this.component=r;const a=Os(i+"-"+r.id,r.styles);t.addStyles(a),this.contentAttr=function sa(n){return"_ngcontent-%COMP%".replace(ms,n)}(i+"-"+r.id),this.hostAttr=function La(n){return"_nghost-%COMP%".replace(ms,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Va extends Ro{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Os(i.id,i.styles);for(let u=0;u<a.length;u++){const f=document.createElement("style");f.textContent=a[u],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let fc=(()=>{class n extends Jn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ve))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const vl=["alt","control","meta","shift"],Cd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},du={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Id=(()=>{class n extends Jn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),u="code."),vl.forEach(v=>{const T=r.indexOf(v);T>-1&&(r.splice(T,1),u+=v+".")}),u+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=u,m}static matchEventFullKeyCode(t,r){let i=Cd[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),vl.forEach(u=>{u!==i&&(0,du[u])(t)&&(a+=u+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ve))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const No=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function _s(){gs.makeCurrent()},multi:!0},{provide:ve,useFactory:function gc(){return(0,d.RDi)(document),document},deps:[]}]),Lh=new d.OlP(""),mc=[{provide:d.rWj,useClass:class R{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const f=function(m){u=u||m,a--,0==a&&r(u)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],ja=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Dd(){return new d.qLn},deps:[]},{provide:Ve,useClass:fc,multi:!0,deps:[ve,d.R0b,d.Lbi]},{provide:Ve,useClass:Id,multi:!0,deps:[ve]},{provide:cu,useClass:cu,deps:[gt,Xn,d.AFp]},{provide:d.FYo,useExisting:cu},{provide:Dn,useExisting:Xn},{provide:Xn,useClass:Xn,deps:[ve]},{provide:gt,useClass:gt,deps:[Ve,d.R0b]},{provide:class Ra{},useClass:K,deps:[]},[]];let Gp=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Ps,useExisting:d.AFp},I]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Lh,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...ja,...mc],imports:[Ta,d.hGG]}),n})(),aa=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ve))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function bl(){return new aa((0,d.LFG)(ve))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var fr=j(2011),Zr=j(4986),vs=j(9751),Oo=j(7669),kn=j(8996);function pt(...n){const e=(0,Oo.yG)(n);return(0,kn.D)(n,e)}var Il=j(6451),Ct=j(4004),bc=j(3099),Dl=j(8421),ar=j(4482),er=j(5403);function tr(n,e){return(0,ar.e)((t,r)=>{let i=null,a=0,u=!1;const f=()=>u&&!i&&r.complete();t.subscribe((0,er.x)(r,m=>{i?.unsubscribe();let v=0;const T=a++;(0,Dl.Xf)(n(m,T)).subscribe(i=(0,er.x)(r,M=>r.next(e?e(m,M,T,v++):M),()=>{i=null,f()}))},()=>{u=!0,f()}))})}function Ha(n,e,t,r,i){return(a,u)=>{let f=t,m=e,v=0;a.subscribe((0,er.x)(u,T=>{const M=v++;m=f?n(m,T,M):(f=!0,T),r&&u.next(m)},i&&(()=>{f&&u.next(m),u.complete()})))}}function S(n,e){return(0,ar.e)(Ha(n,e,arguments.length>=2,!0))}var A=j(4671);function N(n,e=A.y){return n=n??z,(0,ar.e)((t,r)=>{let i,a=!0;t.subscribe((0,er.x)(r,u=>{const f=e(u);(a||!n(i,f))&&(a=!1,i=f,r.next(u))}))})}function z(n,e){return n===e}var ae=j(5032),Ye=j(2122),St=(j(9568),j(3942)),$t=j(4859),le=j(5861),zn=j(9681),U=j(2090),fi=j(1877);const pu="@firebase/database";let xi="";function ws(n){xi=n}class Tl{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,U.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,U.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class zp{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,U.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Wp=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Tl(e)}}catch{}return new zp},Fo=Wp("localStorage"),Zp=Wp("sessionStorage"),Sl=new fi.Yd("@firebase/database"),Kp=function(){let n=1;return function(){return n++}}(),Yp=function(n){const e=(0,U.dS)(n),t=new U.gQ;t.update(e);const r=t.digest();return U.US.encodeByteArray(r)},qa=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=qa.apply(null,r):e+="object"==typeof r?(0,U.Wl)(r):r,e+=" "}return e};let la=null,Zy=!0;const Ky=function(n,e){(0,U.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Sl.logLevel=fi.in.VERBOSE,la=Sl.log.bind(Sl),e&&Zp.set("logging_enabled",!0)):"function"==typeof n?la=n:(la=null,Zp.remove("logging_enabled"))},Lr=function(...n){if(!0===Zy&&(Zy=!1,null===la&&!0===Zp.get("logging_enabled")&&Ky(!0)),la){const e=qa.apply(null,n);la(e)}},kd=function(n){return function(...e){Lr(n,...e)}},Qp=function(...n){const e="FIREBASE INTERNAL ERROR: "+qa(...n);Sl.error(e)},ua=function(...n){const e=`FIREBASE FATAL ERROR: ${qa(...n)}`;throw Sl.error(e),new Error(e)},Ui=function(...n){const e="FIREBASE WARNING: "+qa(...n);Sl.warn(e)},Nd=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Lo="[MIN_NAME]",Uo="[MAX_NAME]",za=function(n,e){if(n===e)return 0;if(n===Lo||e===Uo)return-1;if(e===Lo||n===Uo)return 1;{const t=rg(n),r=rg(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},qh=function(n,e){return n===e?0:n<e?-1:1},Xi=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,U.Wl)(e))},zh=function(n){if("object"!=typeof n||null===n)return(0,U.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,U.Wl)(e[r]),t+=":",t+=zh(n[e[r]]);return t+="}",t},eg=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ti(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Ec=function(n){(0,U.hu)(!Nd(n),"Invalid JSON number");const r=1023;let i,a,u,f,m;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,u=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const T=v.join("");let M="";for(m=0;m<64;m+=8){let L=parseInt(T.substr(m,8),2).toString(16);1===L.length&&(L="0"+L),M+=L}return M.toLowerCase()},tg=new RegExp("^-?(0*)\\d{1,10}$"),rg=function(n){if(tg.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Ur=function(n){try{n()}catch(e){setTimeout(()=>{throw Ui("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},gu=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Yh{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ui(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Mi{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Lr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ui(e)}}let ca=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const g=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,k="ac",V="websocket",de="long_polling";class He{constructor(e,t,r,i,a=!1,u="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fo.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Fo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Rt(n,e,t){let r;if((0,U.hu)("string"==typeof e,"typeof type must == string"),(0,U.hu)("object"==typeof t,"typeof params must == object"),e===V)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==de)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function mt(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ti(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class mn{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,U.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,U.p$)(this.counters_)}}const Yn={},es={};function Fs(n){const e=n.toString();return Yn[e]||(Yn[e]=new mn),Yn[e]}class Al{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ur(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class xl{constructor(e,t,r,i,a,u,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=kd(e),this.stats_=Fs(t),this.urlFn=m=>(this.appCheckToken&&(m[k]=this.appCheckToken),Rt(t,de,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Al(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,U.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ml((...a)=>{const[u,f,m,v,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=f,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r[k]=this.appCheckToken),typeof location<"u"&&location.hostname&&g.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xl.forceAllow_=!0}static forceDisallow(){xl.forceDisallow_=!0}static isAvailable(){return!((0,U.Yr)()||!xl.forceAllow_&&(xl.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,U.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,U.h$)(t),i=eg(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,U.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,U.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ml{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,U.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Kp(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ml.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){Lr("frame writing exception"),f.stack&&Lr(f.stack),Lr(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Lr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,U.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Lr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let cg=null;typeof MozWebSocket<"u"?cg=MozWebSocket:typeof WebSocket<"u"&&(cg=WebSocket);let tf=(()=>{class n{constructor(t,r,i,a,u,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=kd(this.connId),this.stats_=Fs(r),this.connURL=n.connectionURL_(r,f,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,u){const f={v:"5"};return!(0,U.Yr)()&&typeof location<"u"&&location.hostname&&g.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f[k]=a),u&&(f.p=u),Rt(t,V,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fo.set("previous_websocket_failure",!0);try{let i;if((0,U.Yr)()){i={headers:{"User-Agent":`Firebase/5/${xi}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,f=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new cg(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==cg&&!n.forceDisallow_}static previouslyFailed(){return Fo.isInMemoryStorage||!0===Fo.get("previous_websocket_failure")}markConnectionHealthy(){Fo.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,U.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,U.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,U.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=eg(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),nf=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[xl,tf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=tf&&tf.isAvailable();let i=r&&!tf.previouslyFailed();if(t.webSocketOnly&&(r||Ui("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[tf];else{const a=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&a.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class t_{constructor(e,t,r,i,a,u,f,m,v,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=kd("c:"+this.id+":"),this.transportManager_=new nf(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=gu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Xi("t",e),r=Xi("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Xi("t",e),r=Xi("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Xi("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Qp("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Qp("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ui("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),gu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class db{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class hb{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,U.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,U.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class gg extends hb{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,U.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new gg}getInitialEvent(e){return(0,U.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Un{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Pn(){return new Un("")}function on(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function yu(n){return n.pieces_.length-n.pieceNum_}function nr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Un(n.pieces_,e)}function fb(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Tc(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function pb(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Un(e,0)}function pr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Un)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Un(t,0)}function yn(n){return n.pieceNum_>=n.pieces_.length}function Vi(n,e){const t=on(n),r=on(e);if(null===t)return e;if(t===r)return Vi(nr(n),nr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function gb(n,e){const t=Tc(n,0),r=Tc(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=za(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function mg(n,e){if(yu(n)!==yu(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Xs(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(yu(n)>yu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class mb{constructor(e,t){this.errorPrefix_=t,this.parts_=Tc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,U.ug)(this.parts_[r]);yb(this)}}function yb(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Sc(n))}function Sc(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class i_ extends hb{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new i_}getInitialEvent(e){return(0,U.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Vo=1e3;let _g,Ud=(()=>{class n extends db{constructor(t,r,i,a,u,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=kd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Vo,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,U.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");i_.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&gg.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,U.Wl)(u)),(0,U.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new U.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const m=f.d;"ok"===f.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,U.hu)(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,m=>{const v=m.d,T=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,U.r3)(t,"w")){const i=(0,U.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Ui(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,U.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,U.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,f=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const f={p:r,d:i};void 0!==u&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,U.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Qp("Unrecognized action received from server: "+(0,U.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,U.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Vo,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Vo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Vo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,le.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const T=function(){v?v.close():(m=!0,a())};t.realtime_={close:T,sendRequest:function(W){(0,U.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(W)}};const L=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[W,X]=yield Promise.all([t.authTokenProvider_.getToken(L),t.appCheckTokenProvider_.getToken(L)]);m?Lr("getToken() completed but was canceled"):(Lr("getToken() completed. Creating connection."),t.authToken_=W&&W.accessToken,t.appCheckToken_=X&&X.token,v=new t_(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,De=>{Ui(De+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(W){t.log_("Failed to get token: "+W),m||(t.repoInfo_.nodeAdmin&&Ui(W),T())}}})()}interrupt(t){Lr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Lr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,U.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Vo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>zh(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Un(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Lr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Lr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,U.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+xi.replace(/\./g,"-")]=1,(0,U.uI)()?t["framework.cordova"]=1:(0,U.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=gg.getInstance().currentlyOnline();return(0,U.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Tn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Tn(e,t)}}class yg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Tn(Lo,e),i=new Tn(Lo,t);return 0!==this.compare(r,i)}minPost(){return Tn.MIN}}class vb extends yg{static get __EMPTY_NODE(){return _g}static set __EMPTY_NODE(e){_g=e}compare(e,t){return za(e.name,t.name)}isDefinedOn(e){throw(0,U.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Tn.MIN}maxPost(){return new Tn(Uo,_g)}makePost(e,t){return(0,U.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Tn(e,_g)}toString(){return".key"}}const Wa=new vb;class Vd{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let bb,pi=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??bs.EMPTY_NODE,this.right=u??bs.EMPTY_NODE}copy(t,r,i,a,u){return new n(t??this.key,r??this.value,i??this.color,a??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return bs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return bs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class bs{constructor(e,t=bs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new bs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,pi.BLACK,null,null))}remove(e){return new bs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,pi.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Vd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Vd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Vd(this.root_,null,this.comparator_,!0,e)}}function wb(n,e){return za(n.name,e.name)}function vg(n,e){return za(n,e)}bs.EMPTY_NODE=new class lf{copy(e,t,r,i,a){return this}insert(e,t,r){return new pi(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const MT=function(n){return"number"==typeof n?"number:"+Ec(n):"string:"+n},wg=function(n){if(n.isLeafNode()){const e=n.val();(0,U.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,U.r3)(e,".sv"),"Priority must be a string or number.")}else(0,U.hu)(n===bb||n.isEmpty(),"priority of unexpected type.");(0,U.hu)(n===bb||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let bg,RT,s_,uf=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,U.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),wg(this.priorityNode_)}static set __childrenNodeConstructor(t){bg=t}static get __childrenNodeConstructor(){return bg}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return yn(t)?this:".priority"===on(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=on(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,U.hu)(".priority"!==i||1===yu(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(nr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+MT(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Ec(this.value_):this.value_,this.lazyHash_=Yp(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,U.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,U.hu)(a>=0,"Unknown leaf type: "+r),(0,U.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const lr=new class PT extends yg{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?za(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Tn.MIN}maxPost(){return new Tn(Uo,new uf("[PRIORITY-POST]",s_))}makePost(e,t){const r=RT(e);return new Tn(t,new uf("[PRIORITY-POST]",r))}toString(){return".priority"}},Eb=Math.log(2);class Eg{constructor(e){this.count=parseInt(Math.log(e+1)/Eb,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Cg=function(n,e,t,r){n.sort(e);const i=function(m,v){const T=v-m;let M,L;if(0===T)return null;if(1===T)return M=n[m],L=t?t(M):M,new pi(L,M.node,pi.BLACK,null,null);{const W=parseInt(T/2,10)+m,X=i(m,W),De=i(W+1,v);return M=n[W],L=t?t(M):M,new pi(L,M.node,pi.BLACK,X,De)}},f=function(m){let v=null,T=null,M=n.length;const L=function(X,De){const ke=M-X,Ft=M;M-=X;const Vt=i(ke+1,Ft),wt=n[ke],kt=t?t(wt):wt;W(new pi(kt,wt.node,De,null,Vt))},W=function(X){v?(v.left=X,v=X):(T=X,v=X)};for(let X=0;X<m.count;++X){const De=m.nextBitIsOne(),ke=Math.pow(2,m.count-(X+1));De?L(ke,pi.BLACK):(L(ke,pi.BLACK),L(ke,pi.RED))}return T}(new Eg(n.length));return new bs(r||e,f)};let cf;const Bd={};class Qn{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,U.hu)(Bd&&lr,"ChildrenNode.ts has not been loaded"),cf=cf||new Qn({".priority":Bd},{".priority":lr}),cf}get(e){const t=(0,U.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof bs?t:null}hasIndex(e){return(0,U.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,U.hu)(e!==Wa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Tn.Wrap);let f,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();f=i?Cg(r,e.getCompare()):Bd;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const T=Object.assign({},this.indexes_);return T[m]=f,new Qn(T,v)}addToIndexes(e,t){const r=(0,U.UI)(this.indexes_,(i,a)=>{const u=(0,U.DV)(this.indexSet_,a);if((0,U.hu)(u,"Missing index implementation for "+a),i===Bd){if(u.isDefinedOn(e.node)){const f=[],m=t.getIterator(Tn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),Cg(f,u.getCompare())}return Bd}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new Tn(e.name,f))),m.insert(e,e.node)}});return new Qn(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,U.UI)(this.indexes_,i=>{if(i===Bd)return i;{const a=t.get(e.name);return a?i.remove(new Tn(e.name,a)):i}});return new Qn(r,this.indexSet_)}}let df,cn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&wg(this.priorityNode_),this.children_.isEmpty()&&(0,U.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return df||(df=new n(new bs(vg),null,Qn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||df}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?df:r}}getChild(t){const r=on(t);return null===r?this:this.getImmediateChild(r).getChild(nr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,U.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Tn(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?df:this.priorityNode_;return new n(a,f,u)}}updateChild(t,r){const i=on(t);if(null===i)return r;{(0,U.hu)(".priority"!==on(t)||1===yu(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(nr(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(lr,(f,m)=>{r[f]=m.val(t),i++,u&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):u=!1}),!t&&u&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+MT(this.getPriority().val())+":"),this.forEachChild(lr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":Yp(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new Tn(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Tn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Tn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Tn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Tn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===jd?-1:0}withIndex(t){if(t===Wa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Wa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(lr),a=r.getIterator(lr);let u=i.getNext(),f=a.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=i.getNext(),f=a.getNext()}return null===u&&null===f}return!1}return!1}}resolveIndex_(t){return t===Wa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const jd=new class o_ extends cn{constructor(){super(new bs(vg),cn.EMPTY_NODE,Qn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return cn.EMPTY_NODE}isEmpty(){return!1}};function Tr(n,e=null){if(null===n)return cn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,U.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new uf(n,Tr(e));if(n instanceof Array){let t=cn.EMPTY_NODE;return ti(n,(r,i)=>{if((0,U.r3)(n,r)&&"."!==r.substring(0,1)){const a=Tr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Tr(e))}{const t=[];let r=!1;if(ti(n,(u,f)=>{if("."!==u.substring(0,1)){const m=Tr(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Tn(u,m)))}}),0===t.length)return cn.EMPTY_NODE;const a=Cg(t,wb,u=>u.name,vg);if(r){const u=Cg(t,lr.getCompare());return new cn(a,Tr(e),new Qn({".priority":u},{".priority":lr}))}return new cn(a,Tr(e),Qn.Default)}}Object.defineProperties(Tn,{MIN:{value:new Tn(Lo,cn.EMPTY_NODE)},MAX:{value:new Tn(Uo,jd)}}),vb.__EMPTY_NODE=cn.EMPTY_NODE,uf.__childrenNodeConstructor=cn,function _1(n){bb=n}(jd),function NT(n){s_=n}(jd),function kT(n){RT=n}(Tr);class a_ extends yg{constructor(e){super(),this.indexPath_=e,(0,U.hu)(!yn(e)&&".priority"!==on(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?za(e.name,t.name):a}makePost(e,t){const r=Tr(e),i=cn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Tn(t,i)}maxPost(){const e=cn.EMPTY_NODE.updateChild(this.indexPath_,jd);return new Tn(Uo,e)}toString(){return Tc(this.indexPath_,0).join("/")}}const Ig=new class FT extends yg{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?za(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Tn.MIN}maxPost(){return Tn.MAX}makePost(e,t){const r=Tr(e);return new Tn(t,r)}toString(){return".value"}};function LT(n){return{type:"value",snapshotNode:n}}function hf(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Rl(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ac(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Dg{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){(0,U.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(Rl(t,f)):(0,U.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?u.trackChildChange(hf(t,r)):u.trackChildChange(Ac(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(lr,(i,a)=>{t.hasChild(i)||r.trackChildChange(Rl(i,a))}),t.isLeafNode()||t.forEachChild(lr,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(Ac(i,a,u))}else r.trackChildChange(hf(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?cn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class $d{constructor(e){this.indexedFilter_=new Dg(e.getIndex()),this.index_=e.getIndex(),this.startPost_=$d.getStartPost_(e),this.endPost_=$d.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,u){return this.matches(new Tn(t,r))||(r=cn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=cn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(cn.EMPTY_NODE);const a=this;return t.forEachChild(lr,(u,f)=>{a.matches(new Tn(u,f))||(i=i.updateImmediateChild(u,cn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class v1{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new $d(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new Tn(t,r))||(r=cn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=cn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=cn.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),u++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(cn.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let u=0;for(;a.hasNext();){const f=a.getNext();u<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?u++:i=i.updateImmediateChild(f.name,cn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const M=this.index_.getCompare();u=(L,W)=>M(W,L)}else u=this.index_.getCompare();const f=e;(0,U.hu)(f.numChildren()===this.limit_,"");const m=new Tn(t,r),v=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),T=this.rangedFilter_.matches(m);if(f.hasChild(t)){const M=f.getImmediateChild(t);let L=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=L&&(L.name===t||f.hasChild(L.name));)L=i.getChildAfterChild(this.index_,L,this.reverse_);const W=null==L?1:u(L,m);if(T&&!r.isEmpty()&&W>=0)return a?.trackChildChange(Ac(t,r,M)),f.updateImmediateChild(t,r);{a?.trackChildChange(Rl(t,M));const De=f.updateImmediateChild(t,cn.EMPTY_NODE);return null!=L&&this.rangedFilter_.matches(L)?(a?.trackChildChange(hf(L.name,L.node)),De.updateImmediateChild(L.name,L.node)):De}}return r.isEmpty()?e:T&&u(v,m)>=0?(null!=a&&(a.trackChildChange(Rl(v.name,v.node)),a.trackChildChange(hf(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(v.name,cn.EMPTY_NODE)):e}}class Tg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=lr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Lo}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Uo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,U.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===lr}copy(){const e=new Tg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Tb(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function c_(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function ff(n,e){const t=n.copy();return t.index_=e,t}function h_(n){const e={};if(n.isDefault())return e;let t;if(n.index_===lr?t="$priority":n.index_===Ig?t="$value":n.index_===Wa?t="$key":((0,U.hu)(n.index_ instanceof a_,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,U.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,U.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,U.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,U.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,U.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function _u(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==lr&&(e.i=n.index_.toString()),e}class Sg extends db{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=kd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,U.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=Sg.getListenId_(e,r),f={};this.listens_[u]=f;const m=h_(e._queryParams);this.restRequest_(a+".json",m,(v,T)=>{let M=T;if(404===v&&(M=null,v=null),null===v&&this.onDataUpdate_(a,M,!1,r),(0,U.DV)(this.listens_,u)===f){let L;L=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(L,null)}})}unlisten(e,t){const r=Sg.getListenId_(e,t);delete this.listens_[r]}get(e){const t=h_(e._queryParams),r=e._path.toString(),i=new U.BH;return this.restRequest_(r+".json",t,(a,u)=>{let f=u;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,U.xO)(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,U.cI)(f.responseText)}catch{Ui("Failed to parse JSON response for "+u+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&Ui("Got unsuccessful REST response for "+u+" Status: "+f.status),r(f.status);r=null}},f.open("GET",u,!0),f.send()})}}class f_{constructor(){this.rootNode_=cn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function xc(){return{value:null,children:new Map}}function Hd(n,e,t){if(yn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=on(e);n.children.has(r)||n.children.set(r,xc()),Hd(n.children.get(r),e=nr(e),t)}}function pf(n,e){if(yn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(lr,(r,i)=>{Hd(n,new Un(r),i)}),pf(n,e)}}if(n.children.size>0){const t=on(e);return e=nr(e),n.children.has(t)&&pf(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Gd(n,e,t){null!==n.value?t(e,n.value):function Mc(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Gd(i,new Un(e.toString()+"/"+r),t)})}class Sb{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ti(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Ab{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Sb(e);const r=1e4+2e4*Math.random();gu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ti(e,(i,a)=>{a>0&&(0,U.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),gu(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Bi=(()=>{return(n=Bi||(Bi={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Bi;var n})();function m_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class qd{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Bi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(yn(this.path)){if(null!=this.affectedTree.value)return(0,U.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Un(e));return new qd(Pn(),t,this.revert)}}return(0,U.hu)(on(this.path)===e,"operationForChild called for unrelated child."),new qd(nr(this.path),this.affectedTree,this.revert)}}class gf{constructor(e,t){this.source=e,this.path=t,this.type=Bi.LISTEN_COMPLETE}operationForChild(e){return yn(this.path)?new gf(this.source,Pn()):new gf(this.source,nr(this.path))}}class vu{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Bi.OVERWRITE}operationForChild(e){return yn(this.path)?new vu(this.source,Pn(),this.snap.getImmediateChild(e)):new vu(this.source,nr(this.path),this.snap)}}class zd{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Bi.MERGE}operationForChild(e){if(yn(this.path)){const t=this.children.subtree(new Un(e));return t.isEmpty()?null:t.value?new vu(this.source,Pn(),t.value):new zd(this.source,Pn(),t)}return(0,U.hu)(on(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new zd(this.source,nr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class kl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(yn(e))return this.isFullyInitialized()&&!this.filtered_;const t=on(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class w1{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Nl(n,e,t,r,i,a){const u=r.filter(f=>f.type===t);u.sort((f,m)=>function Wd(n,e,t){if(null==e.childName||null==t.childName)throw(0,U.g5)("Should only compare child_ events.");const r=new Tn(e.childName,e.snapshotNode),i=new Tn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),u.forEach(f=>{const m=function jT(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function wu(n,e){return{eventCache:n,serverCache:e}}function mf(n,e,t,r){return wu(new kl(e,t,r),n.serverCache)}function y_(n,e,t,r){return wu(n.eventCache,new kl(e,t,r))}function xg(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Rc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let __;class rr{constructor(e,t=(()=>(__||(__=new bs(qh)),__))()){this.value=e,this.children=t}static fromObject(e){let t=new rr(null);return ti(e,(r,i)=>{t=t.set(new Un(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Pn(),value:this.value};if(yn(e))return null;{const r=on(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(nr(e),t);return null!=a?{path:pr(new Un(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(yn(e))return this;{const t=on(e),r=this.children.get(t);return null!==r?r.subtree(nr(e)):new rr(null)}}set(e,t){if(yn(e))return new rr(t,this.children);{const r=on(e),a=(this.children.get(r)||new rr(null)).set(nr(e),t),u=this.children.insert(r,a);return new rr(this.value,u)}}remove(e){if(yn(e))return this.children.isEmpty()?new rr(null):new rr(null,this.children);{const t=on(e),r=this.children.get(t);if(r){const i=r.remove(nr(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new rr(null):new rr(this.value,a)}return this}}get(e){if(yn(e))return this.value;{const t=on(e),r=this.children.get(t);return r?r.get(nr(e)):null}}setTree(e,t){if(yn(e))return t;{const r=on(e),a=(this.children.get(r)||new rr(null)).setTree(nr(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new rr(this.value,u)}}fold(e){return this.fold_(Pn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(pr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Pn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(yn(e))return null;{const a=on(e),u=this.children.get(a);return u?u.findOnPath_(nr(e),pr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Pn(),t)}foreachOnPath_(e,t,r){if(yn(e))return this;{this.value&&r(t,this.value);const i=on(e),a=this.children.get(i);return a?a.foreachOnPath_(nr(e),pr(t,i),r):new rr(null)}}foreach(e){this.foreach_(Pn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(pr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class eo{constructor(e){this.writeTree_=e}static empty(){return new eo(new rr(null))}}function kc(n,e,t){if(yn(e))return new eo(new rr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=Vi(i,e);return a=a.updateChild(u,t),new eo(n.writeTree_.set(i,a))}{const i=new rr(t),a=n.writeTree_.setTree(e,i);return new eo(a)}}}function v_(n,e,t){let r=n;return ti(t,(i,a)=>{r=kc(r,pr(e,i),a)}),r}function Mg(n,e){if(yn(e))return eo.empty();{const t=n.writeTree_.setTree(e,new rr(null));return new eo(t)}}function Nc(n,e){return null!=Pc(n,e)}function Pc(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Vi(t.path,e)):null}function Mb(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(lr,(r,i)=>{e.push(new Tn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Tn(r,i.value))}),e}function bu(n,e){if(yn(e))return n;{const t=Pc(n,e);return new eo(null!=t?new rr(t):n.writeTree_.subtree(e))}}function w_(n){return n.writeTree_.isEmpty()}function Zd(n,e){return Rb(Pn(),n.writeTree_,e)}function Rb(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,U.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Rb(pr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(pr(n,".priority"),r)),t}}function Rg(n,e){return Fb(e,n)}function b1(n,e){if(n.snap)return Xs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Xs(pr(n.path,t),e))return!0;return!1}function kb(n){return n.visible}function GT(n,e,t){let r=eo.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let f;if(a.snap)Xs(t,u)?(f=Vi(t,u),r=kc(r,f,a.snap)):Xs(u,t)&&(f=Vi(u,t),r=kc(r,Pn(),a.snap.getChild(f)));else{if(!a.children)throw(0,U.g5)("WriteRecord should have .snap or .children");if(Xs(t,u))f=Vi(t,u),r=v_(r,f,a.children);else if(Xs(u,t))if(f=Vi(u,t),yn(f))r=v_(r,Pn(),a.children);else{const m=(0,U.DV)(a.children,on(f));if(m){const v=m.getChild(nr(f));r=kc(r,Pn(),v)}}}}}return r}function b_(n,e,t,r,i){if(r||i){const a=bu(n.visibleWrites,e);return!i&&w_(a)?t:i||null!=t||Nc(a,Pn())?Zd(GT(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Xs(v.path,e)||Xs(e,v.path))},e),t||cn.EMPTY_NODE):null}{const a=Pc(n.visibleWrites,e);if(null!=a)return a;{const u=bu(n.visibleWrites,e);return w_(u)?t:null!=t||Nc(u,Pn())?Zd(u,t||cn.EMPTY_NODE):null}}}function kg(n,e,t,r){return b_(n.writeTree,n.treePath,e,t,r)}function Ng(n,e){return function Nb(n,e,t){let r=cn.EMPTY_NODE;const i=Pc(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(lr,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=bu(n.visibleWrites,e);return t.forEachChild(lr,(u,f)=>{const m=Zd(bu(a,new Un(u)),f);r=r.updateImmediateChild(u,m)}),Mb(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return Mb(bu(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function Ob(n,e,t,r){return function qT(n,e,t,r,i){(0,U.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=pr(e,t);if(Nc(n.visibleWrites,a))return null;{const u=bu(n.visibleWrites,a);return w_(u)?i.getChild(t):Zd(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Pg(n,e){return function zT(n,e){return Pc(n.visibleWrites,e)}(n.writeTree,pr(n.treePath,e))}function E_(n,e,t){return function Pb(n,e,t,r){const i=pr(e,t),a=Pc(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Zd(bu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function C_(n,e){return Fb(pr(n.treePath,e),n.writeTree)}function Fb(n,e){return{treePath:n,writeTree:e}}class KT{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,U.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,U.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Ac(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Rl(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,hf(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,U.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Ac(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const an=new class YT{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Og{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new kl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return E_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rc(this.viewCache_),a=function ZT(n,e,t,r,i,a){return function WT(n,e,t,r,i,a,u){let f;const m=bu(n.visibleWrites,e),v=Pc(m,Pn());if(null!=v)f=v;else{if(null==t)return[];f=Zd(m,t)}if(f=f.withIndex(u),f.isEmpty()||f.isLeafNode())return[];{const T=[],M=u.getCompare(),L=a?f.getReverseIteratorFrom(r,u):f.getIteratorFrom(r,u);let W=L.getNext();for(;W&&T.length<i;)0!==M(W,r)&&T.push(W),W=L.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function I_(n,e,t,r,i,a){const u=e.eventCache;if(null!=Pg(r,t))return e;{let f,m;if(yn(t))if((0,U.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Rc(e),M=Ng(r,v instanceof cn?v:cn.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),M,a)}else{const v=kg(r,Rc(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=on(t);if(".priority"===v){(0,U.hu)(1===yu(t),"Can't have a priority with additional path components");const T=u.getNode();m=e.serverCache.getNode();const M=Ob(r,t,T,m);f=null!=M?n.filter.updatePriority(T,M):u.getNode()}else{const T=nr(t);let M;if(u.isCompleteForChild(v)){m=e.serverCache.getNode();const L=Ob(r,t,u.getNode(),m);M=null!=L?u.getNode().getImmediateChild(v).updateChild(T,L):u.getNode().getImmediateChild(v)}else M=E_(r,v,e.serverCache);f=null!=M?n.filter.updateChild(u.getNode(),v,M,T,i,a):u.getNode()}}return mf(e,f,u.isFullyInitialized()||yn(t),n.filter.filtersNodes())}}function Fg(n,e,t,r,i,a,u,f){const m=e.serverCache;let v;const T=u?n.filter:n.filter.getIndexedFilter();if(yn(t))v=T.updateFullNode(m.getNode(),r,null);else if(T.filtersNodes()&&!m.isFiltered()){const W=m.getNode().updateChild(t,r);v=T.updateFullNode(m.getNode(),W,null)}else{const W=on(t);if(!m.isCompleteForPath(t)&&yu(t)>1)return e;const X=nr(t),ke=m.getNode().getImmediateChild(W).updateChild(X,r);v=".priority"===W?T.updatePriority(m.getNode(),ke):T.updateChild(m.getNode(),W,ke,X,an,null)}const M=y_(e,v,m.isFullyInitialized()||yn(t),T.filtersNodes());return I_(n,M,t,i,new Og(i,M,a),f)}function Lg(n,e,t,r,i,a,u){const f=e.eventCache;let m,v;const T=new Og(i,e,a);if(yn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,u),m=mf(e,v,!0,n.filter.filtersNodes());else{const M=on(t);if(".priority"===M)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=mf(e,v,f.isFullyInitialized(),f.isFiltered());else{const L=nr(t),W=f.getNode().getImmediateChild(M);let X;if(yn(L))X=r;else{const De=T.getCompleteChild(M);X=null!=De?".priority"===fb(L)&&De.getChild(pb(L)).isEmpty()?De:De.updateChild(L,r):cn.EMPTY_NODE}m=W.equals(X)?e:mf(e,n.filter.updateChild(f.getNode(),M,X,L,T,u),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function Vb(n,e){return n.eventCache.isCompleteForChild(e)}function eS(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ug(n,e,t,r,i,a,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=yn(t)?r:new rr(null).setTree(t,r);const T=e.serverCache.getNode();return v.children.inorderTraversal((M,L)=>{if(T.hasChild(M)){const X=eS(0,e.serverCache.getNode().getImmediateChild(M),L);m=Fg(n,m,new Un(M),X,i,a,u,f)}}),v.children.inorderTraversal((M,L)=>{const W=!e.serverCache.isCompleteForChild(M)&&null===L.value;if(!T.hasChild(M)&&!W){const De=eS(0,e.serverCache.getNode().getImmediateChild(M),L);m=Fg(n,m,new Un(M),De,i,a,u,f)}}),m}class D_{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Dg(r.getIndex()),a=function Ib(n){return n.loadsAllData()?new Dg(n.getIndex()):n.hasLimit()?new v1(n):new $d(n)}(r);this.processor_=function Lb(n){return{filter:n}}(a);const u=t.serverCache,f=t.eventCache,m=i.updateFullNode(cn.EMPTY_NODE,u.getNode(),null),v=a.updateFullNode(cn.EMPTY_NODE,f.getNode(),null),T=new kl(m,u.isFullyInitialized(),i.filtersNodes()),M=new kl(v,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=wu(M,T),this.eventGenerator_=new w1(this.query_)}get query(){return this.query_}}function C1(n,e){const t=Rc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!yn(e)&&!t.getImmediateChild(on(e)).isEmpty())?t.getChild(e):null}function rS(n){return 0===n.eventRegistrations_.length}function jb(n,e,t){const r=[];if(t){(0,U.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function S_(n,e,t,r){e.type===Bi.MERGE&&null!==e.source.queryId&&((0,U.hu)(Rc(n.viewCache_),"We should always have a full cache before handling merges"),(0,U.hu)(xg(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function QT(n,e,t,r,i){const a=new KT;let u,f;if(t.type===Bi.OVERWRITE){const v=t;v.source.fromUser?u=Lg(n,e,v.path,v.snap,r,i,a):((0,U.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!yn(v.path),u=Fg(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===Bi.MERGE){const v=t;v.source.fromUser?u=function XT(n,e,t,r,i,a,u){let f=e;return r.foreach((m,v)=>{const T=pr(t,m);Vb(e,on(T))&&(f=Lg(n,f,T,v,i,a,u))}),r.foreach((m,v)=>{const T=pr(t,m);Vb(e,on(T))||(f=Lg(n,f,T,v,i,a,u))}),f}(n,e,v.path,v.children,r,i,a):((0,U.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),u=Ug(n,e,v.path,v.children,r,i,f,a))}else if(t.type===Bi.ACK_USER_WRITE){const v=t;u=v.revert?function tS(n,e,t,r,i,a){let u;if(null!=Pg(r,t))return e;{const f=new Og(r,e,i),m=e.eventCache.getNode();let v;if(yn(t)||".priority"===on(t)){let T;if(e.serverCache.isFullyInitialized())T=kg(r,Rc(e));else{const M=e.serverCache.getNode();(0,U.hu)(M instanceof cn,"serverChildren would be complete if leaf node"),T=Ng(r,M)}v=n.filter.updateFullNode(m,T,a)}else{const T=on(t);let M=E_(r,T,e.serverCache);null==M&&e.serverCache.isCompleteForChild(T)&&(M=m.getImmediateChild(T)),v=null!=M?n.filter.updateChild(m,T,M,nr(t),f,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(m,T,cn.EMPTY_NODE,nr(t),f,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=kg(r,Rc(e)),u.isLeafNode()&&(v=n.filter.updateFullNode(v,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=Pg(r,Pn()),mf(e,v,u,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function Bb(n,e,t,r,i,a,u){if(null!=Pg(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(yn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return Fg(n,e,t,m.getNode().getChild(t),i,a,f,u);if(yn(t)){let v=new rr(null);return m.getNode().forEachChild(Wa,(T,M)=>{v=v.set(new Un(T),M)}),Ug(n,e,t,v,i,a,f,u)}return e}{let v=new rr(null);return r.foreach((T,M)=>{const L=pr(t,T);m.isCompleteForPath(L)&&(v=v.set(T,m.getNode().getChild(L)))}),Ug(n,e,t,v,i,a,f,u)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==Bi.LISTEN_COMPLETE)throw(0,U.g5)("Unknown operation type: "+t.type);u=function Oc(n,e,t,r,i){const a=e.serverCache;return I_(n,y_(e,a.getNode(),a.isFullyInitialized()||yn(t),a.isFiltered()),t,r,an,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function JT(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=xg(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(LT(xg(e)))}}(e,u,m),{viewCache:u,changes:m}}(n.processor_,i,e,t,r);return function Ub(n,e){(0,U.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,U.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,U.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,$b(n,a.changes,a.viewCache.eventCache.getNode(),null)}function $b(n,e,t,r){return function BT(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function Cb(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Nl(n,i,"child_removed",e,r,t),Nl(n,i,"child_added",e,r,t),Nl(n,i,"child_moved",a,r,t),Nl(n,i,"child_changed",e,r,t),Nl(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Ol,Yd;class Hb{constructor(){this.views=new Map}}function Bg(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,U.hu)(null!=a,"SyncTree gave us an op for an invalid query."),S_(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(S_(u,e,t,r));return a}}function qb(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let f=kg(t,i?r:null),m=!1;f?m=!0:r instanceof cn?(f=Ng(t,r),m=!1):(f=cn.EMPTY_NODE,m=!1);const v=wu(new kl(f,m,!1),new kl(r,i,!1));return new D_(e,v)}return u}function zb(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Eu(n,e){let t=null;for(const r of n.views.values())t=t||C1(r,e);return t}function A_(n,e){return e._queryParams.loadsAllData()?yf(n):n.views.get(e._queryIdentifier)}function Wb(n,e){return null!=A_(n,e)}function Fl(n){return null!=yf(n)}function yf(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let aS=1;class lS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new rr(null),this.pendingWriteTree_=function da(){return{visibleWrites:eo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Cu(n,e,t,r,i){return function Kd(n,e,t,r,i){(0,U.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=kc(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Du(n,new vu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Iu(n,e,t=!1){const r=function $T(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function HT(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,U.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=t&&b1(f,r.path)?i=!1:Xs(r.path,f.path)&&(a=!0)),u--}return!!i&&(a?(function E1(n){n.visibleWrites=GT(n.allWrites,kb,Pn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Mg(n.visibleWrites,r.path):ti(r.children,m=>{n.visibleWrites=Mg(n.visibleWrites,pr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new rr(null);return null!=r.snap?a=a.set(Pn(),!0):ti(r.children,u=>{a=a.set(new Un(u),!0)}),Du(n,new qd(r.path,a,t))}return[]}function Qd(n,e,t){return Du(n,new vu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Ll(n,e,t,r,i=!1){const a=e._path,u=n.syncPointTree_.get(a);let f=[];if(u&&("default"===e._queryIdentifier||Wb(u,e))){const m=function oS(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const f=Fl(n);if("default"===i)for(const[m,v]of n.views.entries())u=u.concat(jb(v,t,r)),rS(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(u=u.concat(jb(m,t,r)),rS(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return f&&!Fl(n)&&a.push(new(function Vg(){return(0,U.hu)(Ol,"Reference.ts has not been loaded"),Ol}())(e._repo,e._path)),{removed:a,events:u}}(u,e,t,r);(function iS(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(f=m.events,!i){const T=-1!==v.findIndex(L=>L._queryParams.loadsAllData()),M=n.syncPointTree_.findOnPath(a,(L,W)=>Fl(W));if(T&&!M){const L=n.syncPointTree_.subtree(a);if(!L.isEmpty()){const W=function Yb(n){return n.fold((e,t,r)=>{if(t&&Fl(t))return[yf(t)];{let i=[];return t&&(i=zb(t)),ti(r,(a,u)=>{i=i.concat(u)}),i}})}(L);for(let X=0;X<W.length;++X){const De=W[X],ke=De.query,Ft=M_(n,De);n.listenProvider_.startListening(Jd(ke),Lc(n,ke),Ft.hashFn,Ft.onComplete)}}}!M&&v.length>0&&!r&&(T?n.listenProvider_.stopListening(Jd(e),null):v.forEach(L=>{const W=n.queryToTagMap.get(qg(L));n.listenProvider_.stopListening(Jd(L),W)}))}!function dS(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=qg(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return f}function $g(n,e,t,r){const i=R_(n,r);if(null!=i){const a=zg(i),u=a.path,f=a.queryId,m=Vi(u,e);return k_(n,u,new vu(m_(f),m,t))}return[]}function vf(n,e,t,r=!1){const i=e._path;let a=null,u=!1;n.syncPointTree_.foreachOnPath(i,(L,W)=>{const X=Vi(L,i);a=a||Eu(W,X),u=u||Fl(W)});let m,f=n.syncPointTree_.get(i);f?(u=u||Fl(f),a=a||Eu(f,Pn())):(f=new Hb,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?m=!0:(m=!1,a=cn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((W,X)=>{const De=Eu(X,Pn());De&&(a=a.updateImmediateChild(W,De))}));const v=Wb(f,e);if(!v&&!e._queryParams.loadsAllData()){const L=qg(e);(0,U.hu)(!n.queryToTagMap.has(L),"View does not exist, but we have a tag");const W=function hS(){return aS++}();n.queryToTagMap.set(L,W),n.tagToQueryMap.set(W,L)}let M=function sS(n,e,t,r,i,a){const u=qb(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function I1(n,e){n.eventRegistrations_.push(e)}(u,t),function D1(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(lr,(a,u)=>{r.push(hf(a,u))}),t.isFullyInitialized()&&r.push(LT(t.getNode())),$b(n,r,t.getNode(),e)}(u,t)}(f,e,t,Rg(n.pendingWriteTree_,i),a,m);if(!v&&!u&&!r){const L=A_(f,e);M=M.concat(function to(n,e,t){const r=e._path,i=Lc(n,e),a=M_(n,t),u=n.listenProvider_.startListening(Jd(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,U.hu)(!Fl(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((v,T,M)=>{if(!yn(v)&&T&&Fl(T))return[yf(T).query];{let L=[];return T&&(L=L.concat(zb(T).map(W=>W.query))),ti(M,(W,X)=>{L=L.concat(X)}),L}});for(let v=0;v<m.length;++v){const T=m[v];n.listenProvider_.stopListening(Jd(T),Lc(n,T))}}return u}(n,e,L))}return M}function Fc(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,f)=>{const v=Eu(f,Vi(u,e));if(v)return v});return b_(i,e,a,t,!0)}function Du(n,e){return Hg(e,n.syncPointTree_,null,Rg(n.pendingWriteTree_,Pn()))}function Hg(n,e,t,r){if(yn(n.path))return Gg(n,e,t,r);{const i=e.get(Pn());null==t&&null!=i&&(t=Eu(i,Pn()));let a=[];const u=on(n.path),f=n.operationForChild(u),m=e.children.get(u);if(m&&f){const v=t?t.getImmediateChild(u):null,T=C_(r,u);a=a.concat(Hg(f,m,v,T))}return i&&(a=a.concat(Bg(i,n,r,t))),a}}function Gg(n,e,t,r){const i=e.get(Pn());null==t&&null!=i&&(t=Eu(i,Pn()));let a=[];return e.children.inorderTraversal((u,f)=>{const m=t?t.getImmediateChild(u):null,v=C_(r,u),T=n.operationForChild(u);T&&(a=a.concat(Gg(T,f,m,v)))}),i&&(a=a.concat(Bg(i,n,r,t))),a}function M_(n,e){const t=e.query,r=Lc(n,t);return{hashFn:()=>(function T_(n){return n.viewCache_.serverCache.getNode()}(e)||cn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function jg(n,e,t){const r=R_(n,t);if(r){const i=zg(r),a=i.path,u=i.queryId,f=Vi(a,e);return k_(n,a,new gf(m_(u),f))}return[]}(n,t._path,r):function cS(n,e){return Du(n,new gf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function Yy(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Ll(n,t,null,a)}}}}function Lc(n,e){const t=qg(e);return n.queryToTagMap.get(t)}function qg(n){return n._path.toString()+"$"+n._queryIdentifier}function R_(n,e){return n.tagToQueryMap.get(e)}function zg(n){const e=n.indexOf("$");return(0,U.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Un(n.substr(0,e))}}function k_(n,e,t){const r=n.syncPointTree_.get(e);return(0,U.hu)(r,"Missing sync point for query tag that we're tracking"),Bg(r,t,Rg(n.pendingWriteTree_,e),null)}function Jd(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function x_(){return(0,U.hu)(Yd,"Reference.ts has not been loaded"),Yd}())(n._repo,n._path):n}class Wg{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Wg(t)}node(){return this.node_}}class N_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=pr(this.path_,e);return new N_(this.syncTree_,t)}node(){return Fc(this.syncTree_,this.path_)}}const Zg=function(n,e,t){return n&&"object"==typeof n?((0,U.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Qb(n[".sv"],e,t):"object"==typeof n[".sv"]?fS(n[".sv"],e):void(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Qb=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,U.hu)(!1,"Unexpected server value: "+n)},fS=function(n,e,t){n.hasOwnProperty("increment")||(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,U.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,U.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},Jb=function(n,e,t,r){return Kg(e,new N_(t,n),r)},P_=function(n,e,t){return Kg(n,new Wg(e),t)};function Kg(n,e,t){const r=n.getPriority().val(),i=Zg(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,f=Zg(u.getValue(),e,t);return f!==u.getValue()||i!==u.getPriority().val()?new uf(f,Tr(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new uf(i))),u.forEachChild(lr,(f,m)=>{const v=Kg(m,e.getImmediateChild(f),t);v!==m&&(a=a.updateImmediateChild(f,v))}),a}}class O_{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Yg(n,e){let t=e instanceof Un?e:new Un(e),r=n,i=on(t);for(;null!==i;){const a=(0,U.DV)(r.node.children,i)||{children:{},childCount:0};r=new O_(i,r,a),t=nr(t),i=on(t)}return r}function Ul(n){return n.node.value}function F_(n,e){n.node.value=e,L_(n)}function Xb(n){return n.node.childCount>0}function Qg(n,e){ti(n.node.children,(t,r)=>{e(new O_(t,n,r))})}function eE(n,e,t,r){t&&!r&&e(n),Qg(n,i=>{eE(i,e,!0,r)}),t&&r&&e(n)}function Uc(n){return new Un(null===n.parent?n.name:Uc(n.parent)+"/"+n.name)}function L_(n){null!==n.parent&&function gS(n,e,t){const r=function pS(n){return void 0===Ul(n)&&!Xb(n)}(t),i=(0,U.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,L_(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,L_(n))}(n.parent,n.name,n)}const tE=/[\[\].#$\/\u0000-\u001F\u007F]/,mS=/[\[\].#$\u0000-\u001F\u007F]/,U_=10485760,Jg=function(n){return"string"==typeof n&&0!==n.length&&!tE.test(n)},Xg=function(n){return"string"==typeof n&&0!==n.length&&!mS.test(n)},wf=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Nd(n)||n&&"object"==typeof n&&(0,U.r3)(n,".sv")},no=function(n,e,t,r){r&&void 0===e||Vc((0,U.gK)(n,"value"),e,t)},Vc=function(n,e,t){const r=t instanceof Un?new mb(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Sc(r));if("function"==typeof e)throw new Error(n+"contains a function "+Sc(r)+" with contents = "+e.toString());if(Nd(e))throw new Error(n+"contains "+e.toString()+" "+Sc(r));if("string"==typeof e&&e.length>U_/3&&(0,U.ug)(e)>U_)throw new Error(n+"contains a string greater than "+U_+" utf8 bytes "+Sc(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(ti(e,(u,f)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!Jg(u)))throw new Error(n+" contains an invalid key ("+u+") "+Sc(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function ST(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,U.ug)(e),yb(n)})(r,u),Vc(n,f,r),function AT(n){const e=n.parts_.pop();n.byteLength_-=(0,U.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Sc(r)+" in addition to actual children.")}},_S=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,U.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];ti(e,(u,f)=>{const m=new Un(u);if(Vc(i,f,pr(t,m)),".priority"===fb(m)&&!wf(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Tc(r);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!Jg(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(gb);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Xs(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},bf=function(n,e,t){if(!t||void 0!==e){if(Nd(e))throw new Error((0,U.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!wf(e))throw new Error((0,U.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},tm=function(n,e,t,r){if(!(r&&void 0===t||Jg(t)))throw new Error((0,U.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Xd=function(n,e,t,r){if(!(r&&void 0===t||Xg(t)))throw new Error((0,U.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ro=function(n,e){if(".info"===on(e))throw new Error(n+" failed = Can't modify data under /.info/")},V_=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Jg(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Xg(n)}(t))throw new Error((0,U.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class B_{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Bo(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!mg(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function Ef(n,e,t){Bo(n,t),eh(n,r=>mg(r,e))}function ts(n,e,t){Bo(n,t),eh(n,r=>Xs(r,e)||Xs(e,r))}function eh(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(vS(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function vS(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();la&&Lr("event: "+t.toString()),Ur(r)}}}const j_="repo_interrupt";class wS{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new B_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xc(),this.transactionQueueTree_=new O_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function th(n){const t=n.infoData_.getNode(new Un(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Cf(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:th(n)})}function ES(n,e,t,r,i){n.dataUpdateCount++;const a=new Un(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const m=(0,U.UI)(t,v=>Tr(v));u=function _f(n,e,t,r){const i=R_(n,r);if(i){const a=zg(i),u=a.path,f=a.queryId,m=Vi(u,e),v=rr.fromObject(t);return k_(n,u,new zd(m_(f),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Tr(t);u=$g(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,U.UI)(t,v=>Tr(v));u=function uS(n,e,t){const r=rr.fromObject(t);return Du(n,new zd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Tr(t);u=Qd(n.serverSyncTree_,a,m)}let f=a;u.length>0&&(f=Bc(n,a)),ts(n.eventQueue_,f,u)}function iE(n,e){$_(n,"connected",e),!1===e&&function sE(n){nh(n,"onDisconnectEvents");const e=Cf(n),t=xc();Gd(n.onDisconnect_,Pn(),(i,a)=>{const u=Jb(i,a,n.serverSyncTree_,e);Hd(t,i,u)});let r=[];Gd(t,Pn(),(i,a)=>{r=r.concat(Qd(n.serverSyncTree_,i,a));const u=W_(n,i);Bc(n,u)}),n.onDisconnect_=xc(),ts(n.eventQueue_,Pn(),r)}(n)}function $_(n,e,t){const r=new Un("/.info/"+e),i=Tr(t);n.infoData_.updateSnapshot(r,i);const a=Qd(n.infoSyncTree_,r,i);ts(n.eventQueue_,r,a)}function nm(n){return n.nextWriteId_++}function H_(n,e,t,r,i){nh(n,"set",{path:e.toString(),value:t,priority:r});const a=Cf(n),u=Tr(t,r),f=Fc(n.serverSyncTree_,e),m=P_(u,f,a),v=nm(n),T=Cu(n.serverSyncTree_,e,m,v,!0);Bo(n.eventQueue_,T),n.server_.put(e.toString(),u.val(!0),(L,W)=>{const X="ok"===L;X||Ui("set at "+e+" failed: "+L);const De=Iu(n.serverSyncTree_,v,!X);ts(n.eventQueue_,e,De),Tu(0,i,L,W)});const M=W_(n,e);Bc(n,M),ts(n.eventQueue_,M,[])}function G_(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&pf(n.onDisconnect_,e),Tu(0,t,r,i)})}function oE(n,e,t,r){const i=Tr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,u)=>{"ok"===a&&Hd(n.onDisconnect_,e,i),Tu(0,r,a,u)})}function z_(n,e,t){let r;r=".info"===on(e._path)?Ll(n.infoSyncTree_,e,t):Ll(n.serverSyncTree_,e,t),Ef(n.eventQueue_,e._path,r)}function aE(n){n.persistentConnection_&&n.persistentConnection_.interrupt(j_)}function nh(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Lr(t,...e)}function Tu(n,e,t,r){e&&Ur(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}function rm(n,e,t){return Fc(n.serverSyncTree_,e,t)||cn.EMPTY_NODE}function im(n,e=n.transactionQueueTree_){if(e||om(n,e),Ul(e)){const t=xS(n,e);(0,U.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function A1(n,e,t){const r=t.map(v=>v.currentWriteId),i=rm(n,e,r);let a=i;const u=i.hash();for(let v=0;v<t.length;v++){const T=t[v];(0,U.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const M=Vi(e,T.path);a=a.updateChild(M,T.currentOutputSnapshotRaw)}const f=a.val(!0),m=e;n.server_.put(m.toString(),f,v=>{nh(n,"transaction put response",{path:m.toString(),status:v});let T=[];if("ok"===v){const M=[];for(let L=0;L<t.length;L++)t[L].status=2,T=T.concat(Iu(n.serverSyncTree_,t[L].currentWriteId)),t[L].onComplete&&M.push(()=>t[L].onComplete(null,!0,t[L].currentOutputSnapshotResolved)),t[L].unwatcher();om(n,Yg(n.transactionQueueTree_,e)),im(n,n.transactionQueueTree_),ts(n.eventQueue_,e,T);for(let L=0;L<M.length;L++)Ur(M[L])}else{if("datastale"===v)for(let M=0;M<t.length;M++)t[M].status=3===t[M].status?4:0;else{Ui("transaction at "+m.toString()+" failed: "+v);for(let M=0;M<t.length;M++)t[M].status=4,t[M].abortReason=v}Bc(n,e)}},u)}(n,Uc(e),t)}else Xb(e)&&Qg(e,t=>{im(n,t)})}function Bc(n,e){const t=Su(n,e),r=Uc(t);return function sm(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=Vi(t,m.path);let M,T=!1;if((0,U.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)T=!0,M=m.abortReason,i=i.concat(Iu(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)T=!0,M="maxretry",i=i.concat(Iu(n.serverSyncTree_,m.currentWriteId,!0));else{const L=rm(n,m.path,u);m.currentInputSnapshot=L;const W=e[f].update(L.val());if(void 0!==W){Vc("transaction failed: Data returned ",W,m.path);let X=Tr(W);"object"==typeof W&&null!=W&&(0,U.r3)(W,".priority")||(X=X.updatePriority(L.getPriority()));const ke=m.currentWriteId,Ft=Cf(n),Vt=P_(X,L,Ft);m.currentOutputSnapshotRaw=X,m.currentOutputSnapshotResolved=Vt,m.currentWriteId=nm(n),u.splice(u.indexOf(ke),1),i=i.concat(Cu(n.serverSyncTree_,m.path,Vt,m.currentWriteId,m.applyLocally)),i=i.concat(Iu(n.serverSyncTree_,ke,!0))}else T=!0,M="nodata",i=i.concat(Iu(n.serverSyncTree_,m.currentWriteId,!0))}ts(n.eventQueue_,t,i),i=[],T&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===M?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(M),!1,null)))}om(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)Ur(r[f]);im(n,n.transactionQueueTree_)}(n,xS(n,t),r),r}function Su(n,e){let t,r=n.transactionQueueTree_;for(t=on(e);null!==t&&void 0===Ul(r);)r=Yg(r,t),t=on(e=nr(e));return r}function xS(n,e){const t=[];return If(n,e,t),t.sort((r,i)=>r.order-i.order),t}function If(n,e,t){const r=Ul(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Qg(e,i=>{If(n,i,t)})}function om(n,e){const t=Ul(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,F_(e,t.length>0?t:void 0)}Qg(e,r=>{om(n,r)})}function W_(n,e){const t=Uc(Su(n,e)),r=Yg(n.transactionQueueTree_,e);return function Za(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Df(n,i)}),Df(n,r),eE(r,i=>{Df(n,i)}),t}function Df(n,e){const t=Ul(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,U.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,U.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Iu(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?F_(e,void 0):t.length=a+1,ts(n.eventQueue_,Uc(e),i);for(let u=0;u<r.length;u++)Ur(r[u])}}const jc=function(n,e){const t=ns(n),r=t.namespace;return"firebase.com"===t.domain&&ua(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ua("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ui("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new He(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Un(t.pathString)}},ns=function(n){let e="",t="",r="",i="",a="",u=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let T=n.indexOf("/");-1===T&&(T=n.length);let M=n.indexOf("?");-1===M&&(M=n.length),e=n.substring(0,Math.min(T,M)),T<M&&(i=function MS(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(T,M)));const L=function Ka(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ui(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,M)));v=e.indexOf(":"),v>=0?(u="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const W=e.slice(0,v);if("localhost"===W.toLowerCase())t="localhost";else if(W.split(".").length<=2)t=W;else{const X=e.indexOf(".");r=e.substring(0,X).toLowerCase(),t=e.substring(X+1),a=r}"ns"in L&&(a=L.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:u,scheme:f,pathString:i,namespace:a}},Au="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",am=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Au.charAt(t%64),t=Math.floor(t/64);(0,U.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=Au.charAt(e[i]);return(0,U.hu)(20===u.length,"nextPushId: Length should be 20."),u}}();class io{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,U.Wl)(this.snapshot.exportVal())}}class lm{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class xu{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,U.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class $c{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new U.BH;return G_(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ro("OnDisconnect.remove",this._path);const e=new U.BH;return oE(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ro("OnDisconnect.set",this._path),no("OnDisconnect.set",e,this._path,!1);const t=new U.BH;return oE(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ro("OnDisconnect.setWithPriority",this._path),no("OnDisconnect.setWithPriority",e,this._path,!1),bf("OnDisconnect.setWithPriority",t,!1);const r=new U.BH;return function q_(n,e,t,r,i){const a=Tr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,f)=>{"ok"===u&&Hd(n.onDisconnect_,e,a),Tu(0,i,u,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ro("OnDisconnect.update",this._path),_S("OnDisconnect.update",e,this._path,!1);const t=new U.BH;return function TS(n,e,t,r){if((0,U.xb)(t))return Lr("onDisconnect().update() called with empty data.  Don't do anything."),void Tu(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&ti(t,(u,f)=>{const m=Tr(f);Hd(n.onDisconnect_,pr(e,u),m)}),Tu(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class gi{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return yn(this._path)?null:fb(this._path)}get ref(){return new ji(this._repo,this._path)}get _queryIdentifier(){const e=_u(this._queryParams),t=zh(e);return"{}"===t?"default":t}get _queryObject(){return _u(this._queryParams)}isEqual(e){if(!((e=(0,U.m9)(e))instanceof gi))return!1;const t=this._repo===e._repo,r=mg(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function TT(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Vl(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function so(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Wa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Lo)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Uo)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===lr){if(null!=e&&!wf(e)||null!=t&&!wf(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,U.hu)(n.getIndex()instanceof a_||n.getIndex()===Ig,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Bl(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ji extends gi{constructor(e,t){super(e,t,new Tg,!1)}get parent(){const e=pb(this._path);return null===e?null:new ji(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class jo{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Un(e),r=Mu(this.ref,e);return new jo(this._node.getChild(t),r,lr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new jo(i,Mu(this.ref,r),lr)))}hasChild(e){const t=new Un(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Hc(n,e){return(n=(0,U.m9)(n))._checkNotDeleted("ref"),void 0!==e?Mu(n._root,e):n._root}function Z_(n,e){(n=(0,U.m9)(n))._checkNotDeleted("refFromURL");const t=jc(e,n._repo.repoInfo_.nodeAdmin);V_("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ua("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Hc(n,t.path.toString())}function Mu(n,e){return null===on((n=(0,U.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Xd("child","path",t,!1)):Xd("child","path",e,!1),new ji(n._repo,pr(n._path,e));var t}function um(n,e){n=(0,U.m9)(n),ro("set",n._path),no("set",e,n._path,!1);const t=new U.BH;return H_(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function fE(n,e){_S("update",e,n._path,!1);const t=new U.BH;return function DS(n,e,t,r){nh(n,"update",{path:e.toString(),value:t});let i=!0;const a=Cf(n),u={};if(ti(t,(f,m)=>{i=!1,u[f]=Jb(pr(e,f),Tr(m),n.serverSyncTree_,a)}),i)Lr("update() called with empty data.  Don't do anything."),Tu(0,r,"ok",void 0);else{const f=nm(n),m=function Zb(n,e,t,r){!function Pl(n,e,t,r){(0,U.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=v_(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=rr.fromObject(t);return Du(n,new zd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,f);Bo(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,T)=>{const M="ok"===v;M||Ui("update at "+e+" failed: "+v);const L=Iu(n.serverSyncTree_,f,!M),W=L.length>0?Bc(n,e):e;ts(n.eventQueue_,W,L),Tu(0,r,v,T)}),ti(t,v=>{const T=W_(n,pr(e,v));Bc(n,T)}),ts(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function kS(n){n=(0,U.m9)(n);const e=new xu(()=>{}),t=new Tf(e);return function IS(n,e,t){const r=function Kb(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,T)=>{const M=Vi(v,t);r=r||Eu(T,M)});let i=n.syncPointTree_.get(t);i?r=r||Eu(i,Pn()):(i=new Hb,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,u=a?new kl(r,!0,!1):null;return function nS(n){return xg(n.viewCache_)}(qb(i,e,Rg(n.pendingWriteTree_,e._path),a?u.getNode():cn.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Tr(i).withIndex(e._queryParams.getIndex());let u;if(vf(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=Qd(n.serverSyncTree_,e._path,a);else{const f=Lc(n.serverSyncTree_,e);u=$g(n.serverSyncTree_,e._path,a,f)}return ts(n.eventQueue_,e._path,u),Ll(n.serverSyncTree_,e,t,null,!0),a},i=>(nh(n,"get for query "+(0,U.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new jo(r,new ji(n._repo,n._path),n._queryParams.getIndex()))}class Tf{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new io("value",this,new jo(e.snapshotNode,new ji(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new lm(this,e,t):null}matches(e){return e instanceof Tf&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Sf{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new lm(this,e,t):null}createEvent(e,t){(0,U.hu)(null!=e.childName,"Child events should have a childName.");const r=Mu(new ji(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new io(e.type,this,new jo(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Sf&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Af(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(T,M)=>{z_(n._repo,n,f),m(T,M)};v.userCallback=t.userCallback,v.context=t.context,t=v}const u=new xu(t,a||void 0),f="value"===e?new Tf(u):new Sf(e,u);return function SS(n,e,t){let r;r=".info"===on(e._path)?vf(n.infoSyncTree_,e,t):vf(n.serverSyncTree_,e,t),Ef(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>z_(n._repo,n,f)}function cm(n,e,t,r){return Af(n,"value",e,t,r)}function dm(n,e,t,r){return Af(n,"child_added",e,t,r)}function hm(n,e,t,r){return Af(n,"child_changed",e,t,r)}function pE(n,e,t,r){return Af(n,"child_moved",e,t,r)}function xf(n,e,t,r){return Af(n,"child_removed",e,t,r)}function Mf(n,e,t){let r=null;const i=t?new xu(t):null;"value"===e?r=new Tf(i):e&&(r=new Sf(e,i)),z_(n._repo,n,r)}class oo{}class gE extends oo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){no("endAt",this._value,e._path,!0);const t=c_(e._queryParams,this._value,this._key);if(Bl(t),so(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new gi(e._repo,e._path,t,e._orderByCalled)}}class Y_ extends oo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){no("endBefore",this._value,e._path,!1);const t=function d_(n,e,t){let r;return r=c_(n,e,n.index_===Wa||t?t:Lo),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Bl(t),so(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new gi(e._repo,e._path,t,e._orderByCalled)}}class Q_ extends oo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){no("startAt",this._value,e._path,!0);const t=Tb(e._queryParams,this._value,this._key);if(Bl(t),so(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new gi(e._repo,e._path,t,e._orderByCalled)}}class yE extends oo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){no("startAfter",this._value,e._path,!1);const t=function u_(n,e,t){let r;return r=Tb(n,e,n.index_===Wa||t?t:Uo),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Bl(t),so(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new gi(e._repo,e._path,t,e._orderByCalled)}}class X_ extends oo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new gi(e._repo,e._path,function Db(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class NS extends oo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new gi(e._repo,e._path,function l_(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class bE extends oo{constructor(e){super(),this._path=e}_apply(e){Vl(e,"orderByChild");const t=new Un(this._path);if(yn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new a_(t),i=ff(e._queryParams,r);return so(i),new gi(e._repo,e._path,i,!0)}}class CE extends oo{_apply(e){Vl(e,"orderByKey");const t=ff(e._queryParams,Wa);return so(t),new gi(e._repo,e._path,t,!0)}}class OS extends oo{_apply(e){Vl(e,"orderByPriority");const t=ff(e._queryParams,lr);return so(t),new gi(e._repo,e._path,t,!0)}}class ev extends oo{_apply(e){Vl(e,"orderByValue");const t=ff(e._queryParams,Ig);return so(t),new gi(e._repo,e._path,t,!0)}}class IE extends oo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(no("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new gE(this._value,this._key)._apply(new Q_(this._value,this._key)._apply(e))}}function $o(n,...e){let t=(0,U.m9)(n);for(const r of e)t=r._apply(t);return t}(function Gb(n){(0,U.hu)(!Ol,"__referenceConstructor has already been defined"),Ol=n})(ji),function T1(n){(0,U.hu)(!Yd,"__referenceConstructor has already been defined"),Yd=n}(ji);const fm={};function rv(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||ua("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Lr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,u=jc(a,i),f=u.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${f.namespace}`,u=jc(a,i),f=u.repoInfo):m=!u.repoInfo.secure;const T=i&&m?new ca(ca.OWNER):new Mi(n.name,n.options,e);V_("Invalid Firebase Database URL",u),yn(u.path)||ua("Database URL must point to the root of a Firebase Database (not including a child path).");const M=function Ru(n,e,t,r){let i=fm[e.name];i||(i={},fm[e.name]=i);let a=i[n.toURLString()];return a&&ua("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new wS(n,false,t,r),i[n.toURLString()]=a,a}(f,n,T,new Yh(n.name,t));return new US(M,n)}class US{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function bS(n,e,t){if(n.stats_=Fs(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Sg(n.repoInfo_,(r,i,a,u)=>{ES(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>iE(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,U.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ud(n.repoInfo_,e,(r,i,a,u)=>{ES(n,r,i,a,u)},r=>{iE(n,r)},r=>{!function CS(n,e){ti(e,(t,r)=>{$_(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Ic(n,e){const t=n.toString();return es[t]||(es[t]=e()),es[t]}(n.repoInfo_,()=>new Ab(n.stats_,n.server_)),n.infoData_=new f_,n.infoSyncTree_=new lS({startListening:(r,i,a,u)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=Qd(n.infoSyncTree_,r._path,m),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),$_(n,"connected",!1),n.serverSyncTree_=new lS({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(f,m)=>{const v=u(f,m);ts(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ji(this._repo,Pn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function pm(n,e){const t=fm[e];(!t||t[n.key]!==n)&&ua(`Database ${e}(${n.repoInfo_}) has already been deleted.`),aE(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ua("Cannot call "+e+" on a deleted database.")}}function gm(){nf.IS_TRANSPORT_INITIALIZED&&Ui("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Gc(){gm(),xl.forceDisallow()}function iv(){gm(),tf.forceDisallow(),xl.forceAllow()}function VS(n,e){Ky(n,e)}const AE={".sv":"timestamp"};class xE{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ud.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ud.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function BS(n){ws(zn.SDK_VERSION),(0,zn._registerComponent)(new $t.wA("database",(e,{instanceIdentifier:t})=>rv(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,zn.registerVersion)(pu,"0.14.1",n),(0,zn.registerVersion)(pu,"0.14.1","esm2017")}();const RE=new fi.Yd("@firebase/database-compat"),qc=function(n){RE.warn("FIREBASE WARNING: "+n)};class kE{constructor(e){this._delegate=e}cancel(e){(0,U.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,U.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,U.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,U.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,U.Dv)("OnDisconnect.set",1,2,arguments.length),(0,U.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,U.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,U.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,qc("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,U.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class WS{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,U.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class jl{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,U.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,U.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,U.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,U.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,U.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Xd("DataSnapshot.child","path",e,!1),new jl(this._database,this._delegate.child(e))}hasChild(e){return(0,U.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Xd("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,U.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,U.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,U.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new jl(this._database,t)))}hasChildren(){return(0,U.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,U.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,U.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ls(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class rs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,U.Dv)("Query.on",2,4,arguments.length),(0,U.Wj)("Query.on","callback",t,!1);const u=rs.getCancelAndContextArgs_("Query.on",r,i),f=(v,T)=>{t.call(u.context,new jl(this.database,v),T)};f.userCallback=t,f.context=u.context;const m=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return cm(this._delegate,f,m),t;case"child_added":return dm(this._delegate,f,m),t;case"child_removed":return xf(this._delegate,f,m),t;case"child_changed":return hm(this._delegate,f,m),t;case"child_moved":return pE(this._delegate,f,m),t;default:throw new Error((0,U.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,U.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,U.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,U.Wj)("Query.off","callback",t,!0),(0,U.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Mf(this._delegate,e,i)}else Mf(this._delegate,e)}get(){return kS(this._delegate).then(e=>new jl(this.database,e))}once(e,t,r,i){(0,U.Dv)("Query.once",1,4,arguments.length),(0,U.Wj)("Query.once","callback",t,!0);const a=rs.getCancelAndContextArgs_("Query.once",r,i),u=new U.BH,f=(v,T)=>{const M=new jl(this.database,v);t&&t.call(a.context,M,T),u.resolve(M)};f.userCallback=t,f.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),u.reject(v)};switch(e){case"value":cm(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":dm(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":xf(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":hm(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":pE(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,U.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,U.Dv)("Query.limitToFirst",1,1,arguments.length),new rs(this.database,$o(this._delegate,function vE(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new X_(n)}(e)))}limitToLast(e){return(0,U.Dv)("Query.limitToLast",1,1,arguments.length),new rs(this.database,$o(this._delegate,function wE(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new NS(n)}(e)))}orderByChild(e){return(0,U.Dv)("Query.orderByChild",1,1,arguments.length),new rs(this.database,$o(this._delegate,function EE(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Xd("orderByChild","path",n,!1),new bE(n)}(e)))}orderByKey(){return(0,U.Dv)("Query.orderByKey",0,0,arguments.length),new rs(this.database,$o(this._delegate,function PS(){return new CE}()))}orderByPriority(){return(0,U.Dv)("Query.orderByPriority",0,0,arguments.length),new rs(this.database,$o(this._delegate,function FS(){return new OS}()))}orderByValue(){return(0,U.Dv)("Query.orderByValue",0,0,arguments.length),new rs(this.database,$o(this._delegate,function tv(){return new ev}()))}startAt(e=null,t){return(0,U.Dv)("Query.startAt",0,2,arguments.length),new rs(this.database,$o(this._delegate,function J_(n=null,e){return tm("startAt","key",e,!0),new Q_(n,e)}(e,t)))}startAfter(e=null,t){return(0,U.Dv)("Query.startAfter",0,2,arguments.length),new rs(this.database,$o(this._delegate,function _E(n,e){return tm("startAfter","key",e,!0),new yE(n,e)}(e,t)))}endAt(e=null,t){return(0,U.Dv)("Query.endAt",0,2,arguments.length),new rs(this.database,$o(this._delegate,function K_(n,e){return tm("endAt","key",e,!0),new gE(n,e)}(e,t)))}endBefore(e=null,t){return(0,U.Dv)("Query.endBefore",0,2,arguments.length),new rs(this.database,$o(this._delegate,function mE(n,e){return tm("endBefore","key",e,!0),new Y_(n,e)}(e,t)))}equalTo(e,t){return(0,U.Dv)("Query.equalTo",1,2,arguments.length),new rs(this.database,$o(this._delegate,function DE(n,e){return tm("equalTo","key",e,!0),new IE(n,e)}(e,t)))}toString(){return(0,U.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,U.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,U.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof rs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,U.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,U.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,U.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ls(this.database,new ji(this._delegate._repo,this._delegate._path))}}class Ls extends rs{constructor(e,t){super(e,new gi(t._repo,t._path,new Tg,!1)),this.database=e,this._delegate=t}getKey(){return(0,U.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,U.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ls(this.database,Mu(this._delegate,e))}getParent(){(0,U.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ls(this.database,e):null}getRoot(){return(0,U.Dv)("Reference.root",0,0,arguments.length),new Ls(this.database,this._delegate.root)}set(e,t){(0,U.Dv)("Reference.set",1,2,arguments.length),(0,U.Wj)("Reference.set","onComplete",t,!0);const r=um(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,U.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,qc("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ro("Reference.update",this._delegate._path),(0,U.Wj)("Reference.update","onComplete",t,!0);const r=fE(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,U.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function hE(n,e,t){if(ro("setWithPriority",n._path),no("setWithPriority",e,n._path,!1),bf("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new U.BH;return H_(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,U.Dv)("Reference.remove",0,1,arguments.length),(0,U.Wj)("Reference.remove","onComplete",e,!0);const t=function cE(n){return ro("remove",n._path),um(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,U.Dv)("Reference.transaction",1,3,arguments.length),(0,U.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,U.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,U.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function $S(n,e,t){var r;if(n=(0,U.m9)(n),ro("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new U.BH,f=cm(n,()=>{});return function lE(n,e,t,r,i,a){nh(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:Kp(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=rm(n,e,void 0);u.currentInputSnapshot=f;const m=u.update(f.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Vc("transaction failed: Data returned ",m,u.path),u.status=0;const v=Yg(n.transactionQueueTree_,e),T=Ul(v)||[];let M;T.push(u),F_(v,T),"object"==typeof m&&null!==m&&(0,U.r3)(m,".priority")?(M=(0,U.DV)(m,".priority"),(0,U.hu)(wf(M),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):M=(Fc(n.serverSyncTree_,e)||cn.EMPTY_NODE).getPriority().val();const L=Cf(n),W=Tr(m,M),X=P_(W,f,L);u.currentOutputSnapshotRaw=W,u.currentOutputSnapshotResolved=X,u.currentWriteId=nm(n);const De=Cu(n.serverSyncTree_,e,X,u.currentWriteId,u.applyLocally);ts(n.eventQueue_,e,De),im(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,T)=>{let M=null;m?a.reject(m):(M=new jo(T,new ji(n._repo,n._path),lr),a.resolve(new xE(v,M)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new WS(a.committed,new jl(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,U.Dv)("Reference.setPriority",1,2,arguments.length),(0,U.Wj)("Reference.setPriority","onComplete",t,!0);const r=function dE(n,e){n=(0,U.m9)(n),ro("setPriority",n._path),bf("setPriority",e,!1);const t=new U.BH;return H_(n._repo,pr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,U.Dv)("Reference.push",0,2,arguments.length),(0,U.Wj)("Reference.push","onComplete",t,!0);const r=function uE(n,e){n=(0,U.m9)(n),ro("push",n._path),no("push",e,n._path,!0);const t=th(n._repo),r=am(t),i=Mu(n,r),a=Mu(n,r);let u;return u=null!=e?um(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Ls(this.database,u));t&&i.then(()=>t(null),u=>t(u));const a=new Ls(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return ro("Reference.onDisconnect",this._delegate._path),new kE(new $c(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class zc{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Gc,forceLongPolling:iv}}useEmulator(e,t,r={}){!function mm(n,e,t,r={}){(n=(0,U.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ua("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ua('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new ca(ca.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,U.Sg)(r.mockUserToken,n.app.options.projectId);a=new ca(u)}!function SE(n,e,t,r){n.repoInfo_=new He(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,U.Dv)("database.ref",0,1,arguments.length),e instanceof Ls){const t=Z_(this._delegate,e.toString());return new Ls(this,t)}{const t=Hc(this._delegate,e);return new Ls(this,t)}}refFromURL(e){(0,U.Dv)("database.refFromURL",1,1,arguments.length);const r=Z_(this._delegate,e);return new Ls(this,r)}goOffline(){return(0,U.Dv)("database.goOffline",0,0,arguments.length),function M1(n){(n=(0,U.m9)(n))._checkNotDeleted("goOffline"),aE(n._repo)}(this._delegate)}goOnline(){return(0,U.Dv)("database.goOnline",0,0,arguments.length),function R1(n){(n=(0,U.m9)(n))._checkNotDeleted("goOnline"),function AS(n){n.persistentConnection_&&n.persistentConnection_.resume(j_)}(n._repo)}(this._delegate)}}zc.ServerValue={TIMESTAMP:function jS(){return AE}(),increment:n=>function mi(n){return{".sv":{increment:n}}}(n)};var ZS=Object.freeze({__proto__:null,initStandalone:function Ya({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){ws(t);const u=new $t.zt("auth-internal",new $t.H0("database-standalone"));return u.setComponent(new $t.wA("auth-internal",()=>r,"PRIVATE")),{instance:new zc(rv(n,u,void 0,e,a),n),namespace:i}}});const KS=zc.ServerValue;!function Qa(n){n.INTERNAL.registerComponent(new $t.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new zc(i,r)},"PUBLIC").setServiceProps({Reference:Ls,Query:rs,Database:zc,DataSnapshot:jl,enableLogging:VS,INTERNAL:ZS,ServerValue:KS}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.1")}(St.Z);var Ri=j(7579),Us=j(5363),NE=j(6063);class PE extends Ri.x{constructor(e=1/0,t=1/0,r=NE.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=u;m+=2)f=m;f&&r.splice(0,f+1)}}}function OE(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,bc.B)({connector:()=>new PE(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const ym=(0,j(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ha(n,e){return(0,ar.e)((t,r)=>{let i=0;t.subscribe((0,er.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Ja=j(515);function $l(n){return n<=0?()=>Ja.E:(0,ar.e)((e,t)=>{let r=0;e.subscribe((0,er.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function _m(n){return(0,ar.e)((e,t)=>{let r=!1;e.subscribe((0,er.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function sv(n=QS){return(0,ar.e)((e,t)=>{let r=!1;e.subscribe((0,er.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function QS(){return new ym}function Xa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ha((i,a)=>n(i,a,r)):A.y,$l(1),t?_m(e):sv(()=>new ym))}var vm=j(576);function Rf(n,e){return(0,vm.m)(e)?tr(()=>n,e):tr(()=>n)}var ov=j(9468);j(259);const cv=new Map,VE={activated:!1,tokenObservers:[]},nA={initialized:!1,enabled:!1};function $i(n){return cv.get(n)||Object.assign({},VE)}function bm(){return nA}class jE{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,le.Z)(function*(){t.stop();try{t.pending=new U.BH,yield function $E(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new U.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const is=new U.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function hv(n){if(!$i(n).activated)throw is.create("use-before-activation",{appName:n.name})}function Cm(n,e){return Im.apply(this,arguments)}function Im(){return(Im=(0,le.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const a={method:"POST",body:JSON.stringify(e),headers:r};let u,f;try{u=yield fetch(n,a)}catch(M){throw is.create("fetch-network-error",{originalErrorMessage:M?.message})}if(200!==u.status)throw is.create("fetch-status-error",{httpStatus:u.status});try{f=yield u.json()}catch(M){throw is.create("fetch-parse-error",{originalErrorMessage:M?.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw is.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(m[1]),T=Date.now();return{token:f.token,expireTimeMillis:T+v,issuedAtTimeMillis:T}})).apply(this,arguments)}function lA(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Dm="firebase-app-check-store";let fv=null;function pv(){return fv||(fv=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(is.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Dm,{keyPath:"compositeKey"})}}catch(t){e(is.create("storage-open",{originalErrorMessage:t?.message}))}}),fv)}function gv(){return(gv=(0,le.Z)(function*(n,e){const r=(yield pv()).transaction(Dm,"readwrite"),a=r.objectStore(Dm).put({compositeKey:n,value:e});return new Promise((u,f)=>{a.onsuccess=m=>{u()},r.onerror=m=>{var v;f(is.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const ku=new fi.Yd("@firebase/app-check");function Sm(n,e){return(0,U.hl)()?function V1(n,e){return function zE(n,e){return gv.apply(this,arguments)}(function Of(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ku.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function _v(){return bm().enabled}function vv(){return Am.apply(this,arguments)}function Am(){return(Am=(0,le.Z)(function*(){const n=bm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const dA={error:"UNKNOWN_ERROR"};function hA(n){return U.US.encodeString(JSON.stringify(n),!1)}function xm(n){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,le.Z)(function*(n,e=!1){const t=n.app;hv(t);const r=$i(t);let a,i=r.token;if(i&&!Yc(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(Yc(m)?i=m:yield Sm(t,void 0))}if(!e&&i&&Yc(i))return{token:i.token};let f,u=!1;if(_v()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Cm(lA(t,yield vv()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const m=yield r.exchangeTokenPromise;return yield Sm(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield $i(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?ku.warn(m.message):ku.error(m),a=m}return i?a?f=Yc(i)?{token:i.token,internalError:a}:Cv(a):(f={token:i.token},r.token=i,yield Sm(t,i)):f=Cv(a),u&&Ev(t,f),f})).apply(this,arguments)}function bv(n,e){const t=$i(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function YE(n){const{app:e}=n,t=$i(e);let r=t.tokenRefresher;r||(r=function Mm(n){const{app:e}=n;return new jE((0,le.Z)(function*(){let r;if(r=$i(e).token?yield xm(n,!0):yield xm(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=$i(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ev(n,e){const t=$i(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Yc(n){return n.expireTimeMillis-Date.now()>0}function Cv(n){return{token:hA(dA),error:n}}class fA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=$i(this.app);for(const t of e)bv(this.app,t.next);return Promise.resolve()}}const rC="app-check-internal";!function iC(){(0,zn._registerComponent)(new $t.wA("app-check",n=>function Ff(n,e){return new fA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(rC).initialize()})),(0,zn._registerComponent)(new $t.wA(rC,n=>function Lf(n){return{getToken:e=>xm(n,e),addTokenListener:e=>function wv(n,e,t,r){const{app:i}=n,a=$i(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Yc(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),YE(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>YE(n))}(n,"INTERNAL",e),removeTokenListener:e=>bv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,zn.registerVersion)("@firebase/app-check","0.6.1")}();class Hl{constructor(){return(0,Ye.vb)("app-check")}}typeof window<"u"&&window;var Nm=j(9260);const xv=new d.OlP("angularfire2.auth.use-emulator"),Mv=new d.OlP("angularfire2.auth.settings"),Rv=new d.OlP("angularfire2.auth.tenant-id"),kv=new d.OlP("angularfire2.auth.langugage-code"),Nv=new d.OlP("angularfire2.auth.use-device-language"),Pv=new d.OlP("angularfire.auth.persistence"),Ov=(n,e,t,r,i,a,u,f)=>(0,fr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),u)for(const[v,T]of Object.entries(u))m.settings[v]=T;return f&&m.setPersistence(f),m},[t,r,i,a,u,f]);let Bf=(()=>{class n{constructor(t,r,i,a,u,f,m,v,T,M,L,W){const X=new Ri.x,De=pt(void 0).pipe((0,Us.Q)(u.outsideAngular),tr(()=>a.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9568)))),(0,Ct.U)(()=>(0,fr.on)(t,a,r)),(0,Ct.U)(ke=>Ov(ke,a,f,v,T,M,m,L)),OE({bufferSize:1,refCount:!1}));if(tu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pt(null);else{De.pipe(Xa()).subscribe();const Ft=De.pipe(tr(kt=>kt.getRedirectResult().then(Zt=>Zt,()=>null)),Ye.iC,OE({bufferSize:1,refCount:!1})),Vt=De.pipe(tr(kt=>new vs.y(Zt=>({unsubscribe:a.runOutsideAngular(()=>kt.onAuthStateChanged(ln=>Zt.next(ln),ln=>Zt.error(ln),()=>Zt.complete()))})))),wt=De.pipe(tr(kt=>new vs.y(Zt=>({unsubscribe:a.runOutsideAngular(()=>kt.onIdTokenChanged(ln=>Zt.next(ln),ln=>Zt.error(ln),()=>Zt.complete()))}))));this.authState=Ft.pipe(Rf(Vt),(0,ov.R)(u.outsideAngular),(0,Us.Q)(u.insideAngular)),this.user=Ft.pipe(Rf(wt),(0,ov.R)(u.outsideAngular),(0,Us.Q)(u.insideAngular)),this.idToken=this.user.pipe(tr(kt=>kt?(0,kn.D)(kt.getIdToken()):pt(null))),this.idTokenResult=this.user.pipe(tr(kt=>kt?(0,kn.D)(kt.getIdTokenResult()):pt(null))),this.credential=(0,Il.T)(Ft,X,this.authState.pipe(ha(kt=>!kt))).pipe((0,Ct.U)(kt=>kt?.user?kt:null),(0,ov.R)(u.outsideAngular),(0,Us.Q)(u.insideAngular))}return(0,fr.pX)(this,De,a,{spy:{apply:(ke,Ft,Vt)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&Vt.then(wt=>X.next(wt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fr.Dh),d.LFG(fr.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Ye.HU),d.LFG(xv,8),d.LFG(Mv,8),d.LFG(Rv,8),d.LFG(kv,8),d.LFG(Nv,8),d.LFG(Pv,8),d.LFG(Hl,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),hC=(()=>{class n{constructor(){Nm.Z.registerVersion("angularfire",Ye.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Bf]}),n})();function pC(n){return null==n}function Fv(n){return"function"==typeof n.set}function gC(n,e){return Fv(e)?e:n.ref(e)}function mC(n,e){if(function fC(n){return"string"==typeof n}(n))return e.stringCase();if(Fv(n))return e.firebaseCase();if(function bA(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function jf(n,e,t="on",r=Zr.z){return new vs.y(i=>{let a=null;return a=n[t](e,(u,f)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Ct.U)(i=>{const{snapshot:a,prevKey:u}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:u,key:f}}),(0,bc.B)())}function Pm(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Uv(n,e){const{payload:t,prevKey:r,key:i}=e,a=Pm(n,i),u=function yC(n,e){if(pC(e))return 0;{const t=Pm(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,f),n}return n;default:return n}}function _C(n){return(pC(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function vC(n,e,t){return function Lv(n,e,t){return jf(n,"value","once",t).pipe(tr(r=>{const i=[pt(r)];return e.forEach(a=>i.push(jf(n,a,"on",t))),(0,Il.T)(...i).pipe(S(Uv,[]))}),N())}(n,e=_C(e),t)}function Om(n,e,t){const r=(e=_C(e)).map(i=>jf(n,i,"on",t));return(0,Il.T)(...r)}function Vv(n,e){return function(r,i){return mC(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function CA(n){return function(t){return t?mC(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Bv(n,e){return function(){return jf(n,"value","on",e)}}const IA=new d.OlP("angularfire2.realtimeDatabaseURL"),$v=new d.OlP("angularfire2.database.use-emulator");let bC=(()=>{class n{constructor(t,r,i,a,u,f,m,v,T,M,L,W,X,De,ke){this.schedulers=f;const Ft=m,Vt=(0,fr.on)(t,u,r);v&&Ov(Vt,u,T,L,W,X,M,De),this.database=(0,fr.cc)(`${Vt.name}.database.${i}`,"AngularFireDatabase",Vt.name,()=>{const wt=u.runOutsideAngular(()=>Vt.database(i||void 0));return Ft&&wt.useEmulator(...Ft),wt},[Ft])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>gC(this.database,t));let a=i;return r&&(a=r(i)),function eN(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Vv(r,"update"),set:Vv(r,"set"),push:i=>r.push(i),remove:CA(r),snapshotChanges:i=>vC(n,i,t).pipe(Ye.iC),stateChanges:i=>Om(n,i,t).pipe(Ye.iC),auditTrail:i=>function EA(n,e,t){return function ih(n,e,t){return function wC(n,e){return jf(n,"value","on",e).pipe((0,Ct.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function me(...n){const e=(0,Oo.jO)(n);return(0,ar.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),f=!1;for(let m=0;m<i;m++)(0,Dl.Xf)(n[m]).subscribe((0,er.x)(r,v=>{a[m]=v,!f&&!u[m]&&(u[m]=!0,(f=u.every(A.y))&&(u=null))},ae.Z));t.subscribe((0,er.x)(r,m=>{if(f){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,Ct.U)(([i,a])=>{const u=i.lastKeyToLoad,f=a.map(m=>m.key);return{actions:a,lastKeyToLoad:u,loadedKeys:f}}),function We(n){return(0,ar.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,er.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Ct.U)(i=>i.actions))}(n,Om(n,e).pipe(S((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Ye.iC),valueChanges:(i,a)=>vC(n,i,t).pipe((0,Ct.U)(f=>f.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),Ye.iC)}}(a,this)}object(t){return function jv(n,e){return{query:n,snapshotChanges:()=>Bv(n,e.schedulers.outsideAngular)().pipe(Ye.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Bv(n,e.schedulers.outsideAngular)().pipe(Ye.iC,(0,Ct.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>gC(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fr.Dh),d.LFG(fr.xv,8),d.LFG(IA,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Ye.HU),d.LFG($v,8),d.LFG(Bf,8),d.LFG(xv,8),d.LFG(Mv,8),d.LFG(Rv,8),d.LFG(kv,8),d.LFG(Nv,8),d.LFG(Pv,8),d.LFG(Hl,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),EC=(()=>{class n{constructor(){Nm.Z.registerVersion("angularfire",Ye.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[bC]}),n})();class Ho extends Ri.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:CC}=Array,{getPrototypeOf:IC,prototype:DC,keys:DA}=Object;function TC(n){if(1===n.length){const e=n[0];if(CC(e))return{args:e,keys:null};if(function TA(n){return n&&"object"==typeof n&&IC(n)===DC}(e)){const t=DA(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:SA}=Array;function AA(n){return(0,Ct.U)(e=>function SC(n,e){return SA(e)?n(...e):n(e)}(n,e))}function Gv(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var xA=j(9672);function AC(...n){const e=(0,Oo.yG)(n),t=(0,Oo.jO)(n),{args:r,keys:i}=TC(n);if(0===r.length)return(0,kn.D)([],e);const a=new vs.y(function tN(n,e,t=A.y){return r=>{xC(e,()=>{const{length:i}=n,a=new Array(i);let u=i,f=i;for(let m=0;m<i;m++)xC(e,()=>{const v=(0,kn.D)(n[m],e);let T=!1;v.subscribe((0,er.x)(r,M=>{a[m]=M,T||(T=!0,f--),f||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Gv(i,u):A.y));return t?a.pipe(AA(t)):a}function xC(n,e,t){n?(0,xA.f)(t,n,e):e()}var $f=j(8189);function qv(...n){return function MC(){return(0,$f.J)(1)}()((0,kn.D)(n,(0,Oo.yG)(n)))}function RC(n){return new vs.y(e=>{(0,Dl.Xf)(n()).subscribe(e)})}var MA=j(9635);function Hf(n,e){const t=(0,vm.m)(n)?n:()=>n,r=i=>i.error(t());return new vs.y(e?i=>e.schedule(r,0,i):r)}var kC=j(727);function zv(){return(0,ar.e)((n,e)=>{let t=null;n._refCount++;const r=(0,er.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class NC extends vs.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ar.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kC.w0;const t=this.getSubject();e.add(this.source.subscribe((0,er.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kC.w0.EMPTY)}return e}refCount(){return zv()(this)}}function Fm(...n){const e=(0,Oo.yG)(n);return(0,ar.e)((t,r)=>{(e?qv(n,t,e):qv(n,t)).subscribe(r)})}var Es=j(5577);function fa(n,e){return(0,vm.m)(e)?(0,Es.z)(n,e,1):(0,Es.z)(n,1)}var Hi=j(8505);function Gl(n){return(0,ar.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,er.x)(t,void 0,void 0,u=>{a=(0,Dl.Xf)(n(u,Gl(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Lm(n){return n<=0?()=>Ja.E:(0,ar.e)((e,t)=>{let r=[];e.subscribe((0,er.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Wv(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ha((i,a)=>n(i,a,r)):A.y,Lm(1),t?_m(e):sv(()=>new ym))}function Zv(n){return(0,ar.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const xn="primary",Gf=Symbol("RouteTitle");class kA{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function sh(n){return new kA(n)}function NA(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],f=n[a];if(u.startsWith(":"))i[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Vs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!OC(n[i],e[i]))return!1;return!0}function OC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Um(n){return Array.prototype.concat.apply([],n)}function pa(n){return n.length>0?n[n.length-1]:null}function yi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Go(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,kn.D)(Promise.resolve(n)):pt(n)}const Vm=!1,OA={exact:function LC(n,e,t){if(!ql(n.segments,e.segments)||!oh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!LC(n.children[r],e.children[r],t))return!1;return!0},subset:Kv},FC={exact:function Bm(n,e){return Vs(n,e)},subset:function FA(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>OC(n[t],e[t]))},ignored:()=>!0};function qf(n,e,t){return OA[t.paths](n.root,e.root,t.matrixParams)&&FC[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Kv(n,e,t){return Yv(n,e,e.segments,t)}function Yv(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ql(i,t)||e.hasChildren()||!oh(i,t,r))}if(n.segments.length===t.length){if(!ql(n.segments,t)||!oh(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Kv(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ql(n.segments,i)&&oh(n.segments,i,r)&&n.children[xn])&&Yv(n.children[xn],e,a,r)}}function oh(n,e,t){return e.every((r,i)=>FC[t](n[i].parameters,r.parameters))}class Nu{constructor(e=new En([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sh(this.queryParams)),this._queryParamMap}toString(){return LA.serialize(this)}}class En{constructor(e,t){this.segments=e,this.children=t,this.parent=null,yi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jm(this)}}class Qc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=sh(this.parameters)),this._parameterMap}toString(){return Xv(this)}}function ql(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let zf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new Jv},providedIn:"root"}),n})();class Jv{parse(e){const t=new rN(e);return new Nu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ah(e.root,!0)}`,r=function UA(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Wf(t)}=${Wf(i)}`).join("&"):`${Wf(t)}=${Wf(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function VC(n){return encodeURI(n)}(e.fragment)}`:""}`}}const LA=new Jv;function jm(n){return n.segments.map(e=>Xv(e)).join("/")}function ah(n,e){if(!n.hasChildren())return jm(n);if(e){const t=n.children[xn]?ah(n.children[xn],!1):"",r=[];return yi(n.children,(i,a)=>{a!==xn&&r.push(`${a}:${ah(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Qv(n,e){let t=[];return yi(n.children,(r,i)=>{i===xn&&(t=t.concat(e(r,i)))}),yi(n.children,(r,i)=>{i!==xn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===xn?[ah(n.children[xn],!1)]:[`${i}:${ah(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xn]?`${jm(n)}/${t[0]}`:`${jm(n)}/(${t.join("//")})`}}function $m(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wf(n){return $m(n).replace(/%3B/gi,";")}function Hm(n){return $m(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zf(n){return decodeURIComponent(n)}function BC(n){return Zf(n.replace(/\+/g,"%20"))}function Xv(n){return`${Hm(n.path)}${function jC(n){return Object.keys(n).map(e=>`;${Hm(e)}=${Hm(n[e])}`).join("")}(n.parameters)}`}const $C=/^[^\/()?;=#]+/;function Gm(n){const e=n.match($C);return e?e[0]:""}const Cs=/^[^=?&#]+/,VA=/^[^&#]+/;class rN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new En([],{}):new En([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xn]=new En(e,t)),r}parseSegment(){const e=Gm(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,Vm);return this.capture(e),new Qc(Zf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Gm(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Gm(this.remaining);i&&(r=i,this.capture(r))}e[Zf(t)]=Zf(r)}parseQueryParam(e){const t=function lh(n){const e=n.match(Cs);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function BA(n){const e=n.match(VA);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=BC(t),a=BC(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Gm(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,Vm);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=xn);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[xn]:new En([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,Vm)}}function HC(n){return n.segments.length>0?new En([],{[xn]:n}):n}function Kf(n){const e={};for(const r of Object.keys(n.children)){const a=Kf(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function GC(n){if(1===n.numberOfChildren&&n.children[xn]){const e=n.children[xn];return new En(n.segments.concat(e.segments),e.children)}return n}(new En(n.segments,e))}function ga(n){return n instanceof Nu}function $A(n,e,t,r,i){if(0===t.length)return Pu(e.root,e.root,e.root,r,i);const a=function Jf(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new nw(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return yi(a.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new nw(t,e,r)}(t);return a.toRoot()?Pu(e.root,e.root,new En([],{}),r,i):function u(m){const v=function WC(n,e,t,r){if(n.isAbsolute)return new Ou(e.root,!0,0);if(-1===r)return new Ou(t,t===e.root,0);return function ZC(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new Ou(r,!1,i-a)}(t,r+(Yf(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),T=v.processChildren?Xf(v.segmentGroup,v.index,a.commands):Fu(v.segmentGroup,v.index,a.commands);return Pu(e.root,v.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function Yf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Qf(n){return"object"==typeof n&&null!=n&&n.outlets}function Pu(n,e,t,r,i){let u,a={};r&&yi(r,(m,v)=>{a[v]=Array.isArray(m)?m.map(T=>`${T}`):`${m}`}),u=n===e?t:tw(n,e,t);const f=HC(Kf(u));return new Nu(f,a,i)}function tw(n,e,t){const r={};return yi(n.children,(i,a)=>{r[a]=i===e?t:tw(i,e,t)}),new En(n.segments,r)}class nw{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Yf(r[0]))throw new d.vHH(4003,!1);const i=r.find(Qf);if(i&&i!==pa(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ou{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Fu(n,e,t){if(n||(n=new En([],{})),0===n.segments.length&&n.hasChildren())return Xf(n,e,t);const r=function YC(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],f=t[r];if(Qf(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!HA(m,v,u))return a;r+=2}else{if(!HA(m,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new En(n.segments.slice(0,r.pathIndex),{});return a.children[xn]=new En(n.segments.slice(r.pathIndex),n.children),Xf(a,0,i)}return r.match&&0===i.length?new En(n.segments,{}):r.match&&!n.hasChildren()?ep(n,e,t):r.match?Xf(n,0,i):ep(n,e,t)}function Xf(n,e,t){if(0===t.length)return new En(n.segments,{});{const r=function KC(n){return Qf(n[0])?n[0].outlets:{[xn]:n}}(t),i={};return yi(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=Fu(n.children[u],e,a))}),yi(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new En(n.segments,i)}}function ep(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Qf(a)){const m=sN(a.outlets);return new En(r,m)}if(0===i&&Yf(t[0])){r.push(new Qc(n.segments[e].path,QC(t[0]))),i++;continue}const u=Qf(a)?a.outlets[xn]:`${a}`,f=i<t.length-1?t[i+1]:null;u&&f&&Yf(f)?(r.push(new Qc(u,QC(f))),i+=2):(r.push(new Qc(u,{})),i++)}return new En(r,{})}function sN(n){const e={};return yi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ep(new En([],{}),0,t))}),e}function QC(n){const e={};return yi(n,(t,r)=>e[r]=`${t}`),e}function HA(n,e,t){return n==t.path&&Vs(e,t.parameters)}const tp="imperative";class el{constructor(e,t){this.id=e,this.url=t}}class rw extends el{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Lu extends el{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class np extends el{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class JC extends el{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class iw extends el{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class XC extends el{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GA extends el{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qA extends el{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class eI extends el{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zA extends el{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tI{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nI{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rI{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iI{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WA{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZA{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KA{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let oN=(()=>{class n{createUrlTree(t,r,i,a,u,f){return $A(t||r.root,i,a,u,f)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),aN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(e){return oN.\u0275fac(e)},providedIn:"root"}),n})();class YA{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=oI(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=oI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=aI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return aI(e,this._root).map(t=>t.value)}}function oI(n,e){if(n===e.value)return e;for(const t of e.children){const r=oI(n,t);if(r)return r}return null}function aI(n,e){if(n===e.value)return[e];for(const t of e.children){const r=aI(n,t);if(r.length)return r.unshift(e),r}return[]}class Uu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function zl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class QA extends YA{constructor(e,t){super(e),this.snapshot=t,lw(this,e)}toString(){return this.snapshot.toString()}}function sw(n,e){const t=function qm(n,e){const u=new uh([],{},{},"",{},xn,e,null,n.root,-1,{});return new aw("",new Uu(u,[]))}(n,e),r=new Ho([new Qc("",{})]),i=new Ho({}),a=new Ho({}),u=new Ho({}),f=new Ho(""),m=new Jc(r,i,u,f,a,xn,e,t.root);return m.snapshot=t.root,new QA(new Uu(m,[]),t)}class Jc{constructor(e,t,r,i,a,u,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=f,this.title=this.data?.pipe((0,Ct.U)(v=>v[Gf]))??pt(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>sh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>sh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ow(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function lN(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class uh{get title(){return this.data?.[Gf]}constructor(e,t,r,i,a,u,f,m,v,T,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=f,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=T,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class aw extends YA{constructor(e,t){super(t),this.url=e,lw(this,t)}toString(){return uw(this._root)}}function lw(n,e){e.value._routerState=n,e.children.forEach(t=>lw(n,t))}function uw(n){const e=n.children.length>0?` { ${n.children.map(uw).join(", ")} } `:"";return`${n.value}${e}`}function lI(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Vs(e.params,t.params)||n.params.next(t.params),function PA(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Vs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function uI(n,e){const t=Vs(n.params,e.params)&&function UC(n,e){return ql(n,e)&&n.every((t,r)=>Vs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||uI(n.parent,e.parent))}function rp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function zm(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return rp(n,r,i);return rp(n,r)})}(n,e,t);return new Uu(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(f=>rp(n,f)),u}}const r=function XA(n){return new Jc(new Ho(n.url),new Ho(n.params),new Ho(n.queryParams),new Ho(n.fragment),new Ho(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>rp(n,a));return new Uu(r,i)}}const cI="ngNavigationCancelingError";function ex(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ga(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=tx(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function tx(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[cI]=!0,r.cancellationCode=e,t&&(r.url=t),r}function dI(n){return hI(n)&&ga(n.url)}function hI(n){return n&&n[cI]}class nx{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Wm,this.attachRef=null}}let Wm=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new nx,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Zm=!1;let ip=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=xn,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Wm),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,Zm);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,Zm);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,Zm);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,Zm);this._activatedRoute=t;const i=this.location,u=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,m=new fI(t,f,i.injector);if(r&&function uN(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(u);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(u,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class fI{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Jc?this.route:e===Wm?this.childContexts:this.parent.get(e,t)}}let ao=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[ip],encapsulation:2}),n})();function pI(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function sp(n){const e=n.children&&n.children.map(sp),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xn&&(t.component=ao),t}function lo(n){return n.outlet||xn}function hw(n,e){const t=n.filter(r=>lo(r)===e);return t.push(...n.filter(r=>lo(r)!==e)),t}function op(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class yI{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lI(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=zl(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),yi(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=zl(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=zl(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=zl(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new ZA(a.value.snapshot))}),e.children.length&&this.forwardEvent(new iI(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(lI(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),lI(f.route.value),this.activateChildRoutes(e,null,u.children)}else{const f=op(i.snapshot),m=f?.get(d._Vd)??null;u.attachRef=null,u.route=i,u.resolver=m,u.injector=f,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class _I{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ap{constructor(e,t){this.component=e,this.route=t}}function sx(n,e,t){const r=n._root;return ch(r,e?e._root:null,t,[r.value])}function uo(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function ch(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=zl(e);return n.children.forEach(u=>{(function pw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const m=function Wl(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ql(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ql(n.url,e.url)||!Vs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uI(n,e)||!Vs(n.queryParams,e.queryParams);default:return!uI(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new _I(r)):(a.data=u.data,a._resolvedData=u._resolvedData),ch(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new ap(f.outlet.component,u))}else u&&lp(e,f,i),i.canActivateChecks.push(new _I(r)),ch(n,null,a.component?f?f.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),yi(a,(u,f)=>lp(u,t.getContext(f),i)),i}function lp(n,e,t){const r=zl(n),i=n.value;yi(r,(a,u)=>{lp(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new ap(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Km(n){return"function"==typeof n}function Ym(n){return n instanceof ym||"EmptyError"===n?.name}const gw=Symbol("INITIAL_VALUE");function Vu(){return tr(n=>AC(n.map(e=>e.pipe($l(1),Fm(gw)))).pipe((0,Ct.U)(e=>{for(const t of e)if(!0!==t){if(t===gw)return gw;if(!1===t||t instanceof Nu)return t}return!0}),ha(e=>e!==gw),$l(1)))}function TI(n){return(0,MA.z)((0,Hi.b)(e=>{if(ga(e))throw ex(0,e)}),(0,Ct.U)(e=>!0===e))}const SI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fx(n,e,t,r,i){const a=Xm(n,e,t);return a.matched?function hN(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?pt(i.map(u=>{const f=uo(u,n);return Go(function dN(n){return n&&Km(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Vu(),TI()):pt(!0)}(r=pI(e,r),e,t).pipe((0,Ct.U)(u=>!0===u?a:{...SI})):pt(a)}function Xm(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...SI}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||NA)(t,n,e);if(!i)return{...SI};const a={};yi(i.posParams,(f,m)=>{a[m]=f.path});const u=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function ey(n,e,t,r){if(t.length>0&&function fN(n,e,t){return t.some(r=>mw(n,e,r)&&lo(r)!==xn)}(n,t,r)){const a=new En(e,function gx(n,e,t,r){const i={};i[xn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&lo(a)!==xn){const u=new En([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[lo(a)]=u}return i}(n,e,r,new En(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function pN(n,e,t){return t.some(r=>mw(n,e,r))}(n,t,r)){const a=new En(n.segments,function px(n,e,t,r,i){const a={};for(const u of r)if(mw(n,t,u)&&!i[lo(u)]){const f=new En([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[lo(u)]=f}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new En(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function mw(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function mx(n,e,t,r){return!!(lo(n)===r||r!==xn&&mw(e,t,n))&&("**"===n.path||Xm(e,n,t).matched)}function yx(n,e,t){return 0===e.length&&!n.children[t]}const ty=!1;class Xc{constructor(e){this.segmentGroup=e||null}}class AI{constructor(e){this.urlTree=e}}function up(n){return Hf(new Xc(n))}function yw(n){return Hf(new AI(n))}class vw{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=ey(this.urlTree.root,[],[],this.config).segmentGroup,t=new En(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,xn).pipe((0,Ct.U)(a=>this.createUrlTree(Kf(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gl(a=>{if(a instanceof AI)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Xc?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,xn).pipe((0,Ct.U)(i=>this.createUrlTree(Kf(i),e.queryParams,e.fragment))).pipe(Gl(i=>{throw i instanceof Xc?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,ty)}createUrlTree(e,t,r){const i=HC(e);return new Nu(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ct.U)(a=>new En([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,kn.D)(i).pipe(fa(a=>{const u=r.children[a],f=hw(t,a);return this.expandSegmentGroup(e,f,u,a).pipe((0,Ct.U)(m=>({segment:m,outlet:a})))}),S((a,u)=>(a[u.outlet]=u.segment,a),{}),Wv())}expandSegment(e,t,r,i,a,u){return(0,kn.D)(r).pipe(fa(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,u).pipe(Gl(v=>{if(v instanceof Xc)return pt(null);throw v}))),Xa(f=>!!f),Gl((f,m)=>{if(Ym(f))return yx(t,i,a)?pt(new En([],{})):up(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,u,f){return mx(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):up(t):up(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?yw(a):this.lineralizeSegments(r,a).pipe((0,Es.z)(u=>{const f=new En(u,{});return this.expandSegment(e,f,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:T}=Xm(t,i,a);if(!f)return up(t);const M=this.applyRedirectCommands(m,i.redirectTo,T);return i.redirectTo.startsWith("/")?yw(M):this.lineralizeSegments(i,M).pipe((0,Es.z)(L=>this.expandSegment(e,t,r,L.concat(v),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=pI(r,e),r.loadChildren?(r._loadedRoutes?pt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Ct.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new En(i,{})))):pt(new En(i,{}))):fx(t,r,i,e).pipe(tr(({matched:u,consumedSegments:f,remainingSegments:m})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Es.z)(T=>{const M=T.injector??e,L=T.routes,{segmentGroup:W,slicedSegments:X}=ey(t,f,m,L),De=new En(W.segments,W.children);if(0===X.length&&De.hasChildren())return this.expandChildren(M,L,De).pipe((0,Ct.U)(wt=>new En(f,wt)));if(0===L.length&&0===X.length)return pt(new En(f,{}));const ke=lo(r)===a;return this.expandSegment(M,De,L,X,ke?xn:a,!0).pipe((0,Ct.U)(Vt=>new En(f.concat(Vt.segments),Vt.children)))})):up(t)))}getChildConfig(e,t,r){return t.children?pt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?pt({routes:t._loadedRoutes,injector:t._loadedInjector}):function hx(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?pt(!0):pt(i.map(u=>{const f=uo(u,n);return Go(function ax(n){return n&&Km(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Vu(),TI())}(e,t,r).pipe((0,Es.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Hi.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function xI(n){return Hf(tx(ty,3))}())):pt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return pt(r);if(i.numberOfChildren>1||!i.children[xn])return Hf(new d.vHH(4e3,ty));i=i.children[xn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Nu(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return yi(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return yi(t.children,(f,m)=>{u[m]=this.createSegmentGroup(e,f,r,i)}),new En(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,ty);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class ww{}class mN{constructor(e,t,r,i,a,u,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=u,this.urlSerializer=f}recognize(){const e=ey(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,xn).pipe((0,Ct.U)(t=>{if(null===t)return null;const r=new uh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},xn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Uu(r,t),a=new aw(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=ow(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,kn.D)(Object.keys(r.children)).pipe(fa(i=>{const a=r.children[i],u=hw(t,i);return this.processSegmentGroup(e,u,a,i)}),S((i,a)=>i&&a?(i.push(...a),i):null),function PC(n,e=!1){return(0,ar.e)((t,r)=>{let i=0;t.subscribe((0,er.x)(r,a=>{const u=n(a,i++);(u||e)&&r.next(a),!u&&r.complete()}))})}(i=>null!==i),_m(null),Wv(),(0,Ct.U)(i=>{if(null===i)return null;const a=RI(i);return function yN(n){n.sort((e,t)=>e.value.outlet===xn?-1:t.value.outlet===xn?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,kn.D)(t).pipe(fa(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,a)),Xa(u=>!!u),Gl(u=>{if(Ym(u))return yx(r,i,a)?pt([]):pt(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!mx(t,r,i,a))return pt(null);let u;if("**"===t.path){const f=i.length>0?pa(i).parameters:{},m=NI(r)+i.length;u=pt({snapshot:new uh(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,bw(t),lo(t),t.component??t._loadedComponent??null,t,kI(r),m,Ew(t)),consumedSegments:[],remainingSegments:[]})}else u=fx(r,t,i,e).pipe((0,Ct.U)(({matched:f,consumedSegments:m,remainingSegments:v,parameters:T})=>{if(!f)return null;const M=NI(r)+m.length;return{snapshot:new uh(m,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,bw(t),lo(t),t.component??t._loadedComponent??null,t,kI(r),M,Ew(t)),consumedSegments:m,remainingSegments:v}}));return u.pipe(tr(f=>{if(null===f)return pt(null);const{snapshot:m,consumedSegments:v,remainingSegments:T}=f;e=t._injector??e;const M=t._loadedInjector??e,L=function _N(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:W,slicedSegments:X}=ey(r,v,T,L.filter(ke=>void 0===ke.redirectTo));if(0===X.length&&W.hasChildren())return this.processChildren(M,L,W).pipe((0,Ct.U)(ke=>null===ke?null:[new Uu(m,ke)]));if(0===L.length&&0===X.length)return pt([new Uu(m,[])]);const De=lo(t)===a;return this.processSegment(M,L,W,X,De?xn:a).pipe((0,Ct.U)(ke=>null===ke?null:[new Uu(m,ke)]))}))}}function MI(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function RI(n){const e=[],t=new Set;for(const r of n){if(!MI(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=RI(r.children);e.push(new Uu(r.value,i))}return e.filter(r=>!t.has(r))}function kI(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function NI(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function bw(n){return n.data||{}}function Ew(n){return n.resolve||{}}function iy(n){return"string"==typeof n.title||null===n.title}function Iw(n){return tr(e=>{const t=n(e);return t?(0,kn.D)(t).pipe((0,Ct.U)(()=>e)):pt(e)})}const cp=new d.OlP("ROUTES");let Dw=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return pt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Go(t.loadComponent()).pipe((0,Ct.U)(FI),(0,Hi.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Zv(()=>{this.componentLoaders.delete(t)})),i=new NC(r,()=>new Ri.x).pipe(zv());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ct.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,T=!1;Array.isArray(f)?v=f:(m=f.create(t).injector,v=Um(m.get(cp,[],d.XFs.Self|d.XFs.Optional)));return{routes:v.map(sp),injector:m}}),Zv(()=>{this.childrenLoaders.delete(r)})),u=new NC(a,()=>new Ri.x).pipe(zv());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return Go(t()).pipe((0,Ct.U)(FI),(0,Es.z)(i=>i instanceof d.YKP||Array.isArray(i)?pt(i):(0,kn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function FI(n){return function Dx(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Sw=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ri.x,this.configLoader=(0,d.f3M)(Dw),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(zf),this.rootContexts=(0,d.f3M)(Wm),this.navigationId=0,this.afterPreactivation=()=>pt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new nI(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new tI(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Ho({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:tp,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ha(r=>0!==r.id),(0,Ct.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),tr(r=>{let i=!1,a=!1;return pt(r).pipe((0,Hi.b)(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),tr(u=>{const f=t.browserUrlTree.toString(),m=!t.navigated||u.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!m&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const T="";return this.events.next(new JC(u.id,t.serializeUrl(r.rawUrl),T,0)),t.rawUrlTree=u.rawUrl,u.resolve(null),Ja.E}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Tx(u.source)&&(t.browserUrlTree=u.extractedUrl),pt(u).pipe(tr(T=>{const M=this.transitions?.getValue();return this.events.next(new rw(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),M!==this.transitions?.getValue()?Ja.E:Promise.resolve(T)}),function _x(n,e,t,r){return tr(i=>function _w(n,e,t,r,i){return new vw(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ct.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Hi.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},r.urlAfterRedirects=T.urlAfterRedirects}),function bx(n,e,t,r,i){return(0,Es.z)(a=>function gN(n,e,t,r,i,a,u="emptyOnly"){return new mN(n,e,t,r,i,u,a).recognize().pipe(tr(f=>null===f?function ry(n){return new vs.y(e=>e.error(n))}(new ww):pt(f)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,Ct.U)(u=>({...a,targetSnapshot:u}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Hi.b)(T=>{if(r.targetSnapshot=T.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!T.extras.skipLocationChange){const L=t.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);t.setBrowserUrl(L,T)}t.browserUrlTree=T.urlAfterRedirects}const M=new XC(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(M)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:T,extractedUrl:M,source:L,restoredState:W,extras:X}=u,De=new rw(T,this.urlSerializer.serialize(M),L,W);this.events.next(De);const ke=sw(M,this.rootComponentType).snapshot;return pt(r={...u,targetSnapshot:ke,urlAfterRedirects:M,extras:{...X,skipLocationChange:!1,replaceUrl:!1}})}{const T="";return this.events.next(new JC(u.id,t.serializeUrl(r.extractedUrl),T,1)),t.rawUrlTree=u.rawUrl,u.resolve(null),Ja.E}}),(0,Hi.b)(u=>{const f=new GA(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),(0,Ct.U)(u=>r={...u,guards:sx(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),function wI(n,e){return(0,Es.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?pt({...t,guardsResult:!0}):function bI(n,e,t,r){return(0,kn.D)(n).pipe((0,Es.z)(i=>function DI(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?pt(a.map(f=>{const m=op(e)??i,v=uo(f,m);return Go(function vI(n){return n&&Km(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(Xa())})).pipe(Vu()):pt(!0)}(i.component,i.route,t,e,r)),Xa(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Es.z)(f=>f&&function ox(n){return"boolean"==typeof n}(f)?function EI(n,e,t,r){return(0,kn.D)(e).pipe(fa(i=>qv(function II(n,e){return null!==n&&e&&e(new rI(n)),pt(!0)}(i.route.parent,r),function CI(n,e){return null!==n&&e&&e(new WA(n)),pt(!0)}(i.route,r),function Jm(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function fw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>RC(()=>pt(u.guards.map(m=>{const v=op(u.node)??t,T=uo(m,v);return Go(function ux(n){return n&&Km(n.canActivateChild)}(T)?T.canActivateChild(r,n):v.runInContext(()=>T(r,n))).pipe(Xa())})).pipe(Vu())));return pt(a).pipe(Vu())}(n,i.path,t),function Qm(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return pt(!0);const i=r.map(a=>RC(()=>{const u=op(e)??t,f=uo(a,u);return Go(function lx(n){return n&&Km(n.canActivate)}(f)?f.canActivate(e,n):u.runInContext(()=>f(e,n))).pipe(Xa())}));return pt(i).pipe(Vu())}(n,i.route,t))),Xa(i=>!0!==i,!0))}(r,a,n,e):pt(f)),(0,Ct.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,u=>this.events.next(u)),(0,Hi.b)(u=>{if(r.guardsResult=u.guardsResult,ga(u.guardsResult))throw ex(0,u.guardsResult);const f=new qA(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(f)}),ha(u=>!!u.guardsResult||(t.restoreHistory(u),this.cancelNavigationTransition(u,"",3),!1)),Iw(u=>{if(u.guards.canActivateChecks.length)return pt(u).pipe((0,Hi.b)(f=>{const m=new eI(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),tr(f=>{let m=!1;return pt(f).pipe(function Ex(n,e){return(0,Es.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return pt(t);let a=0;return(0,kn.D)(i).pipe(fa(u=>function PI(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!iy(i)&&(a[Gf]=i.title),function Cw(n,e,t,r){const i=function vN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return pt({});const a={};return(0,kn.D)(i).pipe((0,Es.z)(u=>function OI(n,e,t,r){const i=op(e)??r,a=uo(n,i);return Go(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[u],e,t,r).pipe(Xa(),(0,Hi.b)(f=>{a[u]=f}))),Lm(1),function RA(n){return(0,Ct.U)(()=>n)}(a),Gl(u=>Ym(u)?Ja.E:Hf(u)))}(a,n,e,r).pipe((0,Ct.U)(u=>(n._resolvedData=u,n.data=ow(n,t).resolve,i&&iy(i)&&(n.data[Gf]=i.title),null)))}(u.route,r,n,e)),(0,Hi.b)(()=>a++),Lm(1),(0,Es.z)(u=>a===i.length?pt(t):Ja.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Hi.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,Hi.b)(f=>{const m=new zA(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}))}),Iw(u=>{const f=m=>{const v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,Hi.b)(T=>{m.component=T}),(0,Ct.U)(()=>{})));for(const T of m.children)v.push(...f(T));return v};return AC(f(u.targetSnapshot.root)).pipe(_m(),$l(1))}),Iw(()=>this.afterPreactivation()),(0,Ct.U)(u=>{const f=function JA(n,e,t){const r=rp(n,e._root,t?t._root:void 0);return new QA(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return r={...u,targetRouterState:f}}),(0,Hi.b)(u=>{t.currentUrlTree=u.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),t.routerState=u.targetRouterState,"deferred"===t.urlUpdateStrategy&&(u.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,u),t.browserUrlTree=u.urlAfterRedirects)}),((n,e,t)=>(0,Ct.U)(r=>(new yI(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u)),(0,Hi.b)({next:u=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Lu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{i=!0}}),Zv(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Gl(u=>{if(a=!0,hI(u)){dI(u)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new np(r.id,this.urlSerializer.serialize(r.extractedUrl),u.message,u.cancellationCode);if(this.events.next(f),dI(u)){const m=t.urlHandlingStrategy.merge(u.url,t.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Tx(r.source)};t.scheduleNavigation(m,tp,null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new iw(r.id,this.urlSerializer.serialize(r.extractedUrl),u,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(u))}catch(m){r.reject(m)}}return Ja.E}))}))}cancelNavigationTransition(t,r,i){const a=new np(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Tx(n){return n!==tp}let Sx=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===xn);return r}getResolvedTitleForRoute(t){return t.data[Gf]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(wN)},providedIn:"root"}),n})(),wN=(()=>{class n extends Sx{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(aa))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ax=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(EN)},providedIn:"root"}),n})();class bN{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let EN=(()=>{class n extends bN{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Aw=new d.OlP("",{providedIn:"root",factory:()=>({})});let IN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(DN)},providedIn:"root"}),n})(),DN=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function o(n){throw n}function l(n,e,t){return e.parse("/")}const c={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},h={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let p=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(Aw,{optional:!0})||{},this.errorHandler=this.options.errorHandler||o,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||l,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(IN),this.routeReuseStrategy=(0,d.f3M)(Ax),this.urlCreationStrategy=(0,d.f3M)(aN),this.titleStrategy=(0,d.f3M)(Sx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Um((0,d.f3M)(cp,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(Sw),this.urlSerializer=(0,d.f3M)(zf),this.location=(0,d.f3M)($e),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Nu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=sw(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),tp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},u=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,u,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(sp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:f,preserveFragment:m}=r,v=m?this.currentUrlTree.fragment:u;let T=null;switch(f){case"merge":T={...this.currentUrlTree.queryParams,...a};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=a||null}return null!==T&&(T=this.removeEmptyProps(T)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,T,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ga(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,tp,null,r)}navigate(t,r={skipLocationChange:!1}){return function _(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...c}:!1===r?{...h}:r,ga(t))return qf(this.currentUrlTree,t,i);const a=this.parseUrl(t);return qf(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,u){if(this.disposed)return Promise.resolve(!1);let f,m,v,T;return u?(f=u.resolve,m=u.reject,v=u.promise):v=new Promise((M,L)=>{f=M,m=L}),T="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(M=>Promise.reject(M))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),b=(()=>{class n{constructor(t,r,i,a,u,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=u,this.locationStrategy=f,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Ri.x;const m=u.nativeElement.tagName;this.isAnchorElement="A"===m||"AREA"===m,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof Lu&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,u){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||u||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(p),d.Y36(Jc),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(ft))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),D=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,a,u){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=u,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof Lu&&this.update()})}ngAfterContentInit(){pt(this.links.changes,pt(null)).pipe((0,$f.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,kn.D)(t).pipe((0,$f.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function x(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(p),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(b,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,b,5),2&t){let a;d.iGM(a=d.CRH())&&(r.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]}),n})();class P{}let fe=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(ha(t=>t instanceof Lu),fa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const u=a._injector??t,f=a._loadedInjector??u;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(u,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,kn.D)(i).pipe((0,$f.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):pt(null);const a=i.pipe((0,Es.z)(u=>null===u?pt(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,kn.D)([a,u]).pipe((0,$f.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(p),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(P),d.LFG(Dw))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Re=new d.OlP("");let tt=(()=>{class n{constructor(t,r,i,a,u={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof rw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Lu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof KA&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new KA(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function qe(n,e){return{\u0275kind:n,\u0275providers:e}}function TN(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(p),i=n.get(SN);1===n.get(xx)&&r.initialNavigation(),n.get(AN,null,d.XFs.Optional)?.setUpPreloading(),n.get(Re,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const SN=new d.OlP("",{factory:()=>new Ri.x}),xx=new d.OlP("",{providedIn:"root",factory:()=>1});const AN=new d.OlP("");function EV(n){return qe(0,[{provide:AN,useExisting:fe},{provide:P,useExisting:n}])}const xN=new d.OlP("ROUTER_FORROOT_GUARD"),CV=[$e,{provide:zf,useClass:Jv},p,Wm,{provide:Jc,useFactory:function Wt(n){return n.routerState.root},deps:[p]},Dw,[]];function IV(){return new d.PXZ("Router",p)}let MN=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[CV,[],{provide:cp,multi:!0,useValue:t},{provide:xN,useFactory:AV,deps:[[p,new d.FiY,new d.tp0]]},{provide:Aw,useValue:r||{}},r?.useHash?{provide:ft,useClass:Pe}:{provide:ft,useClass:Fe},{provide:Re,useFactory:()=>{const n=(0,d.f3M)(zs),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Aw),r=(0,d.f3M)(Sw),i=(0,d.f3M)(zf);return t.scrollOffset&&n.setOffset(t.scrollOffset),new tt(i,r,n,e,t)}},r?.preloadingStrategy?EV(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:IV},r?.initialNavigation?xV(r):[],[{provide:RN,useFactory:TN},{provide:d.tb,multi:!0,useExisting:RN}]]}}static forChild(t){return{ngModule:n,providers:[{provide:cp,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xN,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ao]}),n})();function AV(n){return"guarded"}function xV(n){return["disabled"===n.initialNavigation?qe(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(p);return()=>{e.setUpLocationChangeListener()}}},{provide:xx,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?qe(2,[{provide:xx,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(Te,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const a=e.get(p),u=e.get(SN);(function r(i){e.get(p).events.pipe(ha(u=>u instanceof Lu||u instanceof np||u instanceof iw),(0,Ct.U)(u=>u instanceof Lu||u instanceof np&&(0===u.code||1===u.code)&&null),ha(u=>null!==u),$l(1)).subscribe(()=>{i()})})(()=>{i(!0)}),e.get(Sw).afterPreactivation=()=>(i(!0),u.closed?pt(void 0):u),a.initialNavigation()}))}}]).\u0275providers:[]]}const RN=new d.OlP("");class kN{}var RV=j(5226),Zl=j.n(RV);class dh{constructor(e){this.db=e,this.dbPath="/donors",this.donorsRef=e.list(this.dbPath)}getAll(){return this.donorsRef}create(e){return this.donorsRef.push(e)}update(e,t){return this.donorsRef.update(e,t)}delete(e){return this.donorsRef.remove(e)}deleteAll(){return this.donorsRef.remove()}}dh.\u0275fac=function(e){return new(e||dh)(d.LFG(bC))},dh.\u0275prov=d.Yz7({token:dh,factory:dh.\u0275fac,providedIn:"root"});let NN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),dp=(()=>{class n extends NN{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Bu=new d.OlP("NgValueAccessor"),PV={provide:Bu,useExisting:(0,d.Gpc)(()=>Mw),multi:!0},FV=new d.OlP("CompositionEventMode");let Mw=(()=>{class n extends NN{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function OV(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(FV,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([PV]),d.qOj]}),n})();const Bs=new d.OlP("NgValidators"),fh=new d.OlP("NgAsyncValidators");function UN(n){return function hh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function LI(n){return null}function GN(n){return null!=n}function qN(n){return(0,d.QGY)(n)?(0,kn.D)(n):n}function zN(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function WN(n,e){return e.map(t=>t(n))}function ZN(n){return n.map(e=>function VV(n){return!n.validate}(e)?e:t=>e.validate(t))}function Mx(n){return null!=n?function KN(n){if(!n)return null;const e=n.filter(GN);return 0==e.length?null:function(t){return zN(WN(t,e))}}(ZN(n)):null}function Rx(n){return null!=n?function YN(n){if(!n)return null;const e=n.filter(GN);return 0==e.length?null:function(t){return function kV(...n){const e=(0,Oo.jO)(n),{args:t,keys:r}=TC(n),i=new vs.y(a=>{const{length:u}=t;if(!u)return void a.complete();const f=new Array(u);let m=u,v=u;for(let T=0;T<u;T++){let M=!1;(0,Dl.Xf)(t[T]).subscribe((0,er.x)(a,L=>{M||(M=!0,v--),f[T]=L},()=>m--,void 0,()=>{(!m||!M)&&(v||a.next(r?Gv(r,f):f),a.complete())}))}});return e?i.pipe(AA(e)):i}(WN(t,e).map(qN)).pipe((0,Ct.U)(zN))}}(ZN(n)):null}function QN(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function kx(n){return n?Array.isArray(n)?n:[n]:[]}function UI(n,e){return Array.isArray(n)?n.includes(e):n===e}function eP(n,e){const t=kx(e);return kx(n).forEach(i=>{UI(t,i)||t.push(i)}),t}function tP(n,e){return kx(e).filter(t=>!UI(n,t))}class nP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Mx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Rx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class co extends nP{get formDirective(){return null}get path(){return null}}class ph extends nP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rP{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Nx=(()=>{class n extends rP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ph,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),Rw=(()=>{class n extends rP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(co,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const kw="VALID",BI="INVALID",sy="PENDING",Nw="DISABLED";function Lx(n){return(jI(n)?n.validators:n)||null}function Ux(n,e){return(jI(e)?e.asyncValidators:n)||null}function jI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class aP{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kw}get invalid(){return this.status===BI}get pending(){return this.status==sy}get disabled(){return this.status===Nw}get enabled(){return this.status!==Nw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(eP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(eP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tP(e,this._rawAsyncValidators))}hasValidator(e){return UI(this._rawValidators,e)}hasAsyncValidator(e){return UI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=sy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Nw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kw||this.status===sy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nw:kw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=sy,this._hasOwnPendingAsyncValidator=!0;const t=qN(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Nw:this.errors?BI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sy)?sy:this._anyControlsHaveStatus(BI)?BI:kw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function zV(n){return Array.isArray(n)?Mx(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function WV(n){return Array.isArray(n)?Rx(n):n||null}(this._rawAsyncValidators)}}class Vx extends aP{constructor(e,t,r){super(Lx(t),Ux(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function oP(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function sP(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Pw=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Bx}),Bx="always";function Ow(n,e,t=Bx){jx(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function YV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&lP(n,e)})}(n,e),function JV(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function QV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&lP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function KV(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function GI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function jx(n,e){const t=function JN(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(QN(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function XN(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(QN(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();GI(e._rawValidators,i),GI(e._rawAsyncValidators,i)}function lP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const rB={provide:co,useExisting:(0,d.Gpc)(()=>hp)},Fw=(()=>Promise.resolve())();let hp=(()=>{class n extends co{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new Vx({},Mx(t),Rx(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Fw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Ow(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Fw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Fw.then(()=>{const r=this._findContainer(t.path),i=new Vx({});(function uP(n,e){jx(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Fw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Fw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function cP(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Bs,10),d.Y36(fh,10),d.Y36(Pw,8))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([rB]),d.qOj]}),n})();function dP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function hP(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const fP=class extends aP{constructor(e=null,t,r){super(Lx(t),Ux(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=hP(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){hP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},oB={provide:ph,useExisting:(0,d.Gpc)(()=>zI)},mP=(()=>Promise.resolve())();let zI=(()=>{class n extends ph{constructor(t,r,i,a,u,f){super(),this._changeDetectorRef=u,this.callSetDisabledState=f,this.control=new fP,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Gx(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Mw?t=a:function tB(n){return Object.getPrototypeOf(n.constructor)===dp}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Hx(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ow(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){mP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.D6c)(r);mP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function $I(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(co,9),d.Y36(Bs,10),d.Y36(fh,10),d.Y36(Bu,10),d.Y36(d.sBO,8),d.Y36(Pw,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([oB]),d.qOj,d.TTD]}),n})(),Lw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const lB={provide:Bu,useExisting:(0,d.Gpc)(()=>qx),multi:!0};let _P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),uB=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:_P}),n})(),qx=(()=>{class n extends dp{constructor(t,r,i,a){super(t,r),this._registry=i,this._injector=a,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(ph),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(uB),d.Y36(d.zs3))},n.\u0275dir=d.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[d._Bn([lB]),d.qOj]}),n})();const mB={provide:Bu,useExisting:(0,d.Gpc)(()=>Uw),multi:!0};function IP(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Uw=(()=>{class n extends dp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=IP(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function yB(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([mB]),d.qOj]}),n})(),Kx=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(IP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(Uw,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const _B={provide:Bu,useExisting:(0,d.Gpc)(()=>Yx),multi:!0};function DP(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Yx=(()=>{class n extends dp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,u)=>{a._setSelected(i.indexOf(u.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const u=a;for(let f=0;f<u.length;f++){const v=this._getOptionValue(u[f].value);i.push(v)}}else{const u=r.options;for(let f=0;f<u.length;f++){const m=u[f];if(m.selected){const v=this._getOptionValue(m.value);i.push(v)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function vB(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([_B]),d.qOj]}),n})(),Qx=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(DP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(DP(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(Yx,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),fp=(()=>{class n{constructor(){this._validator=LI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):LI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const EB={provide:Bs,useExisting:(0,d.Gpc)(()=>Vw),multi:!0};let Vw=(()=>{class n extends fp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>UN}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([EB]),d.qOj]}),n})(),AB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[_P]}),n})(),MB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Pw,useValue:t.callSetDisabledState??Bx}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[AB]}),n})();function RB(n,e){if(1&n&&(d.TgZ(0,"option",29),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("ngValue",t.value),d.xp6(1),d.hij(" ",t.name," ")}}class Bw{constructor(e){this.donorService=e,this.donor=new kN,this.submitted=!1,this.bloodtypes=[{value:"A+",name:"A RhD positive (A+)"},{value:"A-",name:"A RhD negative (A-)"},{value:"B+",name:"B RhD positive (B+)"},{value:"B-",name:"B RhD negative (B-)"},{value:"O+",name:"O RhD positive (O+)"},{value:"O-",name:"O RhD negative (O-)"},{value:"AB+",name:"AB RhD positive (AB+)"}]}saveDonor(e){console.log(this.donor),this.donorService.create(this.donor).then(()=>{console.log("donor submited successfully"),Zl().fire("Done","saved with success","success"),e.reset()})}newDonor(){this.submitted=!1,this.donor=new kN}}Bw.\u0275fac=function(e){return new(e||Bw)(d.Y36(dh))},Bw.\u0275cmp=d.Xpm({type:Bw,selectors:[["app-add-donor"]],decls:51,vars:9,consts:[[1,"nk-block","nk-block-lg"],[1,"card","card-bordered","card-preview"],[1,"card-inner"],[1,"nk-block-head-content"],[1,"nk-block-title"],[1,"submit-form"],[3,"ngSubmit"],["login","ngForm"],[1,"form-group"],["for","fname"],["type","text","id","fname","required","","name","fname","placeholder","Enter the first name",1,"form-control",3,"ngModel","ngModelChange"],["for","lname"],["type","text","id","lname","required","","name","lname","placeholder","Enter the last name",1,"form-control",3,"ngModel","ngModelChange"],["for","age"],["type","text","id","age","required","","name","age","placeholder","Enter the age of the donor",1,"form-control",3,"ngModel","ngModelChange"],["for","phone"],["type","text","id","phone","required","","name","phone","placeholder","Enter the phone number ",1,"form-control",3,"ngModel","ngModelChange"],["for","address"],["type","text","id","address","required","","name","address","placeholder","Enter the address of the donor",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-label"],[1,"form-control-wrap"],["name","bloodType",1,"form-select","js-select2",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"custom-control","custom-radio"],["type","radio","id","female","name","sexe","value","female",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","female",1,"custom-control-label"],["type","radio","id","male","name","sexe","value","male",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","male",1,"custom-control-label"],["type","submit",1,"btn","btn-success"],[3,"ngValue"]],template:function(e,t){if(1&e){const r=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),d._uU(5,"Add new Donor"),d.qZA()(),d._UZ(6,"br"),d.TgZ(7,"div",5)(8,"form",6,7),d.NdJ("ngSubmit",function(){d.CHM(r);const a=d.MAs(9);return d.KtG(t.saveDonor(a))}),d.TgZ(10,"div")(11,"div",8)(12,"label",9),d._uU(13,"First name"),d.qZA(),d.TgZ(14,"input",10),d.NdJ("ngModelChange",function(a){return t.donor.fname=a}),d.qZA()(),d.TgZ(15,"div",8)(16,"label",11),d._uU(17,"Last name"),d.qZA(),d.TgZ(18,"input",12),d.NdJ("ngModelChange",function(a){return t.donor.lname=a}),d.qZA()(),d.TgZ(19,"div",8)(20,"label",13),d._uU(21,"Age"),d.qZA(),d.TgZ(22,"input",14),d.NdJ("ngModelChange",function(a){return t.donor.age=a}),d.qZA()(),d.TgZ(23,"div",8)(24,"label",15),d._uU(25,"Phnoe"),d.qZA(),d.TgZ(26,"input",16),d.NdJ("ngModelChange",function(a){return t.donor.phone=a}),d.qZA()(),d.TgZ(27,"div",8)(28,"label",17),d._uU(29,"Address"),d.qZA(),d.TgZ(30,"input",18),d.NdJ("ngModelChange",function(a){return t.donor.address=a}),d.qZA()(),d.TgZ(31,"div",8)(32,"label",19),d._uU(33,"Blood type"),d.qZA(),d.TgZ(34,"div",20)(35,"select",21),d.NdJ("ngModelChange",function(a){return t.donor.bloodType=a}),d.YNc(36,RB,2,2,"option",22),d.qZA()()(),d.TgZ(37,"div",23)(38,"input",24),d.NdJ("ngModelChange",function(a){return t.donor.sexe=a}),d.qZA(),d.TgZ(39,"label",25),d._uU(40,"Female"),d.qZA()(),d._UZ(41,"br")(42,"br"),d.TgZ(43,"div",23)(44,"input",26),d.NdJ("ngModelChange",function(a){return t.donor.sexe=a}),d.qZA(),d.TgZ(45,"label",27),d._uU(46,"male"),d.qZA()(),d._UZ(47,"br")(48,"br"),d.TgZ(49,"button",28),d._uU(50,"Submit"),d.qZA()()()()()()()}2&e&&(d.xp6(14),d.Q6J("ngModel",t.donor.fname),d.xp6(4),d.Q6J("ngModel",t.donor.lname),d.xp6(4),d.Q6J("ngModel",t.donor.age),d.xp6(4),d.Q6J("ngModel",t.donor.phone),d.xp6(4),d.Q6J("ngModel",t.donor.address),d.xp6(5),d.Q6J("ngModel",t.donor.bloodType),d.xp6(1),d.Q6J("ngForOf",t.bloodtypes),d.xp6(2),d.Q6J("ngModel",t.donor.sexe),d.xp6(6),d.Q6J("ngModel",t.donor.sexe))},dependencies:[bi,Lw,Kx,Qx,Mw,Uw,qx,Nx,Rw,Vw,zI,hp]});var kB=j(1808);function Jx(){return(0,ar.e)((n,e)=>{let t,r=!1;n.subscribe((0,er.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var Bt,NB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},td={},Xx=Xx||{},dn=NB||self;function WI(){}function ZI(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function jw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var eM="closure_uid_"+(1e9*Math.random()>>>0),OB=0;function FB(n,e,t){return n.call.apply(n.bind,arguments)}function LB(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function js(n,e,t){return(js=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?FB:LB).apply(null,arguments)}function KI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Is(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return e.prototype[i].apply(r,u)}}function gh(){this.s=this.s,this.o=this.o}gh.prototype.s=!1,gh.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function PB(n){Object.prototype.hasOwnProperty.call(n,eM)&&n[eM]||(n[eM]=++OB)}(this)},gh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const OP=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function tM(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function FP(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ZI(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let u=0;u<a;u++)n[i+u]=r[u]}else n.push(r)}}function $s(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}$s.prototype.h=function(){this.defaultPrevented=!0};var VB=function(){if(!dn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{dn.addEventListener("test",WI,e),dn.removeEventListener("test",WI,e)}catch{}return n}();function YI(n){return/^[\s\xa0]*$/.test(n)}var LP=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function nM(n,e){return n<e?-1:n>e?1:0}function QI(){var n=dn.navigator;return n&&(n=n.userAgent)?n:""}function ju(n){return-1!=QI().indexOf(n)}function rM(n){return rM[" "](n),n}rM[" "]=WI;var JI,n,jB=ju("Opera"),oy=ju("Trident")||ju("MSIE"),UP=ju("Edge"),iM=UP||oy,VP=ju("Gecko")&&!(-1!=QI().toLowerCase().indexOf("webkit")&&!ju("Edge"))&&!(ju("Trident")||ju("MSIE"))&&!ju("Edge"),$B=-1!=QI().toLowerCase().indexOf("webkit")&&!ju("Edge");function BP(){var n=dn.document;return n?n.documentMode:void 0}e:{var sM="",oM=(n=QI(),VP?/rv:([^\);]+)(\)|;)/.exec(n):UP?/Edge\/([\d\.]+)/.exec(n):oy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):$B?/WebKit\/(\S+)/.exec(n):jB?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(oM&&(sM=oM?oM[1]:""),oy){var aM=BP();if(null!=aM&&aM>parseFloat(sM)){JI=String(aM);break e}}JI=sM}var HB={};var qB=dn.document&&oy&&(BP()||parseInt(JI,10))||void 0;function $w(n,e){if($s.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(VP){e:{try{rM(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zB[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&$w.X.h.call(this)}}Is($w,$s);var zB={2:"touch",3:"pen",4:"mouse"};$w.prototype.h=function(){$w.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Hw="closure_listenable_"+(1e6*Math.random()|0),WB=0;function ZB(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++WB,this.ba=this.ea=!1}function XI(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function uM(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function $P(n){const e={};for(const t in n)e[t]=n[t];return e}const HP="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function GP(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<HP.length;a++)t=HP[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function eD(n){this.src=n,this.g={},this.h=0}function cM(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=OP(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(XI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function dM(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}eD.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=dM(n,e,r,i);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new ZB(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var hM="closure_lm_"+(1e6*Math.random()|0),fM={};function qP(n,e,t,r,i){if(r&&r.once)return WP(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)qP(n,e[a],t,r,i);return null}return t=yM(t),n&&n[Hw]?n.N(e,t,jw(r)?!!r.capture:!!r,i):zP(n,e,t,!1,r,i)}function zP(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=jw(i)?!!i.capture:!!i,f=gM(n);if(f||(n[hM]=f=new eD(n)),(t=f.add(e,t,r,u,a)).proxy)return t;if(r=function KB(){const e=YB;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)VB||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(KP(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function WP(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)WP(n,e[a],t,r,i);return null}return t=yM(t),n&&n[Hw]?n.O(e,t,jw(r)?!!r.capture:!!r,i):zP(n,e,t,!0,r,i)}function ZP(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)ZP(n,e[a],t,r,i);else r=jw(r)?!!r.capture:!!r,t=yM(t),n&&n[Hw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=dM(a=n.g[e],t,r,i))&&(XI(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=gM(n))&&(e=n.g[e.toString()],n=-1,e&&(n=dM(e,t,r,i)),(t=-1<n?e[n]:null)&&pM(t))}function pM(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Hw])cM(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(KP(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=gM(e))?(cM(t,n),0==t.h&&(t.src=null,e[hM]=null)):XI(n)}}}function KP(n){return n in fM?fM[n]:fM[n]="on"+n}function YB(n,e){if(n.ba)n=!0;else{e=new $w(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&pM(n),n=t.call(r,e)}return n}function gM(n){return(n=n[hM])instanceof eD?n:null}var mM="__closure_events_fn_"+(1e9*Math.random()>>>0);function yM(n){return"function"==typeof n?n:(n[mM]||(n[mM]=function(e){return n.handleEvent(e)}),n[mM])}function ss(){gh.call(this),this.i=new eD(this),this.P=this,this.I=null}function Ds(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new $s(e,n);else if(e instanceof $s)e.target=e.target||n;else{var i=e;GP(e=new $s(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=tD(u,r,!0,e)&&i}if(i=tD(u=e.g=n,r,!0,e)&&i,i=tD(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=tD(u=e.g=t[a],r,!1,e)&&i}function tD(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ba&&u.capture==t){var f=u.listener,m=u.ha||u.src;u.ea&&cM(n.i,u),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}Is(ss,gh),ss.prototype[Hw]=!0,ss.prototype.removeEventListener=function(n,e,t,r){ZP(this,n,e,t,r)},ss.prototype.M=function(){if(ss.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)XI(t[r]);delete n.g[e],n.h--}}this.I=null},ss.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ss.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var _M=dn.JSON.stringify;function QB(){var n=JP;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var vM,YP=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new XB,n=>n.reset());class XB{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ej(n){dn.setTimeout(()=>{throw n},0)}function QP(n,e){vM||function tj(){var n=dn.Promise.resolve(void 0);vM=function(){n.then(nj)}}(),wM||(vM(),wM=!0),JP.add(n,e)}var wM=!1,JP=new class JB{constructor(){this.h=this.g=null}add(e,t){const r=YP.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function nj(){for(var n;n=QB();){try{n.h.call(n.g)}catch(t){ej(t)}var e=YP;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}wM=!1}function nD(n,e){ss.call(this),this.h=n||1,this.g=e||dn,this.j=js(this.lb,this),this.l=Date.now()}function bM(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function EM(n,e,t){if("function"==typeof n)t&&(n=js(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=js(n.handleEvent,n)}return 2147483647<Number(e)?-1:dn.setTimeout(n,e||0)}function XP(n){n.g=EM(()=>{n.g=null,n.i&&(n.i=!1,XP(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Is(nD,ss),(Bt=nD.prototype).ca=!1,Bt.R=null,Bt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ds(this,"tick"),this.ca&&(bM(this),this.start()))}},Bt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Bt.M=function(){nD.X.M.call(this),bM(this),delete this.g};class rj extends gh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:XP(this)}M(){super.M(),this.g&&(dn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gw(n){gh.call(this),this.h=n,this.g={}}Is(Gw,gh);var eO=[];function tO(n,e,t,r){Array.isArray(t)||(t&&(eO[0]=t.toString()),t=eO);for(var i=0;i<t.length;i++){var a=qP(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function nO(n){uM(n.g,function(e,t){this.g.hasOwnProperty(t)&&pM(e)},n),n.g={}}function rD(){this.g=!0}function ay(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function aj(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return _M(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Gw.prototype.M=function(){Gw.X.M.call(this),nO(this)},Gw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rD.prototype.Aa=function(){this.g=!1},rD.prototype.info=function(){};var pp={},rO=null;function iD(){return rO=rO||new ss}function iO(n){$s.call(this,pp.Pa,n)}function qw(n){const e=iD();Ds(e,new iO(e))}function sO(n,e){$s.call(this,pp.STAT_EVENT,n),this.stat=e}function ho(n){const e=iD();Ds(e,new sO(e,n))}function oO(n,e){$s.call(this,pp.Qa,n),this.size=e}function zw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return dn.setTimeout(function(){n()},e)}pp.Pa="serverreachability",Is(iO,$s),pp.STAT_EVENT="statevent",Is(sO,$s),pp.Qa="timingevent",Is(oO,$s);var sD={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},aO={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function CM(){}function uO(){}CM.prototype.h=null;var TM,Ww={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function IM(){$s.call(this,"d")}function DM(){$s.call(this,"c")}function oD(){}function Zw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Gw(this),this.O=lj,this.T=new nD(n=iM?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new cO}function cO(){this.i=null,this.g="",this.h=!1}Is(IM,$s),Is(DM,$s),Is(oD,CM),oD.prototype.g=function(){return new XMLHttpRequest},oD.prototype.i=function(){return{}},TM=new oD;var lj=45e3,SM={},aD={};function AM(n,e,t){n.K=1,n.v=dD(nd(e)),n.s=t,n.P=!0,dO(n,null)}function dO(n,e){n.F=Date.now(),Kw(n),n.A=nd(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),bO(t.i,"t",r),n.C=0,t=n.l.H,n.h=new cO,n.g=qO(n.l,t?e:null,!n.s),0<n.N&&(n.L=new rj(js(n.La,n,n.g),n.N)),tO(n.S,n.g,"readystatechange",n.ib),e=n.H?$P(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),qw(),function ij(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",f=a.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var T=v[0];v=v[1];var M=T.split("_");u=2<=M.length&&"type"==M[1]?u+(T+"=")+v+"&":u+(T+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function hO(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function fO(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=uj(n,t),i==aD){4==e&&(n.o=4,ho(14),r=!1),ay(n.j,n.m,null,"[Incomplete Response]");break}if(i==SM){n.o=4,ho(15),ay(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ay(n.j,n.m,i,null),xM(n,i)}hO(n)&&i!=aD&&i!=SM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ho(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),LM(e),e.K=!0,ho(11))):(ay(n.j,n.m,t,"[Invalid Chunked Response]"),gp(n),Yw(n))}function uj(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?aD:(t=Number(e.substring(t,r)),isNaN(t)?SM:(r+=1)+t>e.length?aD:(e=e.substr(r,t),n.C=r+t,e))}function Kw(n){n.V=Date.now()+n.O,pO(n,n.O)}function pO(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zw(js(n.gb,n),e)}function lD(n){n.B&&(dn.clearTimeout(n.B),n.B=null)}function Yw(n){0==n.l.G||n.I||jO(n.l,n)}function gp(n){lD(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,bM(n.T),nO(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function xM(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||MM(t.h,n)))if(!n.J&&MM(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;yD(t),gD(t)}FM(t),ho(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=zw(js(t.cb,t),6e3));if(1>=IO(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else yp(t,11)}else if((n.J||t.g==n)&&yD(t),!YI(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const T=v[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const M=v[4];null!=M&&(t.Ca=M,t.j.info("SVER="+t.Ca));const L=v[5];null!=L&&"number"==typeof L&&0<L&&(t.J=r=1.5*L,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const W=n.g;if(W){const X=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(X){var a=r.h;a.g||-1==X.indexOf("spdy")&&-1==X.indexOf("quic")&&-1==X.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(RM(a,a.h),a.h=null))}if(r.D){const De=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;De&&(r.za=De,Br(r.F,r.D,De))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((r=t).sa=GO(r,r.H?r.ka:null,r.V),u.J){DO(r.h,u);var f=u,m=r.J;m&&f.setTimeout(m),f.B&&(lD(f),Kw(f)),r.g=u}else VO(r);0<t.i.length&&mD(t)}else"stop"!=v[0]&&"close"!=v[0]||yp(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?yp(t,7):OM(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}qw()}catch{}}function gO(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ZI(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function dj(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ZI(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function cj(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(ZI(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Bt=Zw.prototype).setTimeout=function(n){this.O=n},Bt.ib=function(n){n=n.target;const e=this.L;e&&3==rd(n)?e.l():this.La(n)},Bt.La=function(n){try{if(n==this.g)e:{const T=rd(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>T)&&(3!=T||iM||this.g&&(this.h.h||this.g.fa()||NO(this.g)))){this.I||4!=T||7==e||qw(),lD(this);var t=this.g.aa();this.Y=t;t:if(hO(this)){var r=NO(this.g);n="";var i=r.length,a=4==rd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){gp(this),Yw(this);var u="";break t}this.h.i=new dn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function sj(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!YI(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,ho(12),gp(this),Yw(this);break e}ay(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xM(this,t)}this.P?(fO(this,T,u),iM&&this.i&&3==T&&(tO(this.S,this.T,"tick",this.hb),this.T.start())):(ay(this.j,this.m,u,null),xM(this,u)),4==T&&gp(this),this.i&&!this.I&&(4==T?jO(this.l,this):(this.i=!1,Kw(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,ho(12)):(this.o=0,ho(13)),gp(this),Yw(this)}}}catch{}},Bt.hb=function(){if(this.g){var n=rd(this.g),e=this.g.fa();this.C<e.length&&(lD(this),fO(this,n,e),this.i&&4!=n&&Kw(this))}},Bt.cancel=function(){this.I=!0,gp(this)},Bt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function oj(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(qw(),ho(17)),gp(this),this.o=2,Yw(this)):pO(this,this.V-n)};var mO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mp(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof mp){this.h=void 0!==e?e:n.h,uD(this,n.j),this.s=n.s,this.g=n.g,cD(this,n.m),this.l=n.l,e=n.i;var t=new Xw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),yO(this,t),this.o=n.o}else n&&(t=String(n).match(mO))?(this.h=!!e,uD(this,t[1]||"",!0),this.s=Qw(t[2]||""),this.g=Qw(t[3]||"",!0),cD(this,t[4]),this.l=Qw(t[5]||"",!0),yO(this,t[6]||"",!0),this.o=Qw(t[7]||"")):(this.h=!!e,this.i=new Xw(null,this.h))}function nd(n){return new mp(n)}function uD(n,e,t){n.j=t?Qw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function cD(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function yO(n,e,t){e instanceof Xw?(n.i=e,function _j(n,e){e&&!n.j&&(mh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(vO(this,r),bO(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Jw(e,mj)),n.i=new Xw(e,n.h))}function Br(n,e,t){n.i.set(e,t)}function dD(n){return Br(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Qw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Jw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,fj),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function fj(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}mp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Jw(e,_O,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Jw(e,_O,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Jw(t,"/"==t.charAt(0)?gj:pj,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Jw(t,yj)),n.join("")};var _O=/[#\/\?@]/g,pj=/[#\?:]/g,gj=/[#\?]/g,mj=/[#\?@]/g,yj=/#/g;function Xw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function mh(n){n.g||(n.g=new Map,n.h=0,n.i&&function hj(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function vO(n,e){mh(n),e=ly(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function wO(n,e){return mh(n),e=ly(n,e),n.g.has(e)}function bO(n,e,t){vO(n,e),0<t.length&&(n.i=null,n.g.set(ly(n,e),tM(t)),n.h+=t.length)}function ly(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function EO(n){this.l=n||wj,n=dn.PerformanceNavigationTiming?0<(n=dn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(dn.g&&dn.g.Ga&&dn.g.Ga()&&dn.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Bt=Xw.prototype).add=function(n,e){mh(this),this.i=null,n=ly(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Bt.forEach=function(n,e){mh(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Bt.oa=function(){mh(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Bt.W=function(n){mh(this);let e=[];if("string"==typeof n)wO(this,n)&&(e=e.concat(this.g.get(ly(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Bt.set=function(n,e){return mh(this),this.i=null,wO(this,n=ly(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Bt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Bt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),u=this.W(r);for(r=0;r<u.length;r++){var i=a;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var wj=10;function CO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function IO(n){return n.h?1:n.g?n.g.size:0}function MM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function RM(n,e){n.g?n.g.add(e):n.h=e}function DO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function TO(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return tM(n.i)}function kM(){}function bj(){this.g=new kM}function Ej(n,e,t){const r=t||"";try{gO(n,function(i,a){let u=i;jw(i)&&(u=_M(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hD(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function e0(n){this.l=n.ac||null,this.j=n.jb||!1}function fD(n,e){ss.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=NM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}EO.prototype.cancel=function(){if(this.i=TO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},kM.prototype.stringify=function(n){return dn.JSON.stringify(n,void 0)},kM.prototype.parse=function(n){return dn.JSON.parse(n,void 0)},Is(e0,CM),e0.prototype.g=function(){return new fD(this.l,this.j)},e0.prototype.i=function(n){return function(){return n}}({}),Is(fD,ss);var NM=0;function SO(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function t0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,n0(n)}function n0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Bt=fD.prototype).open=function(n,e){if(this.readyState!=NM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,n0(this)},Bt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||dn).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Bt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,t0(this)),this.readyState=NM},Bt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,n0(this)),this.g&&(this.readyState=3,n0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof dn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;SO(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Bt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?t0(this):n0(this),3==this.readyState&&SO(this)}},Bt.Va=function(n){this.g&&(this.response=this.responseText=n,t0(this))},Bt.Ua=function(n){this.g&&(this.response=n,t0(this))},Bt.ga=function(){this.g&&t0(this)},Bt.setRequestHeader=function(n,e){this.v.append(n,e)},Bt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Bt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(fD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Ij=dn.JSON.parse;function ri(n){ss.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=AO,this.K=this.L=!1}Is(ri,ss);var AO="",Dj=/^https?$/i,Tj=["POST","PUT"];function xO(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,MO(n),pD(n)}function MO(n){n.D||(n.D=!0,Ds(n,"complete"),Ds(n,"error"))}function RO(n){if(n.h&&typeof Xx<"u"&&(!n.C[1]||4!=rd(n)||2!=n.aa()))if(n.v&&4==rd(n))EM(n.Ha,0,n);else if(Ds(n,"readystatechange"),4==rd(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(mO)[1]||null;if(!i&&dn.self&&dn.self.location){var a=dn.self.location.protocol;i=a.substr(0,a.length-1)}r=!Dj.test(i?i.toLowerCase():"")}t=r}if(t)Ds(n,"complete"),Ds(n,"success");else{n.m=6;try{var u=2<rd(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",MO(n)}}finally{pD(n)}}}function pD(n,e){if(n.g){kO(n);const t=n.g,r=n.C[0]?WI:null;n.g=null,n.C=null,e||Ds(n,"ready");try{t.onreadystatechange=r}catch{}}}function kO(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(dn.clearTimeout(n.A),n.A=null)}function rd(n){return n.g?n.g.readyState:0}function NO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case AO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function PO(n){let e="";return uM(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function PM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=PO(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Br(n,e,t))}function r0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function OO(n){this.Ca=0,this.i=[],this.j=new rD,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=r0("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=r0("baseRetryDelayMs",5e3,n),this.bb=r0("retryDelaySeedMs",1e4,n),this.$a=r0("forwardChannelMaxRetries",2,n),this.ta=r0("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new EO(n&&n.concurrentRequestLimit),this.Fa=new bj,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function OM(n){if(FO(n),3==n.G){var e=n.U++,t=nd(n.F);Br(t,"SID",n.I),Br(t,"RID",e),Br(t,"TYPE","terminate"),s0(n,t),(e=new Zw(n,n.j,e,void 0)).K=2,e.v=dD(nd(t)),t=!1,dn.navigator&&dn.navigator.sendBeacon&&(t=dn.navigator.sendBeacon(e.v.toString(),"")),!t&&dn.Image&&((new Image).src=e.v,t=!0),t||(e.g=qO(e.l,null),e.g.da(e.v)),e.F=Date.now(),Kw(e)}HO(n)}function gD(n){n.g&&(LM(n),n.g.cancel(),n.g=null)}function FO(n){gD(n),n.u&&(dn.clearTimeout(n.u),n.u=null),yD(n),n.h.cancel(),n.m&&("number"==typeof n.m&&dn.clearTimeout(n.m),n.m=null)}function mD(n){CO(n.h)||n.m||(n.m=!0,QP(n.Ja,n),n.C=0)}function LO(n,e){var t;t=e?e.m:n.U++;const r=nd(n.F);Br(r,"SID",n.I),Br(r,"RID",t),Br(r,"AID",n.T),s0(n,r),n.o&&n.s&&PM(r,n.o,n.s),t=new Zw(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=UO(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),RM(n.h,t),AM(t,r,e)}function s0(n,e){n.ia&&uM(n.ia,function(t,r){Br(e,r,t)}),n.l&&gO({},function(t,r){Br(e,r,t)})}function UO(n,e,t){t=Math.min(n.i.length,t);var r=n.l?js(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let v=i[m].h;const T=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),f=!1;else try{Ej(T,u,"req"+v+"_")}catch{r&&r(T)}}if(f){r=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function VO(n){n.g||n.u||(n.Z=1,QP(n.Ia,n),n.A=0)}function FM(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=zw(js(n.Ia,n),$O(n,n.A)),n.A++,0))}function LM(n){null!=n.B&&(dn.clearTimeout(n.B),n.B=null)}function BO(n){n.g=new Zw(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=nd(n.sa);Br(e,"RID","rpc"),Br(e,"SID",n.I),Br(e,"CI",n.L?"0":"1"),Br(e,"AID",n.T),Br(e,"TYPE","xmlhttp"),s0(n,e),n.o&&n.s&&PM(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=dD(nd(e)),t.s=null,t.P=!0,dO(t,n)}function yD(n){null!=n.v&&(dn.clearTimeout(n.v),n.v=null)}function jO(n,e){var t=null;if(n.g==e){yD(n),LM(n),n.g=null;var r=2}else{if(!MM(n.h,e))return;t=e.D,DO(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ds(r=iD(),new oO(r,t)),mD(n)}else VO(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function Aj(n,e){return!(IO(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=zw(js(n.Ja,n,e),$O(n,n.C)),n.C++,0)))}(n,e)||2==r&&FM(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:yp(n,5);break;case 4:yp(n,10);break;case 3:yp(n,6);break;default:yp(n,2)}}function $O(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function yp(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=js(n.kb,n);t||(t=new mp("//www.google.com/images/cleardot.gif"),dn.location&&"http"==dn.location.protocol||uD(t,"https"),dD(t)),function Cj(n,e){const t=new rD;if(dn.Image){const r=new Image;r.onload=KI(hD,t,r,"TestLoadImage: loaded",!0,e),r.onerror=KI(hD,t,r,"TestLoadImage: error",!1,e),r.onabort=KI(hD,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=KI(hD,t,r,"TestLoadImage: timeout",!1,e),dn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ho(2);n.G=0,n.l&&n.l.va(e),HO(n),FO(n)}function HO(n){if(n.G=0,n.la=[],n.l){const e=TO(n.h);(0!=e.length||0!=n.i.length)&&(FP(n.la,e),FP(n.la,n.i),n.h.i.length=0,tM(n.i),n.i.length=0),n.l.ua()}}function GO(n,e,t){var r=t instanceof mp?nd(t):new mp(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),cD(r,r.m);else{var i=dn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new mp(null,void 0);r&&uD(a,r),e&&(a.g=e),i&&cD(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Br(r,t,e),Br(r,"VER",n.ma),s0(n,r),r}function qO(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ri(t&&n.Da&&!n.ra?new e0({jb:!0}):n.ra)).Ka(n.H),e}function zO(){}function _D(){if(oy&&!(10<=Number(qB)))throw Error("Environmental error: no available transport.")}function ya(n,e){ss.call(this),this.g=new OO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!YI(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!YI(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new uy(this)}function WO(n){IM.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ZO(){DM.call(this),this.status=1}function uy(n){this.g=n}(Bt=ri.prototype).Ka=function(n){this.L=n},Bt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():TM.g(),this.C=function lO(n){return n.h||(n.h=n.i())}(this.u?this.u:TM),this.g.onreadystatechange=js(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void xO(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=dn.FormData&&n instanceof dn.FormData,!(0<=OP(Tj,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,u]of t)this.g.setRequestHeader(a,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kO(this),0<this.B&&((this.K=function Sj(n){return oy&&function GB(){return function BB(n){var e=HB;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=LP(String(JI)).split("."),t=LP("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=nM(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||nM(0==i[2].length,0==a[2].length)||nM(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=js(this.qa,this)):this.A=EM(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){xO(this,a)}},Bt.qa=function(){typeof Xx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ds(this,"timeout"),this.abort(8))},Bt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ds(this,"complete"),Ds(this,"abort"),pD(this))},Bt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pD(this,!0)),ri.X.M.call(this)},Bt.Ha=function(){this.s||(this.F||this.v||this.l?RO(this):this.fb())},Bt.fb=function(){RO(this)},Bt.aa=function(){try{return 2<rd(this)?this.g.status:-1}catch{return-1}},Bt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Bt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Ij(e)}},Bt.Ea=function(){return this.m},Bt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Bt=OO.prototype).ma=8,Bt.G=1,Bt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Zw(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=$P(a),GP(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=UO(this,i,e),Br(t=nd(this.F),"RID",n),Br(t,"CVER",22),this.D&&Br(t,"X-HTTP-Session-Id",this.D),s0(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(PO(a)))+"&"+e:this.o&&PM(t,this.o,a)),RM(this.h,i),this.Ya&&Br(t,"TYPE","init"),this.O?(Br(t,"$req",e),Br(t,"SID","null"),i.Z=!0,AM(i,t,null)):AM(i,t,e),this.G=2}}else 3==this.G&&(n?LO(this,n):0==this.i.length||CO(this.h)||LO(this))},Bt.Ia=function(){if(this.u=null,BO(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=zw(js(this.eb,this),n)}},Bt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ho(10),gD(this),BO(this))},Bt.cb=function(){null!=this.v&&(this.v=null,gD(this),FM(this),ho(19))},Bt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ho(2)):(this.j.info("Failed to ping google.com"),ho(1))},(Bt=zO.prototype).xa=function(){},Bt.wa=function(){},Bt.va=function(){},Bt.ua=function(){},Bt.Ra=function(){},_D.prototype.g=function(n,e){return new ya(n,e)},Is(ya,ss),ya.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ho(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=GO(n,null,n.V),mD(n)},ya.prototype.close=function(){OM(this.g)},ya.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=_M(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&mD(e)},ya.prototype.M=function(){this.g.l=null,delete this.j,OM(this.g),delete this.g,ya.X.M.call(this)},Is(WO,IM),Is(ZO,DM),Is(uy,zO),uy.prototype.xa=function(){Ds(this.g,"a")},uy.prototype.wa=function(n){Ds(this.g,new WO(n))},uy.prototype.va=function(n){Ds(this.g,new ZO)},uy.prototype.ua=function(){Ds(this.g,"b")},_D.prototype.createWebChannel=_D.prototype.g,ya.prototype.send=ya.prototype.u,ya.prototype.open=ya.prototype.m,ya.prototype.close=ya.prototype.close,sD.NO_ERROR=0,sD.TIMEOUT=8,sD.HTTP_ERROR=6,aO.COMPLETE="complete",uO.EventType=Ww,Ww.OPEN="a",Ww.CLOSE="b",Ww.ERROR="c",Ww.MESSAGE="d",ss.prototype.listen=ss.prototype.N,ri.prototype.listenOnce=ri.prototype.O,ri.prototype.getLastError=ri.prototype.Oa,ri.prototype.getLastErrorCode=ri.prototype.Ea,ri.prototype.getStatus=ri.prototype.aa,ri.prototype.getResponseJson=ri.prototype.Sa,ri.prototype.getResponseText=ri.prototype.fa,ri.prototype.send=ri.prototype.da,ri.prototype.setWithCredentials=ri.prototype.Ka;var xj=td.createWebChannelTransport=function(){return new _D},Mj=td.getStatEventTarget=function(){return iD()},UM=td.ErrorCode=sD,Rj=td.EventType=aO,kj=td.Event=pp,KO=td.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Nj=td.FetchXmlHttpFactory=e0,vD=td.WebChannel=uO,Pj=td.XhrIo=ri;const YO="@firebase/firestore";class os{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}os.UNAUTHENTICATED=new os(null),os.GOOGLE_CREDENTIALS=new os("google-credentials-uid"),os.FIRST_PARTY=new os("first-party-uid"),os.MOCK_USER=new os("mock-user");let cy="9.16.0";const yh=new fi.Yd("@firebase/firestore");function VM(){return yh.logLevel}function et(n,...e){if(yh.logLevel<=fi.in.DEBUG){const t=e.map(BM);yh.debug(`Firestore (${cy}): ${n}`,...t)}}function _i(n,...e){if(yh.logLevel<=fi.in.ERROR){const t=e.map(BM);yh.error(`Firestore (${cy}): ${n}`,...t)}}function _p(n,...e){if(yh.logLevel<=fi.in.WARN){const t=e.map(BM);yh.warn(`Firestore (${cy}): ${n}`,...t)}}function BM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function It(n="Unexpected state"){const e=`FIRESTORE (${cy}) INTERNAL ASSERTION FAILED: `+n;throw _i(e),new Error(e)}function Ut(n,e){n||It()}function dt(n,e){return n}const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends U.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class QO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(os.UNAUTHENTICATED))}shutdown(){}}class Uj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Vj{constructor(e){this.t=e,this.currentUser=os.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let u=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Gi,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=u;e.enqueueRetryable((0,le.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Gi)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ut("string"==typeof r.accessToken),new QO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ut(null===e||"string"==typeof e),new os(e)}}class Bj{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=os.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ut(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class jj{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new Bj(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(os.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $j{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.A;return this.A=a.token,et("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ut("string"==typeof t.token),this.A=t.token,new JO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Hj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class XO{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Hj(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function hn(n,e){return n<e?-1:n>e?1:0}function dy(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function eF(n){return n+"\0"}class jr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ze(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ze(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ze(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jr.fromMillis(Date.now())}static fromDate(e){return jr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new jr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?hn(this.nanoseconds,e.nanoseconds):hn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ht(e)}static min(){return new Ht(new jr(0,0))}static max(){return new Ht(new jr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class o0{constructor(e,t,r){void 0===t?t=0:t>e.length&&It(),void 0===r?r=e.length-t:r>e.length-t&&It(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===o0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof o0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class jn extends o0{construct(e,t,r){return new jn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ze(Se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new jn(t)}static emptyPath(){return new jn([])}}const Gj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ii extends o0{construct(e,t,r){return new ii(e,t,r)}static isValidIdentifier(e){return Gj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ii.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ii(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ze(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ze(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ze(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(u=!u,i++):"."!==f||u?(r+=f,i++):(a(),i++)}if(a(),u)throw new Ze(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ii(t)}static emptyPath(){return new ii([])}}class ut{constructor(e){this.path=e}static fromPath(e){return new ut(jn.fromString(e))}static fromName(e){return new ut(jn.fromString(e).popFirst(5))}static empty(){return new ut(jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===jn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return jn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new jn(e.slice()))}}class wD{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function jM(n){return n.fields.find(e=>2===e.kind)}function vp(n){return n.fields.filter(e=>2!==e.kind)}wD.UNKNOWN_ID=-1;class bD{constructor(e,t){this.fieldPath=e,this.kind=t}}class a0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new a0(0,_a.min())}}function tF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ht.fromTimestamp(1e9===r?new jr(t+1,0):new jr(t,r));return new _a(i,ut.empty(),e)}function nF(n){return new _a(n.readTime,n.key,-1)}class _a{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _a(Ht.min(),ut.empty(),-1)}static max(){return new _a(Ht.max(),ut.empty(),-1)}}function $M(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ut.comparator(n.documentKey,e.documentKey),0!==t?t:hn(n.largestBatchId,e.largestBatchId))}const rF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function _h(n){return HM.apply(this,arguments)}function HM(){return HM=(0,le.Z)(function*(n){if(n.code!==Se.FAILED_PRECONDITION||n.message!==rF)throw n;et("LocalStore","Unexpectedly lost primary lease")}),HM.apply(this,arguments)}class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&It(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ee((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ee?t:Ee.resolve(t)}catch(t){return Ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ee.reject(t)}static resolve(e){return new Ee((t,r)=>{t(e)})}static reject(e){return new Ee((t,r)=>{r(e)})}static waitFor(e){return new Ee((t,r)=>{let i=0,a=0,u=!1;e.forEach(f=>{++i,f.next(()=>{++a,u&&a===i&&t()},m=>r(m))}),u=!0,a===i&&t()})}static or(e){let t=Ee.resolve(!1);for(const r of e)t=t.next(i=>i?Ee.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new Ee((r,i)=>{const a=e.length,u=new Array(a);let f=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(T=>{u[v]=T,++f,f===a&&r(u)},T=>i(T))}})}static doWhile(e,t){return new Ee((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class ED{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Gi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new l0(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=GM(r.target.error);this.P.reject(new l0(e,i))}}static open(e,t,r,i){try{return new ED(t,e.transaction(i,r))}catch(a){throw new l0(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(et("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Zj(t)}}class Kl{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Kl.D((0,U.z$)())&&_i("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return et("SimpleDb","Removing database:",e),wp(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,U.hl)())return!1;if(Kl.N())return!0;const e=(0,U.z$)(),t=Kl.D(e),r=0<t&&t<10,i=Kl.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,le.Z)(function*(){return t.db||(et("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new l0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const f=u.target.error;i("VersionError"===f.name?new Ze(Se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ze(Se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new l0(e,f))},a.onupgradeneeded=u=>{et("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{et("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,le.Z)(function*(){const u="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.F(e);const m=ED.open(a.db,e,u?"readonly":"readwrite",r),v=i(m).next(T=>(m.V(),T)).catch(T=>(m.abort(T),Ee.reject(T))).toPromise();return v.catch(()=>{}),yield m.v,v}catch(m){const v=m,T="FirebaseError"!==v.name&&f<3;if(et("SimpleDb","Transaction failed with error:",v.message,"Retrying:",T),a.close(),!T)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Wj{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return wp(this.q.delete())}}class l0 extends Ze{constructor(e,t){super(Se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function vh(n){return"IndexedDbTransactionError"===n.name}class Zj{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(et("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(et("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),wp(r)}add(e){return et("SimpleDb","ADD",this.store.name,e,e),wp(this.store.add(e))}get(e){return wp(this.store.get(e)).next(t=>(void 0===t&&(t=null),et("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return et("SimpleDb","DELETE",this.store.name,e),wp(this.store.delete(e))}count(){return et("SimpleDb","COUNT",this.store.name),wp(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(u,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new Ee((a,u)=>{i.onerror=f=>{u(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Ee((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Y(e,t){et("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,u,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new Ee((r,i)=>{t.onerror=a=>{const u=GM(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(f=>{f?u.continue():r()}):r()}})}H(e,t){const r=[];return new Ee((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void i();const m=new Wj(f),v=t(f.primaryKey,f.value,m);if(v instanceof Ee){const T=v.catch(M=>(m.done(),Ee.reject(M)));r.push(T)}m.isDone?i():null===m.G?f.continue():f.continue(m.G)}}).next(()=>Ee.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function wp(n){return new Ee((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=GM(r.target.error);t(i)}})}let sF=!1;function GM(n){const e=Kl.D((0,U.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ze("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sF||(sF=!0,setTimeout(()=>{throw r},0)),r}}return n}class Kj{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;et("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,le.Z)(function*(){t.task=null;try{et("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){vh(r)?et("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield _h(r)}yield t.nt(6e4)}))}}class Yj{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,le.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return Ee.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return et("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,i).next(f=>{i-=f,r.add(u)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(i,a)).next(f=>(et("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>u.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const u=nF(a);$M(u,r)>0&&(r=u)}),new _a(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let va=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class Qj{constructor(e,t,r,i,a,u,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class wh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wh&&e.projectId===this.projectId&&e.database===this.database}}function oF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function aF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function u0(n){return null==n}function c0(n){return 0===n&&1/n==-1/0}function lF(n){return"number"==typeof n&&Number.isInteger(n)&&!c0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class qi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new qi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new qi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qi.EMPTY_BYTE_STRING=new qi("");const Xj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bh(n){if(Ut(!!n),"string"==typeof n){let e=0;const t=Xj.exec(n);if(Ut(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:si(n.seconds),nanos:si(n.nanos)}}function si(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ep(n){return"string"==typeof n?qi.fromBase64String(n):qi.fromUint8Array(n)}function qM(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function uF(n){const e=n.mapValue.fields.__previous_value__;return qM(e)?uF(e):e}function d0(n){const e=bh(n.mapValue.fields.__local_write_time__.timestampValue);return new jr(e.seconds,e.nanos)}const Eh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},CD={nullValue:"NULL_VALUE"};function Cp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qM(n)?4:fF(n)?9007199254740991:10:It()}function $u(n,e){if(n===e)return!0;const t=Cp(n);if(t!==Cp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return d0(n).isEqual(d0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=bh(r.timestampValue),u=bh(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ep(n.bytesValue).isEqual(Ep(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return si(r.geoPointValue.latitude)===si(i.geoPointValue.latitude)&&si(r.geoPointValue.longitude)===si(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return si(r.integerValue)===si(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=si(r.doubleValue),u=si(i.doubleValue);return a===u?c0(a)===c0(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return dy(n.arrayValue.values||[],e.arrayValue.values||[],$u);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(oF(a)!==oF(u))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===u[f]||!$u(a[f],u[f])))return!1;return!0}(n,e);default:return It()}var i}function h0(n,e){return void 0!==(n.values||[]).find(t=>$u(t,e))}function Ch(n,e){if(n===e)return 0;const t=Cp(n),r=Cp(e);if(t!==r)return hn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return hn(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=si(i.integerValue||i.doubleValue),f=si(a.integerValue||a.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return cF(n.timestampValue,e.timestampValue);case 4:return cF(d0(n),d0(e));case 5:return hn(n.stringValue,e.stringValue);case 6:return function(i,a){const u=Ep(i),f=Ep(a);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),f=a.split("/");for(let m=0;m<u.length&&m<f.length;m++){const v=hn(u[m],f[m]);if(0!==v)return v}return hn(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=hn(si(i.latitude),si(a.latitude));return 0!==u?u:hn(si(i.longitude),si(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],f=a.values||[];for(let m=0;m<u.length&&m<f.length;++m){const v=Ch(u[m],f[m]);if(v)return v}return hn(u.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Eh.mapValue&&a===Eh.mapValue)return 0;if(i===Eh.mapValue)return 1;if(a===Eh.mapValue)return-1;const u=i.fields||{},f=Object.keys(u),m=a.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let T=0;T<f.length&&T<v.length;++T){const M=hn(f[T],v[T]);if(0!==M)return M;const L=Ch(u[f[T]],m[v[T]]);if(0!==L)return L}return hn(f.length,v.length)}(n.mapValue,e.mapValue);default:throw It()}}function cF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return hn(n,e);const t=bh(n),r=bh(e),i=hn(t.seconds,r.seconds);return 0!==i?i:hn(t.nanos,r.nanos)}function hy(n){return zM(n)}function zM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=bh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ep(n.bytesValue).toBase64():"referenceValue"in n?ut.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=zM(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const f of i)u?u=!1:a+=",",a+=`${f}:${zM(r.fields[f])}`;return a+"}"}(n.mapValue):It();var e}function Ip(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function WM(n){return!!n&&"integerValue"in n}function f0(n){return!!n&&"arrayValue"in n}function dF(n){return!!n&&"nullValue"in n}function hF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ID(n){return!!n&&"mapValue"in n}function p0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=p0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=p0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fF(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function e$(n){return"nullValue"in n?CD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ip(wh.empty(),ut.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:It()}function t$(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ip(wh.empty(),ut.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Eh:It()}function pF(n,e){const t=Ch(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function gF(n,e){const t=Ch(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ih{constructor(e,t){this.position=e,this.inclusive=t}}function mF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?ut.comparator(ut.fromName(u.referenceValue),t.key):Ch(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function yF(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$u(n.position[t],e.position[t]))return!1;return!0}class _F{}class On extends _F{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new n$(e,t,r):"array-contains"===t?new s$(e,r):"in"===t?new IF(e,r):"not-in"===t?new o$(e,r):"array-contains-any"===t?new a$(e,r):new On(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new r$(e,r):new i$(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ch(t,this.value)):null!==t&&Cp(this.value)===Cp(t)&&this.matchesComparison(Ch(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return It()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ir extends _F{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new ir(e,t)}matches(e){return fy(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function fy(n){return"and"===n.op}function ZM(n){return"or"===n.op}function KM(n){return vF(n)&&fy(n)}function vF(n){for(const e of n.filters)if(e instanceof ir)return!1;return!0}function YM(n){if(n instanceof On)return n.field.canonicalString()+n.op.toString()+hy(n.value);if(KM(n))return n.filters.map(e=>YM(e)).join(",");{const e=n.filters.map(t=>YM(t)).join(",");return`${n.op}(${e})`}}function wF(n,e){return n instanceof On?(t=n,(r=e)instanceof On&&t.op===r.op&&t.field.isEqual(r.field)&&$u(t.value,r.value)):n instanceof ir?function(t,r){return r instanceof ir&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,u)=>i&&wF(a,r.filters[u]),!0)}(n,e):void It();var t,r}function bF(n,e){const t=n.filters.concat(e);return ir.create(t,n.op)}function EF(n){return n instanceof On?`${(e=n).field.canonicalString()} ${e.op} ${hy(e.value)}`:n instanceof ir?function(e){return e.op.toString()+" {"+e.getFilters().map(EF).join(" ,")+"}"}(n):"Filter";var e}class n$ extends On{constructor(e,t,r){super(e,t,r),this.key=ut.fromName(r.referenceValue)}matches(e){const t=ut.comparator(e.key,this.key);return this.matchesComparison(t)}}class r$ extends On{constructor(e,t){super(e,"in",t),this.keys=CF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class i$ extends On{constructor(e,t){super(e,"not-in",t),this.keys=CF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function CF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ut.fromName(r.referenceValue))}class s$ extends On{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return f0(t)&&h0(t.arrayValue,this.value)}}class IF extends On{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&h0(this.value.arrayValue,t)}}class o$ extends On{constructor(e,t){super(e,"not-in",t)}matches(e){if(h0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!h0(this.value.arrayValue,t)}}class a$ extends On{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!f0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>h0(this.value.arrayValue,r))}}class py{constructor(e,t="asc"){this.field=e,this.dir=t}}function l$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class oi{constructor(e,t){this.comparator=e,this.root=t||Ts.EMPTY}insert(e,t){return new oi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ts.BLACK,null,null))}remove(e){return new oi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ts.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new DD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new DD(this.root,e,this.comparator,!1)}getReverseIterator(){return new DD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new DD(this.root,e,this.comparator,!0)}}class DD{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ts{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ts.RED,this.left=i??Ts.EMPTY,this.right=a??Ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ts(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ts.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw It();const e=this.left.check();if(e!==this.right.check())throw It();return e+(this.isRed()?0:1)}}Ts.EMPTY=null,Ts.RED=!0,Ts.BLACK=!1,Ts.EMPTY=new class{constructor(){this.size=0}get key(){throw It()}get value(){throw It()}get color(){throw It()}get left(){throw It()}get right(){throw It()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ts(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ur{constructor(e){this.comparator=e,this.data=new oi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new DF(this.data.getIterator())}getIteratorFrom(e){return new DF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ur)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ur(this.comparator);return t.data=e,t}}class DF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gy(n){return n.hasNext()?n.getNext():void 0}class qo{constructor(e){this.fields=e,e.sort(ii.comparator)}static empty(){return new qo([])}unionWith(e){let t=new ur(ii.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dy(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ss{constructor(e){this.value=e}static empty(){return new Ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ID(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=p0(t)}setAll(e){let t=ii.emptyPath(),r={},i=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}u?r[f.lastSegment()]=p0(u):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());ID(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $u(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ID(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bp(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ss(p0(this.value))}}function TF(n){const e=[];return bp(n.fields,(t,r)=>{const i=new ii([t]);if(ID(r)){const a=TF(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new qo(e)}class Sr{constructor(e,t,r,i,a,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=u,this.documentState=f}static newInvalidDocument(e){return new Sr(e,0,Ht.min(),Ht.min(),Ht.min(),Ss.empty(),0)}static newFoundDocument(e,t,r,i){return new Sr(e,1,t,Ht.min(),r,i,0)}static newNoDocument(e,t){return new Sr(e,2,t,Ht.min(),Ht.min(),Ss.empty(),0)}static newUnknownDocument(e,t){return new Sr(e,3,t,Ht.min(),Ht.min(),Ss.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ht.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class u${constructor(e,t=null,r=[],i=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=f,this.ft=null}}function QM(n,e=null,t=[],r=[],i=null,a=null,u=null){return new u$(n,e,t,r,i,a,u)}function Dp(n){const e=dt(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>YM(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),u0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hy(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hy(r)).join(",")),e.ft=t}return e.ft}function g0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!l$(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!yF(n.startAt,e.startAt)&&yF(n.endAt,e.endAt)}function TD(n){return ut.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function SD(n,e){return n.filters.filter(t=>t instanceof On&&t.field.isEqual(e))}function SF(n,e,t){let r=CD,i=!0;for(const a of SD(n,e)){let u=CD,f=!0;switch(a.op){case"<":case"<=":u=e$(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,f=!1;break;case"!=":case"not-in":u=CD}pF({value:r,inclusive:i},{value:u,inclusive:f})<0&&(r=u,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];pF({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function AF(n,e,t){let r=Eh,i=!0;for(const a of SD(n,e)){let u=Eh,f=!0;switch(a.op){case">=":case">":u=t$(a.value),f=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,f=!1;break;case"!=":case"not-in":u=Eh}gF({value:r,inclusive:i},{value:u,inclusive:f})>0&&(r=u,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];gF({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class id{constructor(e,t=null,r=[],i=[],a=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=m,this.dt=null,this._t=null}}function xF(n,e,t,r,i,a,u,f){return new id(n,e,t,r,i,a,u,f)}function my(n){return new id(n)}function MF(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function JM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function AD(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function XM(n){return null!==n.collectionGroup}function Tp(n){const e=dt(n);if(null===e.dt){e.dt=[];const t=AD(e),r=JM(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new py(t)),e.dt.push(new py(ii.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new py(ii.keyField(),a))}}}return e.dt}function fo(n){const e=dt(n);if(!e._t)if("F"===e.limitType)e._t=QM(e.path,e.collectionGroup,Tp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Tp(e))t.push(new py(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ih(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ih(e.startAt.position,e.startAt.inclusive):null;e._t=QM(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function eR(n,e){e.getFirstInequalityField(),AD(n);const t=n.filters.concat([e]);return new id(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xD(n,e,t){return new id(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function m0(n,e){return g0(fo(n),fo(e))&&n.limitType===e.limitType}function RF(n){return`${Dp(fo(n))}|lt:${n.limitType}`}function tR(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>EF(r)).join(", ")}]`),u0(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hy(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hy(r)).join(",")),`Target(${t})`}(fo(n))}; limitType=${n.limitType})`}function nR(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ut.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Tp(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const f=mF(i,a,u);return i.inclusive?f<=0:f<0}(t.startAt,Tp(t),r)||t.endAt&&!function(i,a,u){const f=mF(i,a,u);return i.inclusive?f>=0:f>0}(t.endAt,Tp(t),r)));var t,r}function kF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function NF(n){return(e,t)=>{let r=!1;for(const i of Tp(n)){const a=c$(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function c$(n,e,t){const r=n.field.isKeyField()?ut.comparator(e.key,t.key):function(i,a,u){const f=a.data.field(i),m=u.data.field(i);return null!==f&&null!==m?Ch(f,m):It()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return It()}}function PF(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:c0(e)?"-0":e}}function OF(n){return{integerValue:""+n}}function FF(n,e){return lF(e)?OF(e):PF(n,e)}class MD{constructor(){this._=void 0}}function d$(n,e,t){return n instanceof yy?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Sp?UF(n,e):n instanceof Ap?VF(n,e):function(r,i){const a=LF(r,i),u=BF(a)+BF(r.gt);return WM(a)&&WM(r.gt)?OF(u):PF(r.yt,u)}(n,e)}function h$(n,e,t){return n instanceof Sp?UF(n,e):n instanceof Ap?VF(n,e):t}function LF(n,e){return n instanceof _y?WM(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class yy extends MD{}class Sp extends MD{constructor(e){super(),this.elements=e}}function UF(n,e){const t=jF(e);for(const r of n.elements)t.some(i=>$u(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ap extends MD{constructor(e){super(),this.elements=e}}function VF(n,e){let t=jF(e);for(const r of n.elements)t=t.filter(i=>!$u(i,r));return{arrayValue:{values:t}}}class _y extends MD{constructor(e,t){super(),this.yt=e,this.gt=t}}function BF(n){return si(n.integerValue||n.doubleValue)}function jF(n){return f0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class y0{constructor(e,t){this.field=e,this.transform=t}}class p${constructor(e,t){this.version=e,this.transformResults=t}}class $r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $r}static exists(e){return new $r(void 0,e)}static updateTime(e){return new $r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function RD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class kD{}function $F(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new wy(n.key,$r.none()):new vy(n.key,n.data,$r.none());{const t=n.data,r=Ss.empty();let i=new ur(ii.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);null===u&&a.length>1&&(a=a.popLast(),u=t.field(a)),null===u?r.delete(a):r.set(a,u),i=i.add(a)}return new sd(n.key,r,new qo(i.toArray()),$r.none())}}function g$(n,e,t){n instanceof vy?function(r,i,a){const u=r.value.clone(),f=qF(r.fieldTransforms,i,a.transformResults);u.setAll(f),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof sd?function(r,i,a){if(!RD(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=qF(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(GF(r)),f.setAll(u),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _0(n,e,t,r){return n instanceof vy?function(i,a,u,f){if(!RD(i.precondition,a))return u;const m=i.value.clone(),v=zF(i.fieldTransforms,f,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof sd?function(i,a,u,f){if(!RD(i.precondition,a))return u;const m=zF(i.fieldTransforms,f,a),v=a.data;return v.setAll(GF(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(u=t,RD(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u);var a,u}function m$(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=LF(r.transform,i||null);null!=a&&(null===t&&(t=Ss.empty()),t.set(r.field,a))}return t||null}function HF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&dy(t,r,(i,a)=>function f$(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Sp&&r instanceof Sp||t instanceof Ap&&r instanceof Ap?dy(t.elements,r.elements,$u):t instanceof _y&&r instanceof _y?$u(t.gt,r.gt):t instanceof yy&&r instanceof yy);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class vy extends kD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sd extends kD{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function GF(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function qF(n,e,t){const r=new Map;Ut(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,f=e.data.field(a.field);r.set(a.field,h$(u,f,t[i]))}return r}function zF(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,d$(a,u,e))}return r}class wy extends kD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rR extends kD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class y${constructor(e){this.count=e}}var ki,$n;function WF(n){switch(n){default:return It();case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0}}function ZF(n){if(void 0===n)return _i("GRPC error has no .code"),Se.UNKNOWN;switch(n){case ki.OK:return Se.OK;case ki.CANCELLED:return Se.CANCELLED;case ki.UNKNOWN:return Se.UNKNOWN;case ki.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case ki.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case ki.INTERNAL:return Se.INTERNAL;case ki.UNAVAILABLE:return Se.UNAVAILABLE;case ki.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case ki.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case ki.NOT_FOUND:return Se.NOT_FOUND;case ki.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case ki.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case ki.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case ki.ABORTED:return Se.ABORTED;case ki.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case ki.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case ki.DATA_LOSS:return Se.DATA_LOSS;default:return It()}}($n=ki||(ki={}))[$n.OK=0]="OK",$n[$n.CANCELLED=1]="CANCELLED",$n[$n.UNKNOWN=2]="UNKNOWN",$n[$n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$n[$n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$n[$n.NOT_FOUND=5]="NOT_FOUND",$n[$n.ALREADY_EXISTS=6]="ALREADY_EXISTS",$n[$n.PERMISSION_DENIED=7]="PERMISSION_DENIED",$n[$n.UNAUTHENTICATED=16]="UNAUTHENTICATED",$n[$n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$n[$n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$n[$n.ABORTED=10]="ABORTED",$n[$n.OUT_OF_RANGE=11]="OUT_OF_RANGE",$n[$n.UNIMPLEMENTED=12]="UNIMPLEMENTED",$n[$n.INTERNAL=13]="INTERNAL",$n[$n.UNAVAILABLE=14]="UNAVAILABLE",$n[$n.DATA_LOSS=15]="DATA_LOSS";class Dh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bp(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return aF(this.inner)}size(){return this.innerSize}}const _$=new oi(ut.comparator);function zo(){return _$}const KF=new oi(ut.comparator);function v0(...n){let e=KF;for(const t of n)e=e.insert(t.key,t);return e}function YF(n){let e=KF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Hu(){return w0()}function QF(){return w0()}function w0(){return new Dh(n=>n.toString(),(n,e)=>n.isEqual(e))}const v$=new oi(ut.comparator),w$=new ur(ut.comparator);function Cn(...n){let e=w$;for(const t of n)e=e.add(t);return e}const b$=new ur(hn);function ND(){return b$}class b0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,E0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new b0(Ht.min(),i,ND(),zo(),Cn())}}class E0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new E0(r,t,Cn(),Cn(),Cn())}}class PD{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class JF{constructor(e,t){this.targetId=e,this.Et=t}}class XF{constructor(e,t,r=qi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class eL{constructor(){this.At=0,this.Rt=nL(),this.bt=qi.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Cn(),t=Cn(),r=Cn();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:It()}}),new E0(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=nL()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class E${constructor(e){this.$t=e,this.Bt=new Map,this.Lt=zo(),this.qt=tL(),this.Ut=new ur(hn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:It()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const a=i.target;if(TD(a))if(0===r){const u=new ut(a.path);this.Qt(t,u,Sr.newNoDocument(u,Ht.min()))}else Ut(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((a,u)=>{const f=this.Yt(u);if(f){if(a.current&&TD(f.target)){const m=new ut(f.target.path);null!==this.Lt.get(m)||this.te(u,m)||this.Qt(u,m,Sr.newNoDocument(m,e))}a.St&&(t.set(u,a.Ct()),a.xt())}});let r=Cn();this.qt.forEach((a,u)=>{let f=!0;u.forEachWhile(m=>{const v=this.Yt(m);return!v||2===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Lt.forEach((a,u)=>u.setReadTime(e));const i=new b0(e,t,this.Ut,this.Lt,r);return this.Lt=zo(),this.qt=tL(),this.Ut=new ur(hn),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new eL,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new ur(hn),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||et("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new eL),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function tL(){return new oi(ut.comparator)}function nL(){return new oi(ut.comparator)}const C$={asc:"ASCENDING",desc:"DESCENDING"},I$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D$={and:"AND",or:"OR"};class T${constructor(e,t){this.databaseId=e,this.wt=t}}function by(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rL(n,e){return n.wt?e.toBase64():e.toUint8Array()}function S$(n,e){return by(n,e.toTimestamp())}function vi(n){return Ut(!!n),Ht.fromTimestamp(function(e){const t=bh(e);return new jr(t.seconds,t.nanos)}(n))}function iR(n,e){return(t=n,new jn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function iL(n){const e=jn.fromString(n);return Ut(fL(e)),e}function C0(n,e){return iR(n.databaseId,e.path)}function Gu(n,e){const t=iL(e);if(t.get(1)!==n.databaseId.projectId)throw new Ze(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ze(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ut(oL(t))}function sR(n,e){return iR(n.databaseId,e)}function sL(n){const e=iL(n);return 4===e.length?jn.emptyPath():oL(e)}function I0(n){return new jn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oL(n){return Ut(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function aL(n,e,t){return{name:C0(n,e),fields:t.value.mapValue.fields}}function lL(n,e,t){const r=Gu(n,e.name),i=vi(e.updateTime),a=e.createTime?vi(e.createTime):Ht.min(),u=new Ss({mapValue:{fields:e.fields}}),f=Sr.newFoundDocument(r,i,a,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function D0(n,e){let t;if(e instanceof vy)t={update:aL(n,e.key,e.value)};else if(e instanceof wy)t={delete:C0(n,e.key)};else if(e instanceof sd)t={update:aL(n,e.key,e.data),updateMask:O$(e.fieldMask)};else{if(!(e instanceof rR))return It();t={verify:C0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof yy)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Sp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ap)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof _y)return{fieldPath:a.field.canonicalString(),increment:u.gt};throw It()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:S$(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:It()),t;var i}function oR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?$r.updateTime(vi(i.updateTime)):void 0!==i.exists?$r.exists(i.exists):$r.none():$r.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let f=null;"setToServerValue"in u?(Ut("REQUEST_TIME"===u.setToServerValue),f=new yy):"appendMissingElements"in u?f=new Sp(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new Ap(u.removeAllFromArray.values||[]):"increment"in u?f=new _y(a,u.increment):It();const m=ii.fromServerFormat(u.fieldPath);return new y0(m,f)}(n,i)):[];var i;if(e.update){const i=Gu(n,e.update.name),a=new Ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new qo((e.updateMask.fieldPaths||[]).map(v=>ii.fromServerFormat(v)));return new sd(i,a,u,t,r)}return new vy(i,a,t,r)}if(e.delete){const i=Gu(n,e.delete);return new wy(i,t)}if(e.verify){const i=Gu(n,e.verify);return new rR(i,t)}return It()}function uL(n,e){return{documents:[sR(n,e.path)]}}function aR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=sR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=sR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return hL(ir.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:Ey((T=v).field),direction:k$(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(v=e.limit,n.wt||u0(v)?v:{value:v});var v,f,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function cL(n){let e=sL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ut(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=function(T){const M=dL(T);return M instanceof ir&&KM(M)?M.getFilters():[M]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(T=>{return new py(Cy((M=T).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let f=null;t.limit&&(f=function(T){let M;return M="object"==typeof T?T.value:T,u0(M)?null:M}(t.limit));let m=null;var T;t.startAt&&(m=new Ih((T=t.startAt).values||[],!!T.before));let v=null;return t.endAt&&(v=function(T){return new Ih(T.values||[],!T.before)}(t.endAt)),xF(e,i,u,a,f,"F",m,v)}function dL(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Cy(e.unaryFilter.field);return On.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Cy(e.unaryFilter.field);return On.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Cy(e.unaryFilter.field);return On.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Cy(e.unaryFilter.field);return On.create(a,"!=",{nullValue:"NULL_VALUE"});default:return It()}}(n):void 0!==n.fieldFilter?On.create(Cy((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return It()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return ir.create(e.compositeFilter.filters.map(t=>dL(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return It()}}(e.compositeFilter.op))}(n):It();var e}function k$(n){return C$[n]}function N$(n){return I$[n]}function P$(n){return D$[n]}function Ey(n){return{fieldPath:n.canonicalString()}}function Cy(n){return ii.fromServerFormat(n.fieldPath)}function hL(n){return n instanceof On?function(e){if("=="===e.op){if(hF(e.value))return{unaryFilter:{field:Ey(e.field),op:"IS_NAN"}};if(dF(e.value))return{unaryFilter:{field:Ey(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hF(e.value))return{unaryFilter:{field:Ey(e.field),op:"IS_NOT_NAN"}};if(dF(e.value))return{unaryFilter:{field:Ey(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ey(e.field),op:N$(e.op),value:e.value}}}(n):n instanceof ir?function(e){const t=e.getFilters().map(r=>hL(r));return 1===t.length?t[0]:{compositeFilter:{op:P$(e.op),filters:t}}}(n):It()}function O$(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function po(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pL(e)),e=F$(n.get(t),e);return pL(e)}function F$(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function pL(n){return n+"\x01\x01"}function qu(n){const e=n.length;if(Ut(e>=2),2===e)return Ut("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),jn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&It(),n.charAt(u+1)){case"\x01":const f=n.substring(a,u);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:It()}a=u+2}return new jn(r)}const gL=["userId","batchId"];function OD(n,e){return[n,po(e)]}function mL(n,e,t){return[n,po(e),t]}const L$={},U$=["prefixPath","collectionGroup","readTime","documentId"],V$=["prefixPath","collectionGroup","documentId"],B$=["collectionGroup","readTime","prefixPath","documentId"],j$=["canonicalId","targetId"],$$=["targetId","path"],H$=["path","targetId"],G$=["collectionId","parent"],q$=["indexId","uid"],z$=["uid","sequenceNumber"],W$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Z$=["indexId","uid","orderedDocumentKey"],K$=["userId","collectionPath","documentId"],Y$=["userId","collectionPath","largestBatchId"],Q$=["userId","collectionGroup","largestBatchId"],yL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],J$=[...yL,"documentOverlays"],_L=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vL=_L,X$=[...vL,"indexConfiguration","indexState","indexEntries"];class lR extends iF{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function as(n,e){const t=dt(n);return Kl.M(t.se,e)}class uR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&g$(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=QF();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=t.has(i.key)?null:f;const m=$F(u,f);null!==m&&r.set(i.key,m),u.isValidDocument()||u.convertToNoDocument(Ht.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Cn())}isEqual(e){return this.batchId===e.batchId&&dy(this.mutations,e.mutations,(t,r)=>HF(t,r))&&dy(this.baseMutations,e.baseMutations,(t,r)=>HF(t,r))}}class cR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ut(e.mutations.length===r.length);let i=v$;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new cR(e,t,r,i)}}class dR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Th{constructor(e,t,r,i,a=Ht.min(),u=Ht.min(),f=qi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f}withSequenceNumber(e){return new Th(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Th(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Th(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wL{constructor(e){this.ie=e}}function bL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:FD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:C0(i=n.ie,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:by(i,a.version.toTimestamp()),createTime:by(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xp(e.version)};else{if(!e.isUnknownDocument())return It();r.unknownDocument={path:t.path.toArray(),version:xp(e.version)}}var i,a;return r}function FD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mp(n){const e=new jr(n.seconds,n.nanoseconds);return Ht.fromTimestamp(e)}function Rp(n,e){const t=(e.baseMutations||[]).map(a=>oR(n.ie,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>oR(n.ie,a)),i=jr.fromMillis(e.localWriteTimeMs);return new uR(e.batchId,i,t,r)}function T0(n){const e=Mp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Mp(n.lastLimboFreeSnapshotVersion):Ht.min();let r;var i;return void 0!==n.query.documents?(Ut(1===(i=n.query).documents.length),r=fo(my(sL(i.documents[0])))):r=fo(cL(n.query)),new Th(r,n.targetId,0,n.lastListenSequenceNumber,e,t,qi.fromBase64String(n.resumeToken))}function EL(n,e){const t=xp(e.snapshotVersion),r=xp(e.lastLimboFreeSnapshotVersion);let i;i=TD(e.target)?uL(n.ie,e.target):aR(n.ie,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Dp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function hR(n){const e=cL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?xD(e,e.limit,"L"):e}function fR(n,e){return new dR(e.largestBatchId,oR(n.ie,e.overlayMutation))}function CL(n,e){const t=e.path.lastSegment();return[n,po(e.path.popLast()),t]}function IL(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:xp(r.readTime),documentKey:po(r.documentKey.path),largestBatchId:r.largestBatchId}}class tH{getBundleMetadata(e,t){return DL(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Mp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return DL(e).put({bundleId:(r=t).id,createTime:xp(vi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return TL(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:hR(i.bundledQuery),readTime:Mp(i.readTime)};var i})}saveNamedQuery(e,t){return TL(e).put({name:(r=t).name,readTime:xp(vi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function DL(n){return as(n,"bundles")}function TL(n){return as(n,"namedQueries")}class LD{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new LD(e,t.uid||"")}getOverlay(e,t){return S0(e).get(CL(this.userId,t)).next(r=>r?fR(this.yt,r):null)}getOverlays(e,t){const r=Hu();return Ee.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const f=new dR(t,u);i.push(this.oe(e,f))}),Ee.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(po(u.getCollectionPath())));const a=[];return i.forEach(u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(S0(e).Y("collectionPathOverlayIndex",f))}),Ee.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Hu(),a=po(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return S0(e).W("collectionPathOverlayIndex",u).next(f=>{for(const m of f){const v=fR(this.yt,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Hu();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return S0(e).Z({index:"collectionGroupOverlayIndex",range:f},(m,v,T)=>{const M=fR(this.yt,v);a.size()<i||M.largestBatchId===u?(a.set(M.getKey(),M),u=M.largestBatchId):T.done()}).next(()=>a)}oe(e,t){return S0(e).put(function(r,i,a){const[u,f,m]=CL(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:D0(r.ie,a.mutation)}}(this.yt,this.userId,t))}}function S0(n){return as(n,"documentOverlays")}class kp{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(si(e.integerValue));else if("doubleValue"in e){const r=si(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),c0(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Ep(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?fF(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):It()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),ut.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function nH(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function SL(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=nH(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}kp.Ie=new kp;class rH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=SL(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=SL(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class iH{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class sH{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class A0{constructor(){this.$e=new rH,this.Be=new iH(this.$e),this.Le=new sH(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Np{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Np(this.indexId,this.documentKey,this.arrayValue,r)}}function Sh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=AL(n.arrayValue,e.arrayValue),0!==t?t:(t=AL(n.directionalValue,e.directionalValue),0!==t?t:ut.comparator(n.documentKey,e.documentKey)))}function AL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class oH{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){Ut(e.collectionGroup===this.collectionId);const t=jM(e);if(void 0!==t&&!this.We(t))return!1;const r=vp(e);let i=0,a=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const u=r[i];if(!this.ze(this.Qe,u)||!this.He(this.Ke[a++],u))return!1;++i}for(;i<r.length;++i)if(a>=this.Ke.length||!this.He(this.Ke[a++],r[i]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function xL(n){var e,t;if(Ut(n instanceof On||n instanceof ir),n instanceof On){if(n instanceof IF){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>On.create(n.field,"==",a)))||[];return ir.create(i,"or")}return n}const r=n.filters.map(i=>xL(i));return ir.create(r,n.op)}function aH(n){if(0===n.getFilters().length)return[];const e=mR(xL(n));return Ut(ML(e)),pR(e)||gR(e)?[e]:e.getFilters()}function pR(n){return n instanceof On}function gR(n){return n instanceof ir&&KM(n)}function ML(n){return pR(n)||gR(n)||function(e){if(e instanceof ir&&ZM(e)){for(const t of e.getFilters())if(!pR(t)&&!gR(t))return!1;return!0}return!1}(n)}function mR(n){if(Ut(n instanceof On||n instanceof ir),n instanceof On)return n;if(1===n.filters.length)return mR(n.filters[0]);const e=n.filters.map(r=>mR(r));let t=ir.create(e,n.op);return t=UD(t),ML(t)?t:(Ut(t instanceof ir),Ut(fy(t)),Ut(t.filters.length>1),t.filters.reduce((r,i)=>yR(r,i)))}function yR(n,e){let t;return Ut(n instanceof On||n instanceof ir),Ut(e instanceof On||e instanceof ir),t=n instanceof On?e instanceof On?ir.create([n,e],"and"):RL(n,e):e instanceof On?RL(e,n):function(r,i){if(Ut(r.filters.length>0&&i.filters.length>0),fy(r)&&fy(i))return bF(r,i.getFilters());const a=ZM(r)?r:i,u=ZM(r)?i:r,f=a.filters.map(m=>yR(m,u));return ir.create(f,"or")}(n,e),UD(t)}function RL(n,e){if(fy(e))return bF(e,n.getFilters());{const t=e.filters.map(r=>yR(n,r));return ir.create(t,"or")}}function UD(n){if(Ut(n instanceof On||n instanceof ir),n instanceof On)return n;const e=n.getFilters();if(1===e.length)return UD(e[0]);if(vF(n))return n;const t=e.map(i=>UD(i)),r=[];return t.forEach(i=>{i instanceof On?r.push(i):i instanceof ir&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:ir.create(r,n.op)}class lH{constructor(){this.Je=new _R}addToCollectionParentIndex(e,t){return this.Je.add(t),Ee.resolve()}getCollectionParents(e,t){return Ee.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return Ee.resolve()}deleteFieldIndex(e,t){return Ee.resolve()}getDocumentsMatchingTarget(e,t){return Ee.resolve(null)}getIndexType(e,t){return Ee.resolve(0)}getFieldIndexes(e,t){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,t){return Ee.resolve(_a.min())}getMinOffsetFromCollectionGroup(e,t){return Ee.resolve(_a.min())}updateCollectionGroup(e,t,r){return Ee.resolve()}updateIndexEntries(e,t){return Ee.resolve()}}class _R{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ur(jn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ur(jn.comparator)).toArray()}}const VD=new Uint8Array(0);class uH{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new _R,this.Xe=new Dh(r=>Dp(r),(r,i)=>g0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const a={collectionId:r,parent:po(i)};return kL(e).put(a)}return Ee.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[eF(t),""],!1,!0);return kL(e).W(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(qu(u.parent))}return r})}addFieldIndex(e,t){const r=BD(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var u;delete i.indexId;const a=r.add(i);if(t.indexState){const u=M0(e);return a.next(f=>{u.put(IL(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=BD(e),i=M0(e),a=x0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=x0(e);let i=!0;const a=new Map;return Ee.forEach(this.Ze(t),u=>this.tn(e,u).next(f=>{i&&(i=!!f),a.set(u,f)})).next(()=>{if(i){let u=Cn();const f=[];return Ee.forEach(a,(m,v)=>{var T;et("IndexedDbIndexManager",`Using index ${T=m,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(wt=>`${wt.fieldPath}:${wt.kind}`).join(",")}`} to execute ${Dp(t)}`);const M=function(wt,kt){const Zt=jM(kt);if(void 0===Zt)return null;for(const ln of SD(wt,Zt.fieldPath))switch(ln.op){case"array-contains-any":return ln.value.arrayValue.values||[];case"array-contains":return[ln.value]}return null}(v,m),L=function(wt,kt){const Zt=new Map;for(const ln of vp(kt))for(const Yr of SD(wt,ln.fieldPath))switch(Yr.op){case"==":case"in":Zt.set(ln.fieldPath.canonicalString(),Yr.value);break;case"not-in":case"!=":return Zt.set(ln.fieldPath.canonicalString(),Yr.value),Array.from(Zt.values())}return null}(v,m),W=function(wt,kt){const Zt=[];let ln=!0;for(const Yr of vp(kt)){const Ql=0===Yr.kind?SF(wt,Yr.fieldPath,wt.startAt):AF(wt,Yr.fieldPath,wt.startAt);Zt.push(Ql.value),ln&&(ln=Ql.inclusive)}return new Ih(Zt,ln)}(v,m),X=function(wt,kt){const Zt=[];let ln=!0;for(const Yr of vp(kt)){const Ql=0===Yr.kind?AF(wt,Yr.fieldPath,wt.endAt):SF(wt,Yr.fieldPath,wt.endAt);Zt.push(Ql.value),ln&&(ln=Ql.inclusive)}return new Ih(Zt,ln)}(v,m),De=this.en(m,v,W),ke=this.en(m,v,X),Ft=this.nn(m,v,L),Vt=this.sn(m.indexId,M,De,W.inclusive,ke,X.inclusive,Ft);return Ee.forEach(Vt,wt=>r.J(wt,t.limit).next(kt=>{kt.forEach(Zt=>{const ln=ut.fromSegments(Zt.documentKey);u.has(ln)||(u=u.add(ln),f.push(ln))})}))}).next(()=>f)}return Ee.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:aH(ir.create(e.filters,"and")).map(r=>QM(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,a,u,f){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),T=[];for(let M=0;M<m;++M){const L=t?this.rn(t[M/v]):VD,W=this.on(e,L,r[M%v],i),X=this.un(e,L,a[M%v],u),De=f.map(ke=>this.on(e,L,ke,!0));T.push(...this.createRange(W,X,De))}return T}on(e,t,r,i){const a=new Np(e,ut.empty(),t,r);return i?a:a.Ue()}un(e,t,r,i){const a=new Np(e,ut.empty(),t,r);return i?a.Ue():a}tn(e,t){const r=new oH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const f of a)r.je(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u})}getIndexType(e,t){let r=2;const i=this.Ze(t);return Ee.forEach(i,a=>this.tn(e,a).next(u=>{u?0!==r&&u.fields.length<function(f){let m=new ur(ii.comparator),v=!1;for(const T of f.filters)for(const M of T.getFlattenedFilters())M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?v=!0:m=m.add(M.field));for(const T of f.orderBy)T.field.isKeyField()||(m=m.add(T.field));return m.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new A0;for(const i of vp(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.qe(i.kind);kp.Ie.ue(a,u)}return r.Fe()}rn(e){const t=new A0;return kp.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new A0;return kp.Ie.ue(Ip(this.databaseId,t),r.qe(function(i){const a=vp(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new A0);let a=0;for(const u of vp(e)){const f=r[a++];for(const m of i)if(this.hn(t,u.fieldPath)&&f0(f))i=this.ln(i,u,f);else{const v=m.qe(u.kind);kp.Ie.ue(f,v)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const f of i){const m=new A0;m.seed(f.Fe()),kp.Ie.ue(u,m.qe(t.kind)),a.push(m)}return a}hn(e,t){return!!e.filters.find(r=>r instanceof On&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=BD(e),i=M0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const u=[];return Ee.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{u.push(function(v,T){const M=T?new a0(T.sequenceNumber,new _a(Mp(T.readTime),new ut(qu(T.documentKey)),T.largestBatchId)):a0.empty(),L=v.fields.map(([W,X])=>new bD(ii.fromServerFormat(W),X));return new wD(v.indexId,v.collectionGroup,L,M)}(f,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:hn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=BD(e),a=M0(e);return this.dn(e).next(u=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>Ee.forEach(f,m=>a.put(IL(m.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return Ee.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?Ee.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),Ee.forEach(f,m=>this._n(e,i,m).next(v=>{const T=this.wn(a,m);return v.isEqual(T)?Ee.resolve():this.mn(e,a,m,v,T)}))))})}gn(e,t,r,i){return x0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return x0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=x0(e);let a=new ur(Sh);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(u,f)=>{a=a.add(new Np(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}wn(e,t){let r=new ur(Sh);const i=this.cn(t,e);if(null==i)return r;const a=jM(t);if(null!=a){const u=e.data.field(a.fieldPath);if(f0(u))for(const f of u.arrayValue.values||[])r=r.add(new Np(t.indexId,e.key,this.rn(f),i))}else r=r.add(new Np(t.indexId,e.key,VD,i));return r}mn(e,t,r,i,a){et("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(f,m,v,T,M){const L=f.getIterator(),W=m.getIterator();let X=gy(L),De=gy(W);for(;X||De;){let ke=!1,Ft=!1;if(X&&De){const Vt=v(X,De);Vt<0?Ft=!0:Vt>0&&(ke=!0)}else null!=X?Ft=!0:ke=!0;ke?(T(De),De=gy(W)):Ft?(M(X),X=gy(L)):(X=gy(L),De=gy(W))}}(i,a,Sh,f=>{u.push(this.gn(e,t,r,f))},f=>{u.push(this.yn(e,t,r,f))}),Ee.waitFor(u)}dn(e){let t=1;return M0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,f)=>Sh(u,f)).filter((u,f,m)=>!f||0!==Sh(u,m[f-1]));const i=[];i.push(e);for(const u of r){const f=Sh(u,e),m=Sh(u,t);if(0===f)i[0]=e.Ue();else if(f>0&&m<0)i.push(u),i.push(u.Ue());else if(m>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2){if(this.pn(i[u],i[u+1]))return[];a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,VD,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,VD,[]]))}return a}pn(e,t){return Sh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(NL)}getMinOffset(e,t){return Ee.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||It())).next(NL)}}function kL(n){return as(n,"collectionParents")}function x0(n){return as(n,"indexEntries")}function BD(n){return as(n,"indexConfiguration")}function M0(n){return as(n,"indexState")}function NL(n){Ut(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;$M(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new _a(e.readTime,e.documentKey,t)}const PL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Wo(e,Wo.DEFAULT_COLLECTION_PERCENTILE,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function OL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let f=0;const m=r.Z({range:u},(T,M,L)=>(f++,L.delete()));a.push(m.next(()=>{Ut(1===f)}));const v=[];for(const T of t.mutations){const M=mL(e,T.key.path,t.batchId);a.push(i.delete(M)),v.push(T.key)}return Ee.waitFor(a).next(()=>v)}function jD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw It();e=n.noDocument}return JSON.stringify(e).length}Wo.DEFAULT_COLLECTION_PERCENTILE=10,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wo.DEFAULT=new Wo(41943040,Wo.DEFAULT_COLLECTION_PERCENTILE,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wo.DISABLED=new Wo(-1,0,0);class $D{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){Ut(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new $D(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ah(e).Z({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Iy(e),u=Ah(e);return u.add({}).next(f=>{Ut("number"==typeof f);const m=new uR(f,t,r,i),v=function(L,W,X){const De=X.baseMutations.map(Ft=>D0(L.ie,Ft)),ke=X.mutations.map(Ft=>D0(L.ie,Ft));return{userId:W,batchId:X.batchId,localWriteTimeMs:X.localWriteTime.toMillis(),baseMutations:De,mutations:ke}}(this.yt,this.userId,m),T=[];let M=new ur((L,W)=>hn(L.canonicalString(),W.canonicalString()));for(const L of i){const W=mL(this.userId,L.key.path,f);M=M.add(L.key.path.popLast()),T.push(u.put(v)),T.push(a.put(W,L$))}return M.forEach(L=>{T.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.In[f]=m.keys()}),Ee.waitFor(T).next(()=>m)})}lookupMutationBatch(e,t){return Ah(e).get(t).next(r=>r?(Ut(r.userId===this.userId),Rp(this.yt,r)):null)}Tn(e,t){return this.In[t]?Ee.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ah(e).Z({index:"userMutationsIndex",range:i},(u,f,m)=>{f.userId===this.userId&&(Ut(f.batchId>=r),a=Rp(this.yt,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ah(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ah(e).W("userMutationsIndex",t).next(r=>r.map(i=>Rp(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=OD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Iy(e).Z({range:i},(u,f,m)=>{const[v,T,M]=u,L=qu(T);if(v===this.userId&&t.path.isEqual(L))return Ah(e).get(M).next(W=>{if(!W)throw It();Ut(W.userId===this.userId),a.push(Rp(this.yt,W))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ur(hn);const i=[];return t.forEach(a=>{const u=OD(this.userId,a.path),f=IDBKeyRange.lowerBound(u),m=Iy(e).Z({range:f},(v,T,M)=>{const[L,W,X]=v,De=qu(W);L===this.userId&&a.path.isEqual(De)?r=r.add(X):M.done()});i.push(m)}),Ee.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=OD(this.userId,r),u=IDBKeyRange.lowerBound(a);let f=new ur(hn);return Iy(e).Z({range:u},(m,v,T)=>{const[M,L,W]=m,X=qu(L);M===this.userId&&r.isPrefixOf(X)?X.length===i&&(f=f.add(W)):T.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Ah(e).get(a).next(u=>{if(null===u)throw It();Ut(u.userId===this.userId),r.push(Rp(this.yt,u))}))}),Ee.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return OL(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Ee.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ee.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Iy(e).Z({range:r},(a,u,f)=>{if(a[0]===this.userId){const m=qu(a[1]);i.push(m)}else f.done()}).next(()=>{Ut(0===i.length)})})}containsKey(e,t){return FL(e,this.userId,t)}Rn(e){return LL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function FL(n,e,t){const r=OD(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return Iy(n).Z({range:a,X:!0},(f,m,v)=>{const[T,M,L]=f;T===e&&M===i&&(u=!0),v.done()}).next(()=>u)}function Ah(n){return as(n,"mutations")}function Iy(n){return as(n,"documentMutations")}function LL(n){return as(n,"mutationQueues")}class Pp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Pp(0)}static vn(){return new Pp(-1)}}class cH{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Pp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ht.fromTimestamp(new jr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Dy(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ut(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Dy(e).Z((u,f)=>{const m=T0(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>Ee.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Dy(e).Z((r,i)=>{const a=T0(i);t(a)})}Vn(e){return UL(e).get("targetGlobalKey").next(t=>(Ut(null!==t),t))}Sn(e,t){return UL(e).put("targetGlobalKey",t)}Dn(e,t){return Dy(e).put(EL(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Dp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Dy(e).Z({range:i,index:"queryTargetsIndex"},(u,f,m)=>{const v=T0(f);g0(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=xh(e);return t.forEach(u=>{const f=po(u.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,u))}),Ee.waitFor(i)}removeMatchingKeys(e,t,r){const i=xh(e);return Ee.forEach(t,a=>{const u=po(a.path);return Ee.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=xh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=xh(e);let a=Cn();return i.Z({range:r,X:!0},(u,f,m)=>{const v=qu(u[1]),T=new ut(v);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=po(t.path),i=IDBKeyRange.bound([r],[eF(r)],!1,!0);let a=0;return xh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([u,f],m,v)=>{0!==u&&(a++,v.done())}).next(()=>a>0)}ne(e,t){return Dy(e).get(t).next(r=>r?T0(r):null)}}function Dy(n){return as(n,"targets")}function UL(n){return as(n,"targetGlobal")}function xh(n){return as(n,"targetDocuments")}function VL([n,e],[t,r]){const i=hn(n,t);return 0===i?hn(e,r):i}class dH{constructor(e){this.xn=e,this.buffer=new ur(VL),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();VL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hH{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;et("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,le.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){vh(r)?et("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield _h(r)}yield t.Fn(3e5)}))}}class fH{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ee.resolve(va.at);const r=new dH(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector","Garbage collection skipped; disabled"),Ee.resolve(PL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PL):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,a,u,f,m,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,u=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,f=Date.now(),this.removeTargets(e,r,t))).next(M=>(a=M,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(v=Date.now(),VM()<=fi.in.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-T}ms\n\tDetermined least recently used ${i} in `+(f-u)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${M} documents in `+(v-m)+`ms\nTotal Duration: ${v-T}ms`),Ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:M})))}}class pH{constructor(e,t){this.db=e,this.garbageCollector=new fH(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return HD(e,r)}removeReference(e,t,r){return HD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return HD(e,t)}Gn(e,t){return function(r,i){let a=!1;return LL(r).tt(u=>FL(r,u,i).next(f=>(f&&(a=!0),Ee.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(u,f)=>{if(f<=t){const m=this.Gn(e,u).next(v=>{if(!v)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Ht.min()),xh(e).delete([0,po(u.path)])))});i.push(m)}}).next(()=>Ee.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return HD(e,t)}Kn(e,t){const r=xh(e);let i,a=va.at;return r.Z({index:"documentTargetsIndex"},([u,f],{path:m,sequenceNumber:v})=>{0===u?(a!==va.at&&t(new ut(qu(i)),a),a=v,i=m):a=va.at}).next(()=>{a!==va.at&&t(new ut(qu(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function HD(n,e){return xh(n).put((r=n.currentSequenceNumber,{targetId:0,path:po(e.path),sequenceNumber:r}));var r}class BL{constructor(){this.changes=new Dh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gH{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Op(e).put(r)}removeEntry(e,t,r){return Op(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],FD(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Sr.newInvalidDocument(t);return Op(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(R0(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Sr.newInvalidDocument(t)};return Op(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(R0(t))},(i,a)=>{r={document:this.jn(t,a),size:jD(a)}}).next(()=>r)}getEntries(e,t){let r=zo();return this.zn(e,t,(i,a)=>{const u=this.jn(i,a);r=r.insert(i,u)}).next(()=>r)}Hn(e,t){let r=zo(),i=new oi(ut.comparator);return this.zn(e,t,(a,u)=>{const f=this.jn(a,u);r=r.insert(a,f),i=i.insert(a,jD(u))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return Ee.resolve();let i=new ur(GL);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(R0(i.first()),R0(i.last())),u=i.getIterator();let f=u.getNext();return Op(e).Z({index:"documentKeyIndex",range:a},(m,v,T)=>{const M=ut.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&GL(f,M)<0;)r(f,null),f=u.getNext();f&&f.isEqual(M)&&(r(f,v),f=u.hasNext()?u.getNext():null),f?T.j(R0(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),FD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Op(e).W(IDBKeyRange.bound(i,a,!0)).next(u=>{let f=zo();for(const m of u){const v=this.jn(ut.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);f=f.insert(v.key,v)}return f})}getAllFromCollectionGroup(e,t,r,i){let a=zo();const u=HL(t,r),f=HL(t,_a.max());return Op(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,f,!0)},(m,v,T)=>{const M=this.jn(ut.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(M.key,M),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new mH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $L(e).get("remoteDocumentGlobalKey").next(t=>(Ut(!!t),t))}Qn(e,t){return $L(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function eH(n,e){let t;if(e.document)t=lL(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ut.fromSegments(e.noDocument.path),i=Mp(e.noDocument.readTime);t=Sr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return It();{const r=ut.fromSegments(e.unknownDocument.path),i=Mp(e.unknownDocument.version);t=Sr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new jr(r[0],r[1]);return Ht.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(Ht.min()))return r}return Sr.newInvalidDocument(e)}}function jL(n){return new gH(n)}class mH extends BL{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Dh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new ur((a,u)=>hn(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const f=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,f.readTime)),u.isValidDocument()){const m=bL(this.Yn.yt,u);i=i.add(a.path.popLast());const v=jD(m);r+=v-f.size,t.push(this.Yn.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=bL(this.Yn.yt,u.convertToNoDocument(Ht.min()));t.push(this.Yn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),Ee.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,u)=>{this.Xn.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function $L(n){return as(n,"remoteDocumentGlobal")}function Op(n){return as(n,"remoteDocumentsV14")}function R0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function HL(n,e){const t=e.documentKey.path.toArray();return[n,FD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function GL(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=hn(t[a],r[a]),i)return i;return i=hn(t.length,r.length),i||(i=hn(t[t.length-2],r[r.length-2]),i||hn(t[t.length-1],r[r.length-1]))}class yH{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class qL{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&_0(r.mutation,i,qo.empty(),jr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Cn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Cn()){const i=Hu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let u=v0();return a.forEach((f,m)=>{u=u.insert(f,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Hu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Cn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,r,i){let a=zo();const u=w0(),f=w0();return t.forEach((m,v)=>{const T=r.get(v.key);i.has(v.key)&&(void 0===T||T.mutation instanceof sd)?a=a.insert(v.key,v):void 0!==T?(u.set(v.key,T.mutation.getFieldMask()),_0(T.mutation,v,T.mutation.getFieldMask(),jr.now())):u.set(v.key,qo.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,T)=>u.set(v,T)),t.forEach((v,T)=>{var M;return f.set(v,new yH(T,null!==(M=u.get(v))&&void 0!==M?M:null))}),f))}recalculateAndSaveOverlays(e,t){const r=w0();let i=new oi((u,f)=>u-f),a=Cn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let T=r.get(m)||qo.empty();T=f.applyToLocalView(v,T),r.set(m,T);const M=(i.get(f.batchId)||Cn()).add(m);i=i.insert(f.batchId,M)})}).next(()=>{const u=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,T=m.value,M=QF();T.forEach(L=>{if(!a.has(L)){const W=$F(t.get(L),r.get(L));null!==W&&M.set(L,W),a=a.add(L)}}),u.push(this.documentOverlayCache.saveOverlays(e,v,M))}return Ee.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ut.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):XM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):Ee.resolve(Hu());let f=-1,m=a;return u.next(v=>Ee.forEach(v,(T,M)=>(f<M.largestBatchId&&(f=M.largestBatchId),a.get(T)?Ee.resolve():this.remoteDocumentCache.getEntry(e,T).next(L=>{m=m.insert(T,L)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,Cn())).next(T=>({batchId:f,changes:YF(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ut(t)).next(r=>{let i=v0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=v0();return this.indexManager.getCollectionParents(e,i).next(u=>Ee.forEach(u,f=>{const m=(v=t,T=f.child(i),new id(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,T;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((T,M)=>{a=a.insert(T,M)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((f,m)=>{const v=m.getKey();null===i.get(v)&&(i=i.insert(v,Sr.newInvalidDocument(v)))});let u=v0();return i.forEach((f,m)=>{const v=a.get(f);void 0!==v&&_0(v.mutation,m,qo.empty(),jr.now()),nR(t,m)&&(u=u.insert(f,m))}),u})}}class _H{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Ee.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:vi(r.createTime)}),Ee.resolve()}getNamedQuery(e,t){return Ee.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:hR(r.bundledQuery),readTime:vi(r.readTime)}),Ee.resolve();var r}}class vH{constructor(){this.overlays=new oi(ut.comparator),this.es=new Map}getOverlay(e,t){return Ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Hu();return Ee.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.oe(e,t,a)}),Ee.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),Ee.resolve()}getOverlaysForCollection(e,t,r){const i=Hu(),a=t.length+1,u=new ut(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return Ee.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new oi((v,T)=>v-T);const u=this.overlays.getIterator();for(;u.hasNext();){const v=u.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let T=a.get(v.largestBatchId);null===T&&(T=Hu(),a=a.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const f=Hu(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,T)=>f.set(v,T)),!(f.size()>=i)););return Ee.resolve(f)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new dR(t,r));let a=this.es.get(t);void 0===a&&(a=Cn(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class vR{constructor(){this.ns=new ur(ls.ss),this.rs=new ur(ls.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ls(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ls(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new ut(new jn([])),r=new ls(t,e),i=new ls(t,e+1),a=[];return this.rs.forEachInRange([r,i],u=>{this.cs(u),a.push(u.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ut(new jn([])),r=new ls(t,e),i=new ls(t,e+1);let a=Cn();return this.rs.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new ls(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ls{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ut.comparator(e.key,t.key)||hn(e._s,t._s)}static os(e,t){return hn(e._s,t._s)||ut.comparator(e.key,t.key)}}class wH{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ur(ls.ss)}checkEmpty(e){return Ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const u=new uR(a,t,r,i);this.mutationQueue.push(u);for(const f of i)this.gs=this.gs.add(new ls(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Ee.resolve(u)}lookupMutationBatch(e,t){return Ee.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return Ee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ls(t,0),i=new ls(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],u=>{const f=this.ys(u._s);a.push(f)}),Ee.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ur(hn);return t.forEach(i=>{const a=new ls(i,0),u=new ls(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,u],f=>{r=r.add(f._s)})}),Ee.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ut.isDocumentKey(a)||(a=a.child(""));const u=new ls(new ut(a),0);let f=new ur(hn);return this.gs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m._s)),!0)},u),Ee.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ut(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return Ee.forEach(t.mutations,i=>{const a=new ls(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ls(t,0),i=this.gs.firstAfterOrEqual(r);return Ee.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Ee.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class bH{constructor(e){this.Es=e,this.docs=new oi(ut.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ee.resolve(r?r.document.mutableCopy():Sr.newInvalidDocument(t))}getEntries(e,t){let r=zo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Sr.newInvalidDocument(i))}),Ee.resolve(r)}getAllFromCollection(e,t,r){let i=zo();const a=new ut(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:f,value:{document:m}}=u.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||$M(nF(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return Ee.resolve(i)}getAllFromCollectionGroup(e,t,r,i){It()}As(e,t){return Ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new EH(this)}getSize(e){return Ee.resolve(this.size)}}class EH extends BL{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),Ee.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class CH{constructor(e){this.persistence=e,this.Rs=new Dh(t=>Dp(t),g0),this.lastRemoteSnapshotVersion=Ht.min(),this.highestTargetId=0,this.bs=0,this.Ps=new vR,this.targetCount=0,this.vs=Pp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),Ee.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Pp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Ee.resolve()}updateTargetData(e,t){return this.Dn(t),Ee.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((u,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),Ee.waitFor(a).next(()=>i)}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return Ee.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),Ee.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),Ee.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return Ee.resolve(r)}containsKey(e,t){return Ee.resolve(this.Ps.containsKey(t))}}class zL{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new va(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new CH(this),this.indexManager=new lH,this.remoteDocumentCache=new bH(r=>this.referenceDelegate.xs(r)),this.yt=new wL(t),this.Ns=new _H(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vH,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new wH(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){et("MemoryPersistence","Starting transaction:",e);const i=new IH(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return Ee.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class IH extends iF{constructor(e){super(),this.currentSequenceNumber=e}}class GD{constructor(e){this.persistence=e,this.Fs=new vR,this.$s=null}static Bs(e){return new GD(e)}get Ls(){if(this.$s)return this.$s;throw It()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),Ee.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),Ee.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Ee.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.Ls,r=>{const i=ut.fromPath(r);return this.qs(e,i).next(a=>{a||t.removeEntry(i,Ht.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return Ee.or([()=>Ee.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class DH{constructor(e){this.yt=e}$(e,t,r,i){const a=new ED("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gL,{unique:!0}),f.createObjectStore("documentMutations"),WL(e),function(f){f.createObjectStore("remoteDocuments")}(e));let u=Ee.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),WL(e)),u=u.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ht.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(f,m){return m.store("mutations").W().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gL,{unique:!0});const T=m.store("mutations"),M=v.map(L=>T.put(L));return Ee.waitFor(M)})}(e,a))),u=u.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Us(a))),r<6&&i>=6&&(u=u.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(u=u.next(()=>this.Gs(a))),r<8&&i>=8&&(u=u.next(()=>this.Qs(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.js(a))),r<11&&i>=11&&(u=u.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:K$});m.createIndex("collectionPathOverlayIndex",Y$,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",Q$,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:U$});m.createIndex("documentKeyIndex",V$),m.createIndex("collectionGroupIndex",B$)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.zs(e,a))),r<15&&i>=15&&(u=u.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:q$}).createIndex("sequenceNumberIndex",z$,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:W$}).createIndex("documentKeyIndex",Z$,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=jD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>Ee.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(f=>Ee.forEach(f,m=>{Ut(m.userId===a.userId);const v=Rp(this.yt,m);return OL(e,a.userId,v).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((u,f)=>{const m=new jn(u),v=[0,po(m)];a.push(t.get(v).next(T=>T?Ee.resolve():t.put({targetId:0,path:po(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Ee.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:G$});const r=t.store("collectionParents"),i=new _R,a=u=>{if(i.add(u)){const f=u.lastSegment(),m=u.popLast();return r.put({collectionId:f,parent:po(m)})}};return t.store("remoteDocuments").Z({X:!0},(u,f)=>{const m=new jn(u);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,f,m],v)=>{const T=qu(f);return a(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=T0(i),u=EL(this.yt,a);return t.put(u)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,u)=>{const f=t.store("remoteDocumentsV14"),m=(v=u,v.document?new ut(jn.fromString(v.document.name).popFirst(5)):v.noDocument?ut.fromSegments(v.noDocument.path):v.unknownDocument?ut.fromSegments(v.unknownDocument.path):It()).path.toArray();var v;const T={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(f.put(T))}).next(()=>Ee.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=jL(this.yt),a=new zL(GD.Bs,this.yt.ie);return r.W().next(u=>{const f=new Map;return u.forEach(m=>{var v;let T=null!==(v=f.get(m.userId))&&void 0!==v?v:Cn();Rp(this.yt,m).keys().forEach(M=>T=T.add(M)),f.set(m.userId,T)}),Ee.forEach(f,(m,v)=>{const T=new os(v),M=LD.re(this.yt,T),L=a.getIndexManager(T),W=$D.re(T,this.yt,L,a.referenceDelegate);return new qL(i,W,M,L).recalculateAndSaveOverlaysForDocumentKeys(new lR(t,va.at),m).next()})})}}function WL(n){n.createObjectStore("targetDocuments",{keyPath:$$}).createIndex("documentTargetsIndex",H$,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",j$,{unique:!0}),n.createObjectStore("targetGlobal")}const wR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class bR{constructor(e,t,r,i,a,u,f,m,v,T,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=u,this.document=f,this.Js=v,this.Ys=T,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=L=>Promise.resolve(),!bR.C())throw new Ze(Se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pH(this,i),this.ii=t+"main",this.yt=new wL(m),this.ri=new Kl(this.ii,this.Xs,new DH(this.yt)),this.Cs=new cH(this.referenceDelegate,this.yt),this.remoteDocumentCache=jL(this.yt),this.Ns=new tH,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&_i("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ze(Se.FAILED_PRECONDITION,wR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new va(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,le.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,le.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,le.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(vh(e))return et("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return et("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return k0(e).get("owner").next(t=>Ee.resolve(this.mi(t)))}gi(e){return qD(e).delete(this.clientId)}yi(){var e=this;return(0,le.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=as(r,"clientMetadata");return i.W().next(a=>{const u=e.Ii(a,18e5),f=a.filter(m=>-1===u.indexOf(m));return Ee.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Ee.resolve(!0):k0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ze(Se.FAILED_PRECONDITION,wR);return!1}}return!(!this.networkEnabled||!this.inForeground)||qD(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&et("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,le.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new lR(t,va.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>qD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return $D.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new uH(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return LD.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){et("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(u=this.Xs)?X$:14===u?vL:13===u?_L:12===u?J$:11===u?yL:void It();var u;let f;return this.ri.runTransaction(e,i,a,m=>(f=new lR(m,this.Ss?this.Ss.next():va.at),"readwrite-primary"===t?this.fi(f).next(v=>!!v||this.di(f)).next(v=>{if(!v)throw _i(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ze(Se.FAILED_PRECONDITION,rF);return r(f)}).next(v=>this.wi(f).next(()=>v)):this.Vi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Vi(e){return k0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ze(Se.FAILED_PRECONDITION,wR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return k0(e).put("owner",t)}static C(){return Kl.C()}_i(e){const t=k0(e);return t.get("owner").next(r=>this.mi(r)?(et("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ee.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(_i(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,U.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return et("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _i("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){_i("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function k0(n){return as(n,"owner")}function qD(n){return as(n,"clientMetadata")}function ER(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class CR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Cn(),i=Cn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new CR(e,t.fromCache,r,i)}}class ZL{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(MF(t))return Ee.resolve(null);let r=fo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=xD(t,null,"F"),r=fo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Cn(...a);return this.Ni.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.Fi(t,f);return this.$i(t,v,u,m.readTime)?this.ki(e,xD(t,null,"F")):this.Bi(e,v,t,m)}))})))}Oi(e,t,r,i){return MF(t)||i.isEqual(Ht.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const u=this.Fi(t,a);return this.$i(t,u,r,i)?this.Mi(e,t):(VM()<=fi.in.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tR(t)),this.Bi(e,u,t,tF(i,-1)))})}Fi(e,t){let r=new ur(NF(e));return t.forEach((i,a)=>{nR(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return VM()<=fi.in.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",tR(t)),this.Ni.getDocumentsMatchingQuery(e,t,_a.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}class TH{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new oi(hn),this.Ui=new Dh(a=>Dp(a),g0),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qL(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function KL(n,e,t,r){return new TH(n,e,t,r)}function YL(n,e){return IR.apply(this,arguments)}function IR(){return IR=(0,le.Z)(function*(n,e){const t=dt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],f=[];let m=Cn();for(const v of i){u.push(v.batchId);for(const T of v.mutations)m=m.add(T.key)}for(const v of a){f.push(v.batchId);for(const T of v.mutations)m=m.add(T.key)}return t.localDocuments.getDocuments(r,m).next(v=>({ji:v,removedBatchIds:u,addedBatchIds:f}))})})}),IR.apply(this,arguments)}function SH(n,e){const t=dt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,f,m,v){const T=m.batch,M=T.keys();let L=Ee.resolve();return M.forEach(W=>{L=L.next(()=>v.getEntry(f,W)).next(X=>{const De=m.docVersions.get(W);Ut(null!==De),X.version.compareTo(De)<0&&(T.applyToRemoteDocument(X,m),X.isValidDocument()&&(X.setReadTime(m.commitVersion),v.addEntry(X)))})}),L.next(()=>u.mutationQueue.removeMutationBatch(f,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let f=Cn();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(f=f.add(u.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function QL(n){const e=dt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function AH(n,e){const t=dt(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const f=[];e.targetChanges.forEach((T,M)=>{const L=i.get(M);if(!L)return;f.push(t.Cs.removeMatchingKeys(a,T.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(a,T.addedDocuments,M)));let W=L.withSequenceNumber(a.currentSequenceNumber);var X,De,ke;e.targetMismatches.has(M)?W=W.withResumeToken(qi.EMPTY_BYTE_STRING,Ht.min()).withLastLimboFreeSnapshotVersion(Ht.min()):T.resumeToken.approximateByteSize()>0&&(W=W.withResumeToken(T.resumeToken,r)),i=i.insert(M,W),De=W,ke=T,(0===(X=L).resumeToken.approximateByteSize()||De.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8||ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(a,W))});let m=zo(),v=Cn();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,T))}),f.push(JL(a,u,e.documentUpdates).next(T=>{m=T.Wi,v=T.zi})),!r.isEqual(Ht.min())){const T=t.Cs.getLastRemoteSnapshotVersion(a).next(M=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(T)}return Ee.waitFor(f).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.qi=i,a))}function JL(n,e,t){let r=Cn(),i=Cn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=zo();return t.forEach((f,m)=>{const v=a.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(Ht.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):et("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{Wi:u,zi:i}})}function xH(n,e){const t=dt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ty(n,e){const t=dt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,Ee.resolve(i)):t.Cs.allocateTargetId(r).next(u=>(i=new Th(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Sy(n,e,t){return DR.apply(this,arguments)}function DR(){return DR=(0,le.Z)(function*(n,e,t){const r=dt(n),i=r.qi.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!vh(u))throw u;et("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),DR.apply(this,arguments)}function zD(n,e,t){const r=dt(n);let i=Ht.min(),a=Cn();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,m,v){const T=dt(f),M=T.Ui.get(v);return void 0!==M?Ee.resolve(T.qi.get(M)):T.Cs.getTargetData(m,v)}(r,u,fo(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,f.targetId).next(m=>{a=m})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?i:Ht.min(),t?a:Cn())).next(f=>(t2(r,kF(e),f),{documents:f,Hi:a})))}function XL(n,e){const t=dt(n),r=dt(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ne(a,e).next(u=>u?u.target:null))}function e2(n,e){const t=dt(n),r=t.Ki.get(e)||Ht.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,tF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(t2(t,e,i),i))}function t2(n,e,t){let r=n.Ki.get(e)||Ht.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function TR(){return TR=(0,le.Z)(function*(n,e,t,r){const i=dt(n);let a=Cn(),u=zo();for(const v of t){const T=e.Ji(v.metadata.name);v.document&&(a=a.add(T));const M=e.Yi(v);M.setReadTime(e.Xi(v.metadata.readTime)),u=u.insert(T,M)}const f=i.Gi.newChangeBuffer({trackRemovals:!0}),m=yield Ty(i,(v=r,fo(my(jn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>JL(v,f,u).next(T=>(f.apply(v),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Cs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,T.Wi,T.zi)).next(()=>T.Wi)))}),TR.apply(this,arguments)}function RH(n,e){return SR.apply(this,arguments)}function SR(){return SR=(0,le.Z)(function*(n,e,t=Cn()){const r=yield Ty(n,fo(hR(e.bundledQuery))),i=dt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=vi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ns.saveNamedQuery(a,e);const f=r.withResumeToken(qi.EMPTY_BYTE_STRING,u);return i.qi=i.qi.insert(f.targetId,f),i.Cs.updateTargetData(a,f).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),SR.apply(this,arguments)}function n2(n,e){return`firestore_clients_${n}_${e}`}function r2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function AR(n,e){return`firestore_targets_${n}_${e}`}class WD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new Ze(i.error.code,i.error.message))),u?new WD(e,t,i.state,a):(_i("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class N0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ze(r.error.code,r.error.message))),a?new N0(e,r.state,i):(_i("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ZD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=ND();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=lF(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new ZD(e,a):(_i("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class xR{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new xR(t.clientId,t.onlineState):(_i("SharedClientState",`Failed to parse online state: ${e}`),null)}}class MR{constructor(){this.activeTargetIds=ND()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RR{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new oi(hn),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=n2(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new MR),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,le.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(n2(e.persistenceKey,i));if(a){const u=ZD.Zi(i,a);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(AR(this.persistenceKey,e));if(r){const i=N0.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(AR(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return et("SharedClientState","READ",e,t),t}setItem(e,t){et("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){et("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(et("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void _i("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,le.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let u=va.at;if(null!=a)try{const f=JSON.parse(a);Ut("number"==typeof f),u=f}catch(f){_i("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(r.newValue);i!==va.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new WD(this.currentUser,e,t,r),a=r2(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=r2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=AR(this.persistenceKey,e),a=new N0(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return ZD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return WD.Zi(new os(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return N0.Zi(i,t)}yr(e){return xR.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,le.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);et("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),u=[],f=[];return a.forEach(m=>{i.has(m)||u.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Br(u,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=ND();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class i2{constructor(){this.Lr=new MR,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new MR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kH{Ur(e){}shutdown(){}}class s2{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const NH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PH{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class OH extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const u=this.ho(e,t);et("RestConnection","Sending: ",u,r);const f={};return this.lo(f,i,a),this.fo(e,u,f,r).then(m=>(et("RestConnection","Received: ",m),m),m=>{throw _p("RestConnection",`${e} failed with error: `,m,"url: ",u,"request:",r),m})}_o(e,t,r,i,a,u){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+cy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${NH[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,u)=>{const f=new Pj;f.setWithCredentials(!0),f.listenOnce(Rj.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case UM.NO_ERROR:const v=f.getResponseJson();et("Connection","XHR received:",JSON.stringify(v)),a(v);break;case UM.TIMEOUT:et("Connection",'RPC "'+e+'" timed out'),u(new Ze(Se.DEADLINE_EXCEEDED,"Request time out"));break;case UM.HTTP_ERROR:const T=f.getStatus();if(et("Connection",'RPC "'+e+'" failed with status:',T,"response text:",f.getResponseText()),T>0){let M=f.getResponseJson();Array.isArray(M)&&(M=M[0]);const L=M?.error;if(L&&L.status&&L.message){const W=function(X){const De=X.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(De)>=0?De:Se.UNKNOWN}(L.status);u(new Ze(W,L.message))}else u(new Ze(Se.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new Ze(Se.UNAVAILABLE,"Connection failed."));break;default:It()}}finally{et("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);f.send(t,"POST",m,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=xj(),u=Mj(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new Nj({})),this.lo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const m=i.join("");et("Connection","Creating WebChannel: "+m,f);const v=a.createWebChannel(m,f);let T=!1,M=!1;const L=new PH({Hr:X=>{M?et("Connection","Not sending because WebChannel is closed:",X):(T||(et("Connection","Opening WebChannel transport."),v.open(),T=!0),et("Connection","WebChannel sending:",X),v.send(X))},Jr:()=>v.close()}),W=(X,De,ke)=>{X.listen(De,Ft=>{try{ke(Ft)}catch(Vt){setTimeout(()=>{throw Vt},0)}})};return W(v,vD.EventType.OPEN,()=>{M||et("Connection","WebChannel transport opened.")}),W(v,vD.EventType.CLOSE,()=>{M||(M=!0,et("Connection","WebChannel transport closed"),L.io())}),W(v,vD.EventType.ERROR,X=>{M||(M=!0,_p("Connection","WebChannel transport errored:",X),L.io(new Ze(Se.UNAVAILABLE,"The operation could not be completed")))}),W(v,vD.EventType.MESSAGE,X=>{var De;if(!M){const ke=X.data[0];Ut(!!ke);const Vt=ke.error||(null===(De=ke[0])||void 0===De?void 0:De.error);if(Vt){et("Connection","WebChannel received error:",Vt);const wt=Vt.status;let kt=function(ln){const Yr=ki[ln];if(void 0!==Yr)return ZF(Yr)}(wt),Zt=Vt.message;void 0===kt&&(kt=Se.INTERNAL,Zt="Unknown error status: "+wt+" with message "+Vt.message),M=!0,L.io(new Ze(kt,Zt)),v.close()}else et("Connection","WebChannel received:",ke),L.ro(ke)}}),W(u,kj.STAT_EVENT,X=>{X.stat===KO.PROXY?et("Connection","Detected buffering proxy"):X.stat===KO.NOPROXY&&et("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.so()},0),L}}function o2(){return typeof window<"u"?window:null}function KD(){return typeof document<"u"?document:null}function P0(n){return new T$(n,!0)}class kR{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&et("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class a2{constructor(e,t,r,i,a,u,f,m){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new kR(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,le.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,le.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,le.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===Se.RESOURCE_EXHAUSTED?(_i(t.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===Se.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ze(Se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,le.Z)(function*(){e.state=0,e.start()}))}Qo(e){return et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FH extends a2{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.yt=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function x$(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:It(),i=e.targetChange.targetIds||[],a=function(m,v){return m.wt?(Ut(void 0===v||"string"==typeof v),qi.fromBase64String(v||"")):(Ut(void 0===v||v instanceof Uint8Array),qi.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(m){const v=void 0===m.code?Se.UNKNOWN:ZF(m.code);return new Ze(v,m.message||"")}(u);t=new XF(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Gu(n,r.document.name),a=vi(r.document.updateTime),u=r.document.createTime?vi(r.document.createTime):Ht.min(),f=new Ss({mapValue:{fields:r.document.fields}}),m=Sr.newFoundDocument(i,a,u,f);t=new PD(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=Gu(n,r.document),a=r.readTime?vi(r.readTime):Ht.min(),u=Sr.newNoDocument(i,a);t=new PD([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Gu(n,r.document);t=new PD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return It();{const r=e.filter,a=new y$(r.count||0);t=new JF(r.targetId,a)}}var m;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return Ht.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ht.min():a.readTime?vi(a.readTime):Ht.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=I0(this.yt),t.addTarget=function(i,a){let u;const f=a.target;return u=TD(f)?{documents:uL(i,f)}:{query:aR(i,f)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=rL(i,a.resumeToken):a.snapshotVersion.compareTo(Ht.min())>0&&(u.readTime=by(i,a.snapshotVersion.toTimestamp())),u}(this.yt,e);const r=function R$(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return It()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=I0(this.yt),t.removeTarget=e,this.Bo(t)}}class LH extends a2{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.yt=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function M$(n,e){return n&&n.length>0?(Ut(void 0!==e),n.map(t=>function(r,i){let a=vi(r.updateTime?r.updateTime:i);return a.isEqual(Ht.min())&&(a=vi(i)),new p$(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=vi(e.commitTime);return this.listener.Zo(r,t)}return Ut(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=I0(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>D0(this.yt,r))};this.Bo(t)}}class UH extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Ze(Se.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ze(Se.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection._o(e,t,r,a,u,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ze(Se.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class BH{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(_i(t),this.ou=!1):et("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class jH{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(f=>{r.enqueueAndForget((0,le.Z)(function*(){var m;od(u)&&(et("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,le.Z)(function*(v){const T=dt(v);T._u.add(4),yield Ay(T),T.gu.set("Unknown"),T._u.delete(4),yield O0(T)}),function(v){return m.apply(this,arguments)})(u))}))}),this.gu=new BH(r,i)}}function O0(n){return PR.apply(this,arguments)}function PR(){return PR=(0,le.Z)(function*(n){if(od(n))for(const e of n.wu)yield e(!0)}),PR.apply(this,arguments)}function Ay(n){return OR.apply(this,arguments)}function OR(){return OR=(0,le.Z)(function*(n){for(const e of n.wu)yield e(!1)}),OR.apply(this,arguments)}function YD(n,e){const t=dt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),UR(t)?LR(t):My(t).ko()&&FR(t,e))}function F0(n,e){const t=dt(n),r=My(t);t.du.delete(e),r.ko()&&l2(t,e),0===t.du.size&&(r.ko()?r.Fo():od(t)&&t.gu.set("Unknown"))}function FR(n,e){n.yu.Ot(e.targetId),My(n).zo(e)}function l2(n,e){n.yu.Ot(e),My(n).Ho(e)}function LR(n){n.yu=new E$({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),My(n).start(),n.gu.uu()}function UR(n){return od(n)&&!My(n).No()&&n.du.size>0}function od(n){return 0===dt(n)._u.size}function u2(n){n.yu=void 0}function $H(n){return VR.apply(this,arguments)}function VR(){return VR=(0,le.Z)(function*(n){n.du.forEach((e,t)=>{FR(n,e)})}),VR.apply(this,arguments)}function HH(n,e){return BR.apply(this,arguments)}function BR(){return BR=(0,le.Z)(function*(n,e){u2(n),UR(n)?(n.gu.hu(e),LR(n)):n.gu.set("Unknown")}),BR.apply(this,arguments)}function GH(n,e,t){return jR.apply(this,arguments)}function jR(){return jR=(0,le.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof XF&&2===e.state&&e.cause)try{yield(r=(0,le.Z)(function*(i,a){const u=a.cause;for(const f of a.targetIds)i.du.has(f)&&(yield i.remoteSyncer.rejectListen(f,u),i.du.delete(f),i.yu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield QD(n,r)}else if(e instanceof PD?n.yu.Kt(e):e instanceof JF?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Ht.min()))try{const r=yield QL(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.yu.Zt(a);return u.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.du.get(m);v&&i.du.set(m,v.withResumeToken(f.resumeToken,a))}}),u.targetMismatches.forEach(f=>{const m=i.du.get(f);if(!m)return;i.du.set(f,m.withResumeToken(qi.EMPTY_BYTE_STRING,m.snapshotVersion)),l2(i,f);const v=new Th(m.target,f,1,m.sequenceNumber);FR(i,v)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){et("RemoteStore","Failed to raise snapshot:",r),yield QD(n,r)}var r}),jR.apply(this,arguments)}function QD(n,e,t){return $R.apply(this,arguments)}function $R(){return $R=(0,le.Z)(function*(n,e,t){if(!vh(e))throw e;n._u.add(1),yield Ay(n),n.gu.set("Offline"),t||(t=()=>QL(n.localStore)),n.asyncQueue.enqueueRetryable((0,le.Z)(function*(){et("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield O0(n)}))}),$R.apply(this,arguments)}function c2(n,e){return e().catch(t=>QD(n,t,e))}function xy(n){return HR.apply(this,arguments)}function HR(){return HR=(0,le.Z)(function*(n){const e=dt(n),t=Mh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;qH(e);)try{const i=yield xH(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,zH(e,i)}catch(i){yield QD(e,i)}d2(e)&&h2(e)}),HR.apply(this,arguments)}function qH(n){return od(n)&&n.fu.length<10}function zH(n,e){n.fu.push(e);const t=Mh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function d2(n){return od(n)&&!Mh(n).No()&&n.fu.length>0}function h2(n){Mh(n).start()}function WH(n){return GR.apply(this,arguments)}function GR(){return GR=(0,le.Z)(function*(n){Mh(n).eu()}),GR.apply(this,arguments)}function ZH(n){return qR.apply(this,arguments)}function qR(){return qR=(0,le.Z)(function*(n){const e=Mh(n);for(const t of n.fu)e.Xo(t.mutations)}),qR.apply(this,arguments)}function KH(n,e,t){return zR.apply(this,arguments)}function zR(){return zR=(0,le.Z)(function*(n,e,t){const r=n.fu.shift(),i=cR.from(r,e,t);yield c2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield xy(n)}),zR.apply(this,arguments)}function YH(n,e){return WR.apply(this,arguments)}function WR(){return WR=(0,le.Z)(function*(n,e){var t;e&&Mh(n).Yo&&(yield(t=(0,le.Z)(function*(r,i){if(WF(a=i.code)&&a!==Se.ABORTED){const u=r.fu.shift();Mh(r).Mo(),yield c2(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield xy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),d2(n)&&h2(n)}),WR.apply(this,arguments)}function f2(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,le.Z)(function*(n,e){const t=dt(n);t.asyncQueue.verifyOperationInProgress(),et("RemoteStore","RemoteStore received new credentials");const r=od(t);t._u.add(3),yield Ay(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield O0(t)}),ZR.apply(this,arguments)}function KR(n,e){return YR.apply(this,arguments)}function YR(){return YR=(0,le.Z)(function*(n,e){const t=dt(n);e?(t._u.delete(2),yield O0(t)):e||(t._u.add(2),yield Ay(t),t.gu.set("Unknown"))}),YR.apply(this,arguments)}function My(n){return n.pu||(n.pu=function(e,t,r){const i=dt(e);return i.su(),new FH(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:$H.bind(null,n),Zr:HH.bind(null,n),Wo:GH.bind(null,n)}),n.wu.push(function(){var e=(0,le.Z)(function*(t){t?(n.pu.Mo(),UR(n)?LR(n):n.gu.set("Unknown")):(yield n.pu.stop(),u2(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Mh(n){return n.Iu||(n.Iu=function(e,t,r){const i=dt(e);return i.su(),new LH(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:WH.bind(null,n),Zr:YH.bind(null,n),tu:ZH.bind(null,n),Zo:KH.bind(null,n)}),n.wu.push(function(){var e=(0,le.Z)(function*(t){t?(n.Iu.Mo(),yield xy(n)):(yield n.Iu.stop(),n.fu.length>0&&(et("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class QR{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,f=new QR(e,t,u,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ze(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ry(n,e){if(_i("AsyncQueue",`${e}: ${n}`),vh(n))return new Ze(Se.UNAVAILABLE,`${e}: ${n}`);throw n}class ky{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ut.comparator(t.key,r.key):(t,r)=>ut.comparator(t.key,r.key),this.keyedMap=v0(),this.sortedSet=new oi(this.comparator)}static emptySet(e){return new ky(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ky)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ky;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class p2{constructor(){this.Tu=new oi(ut.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):It():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ny{constructor(e,t,r,i,a,u,f,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new Ny(e,t,ky.emptySet(t),u,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&m0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class QH{constructor(){this.Au=void 0,this.listeners=[]}}class JH{constructor(){this.queries=new Dh(e=>RF(e),m0),this.onlineState="Unknown",this.Ru=new Set}}function JR(n,e){return XR.apply(this,arguments)}function XR(){return XR=(0,le.Z)(function*(n,e){const t=dt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new QH),i)try{a.Au=yield t.onListen(r)}catch(u){const f=Ry(u,`Initialization of query '${tR(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&nk(t)}),XR.apply(this,arguments)}function ek(n,e){return tk.apply(this,arguments)}function tk(){return tk=(0,le.Z)(function*(n,e){const t=dt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),tk.apply(this,arguments)}function XH(n,e){const t=dt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const f of u.listeners)f.Pu(i)&&(r=!0);u.Au=i}}r&&nk(t)}function e3(n,e,t){const r=dt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function nk(n){n.Ru.forEach(e=>{e.next()})}class rk{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ny(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Ny.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class t3{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class g2{constructor(e){this.yt=e}Ji(e){return Gu(this.yt,e)}Yi(e){return e.metadata.exists?lL(this.yt,e.document,!1):Sr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return vi(e)}}class n3{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=m2(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=jn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new g2(this.yt);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const u of i.metadata.queries){const f=(t.get(u)||Cn()).add(a);t.set(u,f)}}return t}complete(){var e=this;return(0,le.Z)(function*(){const t=yield function MH(n,e,t,r){return TR.apply(this,arguments)}(e.localStore,new g2(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield RH(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function m2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class y2{constructor(e){this.key=e}}class _2{constructor(e){this.key=e}}class v2{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Cn(),this.mutatedKeys=Cn(),this.Gu=NF(e),this.Qu=new ky(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new p2,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,M)=>{const L=i.get(T),W=nR(this.query,M)?M:null,X=!!L&&this.mutatedKeys.has(L.key),De=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let ke=!1;L&&W?L.data.isEqual(W.data)?X!==De&&(r.track({type:3,doc:W}),ke=!0):this.Hu(L,W)||(r.track({type:2,doc:W}),ke=!0,(m&&this.Gu(W,m)>0||v&&this.Gu(W,v)<0)&&(f=!0)):!L&&W?(r.track({type:0,doc:W}),ke=!0):L&&!W&&(r.track({type:1,doc:L}),ke=!0,(m||v)&&(f=!0)),ke&&(W?(u=u.add(W),a=De?a.add(T):a.delete(T)):(u=u.delete(T),a=a.delete(T)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const T="F"===this.query.limitType?u.last():u.first();u=u.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{Qu:u,zu:r,$i:f,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((v,T)=>function(M,L){const W=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It()}};return W(M)-W(L)}(v.type,T.type)||this.Gu(v.doc,T.doc)),this.Ju(r);const u=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,m=f!==this.Uu;return this.Uu=f,0!==a.length||m?{snapshot:new Ny(this.query,e.Qu,i,a,e.mutatedKeys,0===f,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:u}:{Xu:u}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new p2,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Cn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new _2(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new y2(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Cn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Ny.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class r3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class i3{constructor(e){this.key=e,this.nc=!1}}class s3{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.sc={},this.ic=new Dh(f=>RF(f),m0),this.rc=new Map,this.oc=new Set,this.uc=new oi(ut.comparator),this.cc=new Map,this.ac=new vR,this.hc={},this.lc=new Map,this.fc=Pp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function o3(n,e){return ik.apply(this,arguments)}function ik(){return ik=(0,le.Z)(function*(n,e){const t=Sk(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const u=yield Ty(t.localStore,fo(e));t.isPrimaryClient&&YD(t.remoteStore,u);const f=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield sk(t,e,r,"current"===f,u.resumeToken)}return i}),ik.apply(this,arguments)}function sk(n,e,t,r,i){return ok.apply(this,arguments)}function ok(){return ok=(0,le.Z)(function*(n,e,t,r,i){n._c=(M,L,W)=>{return(X=(0,le.Z)(function*(De,ke,Ft,Vt){let wt=ke.view.Wu(Ft);wt.$i&&(wt=yield zD(De.localStore,ke.query,!1).then(({documents:ln})=>ke.view.Wu(ln,wt)));const kt=Vt&&Vt.targetChanges.get(ke.targetId),Zt=ke.view.applyChanges(wt,De.isPrimaryClient,kt);return mk(De,ke.targetId,Zt.Xu),Zt.snapshot}),function(De,ke,Ft,Vt){return X.apply(this,arguments)})(n,M,L,W);var X};const a=yield zD(n.localStore,e,!0),u=new v2(e,a.Hi),f=u.Wu(a.documents),m=E0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=u.applyChanges(f,n.isPrimaryClient,m);mk(n,t,v.Xu);const T=new r3(e,t,u);return n.ic.set(e,T),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),v.snapshot}),ok.apply(this,arguments)}function a3(n,e){return ak.apply(this,arguments)}function ak(){return ak=(0,le.Z)(function*(n,e){const t=dt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!m0(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Sy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),F0(t.remoteStore,r.targetId),Py(t,r.targetId)}).catch(_h))):(Py(t,r.targetId),yield Sy(t.localStore,r.targetId,!0))}),ak.apply(this,arguments)}function lk(){return lk=(0,le.Z)(function*(n,e,t){const r=Ak(n);try{const i=yield function(a,u){const f=dt(a),m=jr.now(),v=u.reduce((L,W)=>L.add(W.key),Cn());let T,M;return f.persistence.runTransaction("Locally write mutations","readwrite",L=>{let W=zo(),X=Cn();return f.Gi.getEntries(L,v).next(De=>{W=De,W.forEach((ke,Ft)=>{Ft.isValidDocument()||(X=X.add(ke))})}).next(()=>f.localDocuments.getOverlayedDocuments(L,W)).next(De=>{T=De;const ke=[];for(const Ft of u){const Vt=m$(Ft,T.get(Ft.key).overlayedDocument);null!=Vt&&ke.push(new sd(Ft.key,Vt,TF(Vt.value.mapValue),$r.exists(!0)))}return f.mutationQueue.addMutationBatch(L,m,ke,u)}).next(De=>{M=De;const ke=De.applyToLocalDocumentSet(T,X);return f.documentOverlayCache.saveOverlays(L,De.batchId,ke)})}).then(()=>({batchId:M.batchId,changes:YF(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,f){let m=a.hc[a.currentUser.toKey()];m||(m=new oi(hn)),m=m.insert(u,f),a.hc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield ad(r,i.changes),yield xy(r.remoteStore)}catch(i){const a=Ry(i,"Failed to persist write");t.reject(a)}}),lk.apply(this,arguments)}function w2(n,e){return uk.apply(this,arguments)}function uk(){return uk=(0,le.Z)(function*(n,e){const t=dt(n);try{const r=yield AH(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.cc.get(a);u&&(Ut(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.nc=!0:i.modifiedDocuments.size>0?Ut(u.nc):i.removedDocuments.size>0&&(Ut(u.nc),u.nc=!1))}),yield ad(t,r,e)}catch(r){yield _h(r)}}),uk.apply(this,arguments)}function b2(n,e,t){const r=dt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,u)=>{const f=u.view.bu(e);f.snapshot&&i.push(f.snapshot)}),function(a,u){const f=dt(a);f.onlineState=u;let m=!1;f.queries.forEach((v,T)=>{for(const M of T.listeners)M.bu(u)&&(m=!0)}),m&&nk(f)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function u3(n,e,t){return ck.apply(this,arguments)}function ck(){return ck=(0,le.Z)(function*(n,e,t){const r=dt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let u=new oi(ut.comparator);u=u.insert(a,Sr.newNoDocument(a,Ht.min()));const f=Cn().add(a),m=new b0(Ht.min(),new Map,new ur(hn),u,f);yield w2(r,m),r.uc=r.uc.remove(a),r.cc.delete(e),yk(r)}else yield Sy(r.localStore,e,!1).then(()=>Py(r,e,t)).catch(_h)}),ck.apply(this,arguments)}function c3(n,e){return dk.apply(this,arguments)}function dk(){return dk=(0,le.Z)(function*(n,e){const t=dt(n),r=e.batch.batchId;try{const i=yield SH(t.localStore,e);gk(t,r,null),pk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ad(t,i)}catch(i){yield _h(i)}}),dk.apply(this,arguments)}function d3(n,e,t){return hk.apply(this,arguments)}function hk(){return hk=(0,le.Z)(function*(n,e,t){const r=dt(n);try{const i=yield function(a,u){const f=dt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,u).next(T=>(Ut(null!==T),v=T.keys(),f.mutationQueue.removeMutationBatch(m,T))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,u)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);gk(r,e,t),pk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ad(r,i)}catch(i){yield _h(i)}}),hk.apply(this,arguments)}function fk(){return fk=(0,le.Z)(function*(n,e){const t=dt(n);od(t.remoteStore)||et("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=dt(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Ry(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),fk.apply(this,arguments)}function pk(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function gk(n,e,t){const r=dt(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Py(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||E2(n,r)})}function E2(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(F0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),yk(n))}function mk(n,e,t){for(const r of t)r instanceof y2?(n.ac.addReference(r.key,e),f3(n,r)):r instanceof _2?(et("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||E2(n,r.key)):It()}function f3(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(et("SyncEngine","New document in limbo: "+t),n.oc.add(r),yk(n))}function yk(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new ut(jn.fromString(e)),r=n.fc.next();n.cc.set(r,new i3(t)),n.uc=n.uc.insert(t,r),YD(n.remoteStore,new Th(fo(my(t.path)),r,2,va.at))}}function ad(n,e,t){return _k.apply(this,arguments)}function _k(){return _k=(0,le.Z)(function*(n,e,t){const r=dt(n),i=[],a=[],u=[];var f;r.ic.isEmpty()||(r.ic.forEach((f,m)=>{u.push(r._c(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const T=CR.Ci(m.targetId,v);a.push(T)}}))}),yield Promise.all(u),r.sc.Wo(i),yield(f=(0,le.Z)(function*(m,v){const T=dt(m);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>Ee.forEach(v,L=>Ee.forEach(L.Si,W=>T.persistence.referenceDelegate.addReference(M,L.targetId,W)).next(()=>Ee.forEach(L.Di,W=>T.persistence.referenceDelegate.removeReference(M,L.targetId,W)))))}catch(M){if(!vh(M))throw M;et("LocalStore","Failed to update sequence numbers: "+M)}for(const M of v){const L=M.targetId;if(!M.fromCache){const W=T.qi.get(L),De=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);T.qi=T.qi.insert(L,De)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,a))}),_k.apply(this,arguments)}function p3(n,e){return vk.apply(this,arguments)}function vk(){return vk=(0,le.Z)(function*(n,e){const t=dt(n);if(!t.currentUser.isEqual(e)){et("SyncEngine","User change. New user:",e.toKey());const r=yield YL(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(u=>{u.forEach(f=>{f.reject(new Ze(Se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ad(t,r.ji)}var i}),vk.apply(this,arguments)}function g3(n,e){const t=dt(n),r=t.cc.get(e);if(r&&r.nc)return Cn().add(r.key);{let i=Cn();const a=t.rc.get(e);if(!a)return i;for(const u of a){const f=t.ic.get(u);i=i.unionWith(f.view.ju)}return i}}function m3(n,e){return wk.apply(this,arguments)}function wk(){return wk=(0,le.Z)(function*(n,e){const t=dt(n),r=yield zD(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&mk(t,e.targetId,i.Xu),i}),wk.apply(this,arguments)}function y3(n,e){return bk.apply(this,arguments)}function bk(){return bk=(0,le.Z)(function*(n,e){const t=dt(n);return e2(t.localStore,e).then(r=>ad(t,r))}),bk.apply(this,arguments)}function _3(n,e,t,r){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,le.Z)(function*(n,e,t,r){const i=dt(n),a=yield function(u,f){const m=dt(u),v=dt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",T=>v.Tn(T,f).next(M=>M?m.localDocuments.getDocuments(T,M):Ee.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield xy(i.remoteStore):"acknowledged"===t||"rejected"===t?(gk(i,e,r||null),pk(i,e),f=e,dt(dt(i.localStore).mutationQueue).An(f)):It(),yield ad(i,a)):et("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ek.apply(this,arguments)}function Ck(){return Ck=(0,le.Z)(function*(n,e){const t=dt(n);if(Sk(t),Ak(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield C2(t,r.toArray());t.dc=!0,yield KR(t.remoteStore,!0);for(const a of i)YD(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Py(t,u),Sy(t.localStore,u,!0))),F0(t.remoteStore,u)}),yield i,yield C2(t,r),function(a){const u=dt(a);u.cc.forEach((f,m)=>{F0(u.remoteStore,m)}),u.ac.fs(),u.cc=new Map,u.uc=new oi(ut.comparator)}(t),t.dc=!1,yield KR(t.remoteStore,!1)}}),Ck.apply(this,arguments)}function C2(n,e,t){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,le.Z)(function*(n,e,t){const r=dt(n),i=[],a=[];for(const u of e){let f;const m=r.rc.get(u);if(m&&0!==m.length){f=yield Ty(r.localStore,fo(m[0]));for(const v of m){const T=r.ic.get(v),M=yield m3(r,T);M.snapshot&&a.push(M.snapshot)}}else{const v=yield XL(r.localStore,u);f=yield Ty(r.localStore,v),yield sk(r,I2(v),u,!1,f.resumeToken)}i.push(f)}return r.sc.Wo(a),i}),Ik.apply(this,arguments)}function I2(n){return xF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function w3(n){const e=dt(n);return dt(dt(e.localStore).persistence).vi()}function b3(n,e,t,r){return Dk.apply(this,arguments)}function Dk(){return Dk=(0,le.Z)(function*(n,e,t,r){const i=dt(n);if(i.dc)return void et("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield e2(i.localStore,kF(a[0])),f=b0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,qi.EMPTY_BYTE_STRING);yield ad(i,u,f);break}case"rejected":yield Sy(i.localStore,e,!0),Py(i,e,r);break;default:It()}}),Dk.apply(this,arguments)}function E3(n,e,t){return Tk.apply(this,arguments)}function Tk(){return Tk=(0,le.Z)(function*(n,e,t){const r=Sk(n);if(r.dc){for(const i of e){if(r.rc.has(i)){et("SyncEngine","Adding an already active target "+i);continue}const a=yield XL(r.localStore,i),u=yield Ty(r.localStore,a);yield sk(r,I2(a),u.targetId,!1,u.resumeToken),YD(r.remoteStore,u)}for(const i of t)r.rc.has(i)&&(yield Sy(r.localStore,i,!1).then(()=>{F0(r.remoteStore,i),Py(r,i)}).catch(_h))}}),Tk.apply(this,arguments)}function Sk(n){const e=dt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=w2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=u3.bind(null,e),e.sc.Wo=XH.bind(null,e.eventManager),e.sc.wc=e3.bind(null,e.eventManager),e}function Ak(n){const e=dt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d3.bind(null,e),e}class D2{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,le.Z)(function*(){t.yt=P0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return KL(this.persistence,new ZL,e.initialUser,this.yt)}yc(e){return new zL(GD.Bs,this.yt)}gc(e){return new i2}terminate(){var e=this;return(0,le.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class T2 extends D2{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield Ak(r.Ac.syncEngine),yield xy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return KL(this.persistence,new ZL,e.initialUser,this.yt)}Tc(e,t){return new hH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new Yj(t,this.persistence);return new Kj(e.asyncQueue,r)}yc(e){const t=ER(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Wo.withCacheSize(this.cacheSizeBytes):Wo.DEFAULT;return new bR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,o2(),KD(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new i2}}class I3 extends T2{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof RR&&(r.sharedClientState.syncEngine={Fr:_3.bind(null,i),$r:b3.bind(null,i),Br:E3.bind(null,i),vi:w3.bind(null,i),Mr:y3.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,le.Z)(function*(u){yield function v3(n,e){return Ck.apply(this,arguments)}(r.Ac.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}gc(e){const t=o2();if(!RR.C(t))throw new Ze(Se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ER(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new RR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class xk{initialize(e,t){var r=this;return(0,le.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>b2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=p3.bind(null,r.syncEngine),yield KR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new JH}createDatastore(e){const t=P0(e.databaseInfo.databaseId),r=new OH(e.databaseInfo);return new UH(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>b2(this.syncEngine,f,0),u=s2.C()?new s2:new kH,new jH(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,f,m,v){const T=new s3(r,i,a,u,f,m);return v&&(T.dc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,le.Z)(function*(t){const r=dt(t);et("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Ay(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Mk(n,e,t){if(!t)throw new Ze(Se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function S2(n,e,t,r){if(!0===e&&!0===r)throw new Ze(Se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function A2(n){if(!ut.isDocumentKey(n))throw new Ze(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function x2(n){if(ut.isDocumentKey(n))throw new Ze(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":It()}function Fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ze(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=JD(n);throw new Ze(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function M2(n,e){if(e<=0)throw new Ze(Se.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const R2=new Map;class k2{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ze(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ze(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,S2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class L0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ze(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ze(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k2(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Lj;switch(t.type){case"gapi":return new jj(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ze(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=R2.get(e);t&&(et("ComponentProvider","Removing Datastore"),R2.delete(e),t.terminate())}(this),Promise.resolve()}}class Ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ar(this.firestore,e,this._key)}}class As{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class zu extends As{constructor(e,t,r){super(e,t,my(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ar(this.firestore,null,new ut(e))}withConverter(e){return new zu(this.firestore,e,this._path)}}function P2(n,e,...t){if(n=(0,U.m9)(n),Mk("collection","path",e),n instanceof L0){const r=jn.fromString(e,...t);return x2(r),new zu(n,null,r)}{if(!(n instanceof Ar||n instanceof zu))throw new Ze(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jn.fromString(e,...t));return x2(r),new zu(n.firestore,null,r)}}function XD(n,e,...t){if(n=(0,U.m9)(n),1===arguments.length&&(e=XO.R()),Mk("doc","path",e),n instanceof L0){const r=jn.fromString(e,...t);return A2(r),new Ar(n,null,new ut(r))}{if(!(n instanceof Ar||n instanceof zu))throw new Ze(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jn.fromString(e,...t));return A2(r),new Ar(n.firestore,n instanceof zu?n.converter:null,new ut(r))}}function O2(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),(n instanceof Ar||n instanceof zu)&&(e instanceof Ar||e instanceof zu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Rk(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),n instanceof As&&e instanceof As&&n.firestore===e.firestore&&m0(n._query,e._query)&&n.converter===e.converter}function F2(n,e=10240){let t=0;return{read:()=>(0,le.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,le.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class eT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):_i("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class T3{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Gi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,le.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,le.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,le.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new t3(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,le.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,le.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,le.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class x3{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,le.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ze(Se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,le.Z)(function*(a,u){const f=dt(a),m=I0(f.yt)+"/documents",v={documents:u.map(W=>C0(f.yt,W))},T=yield f._o("BatchGetDocuments",m,v,u.length),M=new Map;T.forEach(W=>{const X=function A$(n,e){return"found"in e?function(t,r){Ut(!!r.found);const i=Gu(t,r.found.name),a=vi(r.found.updateTime),u=r.found.createTime?vi(r.found.createTime):Ht.min(),f=new Ss({mapValue:{fields:r.found.fields}});return Sr.newFoundDocument(i,a,u,f)}(n,e):"missing"in e?function(t,r){Ut(!!r.missing),Ut(!!r.readTime);const i=Gu(t,r.missing),a=vi(r.readTime);return Sr.newNoDocument(i,a)}(n,e):It()}(f.yt,W);M.set(X.key.toString(),X)});const L=[];return u.forEach(W=>{const X=M.get(W.toString());Ut(!!X),L.push(X)}),L}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new wy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,le.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ut.fromPath(i);e.mutations.push(new rR(a,e.precondition(a)))}),yield(r=(0,le.Z)(function*(i,a){const u=dt(i),f=I0(u.yt)+"/documents",m={writes:a.map(v=>D0(u.yt,v))};yield u.ao("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw It();t=Ht.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ze(Se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ht.min())?$r.exists(!1):$r.updateTime(t):$r.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ht.min()))throw new Ze(Se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $r.updateTime(t)}return $r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class M3{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new kR(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,le.Z)(function*(){const t=new x3(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!u0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!WF(t)}return!1}}class R3{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=os.UNAUTHENTICATED,this.clientId=XO.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,le.Z)(function*(f){et("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(et("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,le.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ze(Se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ry(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function L2(n,e){return kk.apply(this,arguments)}function kk(){return kk=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),et("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,le.Z)(function*(a){r.isEqual(a)||(yield YL(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),kk.apply(this,arguments)}function U2(n,e){return Nk.apply(this,arguments)}function Nk(){return Nk=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Pk(n);et("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>f2(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>f2(e.remoteStore,a)),n.onlineComponents=e}),Nk.apply(this,arguments)}function Pk(n){return Ok.apply(this,arguments)}function Ok(){return Ok=(0,le.Z)(function*(n){return n.offlineComponents||(et("FirestoreClient","Using default OfflineComponentProvider"),yield L2(n,new D2)),n.offlineComponents}),Ok.apply(this,arguments)}function tT(n){return Fk.apply(this,arguments)}function Fk(){return Fk=(0,le.Z)(function*(n){return n.onlineComponents||(et("FirestoreClient","Using default OnlineComponentProvider"),yield U2(n,new xk)),n.onlineComponents}),Fk.apply(this,arguments)}function V2(n){return Pk(n).then(e=>e.persistence)}function nT(n){return Pk(n).then(e=>e.localStore)}function Lk(n){return tT(n).then(e=>e.remoteStore)}function Uk(n){return tT(n).then(e=>e.syncEngine)}function Oy(n){return Vk.apply(this,arguments)}function Vk(){return Vk=(0,le.Z)(function*(n){const e=yield tT(n),t=e.eventManager;return t.onListen=o3.bind(null,e.syncEngine),t.onUnlisten=a3.bind(null,e.syncEngine),t}),Vk.apply(this,arguments)}function j2(n,e,t={}){const r=new Gi;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(i,a,u,f,m){const v=new eT({next:M=>{a.enqueueAndForget(()=>ek(i,T));const L=M.docs.has(u);!L&&M.fromCache?m.reject(new Ze(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&f&&"server"===f.source?m.reject(new Ze(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(M)},error:M=>m.reject(M)}),T=new rk(my(u.path),v,{includeMetadataChanges:!0,Nu:!0});return JR(i,T)}(yield Oy(n),n.asyncQueue,e,t,r)})),r.promise}function $2(n,e,t={}){const r=new Gi;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(i,a,u,f,m){const v=new eT({next:M=>{a.enqueueAndForget(()=>ek(i,T)),M.fromCache&&"server"===f.source?m.reject(new Ze(Se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(M)},error:M=>m.reject(M)}),T=new rk(u,v,{includeMetadataChanges:!0,Nu:!0});return JR(i,T)}(yield Oy(n),n.asyncQueue,e,t,r)})),r.promise}class V3{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new kR(this,"async_queue_retry"),this.Wc=()=>{const t=KD();t&&et("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=KD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=KD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Gi;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,le.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!vh(t))throw t;et("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,_i("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=QR.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.Uc.push(i),i}zc(){this.Kc&&It()}verifyOperationInProgress(){}Xc(){var e=this;return(0,le.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Bk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class B3{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xr extends L0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new V3,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||H2(this),this._firestoreClient.terminate()}}function wi(n){return n._firestoreClient||H2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function H2(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Qj(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new R3(n._authCredentials,n._appCheckCredentials,n._queue,r)}function G2(n,e,t){const r=new Gi;return n.asyncQueue.enqueue((0,le.Z)(function*(){try{yield L2(n,t),yield U2(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(u=a).name?u.code===Se.FAILED_PRECONDITION||u.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw a;_p("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var u})).then(()=>r.promise)}function q2(n){if(n._initialized||n._terminated)throw new Ze(Se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wu(qi.fromBase64String(e))}catch(t){throw new Ze(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wu(qi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ld{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ze(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fp{constructor(e){this._methodName=e}}class rT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ze(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ze(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return hn(this._lat,e._lat)||hn(this._long,e._long)}}const Y3=/^__.*__$/;class Q3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new sd(e,this.data,this.fieldMask,t,this.fieldTransforms):new vy(e,this.data,t,this.fieldTransforms)}}class z2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function W2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It()}}class iT{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new iT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return aT(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(W2(this.sa)&&Y3.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class J3{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||P0(e)}da(e,t,r,i=!1){return new iT({sa:e,methodName:t,fa:r,path:ii.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Lp(n){const e=n._freezeSettings(),t=P0(n._databaseId);return new J3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sT(n,e,t,r,i,a={}){const u=n.da(a.merge||a.mergeFields?2:0,e,t,i);Gk("Data must be an object, but it was:",u,r);const f=Y2(r,u);let m,v;if(a.merge)m=new qo(u.fieldMask),v=u.fieldTransforms;else if(a.mergeFields){const T=[];for(const M of a.mergeFields){const L=qk(e,M,t);if(!u.contains(L))throw new Ze(Se.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);J2(T,L)||T.push(L)}m=new qo(T),v=u.fieldTransforms.filter(M=>m.covers(M.field))}else m=null,v=u.fieldTransforms;return new Q3(new Ss(f),m,v)}class U0 extends Fp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof U0}}function Z2(n,e,t){return new iT({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class jk extends Fp{_toFieldTransform(e){return new y0(e.path,new yy)}isEqual(e){return e instanceof jk}}class X3 extends Fp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Z2(this,e,!0),r=this._a.map(a=>Up(a,t)),i=new Sp(r);return new y0(e.path,i)}isEqual(e){return this===e}}class eG extends Fp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Z2(this,e,!0),r=this._a.map(a=>Up(a,t)),i=new Ap(r);return new y0(e.path,i)}isEqual(e){return this===e}}class tG extends Fp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new _y(e.yt,FF(e.yt,this.wa));return new y0(e.path,t)}isEqual(e){return this===e}}function $k(n,e,t,r){const i=n.da(1,e,t);Gk("Data must be an object, but it was:",i,r);const a=[],u=Ss.empty();bp(r,(m,v)=>{const T=oT(e,m,t);v=(0,U.m9)(v);const M=i.ca(T);if(v instanceof U0)a.push(T);else{const L=Up(v,M);null!=L&&(a.push(T),u.set(T,L))}});const f=new qo(a);return new z2(u,f,i.fieldTransforms)}function Hk(n,e,t,r,i,a){const u=n.da(1,e,t),f=[qk(e,r,t)],m=[i];if(a.length%2!=0)throw new Ze(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<a.length;L+=2)f.push(qk(e,a[L])),m.push(a[L+1]);const v=[],T=Ss.empty();for(let L=f.length-1;L>=0;--L)if(!J2(v,f[L])){const W=f[L];let X=m[L];X=(0,U.m9)(X);const De=u.ca(W);if(X instanceof U0)v.push(W);else{const ke=Up(X,De);null!=ke&&(v.push(W),T.set(W,ke))}}const M=new qo(v);return new z2(T,M,u.fieldTransforms)}function K2(n,e,t,r=!1){return Up(t,n.da(r?4:3,e))}function Up(n,e){if(Q2(n=(0,U.m9)(n)))return Gk("Unsupported field value:",e,n),Y2(n,e);if(n instanceof Fp)return function(t,r){if(!W2(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let f=Up(u,r.aa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,U.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return FF(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=jr.fromDate(t);return{timestampValue:by(r.yt,i)}}if(t instanceof jr){const i=new jr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:by(r.yt,i)}}if(t instanceof rT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wu)return{bytesValue:rL(r.yt,t._byteString)};if(t instanceof Ar){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:iR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${JD(t)}`)}(n,e)}function Y2(n,e){const t={};return aF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bp(n,(r,i)=>{const a=Up(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function Q2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof jr||n instanceof rT||n instanceof Wu||n instanceof Ar||n instanceof Fp)}function Gk(n,e,t){if(!Q2(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=JD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function qk(n,e,t){if((e=(0,U.m9)(e))instanceof ld)return e._internalPath;if("string"==typeof e)return oT(n,e);throw aT("Field path arguments must be of type string or ",n,!1,void 0,t)}const nG=new RegExp("[~\\*/\\[\\]]");function oT(n,e,t){if(e.search(nG)>=0)throw aT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ld(...e.split("."))._internalPath}catch{throw aT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function aT(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${r}`),u&&(m+=` in document ${i}`),m+=")"),new Ze(Se.INVALID_ARGUMENT,f+n+m)}function J2(n,e){return n.some(t=>t.isEqual(e))}class V0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class rG extends V0{data(){return super.data()}}function lT(n,e){return"string"==typeof e?oT(n,e):e instanceof ld?e._internalPath:e._delegate._internalPath}function X2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ze(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zk{}class B0 extends zk{}function Rh(n,e,...t){let r=[];e instanceof zk&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof Fy).length,u=i.filter(f=>f instanceof j0).length;if(a>1||a>0&&u>0)throw new Ze(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class j0 extends B0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new j0(e,t,r)}_apply(e){const t=this._parse(e);return rU(e._query,t),new As(e.firestore,e.converter,eR(e._query,t))}_parse(e){const t=Lp(e.firestore);return function(i,a,u,f,m,v,T){let M;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Ze(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){nU(T,v);const L=[];for(const W of T)L.push(tU(f,i,W));M={arrayValue:{values:L}}}else M=tU(f,i,T)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||nU(T,v),M=K2(u,"where",T,"in"===v||"not-in"===v);return On.create(m,v,M)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Fy extends zk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:ir.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const u=i.getFlattenedFilters();for(const f of u)rU(a,f),a=eR(a,f)}(e._query,t),new As(e.firestore,e.converter,eR(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Wk extends B0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Wk(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ze(Se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ze(Se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new py(i,a);return function(f,m){if(null===JM(f)){const v=AD(f);null!==v&&iU(0,v,m.field)}}(r,u),u}(e._query,this._field,this._direction);return new As(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new id(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class uT extends B0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new uT(e,t,r)}_apply(e){return new As(e.firestore,e.converter,xD(e._query,this._limit,this._limitType))}}class cT extends B0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new cT(e,t,r)}_apply(e){const t=eU(e,this.type,this._docOrFields,this._inclusive);return new As(e.firestore,e.converter,(i=t,new id((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class dT extends B0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new dT(e,t,r)}_apply(e){const t=eU(e,this.type,this._docOrFields,this._inclusive);return new As(e.firestore,e.converter,(i=t,new id((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function eU(n,e,t,r){if(t[0]=(0,U.m9)(t[0]),t[0]instanceof V0)return function(i,a,u,f,m){if(!f)throw new Ze(Se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const v=[];for(const T of Tp(i))if(T.field.isKeyField())v.push(Ip(a,f.key));else{const M=f.data.field(T.field);if(qM(M))throw new Ze(Se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=T.field.canonicalString();throw new Ze(Se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}v.push(M)}return new Ih(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Lp(n.firestore);return function(a,u,f,m,v,T){const M=a.explicitOrderBy;if(v.length>M.length)throw new Ze(Se.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let W=0;W<v.length;W++){const X=v[W];if(M[W].field.isKeyField()){if("string"!=typeof X)throw new Ze(Se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof X}`);if(!XM(a)&&-1!==X.indexOf("/"))throw new Ze(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${X}' contains a slash.`);const De=a.path.child(jn.fromString(X));if(!ut.isDocumentKey(De))throw new Ze(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${De}' is not because it contains an odd number of segments.`);const ke=new ut(De);L.push(Ip(u,ke))}else{const De=K2(f,m,X);L.push(De)}}return new Ih(L,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function tU(n,e,t){if("string"==typeof(t=(0,U.m9)(t))){if(""===t)throw new Ze(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XM(e)&&-1!==t.indexOf("/"))throw new Ze(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(jn.fromString(t));if(!ut.isDocumentKey(r))throw new Ze(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ip(n,new ut(r))}if(t instanceof Ar)return Ip(n,t._key);throw new Ze(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${JD(t)}.`)}function nU(n,e){if(!Array.isArray(n)||0===n.length)throw new Ze(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ze(Se.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function rU(n,e){if(e.isInequality()){const r=AD(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ze(Se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=JM(n);null!==a&&iU(0,i,a)}const t=function(r,i){for(const a of r)for(const u of a.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ze(Se.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function iU(n,e,t){if(!t.isEqual(e))throw new Ze(Se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Zk{convertValue(e,t="none"){switch(Cp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ep(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw It()}}convertObject(e,t){const r={};return bp(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new rT(si(e.latitude),si(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=uF(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(d0(e));default:return null}}convertTimestamp(e){const t=bh(e);return new jr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=jn.fromString(e);Ut(fL(r));const i=new wh(r.get(1),r.get(3)),a=new ut(r.popFirst(5));return i.isEqual(t)||_i(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function hT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class hG extends Zk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,t)}}class Vp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ud extends V0{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(lT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class $0 extends ud{data(e={}){return super.data(e)}}class kh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Vp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $0(this._firestore,this._userDataWriter,r.key,r,new Vp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ze(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new $0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Vp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const f=new $0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Vp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==u.type&&(m=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),v=a.indexOf(u.doc.key)),{type:fG(u.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It()}}function oU(n,e){return n instanceof ud&&e instanceof ud?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof kh&&e instanceof kh&&n._firestore===e._firestore&&Rk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Nh extends Zk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,t)}}function aU(n,e,t){n=Fn(n,Ar);const r=Fn(n.firestore,xr),i=hT(n.converter,e,t);return Ly(r,[sT(Lp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,$r.none())])}function lU(n,e,t,...r){n=Fn(n,Ar);const i=Fn(n.firestore,xr),a=Lp(i);let u;return u="string"==typeof(e=(0,U.m9)(e))||e instanceof ld?Hk(a,"updateDoc",n._key,e,t,r):$k(a,"updateDoc",n._key,e),Ly(i,[u.toMutation(n._key,$r.exists(!0))])}function uU(n,...e){var t,r,i;n=(0,U.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||Bk(e[u])||(a=e[u],u++);const f={includeMetadataChanges:a.includeMetadataChanges};if(Bk(e[u])){const M=e[u];e[u]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[u+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[u+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let m,v,T;if(n instanceof Ar)v=Fn(n.firestore,xr),T=my(n._key.path),m={next:M=>{e[u]&&e[u](Kk(v,n,M))},error:e[u+1],complete:e[u+2]};else{const M=Fn(n,As);v=Fn(M.firestore,xr),T=M._query;const L=new Nh(v);m={next:W=>{e[u]&&e[u](new kh(v,L,M,W))},error:e[u+1],complete:e[u+2]},X2(n._query)}return function(M,L,W,X){const De=new eT(X),ke=new rk(L,De,W);return M.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return JR(yield Oy(M),ke)})),()=>{De.bc(),M.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return ek(yield Oy(M),ke)}))}}(wi(v),T,f,m)}function Ly(n,e){return function(t,r){const i=new Gi;return t.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function l3(n,e,t){return lk.apply(this,arguments)}(yield Uk(t),r,i)})),i.promise}(wi(n),e)}function Kk(n,e,t){const r=t.docs.get(e._key),i=new Nh(n);return new ud(n,i,e._key,r,new Vp(t.hasPendingWrites,t.fromCache),e.converter)}const CG={maxAttempts:5};class cU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Lp(e)}set(e,t,r){this._verifyNotCommitted();const i=Ph(e,this._firestore),a=hT(i.converter,t,r),u=sT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,$r.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Ph(e,this._firestore);let u;return u="string"==typeof(t=(0,U.m9)(t))||t instanceof ld?Hk(this._dataReader,"WriteBatch.update",a._key,t,r,i):$k(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,$r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ph(e,this._firestore);return this._mutations=this._mutations.concat(new wy(t._key,$r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ze(Se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ph(n,e){if((n=(0,U.m9)(n)).firestore!==e)throw new Ze(Se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class IG extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Lp(e)}get(e){const t=Ph(e,this._firestore),r=new hG(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return It();const a=i[0];if(a.isFoundDocument())return new V0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new V0(this._firestore,r,t._key,null,t.converter);throw It()})}set(e,t,r){const i=Ph(e,this._firestore),a=hT(i.converter,t,r),u=sT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=Ph(e,this._firestore);let u;return u="string"==typeof(t=(0,U.m9)(t))||t instanceof ld?Hk(this._dataReader,"Transaction.update",a._key,t,r,i):$k(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=Ph(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ph(e,this._firestore),r=new Nh(this._firestore);return super.get(e).then(i=>new ud(this._firestore,r,t._key,i._document,new Vp(!1,!1),t.converter))}}function Yk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ze("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function hU(){if(typeof Uint8Array>"u")throw new Ze("unimplemented","Uint8Arrays are not available in this environment.")}function fU(){if(!function Jj(){return typeof atob<"u"}())throw new Ze("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){cy=zn.SDK_VERSION,(0,zn._registerComponent)(new $t.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),u=new xr(new Vj(t.getProvider("auth-internal")),new $j(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ze(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wh(f.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,zn.registerVersion)(YO,"3.8.1",n),(0,zn.registerVersion)(YO,"3.8.1","esm2017")}();class H0{constructor(e){this._delegate=e}static fromBase64String(e){return fU(),new H0(Wu.fromBase64String(e))}static fromUint8Array(e){return hU(),new H0(Wu.fromUint8Array(e))}toBase64(){return fU(),this._delegate.toBase64()}toUint8Array(){return hU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Qk(n){return function NG(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class PG{enableIndexedDbPersistence(e,t){return function $3(n,e){q2(n=Fn(n,xr));const t=wi(n),r=n._freezeSettings(),i=new xk;return G2(t,i,new T2(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function H3(n){q2(n=Fn(n,xr));const e=wi(n),t=n._freezeSettings(),r=new xk;return G2(e,r,new I3(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function G3(n){if(n._initialized&&!n._terminated)throw new Ze(Se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{yield(t=(0,le.Z)(function*(r){if(!Kl.C())return Promise.resolve();const i=r+"main";yield Kl.delete(i)}),function(r){return t.apply(this,arguments)})(ER(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class pU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof wh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_p("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function N2(n,e,t,r={}){var i;const a=(n=Fn(n,L0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&_p("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,f;if("string"==typeof r.mockUserToken)u=r.mockUserToken,f=os.MOCK_USER;else{u=(0,U.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ze(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new os(m)}n._authCredentials=new Uj(new QO(u,f))}}(this._delegate,e,t,r)}enableNetwork(){return function z3(n){return function k3(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield V2(n),t=yield Lk(n);return e.setNetworkEnabled(!0),function(r){const i=dt(r);return i._u.delete(0),O0(i)}(t)}))}(wi(n=Fn(n,xr)))}(this._delegate)}disableNetwork(){return function W3(n){return function N3(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield V2(n),t=yield Lk(n);return e.setNetworkEnabled(!1),(r=(0,le.Z)(function*(i){const a=dt(i);a._u.add(0),yield Ay(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(wi(n=Fn(n,xr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,S2("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function q3(n){return function(e){const t=new Gi;return e.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function h3(n,e){return fk.apply(this,arguments)}(yield Uk(e),t)})),t.promise}(wi(n=Fn(n,xr)))}(this._delegate)}onSnapshotsInSync(e){return function EG(n,e){return function F3(n,e){const t=new eT(e);return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return r=yield Oy(n),i=t,dt(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return r=yield Oy(n),i=t,void dt(r).Ru.delete(i);var r,i}))}}(wi(n=Fn(n,xr)),Bk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ze("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Uy(this,P2(this._delegate,e))}catch(t){throw go(t,"collection()","Firestore.collection()")}}doc(e){try{return new tl(this,XD(this._delegate,e))}catch(t){throw go(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new mo(this,function D3(n,e){if(n=Fn(n,L0),Mk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ze(Se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new As(n,null,(t=e,new id(jn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw go(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function DG(n,e,t){n=Fn(n,xr);const r=Object.assign(Object.assign({},CG),t);return function(i){if(i.maxAttempts<1)throw new Ze(Se.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,u){const f=new Gi;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){const m=yield function B2(n){return tT(n).then(e=>e.datastore)}(i);new M3(i.asyncQueue,m,u,a,f).run()})),f.promise}(wi(n),i=>e(new IG(n,i)),r)}(this._delegate,t=>e(new gU(this,t)))}batch(){return wi(this._delegate),new mU(new cU(this._delegate,e=>Ly(this._delegate,e)))}loadBundle(e){return function Z3(n,e){const t=wi(n=Fn(n,xr)),r=new B3;return function L3(n,e,t,r){const i=function(a,u){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return F2(m,v);if(m instanceof ArrayBuffer)return F2(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new T3(m,u);var m}(t,P0(e));n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){!function C3(n,e,t){const r=dt(n);var i;(i=(0,le.Z)(function*(a,u,f){try{const m=yield u.getMetadata();if(yield function(L,W){const X=dt(L),De=vi(W.createTime);return X.persistence.runTransaction("hasNewerBundle","readonly",ke=>X.Ns.getBundleMetadata(ke,W.id)).then(ke=>!!ke&&ke.createTime.compareTo(De)>=0)}(a.localStore,m))return yield u.close(),f._completeWith({taskState:"Success",documentsLoaded:(L=m).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);f._updateProgress(m2(m));const v=new n3(m,a.localStore,u.yt);let T=yield u.mc();for(;T;){const L=yield v.Fu(T);L&&f._updateProgress(L),T=yield u.mc()}const M=yield v.complete();return yield ad(a,M.Lu,void 0),yield function(L,W){const X=dt(L);return X.persistence.runTransaction("Save bundle","readwrite",De=>X.Ns.saveBundleMetadata(De,W))}(a.localStore,m),f._completeWith(M.progress),Promise.resolve(M.Bu)}catch(m){return _p("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var L}),function(a,u,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Uk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function K3(n,e){return function U3(n,e){return n.asyncQueue.enqueue((0,le.Z)(function*(){return function(t,r){const i=dt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield nT(n),e)}))}(wi(n=Fn(n,xr)),e).then(t=>t?new As(n,null,t.query):null)}(this._delegate,e).then(t=>t?new mo(this,t):null)}}class fT extends Zk{constructor(e){super(),this.firestore=e}convertBytes(e){return new H0(new Wu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return tl.forKey(t,this.firestore,null)}}class gU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new fT(e)}get(e){const t=jp(e);return this._delegate.get(t).then(r=>new G0(this._firestore,new ud(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=jp(e);return r?(Yk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=jp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=jp(e);return this._delegate.delete(t),this}}class mU{constructor(e){this._delegate=e}set(e,t,r){const i=jp(e);return r?(Yk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=jp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=jp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new $0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new q0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Bp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Bp(e,new fT(e),t),i.set(t,a)),a}}Bp.INSTANCES=new WeakMap;class tl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ze("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new tl(t,new Ar(t._delegate,r,new ut(e)))}static forKey(e,t,r){return new tl(t,new Ar(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Uy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Uy(this.firestore,P2(this._delegate,e))}catch(t){throw go(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,U.m9)(e))instanceof Ar&&O2(this._delegate,e)}set(e,t){t=Yk("DocumentReference.set",t);try{return t?aU(this._delegate,e,t):aU(this._delegate,e)}catch(r){throw go(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?lU(this._delegate,e):lU(this._delegate,e,t,...r)}catch(i){throw go(i,"updateDoc()","DocumentReference.update()")}}delete(){return function wG(n){return Ly(Fn(n.firestore,xr),[new wy(n._key,$r.none())])}(this._delegate)}onSnapshot(...e){const t=yU(e),r=_U(e,i=>new G0(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return uU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function gG(n){n=Fn(n,Ar);const e=Fn(n.firestore,xr),t=wi(e),r=new Nh(e);return function P3(n,e){const t=new Gi;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(i,a,u){try{const f=yield function(m,v){const T=dt(m);return T.persistence.runTransaction("read document","readonly",M=>T.localDocuments.getDocument(M,v))}(i,a);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new Ze(Se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Ry(f,`Failed to get document '${a} from cache`);u.reject(m)}}),function(i,a,u){return r.apply(this,arguments)})(yield nT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ud(e,r,n._key,i,new Vp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function mG(n){n=Fn(n,Ar);const e=Fn(n.firestore,xr);return j2(wi(e),n._key,{source:"server"}).then(t=>Kk(e,n,t))}(this._delegate):function pG(n){n=Fn(n,Ar);const e=Fn(n.firestore,xr);return j2(wi(e),n._key).then(t=>Kk(e,n,t))}(this._delegate),t.then(r=>new G0(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new tl(this.firestore,this._delegate.withConverter(e?Bp.getInstance(this.firestore,e):null))}}function go(n,e,t){return n.message=n.message.replace(e,t),n}function yU(n){for(const e of n)if("object"==typeof e&&!Qk(e))return e;return{}}function _U(n,e){var t,r;let i;return i=Qk(n[0])?n[0]:Qk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class G0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new tl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return oU(this._delegate,e._delegate)}}class q0 extends G0{data(e){const t=this._delegate.data(e);return function Fj(n,e){n||It()}(void 0!==t),t}}class mo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fT(e)}where(e,t,r){try{return new mo(this.firestore,Rh(this._delegate,function iG(n,e,t){const r=e,i=lT("where",n);return j0._create(i,r,t)}(e,t,r)))}catch(i){throw go(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new mo(this.firestore,Rh(this._delegate,function sG(n,e="asc"){const t=e,r=lT("orderBy",n);return Wk._create(r,t)}(e,t)))}catch(r){throw go(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new mo(this.firestore,Rh(this._delegate,function oG(n){return M2("limit",n),uT._create("limit",n,"F")}(e)))}catch(t){throw go(t,"limit()","Query.limit()")}}limitToLast(e){try{return new mo(this.firestore,Rh(this._delegate,function aG(n){return M2("limitToLast",n),uT._create("limitToLast",n,"L")}(e)))}catch(t){throw go(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new mo(this.firestore,Rh(this._delegate,function lG(...n){return cT._create("startAt",n,!0)}(...e)))}catch(t){throw go(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new mo(this.firestore,Rh(this._delegate,function uG(...n){return cT._create("startAfter",n,!1)}(...e)))}catch(t){throw go(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new mo(this.firestore,Rh(this._delegate,function cG(...n){return dT._create("endBefore",n,!1)}(...e)))}catch(t){throw go(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new mo(this.firestore,Rh(this._delegate,function dG(...n){return dT._create("endAt",n,!0)}(...e)))}catch(t){throw go(t,"endAt()","Query.endAt()")}}isEqual(e){return Rk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function _G(n){n=Fn(n,As);const e=Fn(n.firestore,xr),t=wi(e),r=new Nh(e);return function O3(n,e){const t=new Gi;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(i,a,u){try{const f=yield zD(i,a,!0),m=new v2(a,f.Hi),v=m.Wu(f.documents),T=m.applyChanges(v,!1);u.resolve(T.snapshot)}catch(f){const m=Ry(f,`Failed to execute query '${a} against cache`);u.reject(m)}}),function(i,a,u){return r.apply(this,arguments)})(yield nT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new kh(e,r,n,i))}(this._delegate):"server"===e?.source?function vG(n){n=Fn(n,As);const e=Fn(n.firestore,xr),t=wi(e),r=new Nh(e);return $2(t,n._query,{source:"server"}).then(i=>new kh(e,r,n,i))}(this._delegate):function yG(n){n=Fn(n,As);const e=Fn(n.firestore,xr),t=wi(e),r=new Nh(e);return X2(n._query),$2(t,n._query).then(i=>new kh(e,r,n,i))}(this._delegate),t.then(r=>new Jk(this.firestore,new kh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=yU(e),r=_U(e,i=>new Jk(this.firestore,new kh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return uU(this._delegate,t,r)}withConverter(e){return new mo(this.firestore,this._delegate.withConverter(e?Bp.getInstance(this.firestore,e):null))}}class FG{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new q0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Jk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new mo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new q0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new FG(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new q0(this._firestore,r))})}isEqual(e){return oU(this._delegate,e._delegate)}}class Uy extends mo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new tl(this.firestore,e):null}doc(e){try{return new tl(this.firestore,void 0===e?XD(this._delegate):XD(this._delegate,e))}catch(t){throw go(t,"doc()","CollectionReference.doc()")}}add(e){return function bG(n,e){const t=Fn(n.firestore,xr),r=XD(n),i=hT(n.converter,e);return Ly(t,[sT(Lp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,$r.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new tl(this.firestore,t))}isEqual(e){return O2(this._delegate,e._delegate)}withConverter(e){return new Uy(this.firestore,this._delegate.withConverter(e?Bp.getInstance(this.firestore,e):null))}}function jp(n){return Fn(n,Ar)}class Xk{constructor(...e){this._delegate=new ld(...e)}static documentId(){return new Xk(ii.keyField().canonicalString())}isEqual(e){return(e=(0,U.m9)(e))instanceof ld&&this._delegate._internalPath.isEqual(e._internalPath)}}class $p{constructor(e){this._delegate=e}static serverTimestamp(){const e=function SG(){return new jk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new $p(e)}static delete(){const e=function TG(){return new U0("deleteField")}();return e._methodName="FieldValue.delete",new $p(e)}static arrayUnion(...e){const t=function AG(...n){return new X3("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new $p(t)}static arrayRemove(...e){const t=function xG(...n){return new eG("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new $p(t)}static increment(e){const t=function MG(n){return new tG("increment",n)}(e);return t._methodName="FieldValue.increment",new $p(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const LG={Firestore:pU,GeoPoint:rT,Timestamp:jr,Blob:H0,Transaction:gU,WriteBatch:mU,DocumentReference:tl,DocumentSnapshot:G0,Query:mo,QueryDocumentSnapshot:q0,QuerySnapshot:Jk,CollectionReference:Uy,FieldPath:Xk,FieldValue:$p,setLogLevel:function OG(n){!function Oj(n){yh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function vU(n,e){return function BG(n,e=Zr.z){return new vs.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function e1(n,e){return vU(n,e).pipe((0,Ct.U)(t=>({payload:t,type:"query"})))}function pT(n,e){return e1(n,e).pipe(Fm(void 0),Jx(),(0,Ct.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,f)=>{const m=i.find(T=>T.doc.ref.isEqual(u.ref)),v=t?.payload.docs.find(T=>T.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),a}))}function wU(n,e,t){return pT(n,t).pipe(S((r,i)=>function $G(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function HG(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return t1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return t1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return t1(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),N(),(0,Ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function t1(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function bU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function VG(n){(function UG(n,e){n.INTERNAL.registerComponent(new $t.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},LG)))})(n,(e,t)=>new pU(e,t,new PG)),n.registerVersion("@firebase/firestore-compat","0.3.1")}(St.Z);class EU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=pT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ct.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Fm(void 0),Jx(),ha(([r,i])=>i.length>0||!r),(0,Ct.U)(([r,i])=>i),Ye.iC)}auditTrail(e){return this.stateChanges(e).pipe(S((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=bU(e);return wU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ye.iC)}valueChanges(e={}){return e1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ye.iC)}get(e){return(0,kn.D)(this.query.get(e)).pipe(Ye.iC)}add(e){return this.ref.add(e)}doc(e){return new CU(this.ref.doc(e),this.afs)}}class CU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=TU(r,t);return new EU(i,a,this.afs)}snapshotChanges(){return function jG(n,e){return vU(n,e).pipe(Fm(void 0),Jx(),(0,Ct.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ye.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,kn.D)(this.ref.get(e)).pipe(Ye.iC)}}class GG{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?pT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ha(t=>t.length>0),Ye.iC):pT(this.query,this.afs.schedulers.outsideAngular).pipe(Ye.iC)}auditTrail(e){return this.stateChanges(e).pipe(S((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=bU(e);return wU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ye.iC)}valueChanges(e={}){return e1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Ye.iC)}get(e){return(0,kn.D)(this.query.get(e)).pipe(Ye.iC)}}const IU=new d.OlP("angularfire2.enableFirestorePersistence"),DU=new d.OlP("angularfire2.firestore.persistenceSettings"),qG=new d.OlP("angularfire2.firestore.settings"),zG=new d.OlP("angularfire2.firestore.use-emulator");function TU(n,e=(t=>t)){return{query:e(n),ref:n}}let SU=(()=>{class n{constructor(t,r,i,a,u,f,m,v,T,M,L,W,X,De,ke,Ft,Vt){this.schedulers=m;const wt=(0,fr.on)(t,f,r),kt=T;M&&Ov(wt,f,L,X,De,ke,W,Ft),[this.firestore,this.persistenceEnabled$]=(0,fr.cc)(`${wt.name}.firestore`,"AngularFirestore",wt.name,()=>{const Zt=f.runOutsideAngular(()=>wt.firestore());if(a&&Zt.settings(a),kt&&Zt.useEmulator(...kt),i&&!tu(u)){const ln=()=>{try{return(0,kn.D)(Zt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Yr){return typeof console<"u"&&console.warn(Yr),pt(!1)}};return[Zt,f.runOutsideAngular(ln)]}return[Zt,pt(!1)]},[a,kt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=TU(i,r),f=this.schedulers.ngZone.run(()=>a);return new EU(f,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new GG(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new CU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fr.Dh),d.LFG(fr.xv,8),d.LFG(IU,8),d.LFG(qG,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Ye.HU),d.LFG(DU,8),d.LFG(zG,8),d.LFG(Bf,8),d.LFG(xv,8),d.LFG(Mv,8),d.LFG(Rv,8),d.LFG(kv,8),d.LFG(Nv,8),d.LFG(Pv,8),d.LFG(Hl,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),WG=(()=>{class n{constructor(){Nm.Z.registerVersion("angularfire",Ye.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:IU,useValue:!0},{provide:DU,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[SU]}),n})();class nl{constructor(e,t,r,i){this.afs=e,this.afAuth=t,this.router=r,this.ngZone=i,this.afAuth.authState.subscribe(a=>{a?(this.userData=a,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,t){return this.afAuth.signInWithEmailAndPassword(e,t).then(r=>{this.SetUserData(r.user),this.afAuth.authState.subscribe(i=>{i&&this.router.navigate(["dashboard/donors"])})}).catch(r=>{Zl().fire("What is wrong with u?",r.message.split(":").pop().split("(")[0])})}SignUp(e,t){return this.afAuth.createUserWithEmailAndPassword(e,t).then(r=>{this.SendVerificationMail(),this.SetUserData(r.user)}).catch(r=>{Zl().fire("Error",r.message.split(":").pop().split("(")[0])})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{Zl().fire("Info","Password reset email sent, check your inbox.")}).catch(t=>{Zl().fire("Error",t.message.split(":").pop().split("(")[0])})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}GoogleAuth(){return this.AuthLogin(new kB.Q).then(e=>{this.router.navigate(["dashboard/donors"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(t=>{this.router.navigate(["dashboard/donors"]),this.SetUserData(t.user)}).catch(t=>{Zl().fire("Error",t.message.split(":").pop().split("(")[0])})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}function ZG(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",27)(1,"ul",28)(2,"li",29)(3,"a",30)(4,"div",31)(5,"div",32),d._UZ(6,"img",33),d.qZA(),d.TgZ(7,"div",34)(8,"div",35),d._uU(9),d.qZA(),d.TgZ(10,"div",36),d._uU(11),d.qZA()()()(),d.TgZ(12,"div",37)(13,"div",38)(14,"div",39)(15,"div",40),d._UZ(16,"img",33),d.qZA(),d.TgZ(17,"div",41)(18,"span",42),d._uU(19),d.qZA(),d.TgZ(20,"span",43),d._uU(21),d.qZA()()()(),d.TgZ(22,"div",44)(23,"ul",45)(24,"li")(25,"a",46),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.authService.SignOut())}),d._UZ(26,"em",47),d.TgZ(27,"span"),d._uU(28,"Sign out"),d.qZA()()()()()()()()()}if(2&n){const t=e.ngIf;d.xp6(6),d.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",d.LSH),d.xp6(3),d.Oqu(t.displayName?t.displayName:"User"),d.xp6(2),d.Oqu(t.email),d.xp6(5),d.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",d.LSH),d.xp6(3),d.Oqu(t.name),d.xp6(2),d.Oqu(t.email)}}nl.\u0275fac=function(e){return new(e||nl)(d.LFG(SU),d.LFG(Bf),d.LFG(p),d.LFG(d.R0b))},nl.\u0275prov=d.Yz7({token:nl,factory:nl.\u0275fac,providedIn:"root"});const AU=function(){return{exact:!0}};class z0{constructor(e){this.authService=e}}function KG(n,e){if(1&n&&(d.TgZ(0,"option",20),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("ngValue",t.value),d.xp6(1),d.Oqu(t.name)}}function YG(n,e){if(1&n&&(d.TgZ(0,"option",20),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("ngValue",t.value),d.xp6(1),d.Oqu(t.name)}}function QG(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",1)(1,"h4"),d._uU(2,"Tutorial"),d.qZA(),d.TgZ(3,"form")(4,"div",2)(5,"label",3),d._uU(6,"First name"),d.qZA(),d.TgZ(7,"input",4),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.currentDonor.fname=i)}),d.qZA()(),d.TgZ(8,"div",2)(9,"label",5),d._uU(10,"last name"),d.qZA(),d.TgZ(11,"input",6),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.currentDonor.lname=i)}),d.qZA()(),d.TgZ(12,"div",2)(13,"label",7),d._uU(14,"Age"),d.qZA(),d.TgZ(15,"input",8),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.currentDonor.age=i)}),d.qZA()(),d.TgZ(16,"div",2)(17,"label",9),d._uU(18,"Phone"),d.qZA(),d.TgZ(19,"input",10),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.currentDonor.phone=i)}),d.qZA()(),d.TgZ(20,"div",2)(21,"label",11),d._uU(22,"Address"),d.qZA(),d.TgZ(23,"input",12),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.currentDonor.address=i)}),d.qZA()(),d.TgZ(24,"div",2)(25,"label",13),d._uU(26,"Blood type"),d.qZA(),d.TgZ(27,"div",14)(28,"select",15),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.currentDonor.bloodType=i)}),d.YNc(29,KG,2,2,"option",16),d.qZA()()(),d.TgZ(30,"div",2)(31,"label",13),d._uU(32,"Gender"),d.qZA(),d.TgZ(33,"div",14)(34,"select",17),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.currentDonor.sexe=i)}),d.YNc(35,YG,2,2,"option",16),d.qZA()()()(),d.TgZ(36,"button",18),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.deleteDonor())}),d._uU(37," Delete "),d.qZA(),d.TgZ(38,"button",19),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.updateDonor())}),d._uU(39," Update "),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(7),d.Q6J("ngModel",t.currentDonor.fname),d.xp6(4),d.Q6J("ngModel",t.currentDonor.lname),d.xp6(4),d.Q6J("ngModel",t.currentDonor.age),d.xp6(4),d.Q6J("ngModel",t.currentDonor.phone),d.xp6(4),d.Q6J("ngModel",t.currentDonor.address),d.xp6(5),d.Q6J("ngModel",t.currentDonor.bloodType),d.xp6(1),d.Q6J("ngForOf",t.bloodtypesOptions),d.xp6(5),d.Q6J("ngModel",t.currentDonor.sexe),d.xp6(1),d.Q6J("ngForOf",t.sexeOptions)}}z0.\u0275fac=function(e){return new(e||z0)(d.Y36(nl))},z0.\u0275cmp=d.Xpm({type:z0,selectors:[["app-dashboard"]],decls:32,vars:5,consts:[[1,"nk-app-root"],[1,"nk-main"],["data-content","sidebarMenu",1,"nk-sidebar","nk-sidebar-fixed","is-light"],[1,"nk-sidebar-element","nk-sidebar-head"],[1,"nk-menu-trigger","me-n2"],["data-target","sidebarMenu",1,"nk-nav-toggle","nk-quick-nav-icon","d-xl-none"],[1,"icon","ni","ni-arrow-left"],[1,"nk-sidebar-element"],["data-simplebar","",1,"nk-sidebar-body"],[1,"nk-sidebar-content"],[1,"nk-sidebar-menu"],[1,"nk-menu"],["routerLinkActive","active",1,"nk-menu-item",3,"routerLinkActiveOptions"],["routerLink","donors",1,"nk-menu-link"],[1,"nk-menu-text"],["routerLink","add",1,"nk-menu-link"],[1,"nk-wrap"],[1,"nk-header","nk-header-fluid","nk-header-fixed","is-light"],[1,"container-fluid"],[1,"nk-header-wrap"],[1,"nk-menu-trigger","d-xl-none","ms-n1"],["href","#","data-target","sidebarMenu",1,"nk-nav-toggle","nk-quick-nav-icon"],[1,"icon","ni","ni-menu"],["class","nk-header-tools",4,"ngIf"],[1,"nk-content","nk-content-fluid"],[1,"container-xl","wide-lg"],[1,"nk-content-body"],[1,"nk-header-tools"],[1,"nk-quick-nav"],[1,"dropdown","user-dropdown"],["href","#","data-bs-toggle","dropdown",1,"dropdown-toggle"],[1,"user-toggle"],[1,"user-avatar","sm"],["alt","user",3,"src"],[1,"user-info","d-none","d-md-block"],[1,"user-name","dropdown-indicator"],[1,"user-status"],[1,"dropdown-menu","dropdown-menu-md","dropdown-menu-right","dropdown-menu-s1"],[1,"dropdown-inner","user-card-wrap","bg-lighter","d-none","d-md-block"],[1,"user-card"],[1,"user-avatar"],[1,"user-info"],[1,"lead-text"],[1,"sub-text"],[1,"dropdown-inner"],[1,"link-list"],[2,"cursor","pointer",3,"click"],[1,"icon","ni","ni-signout"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),d._UZ(6,"em",6),d.qZA()()(),d.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"ul",11)(12,"li",12)(13,"a",13)(14,"span",14),d._uU(15,"All The Donors"),d.qZA()()(),d.TgZ(16,"li",12)(17,"a",15)(18,"span",14),d._uU(19,"Add New Donor"),d.qZA()()()()()()()()(),d.TgZ(20,"div",16)(21,"div",17)(22,"div",18)(23,"div",19)(24,"div",20)(25,"a",21),d._UZ(26,"em",22),d.qZA()(),d.YNc(27,ZG,29,6,"div",23),d.qZA()()(),d.TgZ(28,"div",24)(29,"div",25)(30,"div",26),d._UZ(31,"router-outlet"),d.qZA()()()()()()),2&e&&(d.xp6(12),d.Q6J("routerLinkActiveOptions",d.DdM(3,AU)),d.xp6(4),d.Q6J("routerLinkActiveOptions",d.DdM(4,AU)),d.xp6(11),d.Q6J("ngIf",t.authService.userData))},dependencies:[Ei,ip,b,D]});class W0{constructor(e){this.donorService=e,this.refreshList=new d.vpe,this.currentDonor={fname:"",lname:"",age:1,bloodType:"",phone:1,address:"",sexe:""},this.sexeOptions=[{value:"male",name:"male"},{value:"female",name:"female"}],this.bloodtypesOptions=[{value:"A+",name:"A RhD positive (A+)"},{value:"A-",name:"A RhD negative (A-)"},{value:"B+",name:"B RhD positive (B+)"},{value:"B-",name:"B RhD negative (B-)"},{value:"O+",name:"O RhD positive (O+)"},{value:"O-",name:"O RhD negative (O-)"},{value:"AB+",name:"AB RhD positive (AB+)"}]}ngOnInit(){}ngOnChanges(){this.currentDonor={...this.donor}}updateDonor(){const e={fname:this.currentDonor.fname,lname:this.currentDonor.lname,age:this.currentDonor.age,bloodType:this.currentDonor.bloodType,phone:this.currentDonor.phone,address:this.currentDonor.address,sexe:this.currentDonor.sexe};console.log(e),this.currentDonor.key&&this.donorService.update(this.currentDonor.key,e).then(()=>Zl().fire("Done","The donor was updated successfully!","success")).catch(t=>console.log(t))}deleteDonor(){this.confirmBox()}confirmBox(){Zl().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(e=>{e.value?(this.currentDonor.key&&this.donorService.delete(this.currentDonor.key).then(()=>{this.refreshList.emit()}).catch(t=>console.log(t)),Zl().fire("Deleted!","Your imaginary file has been deleted.","success")):e.dismiss===Zl().DismissReason.cancel&&Zl().fire("Cancelled","Your imaginary file is safe :)","error")})}}W0.\u0275fac=function(e){return new(e||W0)(d.Y36(dh))},W0.\u0275cmp=d.Xpm({type:W0,selectors:[["app-donor-details"]],inputs:{donor:"donor"},outputs:{refreshList:"refreshList"},features:[d.TTD],decls:1,vars:1,consts:[["class","edit-form",4,"ngIf"],[1,"edit-form"],[1,"form-group"],["for","fname"],["type","text","id","fname","required","","name","fname",1,"form-control",3,"ngModel","ngModelChange"],["for","lname"],["type","text","id","lname","required","","name","lname",1,"form-control",3,"ngModel","ngModelChange"],["for","age"],["type","text","id","age","required","","name","age",1,"form-control",3,"ngModel","ngModelChange"],["for","phone"],["type","text","id","phone","required","","name","phone",1,"form-control",3,"ngModel","ngModelChange"],["for","address"],["type","text","id","address","required","","name","address",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-label"],[1,"form-control-wrap"],["id","bloodType","name","bloodType",1,"form-select","js-select2",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["id","sexe","name","sexe",1,"form-select","js-select2",3,"ngModel","ngModelChange"],[1,"btn","btn-danger",3,"click"],["type","submit",1,"btn","btn-success",3,"click"],[3,"ngValue"]],template:function(e,t){1&e&&d.YNc(0,QG,40,9,"div",0),2&e&&d.Q6J("ngIf",t.currentDonor)},dependencies:[bi,Ei,Lw,Kx,Qx,Mw,Uw,Nx,Rw,Vw,zI,hp],styles:[".btn[_ngcontent-%COMP%]{margin-right:16px;margin-top:20px}"]});const JG=["myModalClose"];function XG(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr")(1,"th"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td")(8,"li")(9,"a",22),d.NdJ("click",function(){const i=d.CHM(t),a=i.$implicit,u=i.index,f=d.oxw();return d.KtG(f.setActiveDonor(a,u))}),d._uU(10,"View"),d.qZA()()()()}if(2&n){const t=e.$implicit,r=e.index;d.xp6(2),d.Oqu(r+1),d.xp6(2),d.Oqu(t.fname),d.xp6(2),d.Oqu(t.lname)}}function eq(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"app-donor-details",23),d.NdJ("refreshList",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.refreshList())}),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("donor",t.currentDonor)}}function tq(n,e){1&n&&d._UZ(0,"div")}class Z0{constructor(e){this.donoservice=e,this.currentIndex=-1,this.title=""}ngOnInit(){this.retrieveDonors()}refreshList(){this.currentDonor=void 0,this.currentIndex=-1,this.retrieveDonors(),this.modalClose.nativeElement.click()}retrieveDonors(){this.donoservice.getAll().snapshotChanges().pipe((0,Ct.U)(e=>e.map(t=>({key:t.payload.key,...t.payload.val()})))).subscribe(e=>{this.donors=e})}setActiveDonor(e,t){this.currentDonor=e,this.currentIndex=t}removeAllDonors(){this.donoservice.deleteAll().then(()=>this.refreshList()).catch(e=>console.log(e))}}Z0.\u0275fac=function(e){return new(e||Z0)(d.Y36(dh))},Z0.\u0275cmp=d.Xpm({type:Z0,selectors:[["app-donors-list"]],viewQuery:function(e,t){if(1&e&&d.Gf(JG,5),2&e){let r;d.iGM(r=d.CRH())&&(t.modalClose=r.first)}},decls:33,vars:3,consts:[[1,"nk-block"],[1,"card","card-bordered","h-100"],[1,"card-inner","border-bottom"],[1,"card-title-group"],[1,"card-title"],[1,"title"],[1,"card-tools"],["type","text","id","myInput","onkeyup","myFunction()","placeholder","Search for names..",1,"form-control"],[1,"card-inner","p-0"],["id","myTable",1,"table","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],["tabindex","-1","id","modalDefault",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],["href","/dashboard/donors","data-dismiss","modal","aria-label","Close",1,"close"],["myModalClose",""],[1,"icon","ni","ni-cross"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#modalDefault",1,"pointer",3,"click"],[3,"donor","refreshList"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h6",5),d._uU(6,"Doners list"),d.qZA()(),d.TgZ(7,"div",6),d._UZ(8,"input",7),d.qZA()()(),d.TgZ(9,"div",8)(10,"table",9)(11,"thead")(12,"tr")(13,"th",10),d._uU(14,"Number"),d.qZA(),d.TgZ(15,"th",10),d._uU(16,"First Name"),d.qZA(),d.TgZ(17,"th",10),d._uU(18,"Last Name"),d.qZA()()(),d.TgZ(19,"tbody"),d.YNc(20,XG,11,3,"tr",11),d.qZA()()()()(),d.TgZ(21,"div",12)(22,"div",13)(23,"div",14)(24,"a",15,16),d._UZ(26,"em",17),d.qZA(),d.TgZ(27,"div",18)(28,"h5",19),d._uU(29,"Modal Title"),d.qZA()(),d.TgZ(30,"div",20),d.YNc(31,eq,2,1,"div",21),d.YNc(32,tq,1,0,"div",21),d.qZA()()()()),2&e&&(d.xp6(20),d.Q6J("ngForOf",t.donors),d.xp6(11),d.Q6J("ngIf",t.currentDonor),d.xp6(1),d.Q6J("ngIf",!t.currentDonor))},dependencies:[bi,Ei,W0],styles:[".pointer[_ngcontent-%COMP%]{cursor:pointer}"]});class K0{constructor(e){this.authService=e}ngOnInit(){}}K0.\u0275fac=function(e){return new(e||K0)(d.Y36(nl))},K0.\u0275cmp=d.Xpm({type:K0,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(e,t){if(1&e){const r=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),d._uU(4,"Reset Password"),d.qZA(),d.TgZ(5,"p",3),d._uU(6,"Please enter your email address to request a password reset."),d.qZA(),d.TgZ(7,"div",4),d._UZ(8,"input",5,6),d.qZA(),d.TgZ(10,"div",4)(11,"input",7),d.NdJ("click",function(){d.CHM(r);const a=d.MAs(9);return d.KtG(t.authService.ForgotPassword(a.value))}),d.qZA()()(),d.TgZ(12,"div",8)(13,"span"),d._uU(14,"Go back to ? "),d.TgZ(15,"span",9),d._uU(16,"Log In"),d.qZA()()()()()}},dependencies:[b]});class Y0{constructor(e){this.authService=e}ngOnInit(){}}Y0.\u0275fac=function(e){return new(e||Y0)(d.Y36(nl))},Y0.\u0275cmp=d.Xpm({type:Y0,selectors:[["app-sign-in"]],decls:49,vars:0,consts:[[1,"nk-block","nk-block-middle","nk-auth-body","wide-xs"],[1,"card","card-bordered"],[1,"card-inner","card-inner-lg"],[1,"nk-block-head"],[1,"nk-block-head-content"],[1,"nk-block-title"],[1,"nk-block-des"],["action","html/index.html"],[1,"form-group"],[1,"form-label-group"],["for","default-01",1,"form-label"],[1,"form-control-wrap"],["type","text","id","default-01","placeholder","Username","required","",1,"form-control","form-control-lg"],["userName",""],["for","password",1,"form-label"],["routerLink","/forgot-password",1,"link","link-primary","link-sm"],["href","#","data-target","password",1,"form-icon","form-icon-right","passcode-switch","lg"],[1,"passcode-icon","icon-show","icon","ni","ni-eye"],[1,"passcode-icon","icon-hide","icon","ni","ni-eye-off"],["type","password","id","password","placeholder","Password","required","",1,"form-control","form-control-lg"],["userPassword",""],[1,"btn","btn-lg","btn-primary","btn-block",3,"click"],[1,"form-note-s2","text-center","pt-4"],["routerLink","/register-user"],[1,"text-center","pt-4","pb-3"],[1,"overline-title","overline-title-sap"],[1,"nav","justify-center","gx-4"],[1,"nav-item"],[1,"nav-link",3,"click"]],template:function(e,t){if(1&e){const r=d.EpF();d._UZ(0,"br")(1,"br")(2,"br")(3,"br"),d.TgZ(4,"div",0)(5,"div",1)(6,"div",2)(7,"div",3)(8,"div",4)(9,"h4",5),d._uU(10,"Sign-In"),d.qZA(),d.TgZ(11,"div",6)(12,"p"),d._uU(13,"Access the Dashlite panel using your email and passcode."),d.qZA()()()(),d.TgZ(14,"form",7)(15,"div",8)(16,"div",9)(17,"label",10),d._uU(18,"Email or Username"),d.qZA()(),d.TgZ(19,"div",11),d._UZ(20,"input",12,13),d.qZA()(),d.TgZ(22,"div",8)(23,"div",9)(24,"label",14),d._uU(25,"Passcode"),d.qZA(),d.TgZ(26,"a",15),d._uU(27,"Forgot Code?"),d.qZA()(),d.TgZ(28,"div",11)(29,"a",16),d._UZ(30,"em",17)(31,"em",18),d.qZA(),d._UZ(32,"input",19,20),d.qZA()(),d.TgZ(34,"div",8)(35,"button",21),d.NdJ("click",function(){d.CHM(r);const a=d.MAs(21),u=d.MAs(33);return d.KtG(t.authService.SignIn(a.value,u.value))}),d._uU(36,"Sign in"),d.qZA()()(),d.TgZ(37,"div",22),d._uU(38," New on our platform? "),d.TgZ(39,"a",23),d._uU(40,"Create an account"),d.qZA()(),d.TgZ(41,"div",24)(42,"h6",25)(43,"span"),d._uU(44,"OR"),d.qZA()()(),d.TgZ(45,"ul",26)(46,"li",27)(47,"a",28),d.NdJ("click",function(){return t.authService.GoogleAuth()}),d._uU(48,"Google"),d.qZA()()()()()()}},dependencies:[b,Lw,Rw,hp]});class Q0{constructor(e){this.authService=e}ngOnInit(){}}function nq(n,e){if(1&n&&(d.TgZ(0,"div",4)(1,"p",9),d._uU(2,"We have sent a confirmation email to "),d.TgZ(3,"strong"),d._uU(4),d.qZA(),d._uU(5,"."),d.qZA(),d.TgZ(6,"p",9),d._uU(7,"Please check your email and click on the link to verfiy your email address."),d.qZA()()),2&n){const t=e.ngIf;d.xp6(4),d.Oqu(t.email)}}Q0.\u0275fac=function(e){return new(e||Q0)(d.Y36(nl))},Q0.\u0275cmp=d.Xpm({type:Q0,selectors:[["app-sign-up"]],decls:41,vars:0,consts:[[1,"nk-block","nk-block-middle","nk-auth-body","wide-xs"],[1,"card","card-bordered"],[1,"card-inner","card-inner-lg"],[1,"nk-block-head"],[1,"nk-block-head-content"],[1,"nk-block-title"],[1,"nk-block-des"],["action","html/index.html"],[1,"form-group"],[1,"form-control-wrap"],["type","text","id","default-01","placeholder","Email","required","",1,"form-control","form-control-lg"],["userName",""],["href","#","data-target","password",1,"form-icon","form-icon-right","passcode-switch","lg"],[1,"passcode-icon","icon-show","icon","ni","ni-eye"],[1,"passcode-icon","icon-hide","icon","ni","ni-eye-off"],["type","password","id","password","placeholder","Password","required","",1,"form-control","form-control-lg"],["userPassword",""],[1,"btn","btn-lg","btn-primary","btn-block",3,"click"],[1,"form-note-s2","text-center","pt-4"],["routerLink","/sign-in"],[1,"text-center","pt-4","pb-3"],[1,"overline-title","overline-title-sap"],[1,"nav","justify-center","gx-4"],[1,"nav-item"],[1,"nav-link",3,"click"]],template:function(e,t){if(1&e){const r=d.EpF();d._UZ(0,"br")(1,"br")(2,"br")(3,"br"),d.TgZ(4,"div",0)(5,"div",1)(6,"div",2)(7,"div",3)(8,"div",4)(9,"h4",5),d._uU(10,"Sign-Un"),d.qZA(),d.TgZ(11,"div",6)(12,"p"),d._uU(13,"Creating an account using your email and passcode."),d.qZA()()()(),d.TgZ(14,"form",7)(15,"div",8)(16,"div",9),d._UZ(17,"input",10,11),d.qZA()(),d.TgZ(19,"div",8)(20,"div",9)(21,"a",12),d._UZ(22,"em",13)(23,"em",14),d.qZA(),d._UZ(24,"input",15,16),d.qZA()(),d.TgZ(26,"div",8)(27,"button",17),d.NdJ("click",function(){d.CHM(r);const a=d.MAs(18),u=d.MAs(25);return d.KtG(t.authService.SignUp(a.value,u.value))}),d._uU(28,"Sign in"),d.qZA()()(),d.TgZ(29,"div",18),d._uU(30," Signed Up? "),d.TgZ(31,"a",19),d._uU(32,"Sign in to your account"),d.qZA()(),d.TgZ(33,"div",20)(34,"h6",21)(35,"span"),d._uU(36,"OR"),d.qZA()()(),d.TgZ(37,"ul",22)(38,"li",23)(39,"a",24),d.NdJ("click",function(){return t.authService.GoogleAuth()}),d._uU(40,"Google"),d.qZA()()()()()()}},dependencies:[b,Lw,Rw,hp]});class J0{constructor(e){this.authService=e}ngOnInit(){}}J0.\u0275fac=function(e){return new(e||J0)(d.Y36(nl))},J0.\u0275cmp=d.Xpm({type:J0,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),d._uU(4,"Thank You for Registering"),d.qZA(),d.YNc(5,nq,8,1,"div",3),d.TgZ(6,"div",4)(7,"button",5),d.NdJ("click",function(){return t.authService.SendVerificationMail()}),d._UZ(8,"i",6),d._uU(9," Resend Verification Email "),d.qZA()()(),d.TgZ(10,"div",7)(11,"span"),d._uU(12,"Go back to?"),d.TgZ(13,"span",8),d._uU(14," Sign in"),d.qZA()()()()()),2&e&&(d.xp6(5),d.Q6J("ngIf",t.authService.userData))},dependencies:[Ei,b]});class Vy{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}Vy.\u0275fac=function(e){return new(e||Vy)(d.LFG(nl),d.LFG(p))},Vy.\u0275prov=d.Yz7({token:Vy,factory:Vy.\u0275fac,providedIn:"root"});const rq=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:Y0},{path:"register-user",component:Q0},{path:"forgot-password",component:K0},{path:"verify-email-address",component:J0},{path:"dashboard",component:z0,canActivate:[Vy],children:[{path:"donors",component:Z0},{path:"add",component:Bw}]}];class By{}By.\u0275fac=function(e){return new(e||By)},By.\u0275mod=d.oAB({type:By}),By.\u0275inj=d.cJS({imports:[MN.forRoot(rq),MN]});class X0{constructor(){this.title="blood-donation"}}X0.\u0275fac=function(e){return new(e||X0)},X0.\u0275cmp=d.Xpm({type:X0,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&d._UZ(0,"router-outlet")},dependencies:[ip]});const xU="firebasestorage.googleapis.com",MU="storageBucket";class Kr extends U.ZR{constructor(e,t,r=0){super(n1(e),`Firebase Storage: ${t} (${n1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Kr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return n1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function n1(n){return"storage/"+n}function r1(){return new Kr("unknown","An unknown error occurred, please check the error payload for server response.")}function RU(){return new Kr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function kU(){return new Kr("canceled","User canceled the upload/download.")}function NU(){return new Kr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function jy(n){return new Kr("invalid-argument",n)}function PU(){return new Kr("app-deleted","The Firebase app was deleted.")}function OU(n){return new Kr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function eb(n,e){return new Kr("invalid-format","String does not match format '"+n+"': "+e)}function tb(n){throw new Kr("internal-error","Internal error: "+n)}class Hs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Hs.makeFromUrl(e,t)}catch{return new Hs(e,"")}if(""===r.path)return r;throw function pq(n){return new Kr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(kt){kt.path_=decodeURIComponent(kt.path)}const M=t.replace(/[.]/g,"\\."),wt=[{regex:f,indices:{bucket:1,path:3},postModify:function a(kt){"/"===kt.path.charAt(kt.path.length-1)&&(kt.path_=kt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===xU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let kt=0;kt<wt.length;kt++){const Zt=wt[kt],ln=Zt.regex.exec(e);if(ln){let Ql=ln[Zt.indices.path];Ql||(Ql=""),r=new Hs(ln[Zt.indices.bucket],Ql),Zt.postModify(r);break}}if(null==r)throw function fq(n){return new Kr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class vq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function gT(n){return"string"==typeof n||n instanceof String}function FU(n){return i1()&&n instanceof Blob}function i1(){return typeof Blob<"u"&&!(0,U.UG)()}function s1(n,e,t,r){if(r<e)throw jy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw jy(`Invalid value for '${n}'. Expected ${t} or less.`)}function cd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function LU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Oh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Oh||(Oh={})),Oh))();function UU(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class Dq{constructor(e,t,r,i,a,u,f,m,v,T,M,L=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=T,this.connectionFactory_=M,this.retry=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((W,X)=>{this.resolve_=W,this.reject_=X,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,u=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function Eq(n){return void 0!==n}(m)?a():a(m)}catch(m){u(m)}else if(null!==f){const m=r1();m.serverResponse=f.getErrorText(),u(this.errorCallback_?this.errorCallback_(f,m):m)}else u(i.canceled?this.appDelete_?PU():kU():RU())};this.canceled_?t(0,new mT(!1,null,!0)):this.backoffId_=function wq(n,e,t){let r=1,i=null,a=null,u=!1,f=0;function m(){return 2===f}let v=!1;function T(...ke){v||(v=!0,e.apply(null,ke))}function M(ke){i=setTimeout(()=>{i=null,n(W,m())},ke)}function L(){a&&clearTimeout(a)}function W(ke,...Ft){if(v)return void L();if(ke)return L(),void T.call(null,ke,...Ft);if(m()||u)return L(),void T.call(null,ke,...Ft);let wt;r<64&&(r*=2),1===f?(f=2,wt=0):wt=1e3*(r+Math.random()),M(wt)}let X=!1;function De(ke){X||(X=!0,L(),!v&&(null!==i?(ke||(f=2),clearTimeout(i),M(0)):ke||(f=1)))}return M(0),a=setTimeout(()=>{u=!0,De(!0)},t),De}((r,i)=>{if(i)return void r(!1,new mT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const f=a.getErrorCode()===Oh.NO_ERROR,m=a.getStatus();if(!f||UU(m,this.additionalRetryCodes_)&&this.retry){const T=a.getErrorCode()===Oh.ABORT;return void r(!1,new mT(!1,null,T))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new mT(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function bq(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class mT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function kq(...n){const e=function Rq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(i1())return new Blob(n);throw new Kr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const wa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class o1{constructor(e,t){this.data=e,this.contentType=t||null}}function a1(n,e){switch(n){case wa.RAW:return new o1(VU(e));case wa.BASE64:case wa.BASE64URL:return new o1(BU(n,e));case wa.DATA_URL:return new o1(function Fq(n){const e=new jU(n);return e.base64?BU(wa.BASE64,e.rest):function Oq(n){let e;try{e=decodeURIComponent(n)}catch{throw eb(wa.DATA_URL,"Malformed data URL.")}return VU(e)}(e.rest)}(e),function Lq(n){return new jU(n).contentType}(e))}throw r1()}function VU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function BU(n,e){switch(n){case wa.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw eb(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case wa.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw eb(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Pq(n){if(typeof atob>"u")throw function _q(n){return new Kr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:eb(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class jU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw eb(wa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Uq(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Zu{constructor(e,t){let r=0,i="";FU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(FU(this.data_)){const i=function Nq(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Zu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Zu(r,!0)}}static getBlob(...e){if(i1()){const t=e.map(r=>r instanceof Zu?r.data_:r);return new Zu(kq.apply(null,t))}{const t=e.map(u=>gT(u)?a1(wa.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let f=0;f<u.length;f++)i[a++]=u[f]}),new Zu(i,!0)}}uploadData(){return this.data_}}function l1(n){let e;try{e=JSON.parse(n)}catch{return null}return function Iq(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function $U(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function jq(n,e){return e}class yo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||jq}}let yT=null;function nb(){if(yT)return yT;const n=[];n.push(new yo("bucket")),n.push(new yo("generation")),n.push(new yo("metageneration")),n.push(new yo("name","fullPath",!0));const t=new yo("name");t.xform=function e(a,u){return function $q(n){return!gT(n)||n.length<2?n:$U(n)}(u)},n.push(t);const i=new yo("size");return i.xform=function r(a,u){return void 0!==u?Number(u):u},n.push(i),n.push(new yo("timeCreated")),n.push(new yo("updated")),n.push(new yo("md5Hash",null,!0)),n.push(new yo("cacheControl",null,!0)),n.push(new yo("contentDisposition",null,!0)),n.push(new yo("contentEncoding",null,!0)),n.push(new yo("contentLanguage",null,!0)),n.push(new yo("contentType",null,!0)),n.push(new yo("metadata","customMetadata",!0)),yT=n,yT}function HU(n,e,t){const r=l1(e);return null===r?null:function Gq(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return function Hq(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Hs(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function u1(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const GU="prefixes";class Ku{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yu(n){if(!n)throw r1()}function _T(n,e){return function t(r,i){const a=HU(n,i,e);return Yu(null!==a),a}}function $y(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function dq(){return new Kr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function cq(){return new Kr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function uq(n){return new Kr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function hq(n){return new Kr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function rb(n){const e=$y(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function lq(n){return new Kr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function zU(n,e,t){const i=cd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new Ku(i,"GET",_T(n,t),u);return f.errorHandler=rb(e),f}function Yq(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=cd(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,T=new Ku(f,"GET",function Zq(n,e){return function t(r,i){const a=function Wq(n,e,t){const r=l1(t);return null===r?null:function zq(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[GU])for(const i of t[GU]){const a=i.replace(/\/$/,""),u=n._makeStorageReference(new Hs(e,a));r.prefixes.push(u)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Hs(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Yu(null!==a),a}}(n,e.bucket),v);return T.urlParams=a,T.errorHandler=$y(e),T}function ZU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function ez(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class vT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function c1(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Yu(!1)}return Yu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const iz={STATE_CHANGED:"state_changed"},_o={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function d1(n){switch(n){case"running":case"pausing":case"canceling":return _o.RUNNING;case"paused":return _o.PAUSED;case"success":return _o.SUCCESS;case"canceled":return _o.CANCELED;default:return _o.ERROR}}class sz{constructor(e,t,r){if(function Cq(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Hy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class oz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw tb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tb("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class az extends oz{initXhr(){this.xhr_.responseType="text"}}function Yl(){return new az}class JU{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=nb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(UU(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=RU()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function tz(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u=ZU(e,r,i),f={name:u.fullPath},m=cd(a,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},M=u1(u,t),X=new Ku(m,"POST",function W(De){let ke;c1(De);try{ke=De.getResponseHeader("X-Goog-Upload-URL")}catch{Yu(!1)}return Yu(gT(ke)),ke},n.maxUploadRetryTime);return X.urlParams=f,X.headers=T,X.body=M,X.errorHandler=$y(e),X}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Yl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function nz(n,e,t,r){const m=new Ku(t,"POST",function a(v){const T=c1(v,["active","final"]);let M=null;try{M=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Yu(!1)}M||Yu(!1);const L=Number(M);return Yu(!isNaN(L)),new vT(L,r.size(),"final"===T)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=$y(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Yl,t,r);this._request=a,a.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new vT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let u;try{u=function rz(n,e,t,r,i,a,u,f){const m=new vT(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function mq(){return new Kr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let T=v;i>0&&(T=Math.min(T,i));const M=m.current;let W="";W=0===T?"finalize":v===T?"upload, finalize":"upload";const X={"X-Goog-Upload-Command":W,"X-Goog-Upload-Offset":`${m.current}`},De=r.slice(M,M+T);if(null===De)throw NU();const wt=new Ku(t,"POST",function ke(kt,Zt){const ln=c1(kt,["active","final"]),Yr=m.current+T,Ql=r.size();let p1;return p1="final"===ln?_T(e,a)(kt,Zt):null,new vT(Yr,Ql,"final"===ln,p1)},e.maxUploadRetryTime);return wt.headers=X,wt.body=De.uploadData(),wt.progressCallback=f||null,wt.errorHandler=$y(n),wt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(u,Yl,i,a,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=zU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Yl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function KU(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let wt="";for(let kt=0;kt<2;kt++)wt+=Math.random().toString().slice(2);return wt}();u["Content-Type"]="multipart/related; boundary="+m;const v=ZU(e,r,i),T=u1(v,t),W=Zu.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===W)throw NU();const X={name:v.fullPath},De=cd(a,n.host,n._protocol),Ft=n.maxUploadRetryTime,Vt=new Ku(De,"POST",_T(n,t),Ft);return Vt.urlParams=X,Vt.headers=u,Vt.body=W.uploadData(),Vt.errorHandler=$y(e),Vt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Yl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=kU(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=d1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new sz(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(d1(this._state)){case _o.SUCCESS:Hy(this._resolve.bind(null,this.snapshot))();break;case _o.CANCELED:case _o.ERROR:Hy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(d1(this._state)){case _o.RUNNING:case _o.PAUSED:e.next&&Hy(e.next.bind(e,this.snapshot))();break;case _o.SUCCESS:e.complete&&Hy(e.complete.bind(e))();break;default:e.error&&Hy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Hp{constructor(e,t){this._service=e,this._location=t instanceof Hs?t:Hs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Hp(e,t)}get root(){const e=new Hs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $U(this._location.path)}get storage(){return this._service}get parent(){const e=function Vq(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Hs(this._location.bucket,e);return new Hp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw OU(e)}}function eV(n,e,t){return h1.apply(this,arguments)}function h1(){return h1=(0,le.Z)(function*(n,e,t){const i=yield tV(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield eV(n,e,i.nextPageToken))}),h1.apply(this,arguments)}function tV(n,e){null!=e&&"number"==typeof e.maxResults&&s1("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Yq(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Yl)}function vz(n){n._throwIfRoot("getDownloadURL");const e=function Qq(n,e,t){const i=cd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new Ku(i,"GET",function Kq(n,e){return function t(r,i){const a=HU(n,i,e);return Yu(null!==a),function qq(n,e,t,r){const i=l1(e);if(null===i||!gT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const u=encodeURIComponent;return a.split(",").map(v=>{const M=n.fullPath;return cd("/b/"+u(n.bucket)+"/o/"+u(M),t,r)+LU({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),u);return f.errorHandler=rb(e),f}(n.storage,n._location,nb());return n.storage.makeRequestWithTokens(e,Yl).then(t=>{if(null===t)throw function yq(){return new Kr("no-download-url","The given file does not have any download URLs.")}();return t})}function nV(n,e){const t=function Bq(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Hs(n._location.bucket,t);return new Hp(n.storage,r)}function rV(n,e){if(n instanceof f1){const t=n;if(null==t._bucket)throw function gq(){return new Kr("no-default-bucket","No default bucket found. Did you set the '"+MU+"' property when initializing the app?")}();const r=new Hp(t,t._bucket);return null!=e?rV(r,e):r}return void 0!==e?nV(n,e):n}function Cz(n,e){if(e&&function bz(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof f1)return function Ez(n,e){return new Hp(n,e)}(n,e);throw jy("To use ref(service, url), the first argument must be a Storage instance.")}return rV(n,e)}function iV(n,e){const t=e?.[MU];return null==t?null:Hs.makeFromBucketSpec(t,n)}class f1{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=xU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Hs.makeFromBucketSpec(i,this._host):iV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Hs.makeFromBucketSpec(this._url,e):iV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){s1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){s1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,le.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,le.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Hp(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new vq(PU());{const u=function Mq(n,e,t,r,i,a,u=!0){const f=LU(n.urlParams),m=n.url+f,v=Object.assign({},n.headers);return function Aq(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function Tq(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function Sq(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function xq(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new Dq(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,le.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const sV="@firebase/storage";function lV(n,e){return Cz(n=(0,U.m9)(n),e)}function Nz(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new f1(t,r,i,e,zn.SDK_VERSION)}!function Pz(){(0,zn._registerComponent)(new $t.wA("storage",Nz,"PUBLIC").setMultipleInstances(!0)),(0,zn.registerVersion)(sV,"0.10.1",""),(0,zn.registerVersion)(sV,"0.10.1","esm2017")}();class wT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class cV{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new wT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?u=>t(new wT(u,this,this._ref)):{next:t.next?u=>t.next(new wT(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class dV{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new dd(e,this._service))}get items(){return this._delegate.items.map(e=>new dd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class dd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function kz(n,e){return nV(n,e)}(this._delegate,e);return new dd(t,this.storage)}get root(){return new dd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new dd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new cV(function Dz(n,e,t){return function pz(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new JU(n,new Zu(e),t)}(n=(0,U.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=wa.RAW,r){this._throwIfRoot("putString");const i=a1(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new cV(new JU(this._delegate,new Zu(i.data,!0),a),this)}listAll(){return function xz(n){return function mz(n){const e={prefixes:[],items:[]};return eV(n,e).then(()=>e)}(n=(0,U.m9)(n))}(this._delegate).then(e=>new dV(e,this.storage))}list(e){return function Az(n,e){return tV(n=(0,U.m9)(n),e)}(this._delegate,e||void 0).then(t=>new dV(t,this.storage))}getMetadata(){return function Tz(n){return function yz(n){n._throwIfRoot("getMetadata");const e=zU(n.storage,n._location,nb());return n.storage.makeRequestWithTokens(e,Yl)}(n=(0,U.m9)(n))}(this._delegate)}updateMetadata(e){return function Sz(n,e){return function _z(n,e){n._throwIfRoot("updateMetadata");const t=function Jq(n,e,t,r){const a=cd(e.fullServerUrl(),n.host,n._protocol),f=u1(t,r),v=n.maxOperationRetryTime,T=new Ku(a,"PATCH",_T(n,r),v);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=f,T.errorHandler=rb(e),T}(n.storage,n._location,e,nb());return n.storage.makeRequestWithTokens(t,Yl)}(n=(0,U.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Mz(n){return vz(n=(0,U.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Rz(n){return function wz(n){n._throwIfRoot("deleteObject");const e=function Xq(n,e){const r=cd(e.fullServerUrl(),n.host,n._protocol),f=new Ku(r,"DELETE",function u(m,v){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=rb(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Yl)}(n=(0,U.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw OU(e)}}class hV{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(fV(e))throw jy("ref() expected a child path but got a URL, use refFromURL instead.");return new dd(lV(this._delegate,e),this)}refFromURL(e){if(!fV(e))throw jy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Hs.makeFromUrl(e,this._delegate.host)}catch{throw jy("refFromUrl() expected a valid full URL but got an invalid one.")}return new dd(lV(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function uV(n,e,t,r={}){!function Iz(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,U.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function fV(n){return/^[A-Za-z]+:\/\//.test(n)}function Uz(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new hV(t,r)}function pV(n){const e=function Bz(n){return new vs.y(e=>{const t=u=>e.next(u);t(n.snapshot);const a=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){a()}}).pipe(function iq(n,e=Zr.z){return(0,ar.e)((t,r)=>{let i=null,a=null,u=null;const f=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=u+n,T=e.now();if(T<v)return i=this.schedule(void 0,v-T),void r.add(i);f()}t.subscribe((0,er.x)(r,v=>{a=v,u=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ct.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function bT(n){return{getDownloadURL:()=>pt(void 0).pipe(Ye.fc,tr(()=>n.getDownloadURL()),Ye.iC),getMetadata:()=>pt(void 0).pipe(Ye.fc,tr(()=>n.getMetadata()),Ye.iC),delete:()=>(0,kn.D)(n.delete()),child:e=>bT(n.child(e)),updateMetadata:e=>(0,kn.D)(n.updateMetadata(e)),put:(e,t)=>pV(n.put(e,t)),putString:(e,t,r)=>pV(n.putString(e,t,r)),list:e=>(0,kn.D)(n.list(e)),listAll:()=>(0,kn.D)(n.listAll())}}!function Vz(n){const e={TaskState:_o,TaskEvent:iz,StringFormat:wa,Storage:hV,Reference:dd};n.INTERNAL.registerComponent(new $t.wA("storage-compat",Uz,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.1")}(St.Z);const jz=new d.OlP("angularfire2.storageBucket"),$z=new d.OlP("angularfire2.storage.maxUploadRetryTime"),Hz=new d.OlP("angularfire2.storage.maxOperationRetryTime"),Gz=new d.OlP("angularfire2.storage.use-emulator");let qz=(()=>{class n{constructor(t,r,i,a,u,f,m,v,T,M){const L=(0,fr.on)(t,u,r);this.storage=(0,fr.cc)(`${L.name}.storage.${i}`,"AngularFireStorage",L.name,()=>{const W=u.runOutsideAngular(()=>L.storage(i||void 0)),X=T;return X&&W.useEmulator(...X),m&&W.setMaxUploadRetryTime(m),v&&W.setMaxOperationRetryTime(v),W},[m,v])}ref(t){return bT(this.storage.ref(t))}refFromURL(t){return bT(this.storage.refFromURL(t))}upload(t,r,i){return bT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fr.Dh),d.LFG(fr.xv,8),d.LFG(jz,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Ye.HU),d.LFG($z,8),d.LFG(Hz,8),d.LFG(Gz,8),d.LFG(Hl,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),Wz=(()=>{class n{constructor(){Nm.Z.registerVersion("angularfire",Ye.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[qz],imports:[zz]}),n})();class Gy{}Gy.\u0275fac=function(e){return new(e||Gy)},Gy.\u0275mod=d.oAB({type:Gy,bootstrap:[X0]}),Gy.\u0275inj=d.cJS({providers:[nl],imports:[fr.hO.initializeApp({apiKey:"AIzaSyBHtudD73PLqhHTMf8aJ4WWoIC1TUnp3lE",authDomain:"bl00d-donation-center.firebaseapp.com",projectId:"bl00d-donation-center",storageBucket:"bl00d-donation-center.appspot.com",messagingSenderId:"452354443776",appId:"1:452354443776:web:174c61766cae8749a966e5"}),Gp,By,EC,MB,hC,Wz,WG]}),No().bootstrapModule(Gy).catch(n=>console.error(n))},9751:(_t,Ne,j)=>{"use strict";j.d(Ne,{y:()=>we});var d=j(930),G=j(727),F=j(8822),ce=j(9635),pe=j(2416),ve=j(576),xe=j(2806);let we=(()=>{class ie{constructor(je){je&&(this._subscribe=je)}lift(je){const nt=new ie;return nt.source=this,nt.operator=je,nt}subscribe(je,nt,ft){const Ie=function Q(ie){return ie&&ie instanceof d.Lv||function Y(ie){return ie&&(0,ve.m)(ie.next)&&(0,ve.m)(ie.error)&&(0,ve.m)(ie.complete)}(ie)&&(0,G.Nn)(ie)}(je)?je:new d.Hp(je,nt,ft);return(0,xe.x)(()=>{const{operator:Fe,source:Pe}=this;Ie.add(Fe?Fe.call(Ie,Pe):Pe?this._subscribe(Ie):this._trySubscribe(Ie))}),Ie}_trySubscribe(je){try{return this._subscribe(je)}catch(nt){je.error(nt)}}forEach(je,nt){return new(nt=Te(nt))((ft,Ie)=>{const Fe=new d.Hp({next:Pe=>{try{je(Pe)}catch($e){Ie($e),Fe.unsubscribe()}},error:Ie,complete:ft});this.subscribe(Fe)})}_subscribe(je){var nt;return null===(nt=this.source)||void 0===nt?void 0:nt.subscribe(je)}[F.L](){return this}pipe(...je){return(0,ce.U)(je)(this)}toPromise(je){return new(je=Te(je))((nt,ft)=>{let Ie;this.subscribe(Fe=>Ie=Fe,Fe=>ft(Fe),()=>nt(Ie))})}}return ie.create=Qe=>new ie(Qe),ie})();function Te(ie){var Qe;return null!==(Qe=ie??pe.v.Promise)&&void 0!==Qe?Qe:Promise}},7579:(_t,Ne,j)=>{"use strict";j.d(Ne,{x:()=>xe});var d=j(9751),G=j(727);const ce=(0,j(3888).d)(Te=>function(){Te(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=j(8737),ve=j(2806);let xe=(()=>{class Te extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Q){const ie=new we(this,this);return ie.operator=Q,ie}_throwIfClosed(){if(this.closed)throw new ce}next(Q){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(Q)}})}error(Q){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Q;const{observers:ie}=this;for(;ie.length;)ie.shift().error(Q)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Q}=this;for(;Q.length;)Q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Q;return(null===(Q=this.observers)||void 0===Q?void 0:Q.length)>0}_trySubscribe(Q){return this._throwIfClosed(),super._trySubscribe(Q)}_subscribe(Q){return this._throwIfClosed(),this._checkFinalizedStatuses(Q),this._innerSubscribe(Q)}_innerSubscribe(Q){const{hasError:ie,isStopped:Qe,observers:je}=this;return ie||Qe?G.Lc:(this.currentObservers=null,je.push(Q),new G.w0(()=>{this.currentObservers=null,(0,pe.P)(je,Q)}))}_checkFinalizedStatuses(Q){const{hasError:ie,thrownError:Qe,isStopped:je}=this;ie?Q.error(Qe):je&&Q.complete()}asObservable(){const Q=new d.y;return Q.source=this,Q}}return Te.create=(Y,Q)=>new we(Y,Q),Te})();class we extends xe{constructor(Y,Q){super(),this.destination=Y,this.source=Q}next(Y){var Q,ie;null===(ie=null===(Q=this.destination)||void 0===Q?void 0:Q.next)||void 0===ie||ie.call(Q,Y)}error(Y){var Q,ie;null===(ie=null===(Q=this.destination)||void 0===Q?void 0:Q.error)||void 0===ie||ie.call(Q,Y)}complete(){var Y,Q;null===(Q=null===(Y=this.destination)||void 0===Y?void 0:Y.complete)||void 0===Q||Q.call(Y)}_subscribe(Y){var Q,ie;return null!==(ie=null===(Q=this.source)||void 0===Q?void 0:Q.subscribe(Y))&&void 0!==ie?ie:G.Lc}}},930:(_t,Ne,j)=>{"use strict";j.d(Ne,{Hp:()=>ft,Lv:()=>ie});var d=j(576),G=j(727),F=j(2416),ce=j(7849),pe=j(5032);const ve=Te("C",void 0,void 0);function Te(Ge,Le,Ue){return{kind:Ge,value:Le,error:Ue}}var Y=j(3410),Q=j(2806);class ie extends G.w0{constructor(Le){super(),this.isStopped=!1,Le?(this.destination=Le,(0,G.Nn)(Le)&&Le.add(this)):this.destination=$e}static create(Le,Ue,Je){return new ft(Le,Ue,Je)}next(Le){this.isStopped?Pe(function we(Ge){return Te("N",Ge,void 0)}(Le),this):this._next(Le)}error(Le){this.isStopped?Pe(function xe(Ge){return Te("E",void 0,Ge)}(Le),this):(this.isStopped=!0,this._error(Le))}complete(){this.isStopped?Pe(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Le){this.destination.next(Le)}_error(Le){try{this.destination.error(Le)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qe=Function.prototype.bind;function je(Ge,Le){return Qe.call(Ge,Le)}class nt{constructor(Le){this.partialObserver=Le}next(Le){const{partialObserver:Ue}=this;if(Ue.next)try{Ue.next(Le)}catch(Je){Ie(Je)}}error(Le){const{partialObserver:Ue}=this;if(Ue.error)try{Ue.error(Le)}catch(Je){Ie(Je)}else Ie(Le)}complete(){const{partialObserver:Le}=this;if(Le.complete)try{Le.complete()}catch(Ue){Ie(Ue)}}}class ft extends ie{constructor(Le,Ue,Je){let B;if(super(),(0,d.m)(Le)||!Le)B={next:Le??void 0,error:Ue??void 0,complete:Je??void 0};else{let ye;this&&F.v.useDeprecatedNextContext?(ye=Object.create(Le),ye.unsubscribe=()=>this.unsubscribe(),B={next:Le.next&&je(Le.next,ye),error:Le.error&&je(Le.error,ye),complete:Le.complete&&je(Le.complete,ye)}):B=Le}this.destination=new nt(B)}}function Ie(Ge){F.v.useDeprecatedSynchronousErrorHandling?(0,Q.O)(Ge):(0,ce.h)(Ge)}function Pe(Ge,Le){const{onStoppedNotification:Ue}=F.v;Ue&&Y.z.setTimeout(()=>Ue(Ge,Le))}const $e={closed:!0,next:pe.Z,error:function Fe(Ge){throw Ge},complete:pe.Z}},727:(_t,Ne,j)=>{"use strict";j.d(Ne,{Lc:()=>ve,w0:()=>pe,Nn:()=>xe});var d=j(576);const F=(0,j(3888).d)(Te=>function(Q){Te(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map((ie,Qe)=>`${Qe+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q});var ce=j(8737);class pe{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;const{_parentage:Q}=this;if(Q)if(this._parentage=null,Array.isArray(Q))for(const je of Q)je.remove(this);else Q.remove(this);const{initialTeardown:ie}=this;if((0,d.m)(ie))try{ie()}catch(je){Y=je instanceof F?je.errors:[je]}const{_finalizers:Qe}=this;if(Qe){this._finalizers=null;for(const je of Qe)try{we(je)}catch(nt){Y=Y??[],nt instanceof F?Y=[...Y,...nt.errors]:Y.push(nt)}}if(Y)throw new F(Y)}}add(Y){var Q;if(Y&&Y!==this)if(this.closed)we(Y);else{if(Y instanceof pe){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._finalizers=null!==(Q=this._finalizers)&&void 0!==Q?Q:[]).push(Y)}}_hasParent(Y){const{_parentage:Q}=this;return Q===Y||Array.isArray(Q)&&Q.includes(Y)}_addParent(Y){const{_parentage:Q}=this;this._parentage=Array.isArray(Q)?(Q.push(Y),Q):Q?[Q,Y]:Y}_removeParent(Y){const{_parentage:Q}=this;Q===Y?this._parentage=null:Array.isArray(Q)&&(0,ce.P)(Q,Y)}remove(Y){const{_finalizers:Q}=this;Q&&(0,ce.P)(Q,Y),Y instanceof pe&&Y._removeParent(this)}}pe.EMPTY=(()=>{const Te=new pe;return Te.closed=!0,Te})();const ve=pe.EMPTY;function xe(Te){return Te instanceof pe||Te&&"closed"in Te&&(0,d.m)(Te.remove)&&(0,d.m)(Te.add)&&(0,d.m)(Te.unsubscribe)}function we(Te){(0,d.m)(Te)?Te():Te.unsubscribe()}},2416:(_t,Ne,j)=>{"use strict";j.d(Ne,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(_t,Ne,j)=>{"use strict";j.d(Ne,{E:()=>G});const G=new(j(9751).y)(pe=>pe.complete())},8996:(_t,Ne,j)=>{"use strict";j.d(Ne,{D:()=>Le});var d=j(8421),G=j(5363),F=j(9468),ve=j(9751),we=j(2202),Te=j(576),Y=j(9672);function ie(Ue,Je){if(!Ue)throw new Error("Iterable cannot be null");return new ve.y(B=>{(0,Y.f)(B,Je,()=>{const ye=Ue[Symbol.asyncIterator]();(0,Y.f)(B,Je,()=>{ye.next().then(Ce=>{Ce.done?B.complete():B.next(Ce.value)})},0,!0)})})}var Qe=j(3670),je=j(8239),nt=j(1144),ft=j(6495),Ie=j(2206),Fe=j(4532),Pe=j(3260);function Le(Ue,Je){return Je?function Ge(Ue,Je){if(null!=Ue){if((0,Qe.c)(Ue))return function ce(Ue,Je){return(0,d.Xf)(Ue).pipe((0,F.R)(Je),(0,G.Q)(Je))}(Ue,Je);if((0,nt.z)(Ue))return function xe(Ue,Je){return new ve.y(B=>{let ye=0;return Je.schedule(function(){ye===Ue.length?B.complete():(B.next(Ue[ye++]),B.closed||this.schedule())})})}(Ue,Je);if((0,je.t)(Ue))return function pe(Ue,Je){return(0,d.Xf)(Ue).pipe((0,F.R)(Je),(0,G.Q)(Je))}(Ue,Je);if((0,Ie.D)(Ue))return ie(Ue,Je);if((0,ft.T)(Ue))return function Q(Ue,Je){return new ve.y(B=>{let ye;return(0,Y.f)(B,Je,()=>{ye=Ue[we.h](),(0,Y.f)(B,Je,()=>{let Ce,re;try{({value:Ce,done:re}=ye.next())}catch(ee){return void B.error(ee)}re?B.complete():B.next(Ce)},0,!0)}),()=>(0,Te.m)(ye?.return)&&ye.return()})}(Ue,Je);if((0,Pe.L)(Ue))return function $e(Ue,Je){return ie((0,Pe.Q)(Ue),Je)}(Ue,Je)}throw(0,Fe.z)(Ue)}(Ue,Je):(0,d.Xf)(Ue)}},8421:(_t,Ne,j)=>{"use strict";j.d(Ne,{Xf:()=>Qe});var d=j(655),G=j(1144),F=j(8239),ce=j(9751),pe=j(3670),ve=j(2206),xe=j(4532),we=j(6495),Te=j(3260),Y=j(576),Q=j(7849),ie=j(8822);function Qe(Ge){if(Ge instanceof ce.y)return Ge;if(null!=Ge){if((0,pe.c)(Ge))return function je(Ge){return new ce.y(Le=>{const Ue=Ge[ie.L]();if((0,Y.m)(Ue.subscribe))return Ue.subscribe(Le);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ge);if((0,G.z)(Ge))return function nt(Ge){return new ce.y(Le=>{for(let Ue=0;Ue<Ge.length&&!Le.closed;Ue++)Le.next(Ge[Ue]);Le.complete()})}(Ge);if((0,F.t)(Ge))return function ft(Ge){return new ce.y(Le=>{Ge.then(Ue=>{Le.closed||(Le.next(Ue),Le.complete())},Ue=>Le.error(Ue)).then(null,Q.h)})}(Ge);if((0,ve.D)(Ge))return Fe(Ge);if((0,we.T)(Ge))return function Ie(Ge){return new ce.y(Le=>{for(const Ue of Ge)if(Le.next(Ue),Le.closed)return;Le.complete()})}(Ge);if((0,Te.L)(Ge))return function Pe(Ge){return Fe((0,Te.Q)(Ge))}(Ge)}throw(0,xe.z)(Ge)}function Fe(Ge){return new ce.y(Le=>{(function $e(Ge,Le){var Ue,Je,B,ye;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ue=(0,d.KL)(Ge);!(Je=yield Ue.next()).done;)if(Le.next(Je.value),Le.closed)return}catch(Ce){B={error:Ce}}finally{try{Je&&!Je.done&&(ye=Ue.return)&&(yield ye.call(Ue))}finally{if(B)throw B.error}}Le.complete()})})(Ge,Le).catch(Ue=>Le.error(Ue))})}},6451:(_t,Ne,j)=>{"use strict";j.d(Ne,{T:()=>ve});var d=j(8189),G=j(8421),F=j(515),ce=j(7669),pe=j(8996);function ve(...xe){const we=(0,ce.yG)(xe),Te=(0,ce._6)(xe,1/0),Y=xe;return Y.length?1===Y.length?(0,G.Xf)(Y[0]):(0,d.J)(Te)((0,pe.D)(Y,we)):F.E}},5403:(_t,Ne,j)=>{"use strict";j.d(Ne,{x:()=>G});var d=j(930);function G(ce,pe,ve,xe,we){return new F(ce,pe,ve,xe,we)}class F extends d.Lv{constructor(pe,ve,xe,we,Te,Y){super(pe),this.onFinalize=Te,this.shouldUnsubscribe=Y,this._next=ve?function(Q){try{ve(Q)}catch(ie){pe.error(ie)}}:super._next,this._error=we?function(Q){try{we(Q)}catch(ie){pe.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=xe?function(){try{xe()}catch(Q){pe.error(Q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(pe=this.onFinalize)||void 0===pe||pe.call(this))}}}},4004:(_t,Ne,j)=>{"use strict";j.d(Ne,{U:()=>F});var d=j(4482),G=j(5403);function F(ce,pe){return(0,d.e)((ve,xe)=>{let we=0;ve.subscribe((0,G.x)(xe,Te=>{xe.next(ce.call(pe,Te,we++))}))})}},8189:(_t,Ne,j)=>{"use strict";j.d(Ne,{J:()=>F});var d=j(5577),G=j(4671);function F(ce=1/0){return(0,d.z)(G.y,ce)}},5577:(_t,Ne,j)=>{"use strict";j.d(Ne,{z:()=>we});var d=j(4004),G=j(8421),F=j(4482),ce=j(9672),pe=j(5403),xe=j(576);function we(Te,Y,Q=1/0){return(0,xe.m)(Y)?we((ie,Qe)=>(0,d.U)((je,nt)=>Y(ie,je,Qe,nt))((0,G.Xf)(Te(ie,Qe))),Q):("number"==typeof Y&&(Q=Y),(0,F.e)((ie,Qe)=>function ve(Te,Y,Q,ie,Qe,je,nt,ft){const Ie=[];let Fe=0,Pe=0,$e=!1;const Ge=()=>{$e&&!Ie.length&&!Fe&&Y.complete()},Le=Je=>Fe<ie?Ue(Je):Ie.push(Je),Ue=Je=>{je&&Y.next(Je),Fe++;let B=!1;(0,G.Xf)(Q(Je,Pe++)).subscribe((0,pe.x)(Y,ye=>{Qe?.(ye),je?Le(ye):Y.next(ye)},()=>{B=!0},void 0,()=>{if(B)try{for(Fe--;Ie.length&&Fe<ie;){const ye=Ie.shift();nt?(0,ce.f)(Y,nt,()=>Ue(ye)):Ue(ye)}Ge()}catch(ye){Y.error(ye)}}))};return Te.subscribe((0,pe.x)(Y,Le,()=>{$e=!0,Ge()})),()=>{ft?.()}}(ie,Qe,Te,Q)))}},5363:(_t,Ne,j)=>{"use strict";j.d(Ne,{Q:()=>ce});var d=j(9672),G=j(4482),F=j(5403);function ce(pe,ve=0){return(0,G.e)((xe,we)=>{xe.subscribe((0,F.x)(we,Te=>(0,d.f)(we,pe,()=>we.next(Te),ve),()=>(0,d.f)(we,pe,()=>we.complete(),ve),Te=>(0,d.f)(we,pe,()=>we.error(Te),ve)))})}},3099:(_t,Ne,j)=>{"use strict";j.d(Ne,{B:()=>pe});var d=j(8421),G=j(7579),F=j(930),ce=j(4482);function pe(xe={}){const{connector:we=(()=>new G.x),resetOnError:Te=!0,resetOnComplete:Y=!0,resetOnRefCountZero:Q=!0}=xe;return ie=>{let Qe,je,nt,ft=0,Ie=!1,Fe=!1;const Pe=()=>{je?.unsubscribe(),je=void 0},$e=()=>{Pe(),Qe=nt=void 0,Ie=Fe=!1},Ge=()=>{const Le=Qe;$e(),Le?.unsubscribe()};return(0,ce.e)((Le,Ue)=>{ft++,!Fe&&!Ie&&Pe();const Je=nt=nt??we();Ue.add(()=>{ft--,0===ft&&!Fe&&!Ie&&(je=ve(Ge,Q))}),Je.subscribe(Ue),!Qe&&ft>0&&(Qe=new F.Hp({next:B=>Je.next(B),error:B=>{Fe=!0,Pe(),je=ve($e,Te,B),Je.error(B)},complete:()=>{Ie=!0,Pe(),je=ve($e,Y),Je.complete()}}),(0,d.Xf)(Le).subscribe(Qe))})(ie)}}function ve(xe,we,...Te){if(!0===we)return void xe();if(!1===we)return;const Y=new F.Hp({next:()=>{Y.unsubscribe(),xe()}});return(0,d.Xf)(we(...Te)).subscribe(Y)}},9468:(_t,Ne,j)=>{"use strict";j.d(Ne,{R:()=>G});var d=j(4482);function G(F,ce=0){return(0,d.e)((pe,ve)=>{ve.add(F.schedule(()=>pe.subscribe(ve),ce))})}},8505:(_t,Ne,j)=>{"use strict";j.d(Ne,{b:()=>pe});var d=j(576),G=j(4482),F=j(5403),ce=j(4671);function pe(ve,xe,we){const Te=(0,d.m)(ve)||xe||we?{next:ve,error:xe,complete:we}:ve;return Te?(0,G.e)((Y,Q)=>{var ie;null===(ie=Te.subscribe)||void 0===ie||ie.call(Te);let Qe=!0;Y.subscribe((0,F.x)(Q,je=>{var nt;null===(nt=Te.next)||void 0===nt||nt.call(Te,je),Q.next(je)},()=>{var je;Qe=!1,null===(je=Te.complete)||void 0===je||je.call(Te),Q.complete()},je=>{var nt;Qe=!1,null===(nt=Te.error)||void 0===nt||nt.call(Te,je),Q.error(je)},()=>{var je,nt;Qe&&(null===(je=Te.unsubscribe)||void 0===je||je.call(Te)),null===(nt=Te.finalize)||void 0===nt||nt.call(Te)}))}):ce.y}},4408:(_t,Ne,j)=>{"use strict";j.d(Ne,{o:()=>pe});var d=j(727);class G extends d.w0{constructor(xe,we){super()}schedule(xe,we=0){return this}}const F={setInterval(ve,xe,...we){const{delegate:Te}=F;return Te?.setInterval?Te.setInterval(ve,xe,...we):setInterval(ve,xe,...we)},clearInterval(ve){const{delegate:xe}=F;return(xe?.clearInterval||clearInterval)(ve)},delegate:void 0};var ce=j(8737);class pe extends G{constructor(xe,we){super(xe,we),this.scheduler=xe,this.work=we,this.pending=!1}schedule(xe,we=0){var Te;if(this.closed)return this;this.state=xe;const Y=this.id,Q=this.scheduler;return null!=Y&&(this.id=this.recycleAsyncId(Q,Y,we)),this.pending=!0,this.delay=we,this.id=null!==(Te=this.id)&&void 0!==Te?Te:this.requestAsyncId(Q,this.id,we),this}requestAsyncId(xe,we,Te=0){return F.setInterval(xe.flush.bind(xe,this),Te)}recycleAsyncId(xe,we,Te=0){if(null!=Te&&this.delay===Te&&!1===this.pending)return we;null!=we&&F.clearInterval(we)}execute(xe,we){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Te=this._execute(xe,we);if(Te)return Te;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(xe,we){let Y,Te=!1;try{this.work(xe)}catch(Q){Te=!0,Y=Q||new Error("Scheduled action threw falsy error")}if(Te)return this.unsubscribe(),Y}unsubscribe(){if(!this.closed){const{id:xe,scheduler:we}=this,{actions:Te}=we;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(Te,this),null!=xe&&(this.id=this.recycleAsyncId(we,xe,null)),this.delay=null,super.unsubscribe()}}}},7565:(_t,Ne,j)=>{"use strict";j.d(Ne,{v:()=>F});var d=j(6063);class G{constructor(pe,ve=G.now){this.schedulerActionCtor=pe,this.now=ve}schedule(pe,ve=0,xe){return new this.schedulerActionCtor(this,pe).schedule(xe,ve)}}G.now=d.l.now;class F extends G{constructor(pe,ve=G.now){super(pe,ve),this.actions=[],this._active=!1}flush(pe){const{actions:ve}=this;if(this._active)return void ve.push(pe);let xe;this._active=!0;do{if(xe=pe.execute(pe.state,pe.delay))break}while(pe=ve.shift());if(this._active=!1,xe){for(;pe=ve.shift();)pe.unsubscribe();throw xe}}}},4986:(_t,Ne,j)=>{"use strict";j.d(Ne,{z:()=>F});var d=j(4408);const F=new(j(7565).v)(d.o)},6063:(_t,Ne,j)=>{"use strict";j.d(Ne,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(_t,Ne,j)=>{"use strict";j.d(Ne,{z:()=>d});const d={setTimeout(G,F,...ce){const{delegate:pe}=d;return pe?.setTimeout?pe.setTimeout(G,F,...ce):setTimeout(G,F,...ce)},clearTimeout(G){const{delegate:F}=d;return(F?.clearTimeout||clearTimeout)(G)},delegate:void 0}},2202:(_t,Ne,j)=>{"use strict";j.d(Ne,{h:()=>G});const G=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_t,Ne,j)=>{"use strict";j.d(Ne,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(_t,Ne,j)=>{"use strict";j.d(Ne,{_6:()=>ve,jO:()=>ce,yG:()=>pe});var d=j(576);function F(xe){return xe[xe.length-1]}function ce(xe){return(0,d.m)(F(xe))?xe.pop():void 0}function pe(xe){return function G(xe){return xe&&(0,d.m)(xe.schedule)}(F(xe))?xe.pop():void 0}function ve(xe,we){return"number"==typeof F(xe)?xe.pop():we}},8737:(_t,Ne,j)=>{"use strict";function d(G,F){if(G){const ce=G.indexOf(F);0<=ce&&G.splice(ce,1)}}j.d(Ne,{P:()=>d})},3888:(_t,Ne,j)=>{"use strict";function d(G){const ce=G(pe=>{Error.call(pe),pe.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}j.d(Ne,{d:()=>d})},2806:(_t,Ne,j)=>{"use strict";j.d(Ne,{O:()=>ce,x:()=>F});var d=j(2416);let G=null;function F(pe){if(d.v.useDeprecatedSynchronousErrorHandling){const ve=!G;if(ve&&(G={errorThrown:!1,error:null}),pe(),ve){const{errorThrown:xe,error:we}=G;if(G=null,xe)throw we}}else pe()}function ce(pe){d.v.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=pe)}},9672:(_t,Ne,j)=>{"use strict";function d(G,F,ce,pe=0,ve=!1){const xe=F.schedule(function(){ce(),ve?G.add(this.schedule(null,pe)):this.unsubscribe()},pe);if(G.add(xe),!ve)return xe}j.d(Ne,{f:()=>d})},4671:(_t,Ne,j)=>{"use strict";function d(G){return G}j.d(Ne,{y:()=>d})},1144:(_t,Ne,j)=>{"use strict";j.d(Ne,{z:()=>d});const d=G=>G&&"number"==typeof G.length&&"function"!=typeof G},2206:(_t,Ne,j)=>{"use strict";j.d(Ne,{D:()=>G});var d=j(576);function G(F){return Symbol.asyncIterator&&(0,d.m)(F?.[Symbol.asyncIterator])}},576:(_t,Ne,j)=>{"use strict";function d(G){return"function"==typeof G}j.d(Ne,{m:()=>d})},3670:(_t,Ne,j)=>{"use strict";j.d(Ne,{c:()=>F});var d=j(8822),G=j(576);function F(ce){return(0,G.m)(ce[d.L])}},6495:(_t,Ne,j)=>{"use strict";j.d(Ne,{T:()=>F});var d=j(2202),G=j(576);function F(ce){return(0,G.m)(ce?.[d.h])}},8239:(_t,Ne,j)=>{"use strict";j.d(Ne,{t:()=>G});var d=j(576);function G(F){return(0,d.m)(F?.then)}},3260:(_t,Ne,j)=>{"use strict";j.d(Ne,{L:()=>ce,Q:()=>F});var d=j(655),G=j(576);function F(pe){return(0,d.FC)(this,arguments,function*(){const xe=pe.getReader();try{for(;;){const{value:we,done:Te}=yield(0,d.qq)(xe.read());if(Te)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(we)}}finally{xe.releaseLock()}})}function ce(pe){return(0,G.m)(pe?.getReader)}},4482:(_t,Ne,j)=>{"use strict";j.d(Ne,{A:()=>G,e:()=>F});var d=j(576);function G(ce){return(0,d.m)(ce?.lift)}function F(ce){return pe=>{if(G(pe))return pe.lift(function(ve){try{return ce(ve,this)}catch(xe){this.error(xe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(_t,Ne,j)=>{"use strict";function d(){}j.d(Ne,{Z:()=>d})},9635:(_t,Ne,j)=>{"use strict";j.d(Ne,{U:()=>F,z:()=>G});var d=j(4671);function G(...ce){return F(ce)}function F(ce){return 0===ce.length?d.y:1===ce.length?ce[0]:function(ve){return ce.reduce((xe,we)=>we(xe),ve)}}},7849:(_t,Ne,j)=>{"use strict";j.d(Ne,{h:()=>F});var d=j(2416),G=j(3410);function F(ce){G.z.setTimeout(()=>{const{onUnhandledError:pe}=d.v;if(!pe)throw ce;pe(ce)})}},4532:(_t,Ne,j)=>{"use strict";function d(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(Ne,{z:()=>d})},5226:function(_t){_t.exports=function(){"use strict";const Ne="SweetAlert2:",d=C=>C.charAt(0).toUpperCase()+C.slice(1),G=C=>Array.prototype.slice.call(C),F=C=>{console.warn("".concat(Ne," ").concat("object"==typeof C?C.join(" "):C))},ce=C=>{console.error("".concat(Ne," ").concat(C))},pe=[],xe=(C,I)=>{(C=>{pe.includes(C)||(pe.push(C),F(C))})('"'.concat(C,'" is deprecated and will be removed in the next major release. Please use "').concat(I,'" instead.'))},we=C=>"function"==typeof C?C():C,Te=C=>C&&"function"==typeof C.toPromise,Y=C=>Te(C)?C.toPromise():Promise.resolve(C),Q=C=>C&&Promise.resolve(C)===C,ie={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Qe=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],je={},nt=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],ft=C=>Object.prototype.hasOwnProperty.call(ie,C),Ie=C=>-1!==Qe.indexOf(C),Fe=C=>je[C],Pe=C=>{ft(C)||F('Unknown parameter "'.concat(C,'"'))},$e=C=>{nt.includes(C)&&F('The parameter "'.concat(C,'" is incompatible with toasts'))},Ge=C=>{Fe(C)&&xe(C,Fe(C))},Je=C=>{const I={};for(const R in C)I[C[R]]="swal2-"+C[R];return I},B=Je(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),ye=Je(["success","warning","info","question","error"]),Ce=()=>document.body.querySelector(".".concat(B.container)),re=C=>{const I=Ce();return I?I.querySelector(C):null},ee=C=>re(".".concat(C)),ue=()=>ee(B.popup),he=()=>ee(B.icon),Ke=()=>ee(B.title),ze=()=>ee(B["html-container"]),bt=()=>ee(B.image),fn=()=>ee(B["progress-steps"]),Sn=()=>ee(B["validation-message"]),vt=()=>re(".".concat(B.actions," .").concat(B.confirm)),jt=()=>re(".".concat(B.actions," .").concat(B.deny)),tn=()=>re(".".concat(B.loader)),Hn=()=>re(".".concat(B.actions," .").concat(B.cancel)),Xt=()=>ee(B.actions),Dt=()=>ee(B.footer),gr=()=>ee(B["timer-progress-bar"]),Mr=()=>ee(B.close),Vn=()=>{const C=G(ue().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((R,K)=>{const Ve=parseInt(R.getAttribute("tabindex")),gt=parseInt(K.getAttribute("tabindex"));return Ve>gt?1:Ve<gt?-1:0}),I=G(ue().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(R=>"-1"!==R.getAttribute("tabindex"));return(C=>{const I=[];for(let R=0;R<C.length;R++)-1===I.indexOf(C[R])&&I.push(C[R]);return I})(C.concat(I)).filter(R=>nn(R))},Hr=()=>se(document.body,B.shown)&&!se(document.body,B["toast-shown"])&&!se(document.body,B["no-backdrop"]),Rr=()=>ue()&&se(ue(),B.toast),Nn={previousBodyPadding:null},oe=(C,I)=>{if(C.textContent="",I){const K=(new DOMParser).parseFromString(I,"text/html");G(K.querySelector("head").childNodes).forEach(Ve=>{C.appendChild(Ve)}),G(K.querySelector("body").childNodes).forEach(Ve=>{C.appendChild(Ve)})}},se=(C,I)=>{if(!I)return!1;const R=I.split(/\s+/);for(let K=0;K<R.length;K++)if(!C.classList.contains(R[K]))return!1;return!0},Ae=(C,I,R)=>{if(((C,I)=>{G(C.classList).forEach(R=>{!Object.values(B).includes(R)&&!Object.values(ye).includes(R)&&!Object.values(I.showClass).includes(R)&&C.classList.remove(R)})})(C,I),I.customClass&&I.customClass[R]){if("string"!=typeof I.customClass[R]&&!I.customClass[R].forEach)return F("Invalid type of customClass.".concat(R,'! Expected string or iterable object, got "').concat(typeof I.customClass[R],'"'));st(C,I.customClass[R])}},be=(C,I)=>{if(!I)return null;switch(I){case"select":case"textarea":case"file":return C.querySelector(".".concat(B.popup," > .").concat(B[I]));case"checkbox":return C.querySelector(".".concat(B.popup," > .").concat(B.checkbox," input"));case"radio":return C.querySelector(".".concat(B.popup," > .").concat(B.radio," input:checked"))||C.querySelector(".".concat(B.popup," > .").concat(B.radio," input:first-child"));case"range":return C.querySelector(".".concat(B.popup," > .").concat(B.range," input"));default:return C.querySelector(".".concat(B.popup," > .").concat(B.input))}},rt=C=>{if(C.focus(),"file"!==C.type){const I=C.value;C.value="",C.value=I}},_n=(C,I,R)=>{!C||!I||("string"==typeof I&&(I=I.split(/\s+/).filter(Boolean)),I.forEach(K=>{Array.isArray(C)?C.forEach(Ve=>{R?Ve.classList.add(K):Ve.classList.remove(K)}):R?C.classList.add(K):C.classList.remove(K)}))},st=(C,I)=>{_n(C,I,!0)},Mt=(C,I)=>{_n(C,I,!1)},un=(C,I)=>{const R=G(C.childNodes);for(let K=0;K<R.length;K++)if(se(R[K],I))return R[K]},At=(C,I,R)=>{R==="".concat(parseInt(R))&&(R=parseInt(R)),R||0===parseInt(R)?C.style[I]="number"==typeof R?"".concat(R,"px"):R:C.style.removeProperty(I)},ot=function(C){C.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},ht=C=>{C.style.display="none"},Mn=(C,I,R,K)=>{const Ve=C.querySelector(I);Ve&&(Ve.style[R]=K)},wn=(C,I,R)=>{I?ot(C,R):ht(C)},nn=C=>!(!C||!(C.offsetWidth||C.offsetHeight||C.getClientRects().length)),Bn=C=>C.scrollHeight>C.clientHeight,Gr=C=>{const I=window.getComputedStyle(C),R=parseFloat(I.getPropertyValue("animation-duration")||"0"),K=parseFloat(I.getPropertyValue("transition-duration")||"0");return R>0||K>0},Gt=function(C){let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const R=gr();nn(R)&&(I&&(R.style.transition="none",R.style.width="100%"),setTimeout(()=>{R.style.transition="width ".concat(C/1e3,"s linear"),R.style.width="0%"},10))},rn=()=>typeof window>"u"||typeof document>"u",Et={},Oe=C=>new Promise(I=>{if(!C)return I();const R=window.scrollX,K=window.scrollY;Et.restoreFocusTimeout=setTimeout(()=>{Et.previousActiveElement&&Et.previousActiveElement.focus?(Et.previousActiveElement.focus(),Et.previousActiveElement=null):document.body&&document.body.focus(),I()},100),window.scrollTo(R,K)}),lt='\n <div aria-labelledby="'.concat(B.title,'" aria-describedby="').concat(B["html-container"],'" class="').concat(B.popup,'" tabindex="-1">\n   <button type="button" class="').concat(B.close,'"></button>\n   <ul class="').concat(B["progress-steps"],'"></ul>\n   <div class="').concat(B.icon,'"></div>\n   <img class="').concat(B.image,'" />\n   <h2 class="').concat(B.title,'" id="').concat(B.title,'"></h2>\n   <div class="').concat(B["html-container"],'" id="').concat(B["html-container"],'"></div>\n   <input class="').concat(B.input,'" />\n   <input type="file" class="').concat(B.file,'" />\n   <div class="').concat(B.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(B.select,'"></select>\n   <div class="').concat(B.radio,'"></div>\n   <label for="').concat(B.checkbox,'" class="').concat(B.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(B.label,'"></span>\n   </label>\n   <textarea class="').concat(B.textarea,'"></textarea>\n   <div class="').concat(B["validation-message"],'" id="').concat(B["validation-message"],'"></div>\n   <div class="').concat(B.actions,'">\n     <div class="').concat(B.loader,'"></div>\n     <button type="button" class="').concat(B.confirm,'"></button>\n     <button type="button" class="').concat(B.deny,'"></button>\n     <button type="button" class="').concat(B.cancel,'"></button>\n   </div>\n   <div class="').concat(B.footer,'"></div>\n   <div class="').concat(B["timer-progress-bar-container"],'">\n     <div class="').concat(B["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Pt=()=>{Et.currentInstance.resetValidationMessage()},q=C=>{const I=(()=>{const C=Ce();return!!C&&(C.remove(),Mt([document.documentElement,document.body],[B["no-backdrop"],B["toast-shown"],B["has-column"]]),!0)})();if(rn())return void ce("SweetAlert2 requires document to initialize");const R=document.createElement("div");R.className=B.container,I&&st(R,B["no-transition"]),oe(R,lt);const K=(C=>"string"==typeof C?document.querySelector(C):C)(C.target);K.appendChild(R),(C=>{const I=ue();I.setAttribute("role",C.toast?"alert":"dialog"),I.setAttribute("aria-live",C.toast?"polite":"assertive"),C.toast||I.setAttribute("aria-modal","true")})(C),(C=>{"rtl"===window.getComputedStyle(C).direction&&st(Ce(),B.rtl)})(K),(()=>{const C=ue(),I=un(C,B.input),R=un(C,B.file),K=C.querySelector(".".concat(B.range," input")),Ve=C.querySelector(".".concat(B.range," output")),gt=un(C,B.select),Jn=C.querySelector(".".concat(B.checkbox," input")),Dn=un(C,B.textarea);I.oninput=Pt,R.onchange=Pt,gt.onchange=Pt,Jn.onchange=Pt,Dn.oninput=Pt,K.oninput=()=>{Pt(),Ve.value=K.value},K.onchange=()=>{Pt(),K.nextSibling.value=K.value}})()},O=(C,I)=>{C instanceof HTMLElement?I.appendChild(C):"object"==typeof C?H(C,I):C&&oe(I,C)},H=(C,I)=>{C.jquery?_e(I,C):oe(I,C.toString())},_e=(C,I)=>{if(C.textContent="",0 in I)for(let R=0;R in I;R++)C.appendChild(I[R].cloneNode(!0));else C.appendChild(I.cloneNode(!0))},Be=(()=>{if(rn())return!1;const C=document.createElement("div"),I={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const R in I)if(Object.prototype.hasOwnProperty.call(I,R)&&typeof C.style[R]<"u")return I[R];return!1})(),it=(C,I)=>{const R=Xt(),K=tn();I.showConfirmButton||I.showDenyButton||I.showCancelButton?ot(R):ht(R),Ae(R,I,"actions"),function Kt(C,I,R){const K=vt(),Ve=jt(),gt=Hn();Ln(K,"confirm",R),Ln(Ve,"deny",R),Ln(gt,"cancel",R),function Tt(C,I,R,K){if(!K.buttonsStyling)return Mt([C,I,R],B.styled);st([C,I,R],B.styled),K.confirmButtonColor&&(C.style.backgroundColor=K.confirmButtonColor,st(C,B["default-outline"])),K.denyButtonColor&&(I.style.backgroundColor=K.denyButtonColor,st(I,B["default-outline"])),K.cancelButtonColor&&(R.style.backgroundColor=K.cancelButtonColor,st(R,B["default-outline"]))}(K,Ve,gt,R),R.reverseButtons&&(R.toast?(C.insertBefore(gt,K),C.insertBefore(Ve,K)):(C.insertBefore(gt,I),C.insertBefore(Ve,I),C.insertBefore(K,I)))}(R,K,I),oe(K,I.loaderHtml),Ae(K,I,"loader")};function Ln(C,I,R){wn(C,R["show".concat(d(I),"Button")],"inline-block"),oe(C,R["".concat(I,"ButtonText")]),C.setAttribute("aria-label",R["".concat(I,"ButtonAriaLabel")]),C.className=B[I],Ae(C,R,"".concat(I,"Button")),st(C,R["".concat(I,"ButtonClass")])}const rl=(C,I)=>{const R=Ce();R&&(function Er(C,I){"string"==typeof I?C.style.background=I:I||st([document.documentElement,document.body],B["no-backdrop"])}(R,I.backdrop),function qt(C,I){I in B?st(C,B[I]):(F('The "position" parameter is not valid, defaulting to "center"'),st(C,B.center))}(R,I.position),function zr(C,I){if(I&&"string"==typeof I){const R="grow-".concat(I);R in B&&st(C,B[R])}}(R,I.grow),Ae(R,I,"container"))};var Yt={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const il=["input","file","range","select","radio","checkbox","textarea"],Cr=C=>{if(!gn[C.input])return ce('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(C.input,'"'));const I=In(C.input),R=gn[C.input](I,C);ot(R),setTimeout(()=>{rt(R)})},Jl=(C,I)=>{const R=be(ue(),C);if(R){(C=>{for(let I=0;I<C.attributes.length;I++){const R=C.attributes[I].name;["type","value","style"].includes(R)||C.removeAttribute(R)}})(R);for(const K in I)R.setAttribute(K,I[K])}},ol=C=>{const I=In(C.input);C.customClass&&st(I,C.customClass.input)},wo=(C,I)=>{(!C.placeholder||I.inputPlaceholder)&&(C.placeholder=I.inputPlaceholder)},zi=(C,I,R)=>{if(R.inputLabel){C.id=B.input;const K=document.createElement("label"),Ve=B["input-label"];K.setAttribute("for",C.id),K.className=Ve,st(K,R.customClass.inputLabel),K.innerText=R.inputLabel,I.insertAdjacentElement("beforebegin",K)}},In=C=>{const I=B[C]?B[C]:B.input;return un(ue(),I)},gn={};gn.text=gn.email=gn.password=gn.number=gn.tel=gn.url=(C,I)=>("string"==typeof I.inputValue||"number"==typeof I.inputValue?C.value=I.inputValue:Q(I.inputValue)||F('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof I.inputValue,'"')),zi(C,C,I),wo(C,I),C.type=I.input,C),gn.file=(C,I)=>(zi(C,C,I),wo(C,I),C),gn.range=(C,I)=>{const R=C.querySelector("input"),K=C.querySelector("output");return R.value=I.inputValue,R.type=I.input,K.value=I.inputValue,zi(R,C,I),C},gn.select=(C,I)=>{if(C.textContent="",I.inputPlaceholder){const R=document.createElement("option");oe(R,I.inputPlaceholder),R.value="",R.disabled=!0,R.selected=!0,C.appendChild(R)}return zi(C,C,I),C},gn.radio=C=>(C.textContent="",C),gn.checkbox=(C,I)=>{const R=be(ue(),"checkbox");R.value="1",R.id=B.checkbox,R.checked=Boolean(I.inputValue);const K=C.querySelector("span");return oe(K,I.inputPlaceholder),C},gn.textarea=(C,I)=>{C.value=I.inputValue,wo(C,I),zi(C,C,I);return setTimeout(()=>{if("MutationObserver"in window){const K=parseInt(window.getComputedStyle(ue()).width);new MutationObserver(()=>{const gt=C.offsetWidth+(K=>parseInt(window.getComputedStyle(K).marginLeft)+parseInt(window.getComputedStyle(K).marginRight))(C);ue().style.width=gt>K?"".concat(gt,"px"):null}).observe(C,{attributes:!0,attributeFilter:["style"]})}}),C};const kr=(C,I)=>{const R=ze();Ae(R,I,"htmlContainer"),I.html?(O(I.html,R),ot(R,"block")):I.text?(R.textContent=I.text,ot(R,"block")):ht(R),((C,I)=>{const R=ue(),K=Yt.innerParams.get(C),Ve=!K||I.input!==K.input;il.forEach(gt=>{const Jn=B[gt],Dn=un(R,Jn);Jl(gt,I.inputAttributes),Dn.className=Jn,Ve&&ht(Dn)}),I.input&&(Ve&&Cr(I),ol(I))})(C,I)},ct=(C,I)=>{for(const R in ye)I.icon!==R&&Mt(C,ye[R]);st(C,ye[I.icon]),mr(C,I),Qt(),Ae(C,I,"icon")},Qt=()=>{const C=ue(),I=window.getComputedStyle(C).getPropertyValue("background-color"),R=C.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let K=0;K<R.length;K++)R[K].style.backgroundColor=I},Ni=(C,I)=>{C.textContent="",oe(C,I.iconHtml?bi(I.iconHtml):"success"===I.icon?'\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n':"error"===I.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':bi({question:"?",warning:"!",info:"i"}[I.icon]))},mr=(C,I)=>{if(I.iconColor){C.style.color=I.iconColor,C.style.borderColor=I.iconColor;for(const R of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Mn(C,R,"backgroundColor",I.iconColor);Mn(C,".swal2-success-ring","borderColor",I.iconColor)}},bi=C=>'<div class="'.concat(B["icon-content"],'">').concat(C,"</div>"),sn=(C,I)=>{const R=fn();if(!I.progressSteps||0===I.progressSteps.length)return ht(R);ot(R),R.textContent="",I.currentProgressStep>=I.progressSteps.length&&F("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),I.progressSteps.forEach((K,Ve)=>{const gt=(C=>{const I=document.createElement("li");return st(I,B["progress-step"]),oe(I,C),I})(K);if(R.appendChild(gt),Ve===I.currentProgressStep&&st(gt,B["active-progress-step"]),Ve!==I.progressSteps.length-1){const Jn=(C=>{const I=document.createElement("li");return st(I,B["progress-step-line"]),C.progressStepsDistance&&(I.style.width=C.progressStepsDistance),I})(I);R.appendChild(Jn)}})},Ko=(C,I)=>{C.className="".concat(B.popup," ").concat(nn(C)?I.showClass.popup:""),I.toast?(st([document.documentElement,document.body],B["toast-shown"]),st(C,B.toast)):st(C,B.modal),Ae(C,I,"popup"),"string"==typeof I.customClass&&st(C,I.customClass),I.icon&&st(C,B["icon-".concat(I.icon)])},Wi=(C,I)=>{((C,I)=>{const R=Ce(),K=ue();I.toast?(At(R,"width",I.width),K.style.width="100%",K.insertBefore(tn(),he())):At(K,"width",I.width),At(K,"padding",I.padding),I.color&&(K.style.color=I.color),I.background&&(K.style.background=I.background),ht(Sn()),Ko(K,I)})(0,I),rl(0,I),sn(0,I),((C,I)=>{const R=Yt.innerParams.get(C),K=he();R&&I.icon===R.icon?(Ni(K,I),ct(K,I)):I.icon||I.iconHtml?I.icon&&-1===Object.keys(ye).indexOf(I.icon)?(ce('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(I.icon,'"')),ht(K)):(ot(K),Ni(K,I),ct(K,I),st(K,I.showClass.icon)):ht(K)})(C,I),((C,I)=>{const R=bt();if(!I.imageUrl)return ht(R);ot(R,""),R.setAttribute("src",I.imageUrl),R.setAttribute("alt",I.imageAlt),At(R,"width",I.imageWidth),At(R,"height",I.imageHeight),R.className=B.image,Ae(R,I,"image")})(0,I),((C,I)=>{const R=Ke();wn(R,I.title||I.titleText,"block"),I.title&&O(I.title,R),I.titleText&&(R.innerText=I.titleText),Ae(R,I,"title")})(0,I),((C,I)=>{const R=Mr();oe(R,I.closeButtonHtml),Ae(R,I,"closeButton"),wn(R,I.showCloseButton),R.setAttribute("aria-label",I.closeButtonAriaLabel)})(0,I),kr(C,I),it(0,I),((C,I)=>{const R=Dt();wn(R,I.footer),I.footer&&O(I.footer,R),Ae(R,I,"footer")})(0,I),"function"==typeof I.didRender&&I.didRender(ue())},Zn=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Zi=()=>{G(document.body.children).forEach(I=>{I.hasAttribute("data-previous-aria-hidden")?(I.setAttribute("aria-hidden",I.getAttribute("data-previous-aria-hidden")),I.removeAttribute("data-previous-aria-hidden")):I.removeAttribute("aria-hidden")})},Xr=["swal-title","swal-html","swal-footer"],al=C=>{const I={};return G(C.querySelectorAll("swal-param")).forEach(R=>{yr(R,["name","value"]);const K=R.getAttribute("name"),Ve=R.getAttribute("value");"boolean"==typeof ie[K]&&"false"===Ve&&(I[K]=!1),"object"==typeof ie[K]&&(I[K]=JSON.parse(Ve))}),I},qn=C=>{const I={};return G(C.querySelectorAll("swal-button")).forEach(R=>{yr(R,["type","color","aria-label"]);const K=R.getAttribute("type");I["".concat(K,"ButtonText")]=R.innerHTML,I["show".concat(d(K),"Button")]=!0,R.hasAttribute("color")&&(I["".concat(K,"ButtonColor")]=R.getAttribute("color")),R.hasAttribute("aria-label")&&(I["".concat(K,"ButtonAriaLabel")]=R.getAttribute("aria-label"))}),I},cr=C=>{const I={},R=C.querySelector("swal-image");return R&&(yr(R,["src","width","height","alt"]),R.hasAttribute("src")&&(I.imageUrl=R.getAttribute("src")),R.hasAttribute("width")&&(I.imageWidth=R.getAttribute("width")),R.hasAttribute("height")&&(I.imageHeight=R.getAttribute("height")),R.hasAttribute("alt")&&(I.imageAlt=R.getAttribute("alt"))),I},ll=C=>{const I={},R=C.querySelector("swal-icon");return R&&(yr(R,["type","color"]),R.hasAttribute("type")&&(I.icon=R.getAttribute("type")),R.hasAttribute("color")&&(I.iconColor=R.getAttribute("color")),I.iconHtml=R.innerHTML),I},Ca=C=>{const I={},R=C.querySelector("swal-input");R&&(yr(R,["type","label","placeholder","value"]),I.input=R.getAttribute("type")||"text",R.hasAttribute("label")&&(I.inputLabel=R.getAttribute("label")),R.hasAttribute("placeholder")&&(I.inputPlaceholder=R.getAttribute("placeholder")),R.hasAttribute("value")&&(I.inputValue=R.getAttribute("value")));const K=C.querySelectorAll("swal-input-option");return K.length&&(I.inputOptions={},G(K).forEach(Ve=>{yr(Ve,["value"]);const gt=Ve.getAttribute("value");I.inputOptions[gt]=Ve.innerHTML})),I},Ia=(C,I)=>{const R={};for(const K in I){const Ve=I[K],gt=C.querySelector(Ve);gt&&(yr(gt,[]),R[Ve.replace(/^swal-/,"")]=gt.innerHTML.trim())}return R},us=C=>{const I=Xr.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);G(C.children).forEach(R=>{const K=R.tagName.toLowerCase();-1===I.indexOf(K)&&F("Unrecognized element <".concat(K,">"))})},yr=(C,I)=>{G(C.attributes).forEach(R=>{-1===I.indexOf(R.name)&&F(['Unrecognized attribute "'.concat(R.name,'" on <').concat(C.tagName.toLowerCase(),">."),"".concat(I.length?"Allowed attributes are: ".concat(I.join(", ")):"To set the value, use HTML within the element.")])})};var _r={email:(C,I)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(C)?Promise.resolve():Promise.resolve(I||"Invalid email address"),url:(C,I)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(C)?Promise.resolve():Promise.resolve(I||"Invalid URL")};function ci(C){(function hd(C){C.inputValidator||Object.keys(_r).forEach(I=>{C.input===I&&(C.inputValidator=_r[I])})})(C),C.showLoaderOnConfirm&&!C.preConfirm&&F("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function ui(C){(!C.target||"string"==typeof C.target&&!document.querySelector(C.target)||"string"!=typeof C.target&&!C.target.appendChild)&&(F('Target parameter is not valid, defaulting to "body"'),C.target="body")}(C),"string"==typeof C.title&&(C.title=C.title.split("\n").join("<br />")),q(C)}class cs{constructor(I,R){this.callback=I,this.remaining=R,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(I){const R=this.running;return R&&this.stop(),this.remaining+=I,R&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Yo=()=>{null===Nn.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(Nn.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Nn.previousBodyPadding+(()=>{const C=document.createElement("div");C.className=B["scrollbar-measure"],document.body.appendChild(C);const I=C.getBoundingClientRect().width-C.clientWidth;return document.body.removeChild(C),I})(),"px"))},fd=()=>{const C=navigator.userAgent,I=!!C.match(/iPad/i)||!!C.match(/iPhone/i),R=!!C.match(/WebKit/i);I&&R&&!C.match(/CriOS/i)&&ue().scrollHeight>window.innerHeight-44&&(Ce().style.paddingBottom="".concat(44,"px"))},Da=()=>{const C=Ce();let I;C.ontouchstart=R=>{I=ds(R)},C.ontouchmove=R=>{I&&(R.preventDefault(),R.stopPropagation())}},ds=C=>{const I=C.target,R=Ce();return!(Eo(C)||Qo(C)||I!==R&&(Bn(R)||"INPUT"===I.tagName||"TEXTAREA"===I.tagName||Bn(ze())&&ze().contains(I)))},Eo=C=>C.touches&&C.touches.length&&"stylus"===C.touches[0].touchType,Qo=C=>C.touches&&C.touches.length>1,gd=C=>{const I=Ce(),R=ue();"function"==typeof C.willOpen&&C.willOpen(R);const Ve=window.getComputedStyle(document.body).overflowY;Ki(I,R,C),setTimeout(()=>{Jo(I,R)},10),Hr()&&(Ju(I,C.scrollbarPadding,Ve),G(document.body.children).forEach(I=>{I===Ce()||I.contains(Ce())||(I.hasAttribute("aria-hidden")&&I.setAttribute("data-previous-aria-hidden",I.getAttribute("aria-hidden")),I.setAttribute("aria-hidden","true"))})),!Rr()&&!Et.previousActiveElement&&(Et.previousActiveElement=document.activeElement),"function"==typeof C.didOpen&&setTimeout(()=>C.didOpen(R)),Mt(I,B["no-transition"])},Qu=C=>{const I=ue();if(C.target!==I)return;const R=Ce();I.removeEventListener(Be,Qu),R.style.overflowY="auto"},Jo=(C,I)=>{Be&&Gr(I)?(C.style.overflowY="hidden",I.addEventListener(Be,Qu)):C.style.overflowY="auto"},Ju=(C,I,R)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!se(document.body,B.iosfix)){const I=document.body.scrollTop;document.body.style.top="".concat(-1*I,"px"),st(document.body,B.iosfix),Da(),fd()}})(),I&&"hidden"!==R&&Yo(),setTimeout(()=>{C.scrollTop=0})},Ki=(C,I,R)=>{st(C,R.showClass.backdrop),I.style.setProperty("opacity","0","important"),ot(I,"grid"),setTimeout(()=>{st(I,R.showClass.popup),I.style.removeProperty("opacity")},10),st([document.documentElement,document.body],B.shown),R.heightAuto&&R.backdrop&&!R.toast&&st([document.documentElement,document.body],B["height-auto"])},Ii=C=>{let I=ue();I||new Ps,I=ue();const R=tn();Rr()?ht(he()):md(I,C),ot(R),I.setAttribute("data-loading",!0),I.setAttribute("aria-busy",!0),I.focus()},md=(C,I)=>{const R=Xt(),K=tn();!I&&nn(vt())&&(I=vt()),ot(R),I&&(ht(I),K.setAttribute("data-button-to-replace",I.className)),K.parentNode.insertBefore(K,I),st([C,R],B.loading)},Sa=C=>C.checked?1:0,Xl=C=>C.checked?C.value:null,Aa=C=>C.files.length?null!==C.getAttribute("multiple")?C.files:C.files[0]:null,eu=(C,I)=>{const R=ue(),K=Ve=>Gs[I.input](R,xs(Ve),I);Te(I.inputOptions)||Q(I.inputOptions)?(Ii(vt()),Y(I.inputOptions).then(Ve=>{C.hideLoading(),K(Ve)})):"object"==typeof I.inputOptions?K(I.inputOptions):ce("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof I.inputOptions))},tu=(C,I)=>{const R=C.getInput();ht(R),Y(I.inputValue).then(K=>{R.value="number"===I.input?parseFloat(K)||0:"".concat(K),ot(R),R.focus(),C.hideLoading()}).catch(K=>{ce("Error in inputValue promise: ".concat(K)),R.value="",ot(R),R.focus(),C.hideLoading()})},Gs={select:(C,I,R)=>{const K=un(C,B.select),Ve=(gt,Jn,Dn)=>{const Xn=document.createElement("option");Xn.value=Dn,oe(Xn,Jn),Xn.selected=qs(Dn,R.inputValue),gt.appendChild(Xn)};I.forEach(gt=>{const Jn=gt[0],Dn=gt[1];if(Array.isArray(Dn)){const Xn=document.createElement("optgroup");Xn.label=Jn,Xn.disabled=!1,K.appendChild(Xn),Dn.forEach(Ti=>Ve(Xn,Ti[1],Ti[0]))}else Ve(K,Dn,Jn)}),K.focus()},radio:(C,I,R)=>{const K=un(C,B.radio);I.forEach(gt=>{const Jn=gt[0],Dn=gt[1],Xn=document.createElement("input"),Ti=document.createElement("label");Xn.type="radio",Xn.name=B.radio,Xn.value=Jn,qs(Jn,R.inputValue)&&(Xn.checked=!0);const Qs=document.createElement("span");oe(Qs,Dn),Qs.className=B.label,Ti.appendChild(Xn),Ti.appendChild(Qs),K.appendChild(Ti)});const Ve=K.querySelectorAll("input");Ve.length&&Ve[0].focus()}},xs=C=>{const I=[];return typeof Map<"u"&&C instanceof Map?C.forEach((R,K)=>{let Ve=R;"object"==typeof Ve&&(Ve=xs(Ve)),I.push([K,Ve])}):Object.keys(C).forEach(R=>{let K=C[R];"object"==typeof K&&(K=xs(K)),I.push([R,K])}),I},qs=(C,I)=>I&&I.toString()===C.toString();function zs(){const C=Yt.innerParams.get(this);if(!C)return;const I=Yt.domCache.get(this);ht(I.loader),Rr()?C.icon&&ot(he()):xa(I),Mt([I.popup,I.actions],B.loading),I.popup.removeAttribute("aria-busy"),I.popup.removeAttribute("data-loading"),I.confirmButton.disabled=!1,I.denyButton.disabled=!1,I.cancelButton.disabled=!1}const xa=C=>{const I=C.popup.getElementsByClassName(C.loader.getAttribute("data-button-to-replace"));I.length?ot(I[0],"inline-block"):!nn(vt())&&!nn(jt())&&!nn(Hn())&&ht(C.actions)};var Yi={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Ra=()=>vt()&&vt().click(),Wr=C=>{C.keydownTarget&&C.keydownHandlerAdded&&(C.keydownTarget.removeEventListener("keydown",C.keydownHandler,{capture:C.keydownListenerCapture}),C.keydownHandlerAdded=!1)},ea=(C,I,R)=>{const K=Vn();if(K.length)return(I+=R)===K.length?I=0:-1===I&&(I=K.length-1),K[I].focus();ue().focus()},Kn=["ArrowRight","ArrowDown"],dl=["ArrowLeft","ArrowUp"],Ms=(C,I,R)=>{const K=Yt.innerParams.get(C);K&&(I.isComposing||229===I.keyCode||(K.stopKeydownPropagation&&I.stopPropagation(),"Enter"===I.key?Dr(C,I,K):"Tab"===I.key?ta(I,K):[...Kn,...dl].includes(I.key)?ka(I.key):"Escape"===I.key&&hs(I,K,R)))},Dr=(C,I,R)=>{if(we(R.allowEnterKey)&&I.target&&C.getInput()&&I.target.outerHTML===C.getInput().outerHTML){if(["textarea","file"].includes(R.input))return;Ra(),I.preventDefault()}},ta=(C,I)=>{const R=C.target,K=Vn();let Ve=-1;for(let gt=0;gt<K.length;gt++)if(R===K[gt]){Ve=gt;break}ea(0,Ve,C.shiftKey?-1:1),C.stopPropagation(),C.preventDefault()},ka=C=>{if(![vt(),jt(),Hn()].includes(document.activeElement))return;const Ve=Kn.includes(C)?"nextElementSibling":"previousElementSibling";let gt=document.activeElement;for(let Jn=0;Jn<Xt().children.length;Jn++){if(gt=gt[Ve],!gt)return;if(nn(gt)&&gt instanceof HTMLButtonElement)break}gt instanceof HTMLButtonElement&&gt.focus()},hs=(C,I,R)=>{we(I.allowEscapeKey)&&(C.preventDefault(),R(Zn.esc))};function dr(C,I,R,K){Rr()?Io(C,K):(Oe(R).then(()=>Io(C,K)),Wr(Et)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(I.setAttribute("style","display:none !important"),I.removeAttribute("class"),I.innerHTML=""):I.remove(),Hr()&&(null!==Nn.previousBodyPadding&&(document.body.style.paddingRight="".concat(Nn.previousBodyPadding,"px"),Nn.previousBodyPadding=null),(()=>{if(se(document.body,B.iosfix)){const C=parseInt(document.body.style.top,10);Mt(document.body,B.iosfix),document.body.style.top="",document.body.scrollTop=-1*C}})(),Zi()),function Na(){Mt([document.documentElement,document.body],[B.shown,B["height-auto"],B["no-backdrop"],B["toast-shown"]])}()}function Qi(C){C=Jt(C);const I=Yi.swalPromiseResolve.get(this),R=Pi(this);this.isAwaitingPromise()?C.isDismissed||(Oi(this),I(C)):R&&I(C)}const Pi=C=>{const I=ue();if(!I)return!1;const R=Yt.innerParams.get(C);if(!R||se(I,R.hideClass.popup))return!1;Mt(I,R.showClass.popup),st(I,R.hideClass.popup);const K=Ce();return Mt(K,R.showClass.backdrop),st(K,R.hideClass.backdrop),Co(C,I,R),!0};const Oi=C=>{C.isAwaitingPromise()&&(Yt.awaitingPromise.delete(C),Yt.innerParams.get(C)||C._destroy())},Jt=C=>typeof C>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},C),Co=(C,I,R)=>{const K=Ce(),Ve=Be&&Gr(I);"function"==typeof R.willClose&&R.willClose(I),Ve?ec(C,I,K,R.returnFocus,R.didClose):dr(C,K,R.returnFocus,R.didClose)},ec=(C,I,R,K,Ve)=>{Et.swalCloseEventFinishedCallback=dr.bind(null,C,R,K,Ve),I.addEventListener(Be,function(gt){gt.target===I&&(Et.swalCloseEventFinishedCallback(),delete Et.swalCloseEventFinishedCallback)})},Io=(C,I)=>{setTimeout(()=>{"function"==typeof I&&I.bind(C.params)(),C._destroy()})};function nu(C,I,R){const K=Yt.domCache.get(C);I.forEach(Ve=>{K[Ve].disabled=R})}function Do(C,I){if(!C)return!1;if("radio"===C.type){const K=C.parentNode.parentNode.querySelectorAll("input");for(let Ve=0;Ve<K.length;Ve++)K[Ve].disabled=I}else C.disabled=I}const pl=C=>{const I={};return Object.keys(C).forEach(R=>{Ie(R)?I[R]=C[R]:F('Invalid parameter to update: "'.concat(R,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))}),I};const Fi=C=>{Ks(C),delete C.params,delete Et.keydownHandler,delete Et.keydownTarget,delete Et.currentInstance},Ks=C=>{C.isAwaitingPromise()?(Pa(Yt,C),Yt.awaitingPromise.set(C,!0)):(Pa(Yi,C),Pa(Yt,C))},Pa=(C,I)=>{for(const R in C)C[R].delete(I)};var na=Object.freeze({hideLoading:zs,disableLoading:zs,getInput:function Ws(C){const I=Yt.innerParams.get(C||this),R=Yt.domCache.get(C||this);return R?be(R.popup,I.input):null},close:Qi,isAwaitingPromise:function Xu(){return!!Yt.awaitingPromise.get(this)},rejectPromise:function hl(C){const I=Yi.swalPromiseReject.get(this);Oi(this),I&&I(C)},handleAwaitingPromise:Oi,closePopup:Qi,closeModal:Qi,closeToast:Qi,enableButtons:function ru(){nu(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function fl(){nu(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function tc(){return Do(this.getInput(),!1)},disableInput:function Me(){return Do(this.getInput(),!0)},showValidationMessage:function vn(C){const I=Yt.domCache.get(this),R=Yt.innerParams.get(this);oe(I.validationMessage,C),I.validationMessage.className=B["validation-message"],R.customClass&&R.customClass.validationMessage&&st(I.validationMessage,R.customClass.validationMessage),ot(I.validationMessage);const K=this.getInput();K&&(K.setAttribute("aria-invalid",!0),K.setAttribute("aria-describedby",B["validation-message"]),rt(K),st(K,B.inputerror))},resetValidationMessage:function nc(){const C=Yt.domCache.get(this);C.validationMessage&&ht(C.validationMessage);const I=this.getInput();I&&(I.removeAttribute("aria-invalid"),I.removeAttribute("aria-describedby"),Mt(I,B.inputerror))},getProgressSteps:function iu(){return Yt.domCache.get(this).progressSteps},update:function vr(C){const I=ue(),R=Yt.innerParams.get(this);if(!I||se(I,R.hideClass.popup))return F("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const K=pl(C),Ve=Object.assign({},R,K);Wi(this,Ve),Yt.innerParams.set(this,Ve),Object.defineProperties(this,{params:{value:Object.assign({},this.params,C),writable:!1,enumerable:!0}})},_destroy:function To(){const C=Yt.domCache.get(this),I=Yt.innerParams.get(this);I?(C.popup&&Et.swalCloseEventFinishedCallback&&(Et.swalCloseEventFinishedCallback(),delete Et.swalCloseEventFinishedCallback),Et.deferDisposalTimer&&(clearTimeout(Et.deferDisposalTimer),delete Et.deferDisposalTimer),"function"==typeof I.didDestroy&&I.didDestroy(),Fi(this)):Ks(this)}});const Or=(C,I)=>{const R=Yt.innerParams.get(C);if(!R.input)return ce('The "input" parameter is needed to be set when using returnInputValueOn'.concat(d(I)));const K=((C,I)=>{const R=C.getInput();if(!R)return null;switch(I.input){case"checkbox":return Sa(R);case"radio":return Xl(R);case"file":return Aa(R);default:return I.inputAutoTrim?R.value.trim():R.value}})(C,R);R.inputValidator?Ao(C,K,I):C.getInput().checkValidity()?"deny"===I?Li(C,K):Rs(C,K):(C.enableButtons(),C.showValidationMessage(R.validationMessage))},Ao=(C,I,R)=>{const K=Yt.innerParams.get(C);C.disableInput(),Promise.resolve().then(()=>Y(K.inputValidator(I,K.validationMessage))).then(gt=>{C.enableButtons(),C.enableInput(),gt?C.showValidationMessage(gt):"deny"===R?Li(C,I):Rs(C,I)})},Li=(C,I)=>{const R=Yt.innerParams.get(C||void 0);R.showLoaderOnDeny&&Ii(jt()),R.preDeny?(Yt.awaitingPromise.set(C||void 0,!0),Promise.resolve().then(()=>Y(R.preDeny(I,R.validationMessage))).then(Ve=>{!1===Ve?(C.hideLoading(),Oi(C)):C.closePopup({isDenied:!0,value:typeof Ve>"u"?I:Ve})}).catch(Ve=>gl(C||void 0,Ve))):C.closePopup({isDenied:!0,value:I})},fs=(C,I)=>{C.closePopup({isConfirmed:!0,value:I})},gl=(C,I)=>{C.rejectPromise(I)},Rs=(C,I)=>{const R=Yt.innerParams.get(C||void 0);R.showLoaderOnConfirm&&Ii(),R.preConfirm?(C.resetValidationMessage(),Yt.awaitingPromise.set(C||void 0,!0),Promise.resolve().then(()=>Y(R.preConfirm(I,R.validationMessage))).then(Ve=>{nn(Sn())||!1===Ve?(C.hideLoading(),Oi(C)):fs(C,typeof Ve>"u"?I:Ve)}).catch(Ve=>gl(C||void 0,Ve))):fs(C,I)},ic=(C,I,R)=>{I.popup.onclick=()=>{const K=Yt.innerParams.get(C);K&&(ks(K)||K.timer||K.input)||R(Zn.close)}},ks=C=>C.showConfirmButton||C.showDenyButton||C.showCancelButton||C.showCloseButton;let Ns=!1;const sc=C=>{C.popup.onmousedown=()=>{C.container.onmouseup=function(I){C.container.onmouseup=void 0,I.target===C.container&&(Ns=!0)}}},yl=C=>{C.container.onmousedown=()=>{C.popup.onmouseup=function(I){C.popup.onmouseup=void 0,(I.target===C.popup||C.popup.contains(I.target))&&(Ns=!0)}}},su=(C,I,R)=>{I.container.onclick=K=>{const Ve=Yt.innerParams.get(C);Ns?Ns=!1:K.target===I.container&&we(Ve.allowOutsideClick)&&R(Zn.backdrop)}},ra=C=>C instanceof Element||(C=>"object"==typeof C&&C.jquery)(C);const ac=()=>{if(Et.timeout)return(()=>{const C=gr(),I=parseInt(window.getComputedStyle(C).width);C.style.removeProperty("transition"),C.style.width="100%";const K=I/parseInt(window.getComputedStyle(C).width)*100;C.style.removeProperty("transition"),C.style.width="".concat(K,"%")})(),Et.timeout.stop()},wd=()=>{if(Et.timeout){const C=Et.timeout.start();return Gt(C),C}};let Rn=!1;const Oa={};const Fr=C=>{for(let I=C.target;I&&I!==document;I=I.parentNode)for(const R in Oa){const K=I.getAttribute(R);if(K)return void Oa[R].fire({template:K})}};var uc=Object.freeze({isValidParameter:ft,isUpdatableParameter:Ie,isDeprecatedParameter:Fe,argsToParams:C=>{const I={};return"object"!=typeof C[0]||ra(C[0])?["title","html","icon"].forEach((R,K)=>{const Ve=C[K];"string"==typeof Ve||ra(Ve)?I[R]=Ve:void 0!==Ve&&ce("Unexpected type of ".concat(R,'! Expected "string" or "Element", got ').concat(typeof Ve))}):Object.assign(I,C[0]),I},isVisible:()=>nn(ue()),clickConfirm:Ra,clickDeny:()=>jt()&&jt().click(),clickCancel:()=>Hn()&&Hn().click(),getContainer:Ce,getPopup:ue,getTitle:Ke,getHtmlContainer:ze,getImage:bt,getIcon:he,getInputLabel:()=>ee(B["input-label"]),getCloseButton:Mr,getActions:Xt,getConfirmButton:vt,getDenyButton:jt,getCancelButton:Hn,getLoader:tn,getFooter:Dt,getTimerProgressBar:gr,getFocusableElements:Vn,getValidationMessage:Sn,isLoading:()=>ue().hasAttribute("data-loading"),fire:function _d(){const C=this;for(var I=arguments.length,R=new Array(I),K=0;K<I;K++)R[K]=arguments[K];return new C(...R)},mixin:function vd(C){return class I extends(this){_main(K,Ve){return super._main(K,Object.assign({},C,Ve))}}},showLoading:Ii,enableLoading:Ii,getTimerLeft:()=>Et.timeout&&Et.timeout.getTimerLeft(),stopTimer:ac,resumeTimer:wd,toggleTimer:()=>{const C=Et.timeout;return C&&(C.running?ac():wd())},increaseTimer:C=>{if(Et.timeout){const I=Et.timeout.increase(C);return Gt(I,!0),I}},isTimerRunning:()=>Et.timeout&&Et.timeout.isRunning(),bindClickHandler:function lc(){Oa[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Rn||(document.body.addEventListener("click",Fr),Rn=!0)}});let lu;class Ys{constructor(){if(typeof window>"u")return;lu=this;for(var I=arguments.length,R=new Array(I),K=0;K<I;K++)R[K]=arguments[K];const Ve=Object.freeze(this.constructor.argsToParams(R));Object.defineProperties(this,{params:{value:Ve,writable:!1,enumerable:!0,configurable:!0}});const gt=this._main(this.params);Yt.promise.set(this,gt)}_main(I){let R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(C=>{!C.backdrop&&C.allowOutsideClick&&F('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const I in C)Pe(I),C.toast&&$e(I),Ge(I)})(Object.assign({},R,I)),Et.currentInstance&&(Et.currentInstance._destroy(),Hr()&&Zi()),Et.currentInstance=this;const K=xo(I,R);ci(K),Object.freeze(K),Et.timeout&&(Et.timeout.stop(),delete Et.timeout),clearTimeout(Et.restoreFocusTimeout);const Ve=gs(this);return Wi(this,K),Yt.innerParams.set(this,K),ia(this,Ve,K)}then(I){return Yt.promise.get(this).then(I)}finally(I){return Yt.promise.get(this).finally(I)}}const ia=(C,I,R)=>new Promise((K,Ve)=>{const gt=Jn=>{C.closePopup({isDismissed:!0,dismiss:Jn})};Yi.swalPromiseResolve.set(C,K),Yi.swalPromiseReject.set(C,Ve),I.confirmButton.onclick=()=>(C=>{const I=Yt.innerParams.get(C);C.disableButtons(),I.input?Or(C,"confirm"):Rs(C,!0)})(C),I.denyButton.onclick=()=>(C=>{const I=Yt.innerParams.get(C);C.disableButtons(),I.returnInputValueOnDeny?Or(C,"deny"):Li(C,!1)})(C),I.cancelButton.onclick=()=>((C,I)=>{C.disableButtons(),I(Zn.cancel)})(C,gt),I.closeButton.onclick=()=>gt(Zn.close),((C,I,R)=>{Yt.innerParams.get(C).toast?ic(C,I,R):(sc(I),yl(I),su(C,I,R))})(C,I,gt),((C,I,R,K)=>{Wr(I),R.toast||(I.keydownHandler=Ve=>Ms(C,Ve,K),I.keydownTarget=R.keydownListenerCapture?window:ue(),I.keydownListenerCapture=R.keydownListenerCapture,I.keydownTarget.addEventListener("keydown",I.keydownHandler,{capture:I.keydownListenerCapture}),I.keydownHandlerAdded=!0)})(C,Et,R,gt),((C,I)=>{"select"===I.input||"radio"===I.input?eu(C,I):["text","email","number","tel","textarea"].includes(I.input)&&(Te(I.inputValue)||Q(I.inputValue))&&(Ii(vt()),tu(C,I))})(C,R),gd(R),Ji(Et,R,gt),uu(I,R),setTimeout(()=>{I.container.scrollTop=0})}),xo=(C,I)=>{const R=(C=>{const I="string"==typeof C.template?document.querySelector(C.template):C.template;if(!I)return{};const R=I.content;return us(R),Object.assign(al(R),qn(R),cr(R),ll(R),Ca(R),Ia(R,Xr))})(C),K=Object.assign({},ie,I,R,C);return K.showClass=Object.assign({},ie.showClass,K.showClass),K.hideClass=Object.assign({},ie.hideClass,K.hideClass),K},gs=C=>{const I={popup:ue(),container:Ce(),actions:Xt(),confirmButton:vt(),denyButton:jt(),cancelButton:Hn(),loader:tn(),closeButton:Mr(),validationMessage:Sn(),progressSteps:fn()};return Yt.domCache.set(C,I),I},Ji=(C,I,R)=>{const K=gr();ht(K),I.timer&&(C.timeout=new cs(()=>{R("timer"),delete C.timeout},I.timer),I.timerProgressBar&&(ot(K),Ae(K,I,"timerProgressBar"),setTimeout(()=>{C.timeout&&C.timeout.running&&Gt(I.timer)})))},uu=(C,I)=>{if(!I.toast){if(!we(I.allowEnterKey))return Mo();Fa(C,I)||ea(0,-1,1)}},Fa=(C,I)=>I.focusDeny&&nn(C.denyButton)?(C.denyButton.focus(),!0):I.focusCancel&&nn(C.cancelButton)?(C.cancelButton.focus(),!0):!(!I.focusConfirm||!nn(C.confirmButton)||(C.confirmButton.focus(),0)),Mo=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};Object.assign(Ys.prototype,na),Object.assign(Ys,uc),Object.keys(na).forEach(C=>{Ys[C]=function(){if(lu)return lu[C](...arguments)}}),Ys.DismissReason=Zn,Ys.version="11.4.8";const Ps=Ys;return Ps.default=Ps,Ps}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Ne,j){var d=Ne.createElement("style");if(Ne.getElementsByTagName("head")[0].appendChild(d),d.styleSheet)d.styleSheet.disabled||(d.styleSheet.cssText=j);else try{d.innerHTML=j}catch{d.innerText=j}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},655:(_t,Ne,j)=>{"use strict";function ce(re,ee){var ue={};for(var he in re)Object.prototype.hasOwnProperty.call(re,he)&&ee.indexOf(he)<0&&(ue[he]=re[he]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var Ke=0;for(he=Object.getOwnPropertySymbols(re);Ke<he.length;Ke++)ee.indexOf(he[Ke])<0&&Object.prototype.propertyIsEnumerable.call(re,he[Ke])&&(ue[he[Ke]]=re[he[Ke]])}return ue}function we(re,ee,ue,he){return new(ue||(ue=Promise))(function(ze,bt){function fn(jt){try{vt(he.next(jt))}catch(Nt){bt(Nt)}}function Sn(jt){try{vt(he.throw(jt))}catch(Nt){bt(Nt)}}function vt(jt){jt.done?ze(jt.value):function Ke(ze){return ze instanceof ue?ze:new ue(function(bt){bt(ze)})}(jt.value).then(fn,Sn)}vt((he=he.apply(re,ee||[])).next())})}function Ie(re){return this instanceof Ie?(this.v=re,this):new Ie(re)}function Fe(re,ee,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,he=ue.apply(re,ee||[]),ze=[];return Ke={},bt("next"),bt("throw"),bt("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke;function bt(tn){he[tn]&&(Ke[tn]=function(Hn){return new Promise(function(Xt,Dt){ze.push([tn,Hn,Xt,Dt])>1||fn(tn,Hn)})})}function fn(tn,Hn){try{!function Sn(tn){tn.value instanceof Ie?Promise.resolve(tn.value.v).then(vt,jt):Nt(ze[0][2],tn)}(he[tn](Hn))}catch(Xt){Nt(ze[0][3],Xt)}}function vt(tn){fn("next",tn)}function jt(tn){fn("throw",tn)}function Nt(tn,Hn){tn(Hn),ze.shift(),ze.length&&fn(ze[0][0],ze[0][1])}}function $e(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,ee=re[Symbol.asyncIterator];return ee?ee.call(re):(re=function ie(re){var ee="function"==typeof Symbol&&Symbol.iterator,ue=ee&&re[ee],he=0;if(ue)return ue.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&he>=re.length&&(re=void 0),{value:re&&re[he++],done:!re}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),ue={},he("next"),he("throw"),he("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function he(ze){ue[ze]=re[ze]&&function(bt){return new Promise(function(fn,Sn){!function Ke(ze,bt,fn,Sn){Promise.resolve(Sn).then(function(vt){ze({value:vt,done:fn})},bt)}(fn,Sn,(bt=re[ze](bt)).done,bt.value)})}}}j.d(Ne,{FC:()=>Fe,KL:()=>$e,_T:()=>ce,mG:()=>we,qq:()=>Ie})},4650:(_t,Ne,j)=>{"use strict";j.d(Ne,{$8M:()=>yc,$WT:()=>sr,$Z:()=>Zb,AFp:()=>Jc,AaK:()=>we,CHM:()=>nc,CRH:()=>Zf,CZH:()=>qm,CqO:()=>_E,D6c:()=>FI,DdM:()=>MC,EJc:()=>XA,EpF:()=>Q_,F4k:()=>yE,FYo:()=>y_,FiY:()=>Ha,Gf:()=>VC,GfV:()=>xb,Gpc:()=>Q,JOm:()=>Xi,KtG:()=>iu,LFG:()=>Xe,LSH:()=>o_,Lbi:()=>lw,Lck:()=>CA,MAs:()=>cm,MMx:()=>$v,NdJ:()=>X_,OlP:()=>bn,Oqu:()=>lv,P3R:()=>Ig,PXZ:()=>ax,Q6J:()=>dm,QGY:()=>J_,Qsj:()=>xg,R0b:()=>ma,RDi:()=>pb,Rgc:()=>Go,SBq:()=>wu,Sil:()=>hI,Suo:()=>Hm,TTD:()=>qs,TgZ:()=>xf,X6Q:()=>TI,XFs:()=>be,Xpm:()=>Yt,Xts:()=>Ac,Y36:()=>Cu,YKP:()=>Vv,YNc:()=>Sf,Yjl:()=>zi,Yz7:()=>Dt,Z0I:()=>Vn,ZZ4:()=>Cw,_Bn:()=>wC,_UZ:()=>oo,_Vd:()=>Nl,_c5:()=>Dw,_uU:()=>kf,aQg:()=>iy,c2e:()=>JA,cJS:()=>Mr,cg1:()=>Tm,dDg:()=>_I,dqk:()=>At,eFA:()=>cx,ekj:()=>zc,eoX:()=>ap,f3M:()=>lt,g9A:()=>aw,h0i:()=>ih,hGG:()=>Dx,hij:()=>uv,iGM:()=>Wf,ifc:()=>Be,ip1:()=>sw,jDz:()=>EC,kL8:()=>pv,lG2:()=>wo,lqb:()=>Mc,lri:()=>mI,n5z:()=>mc,oAB:()=>vo,oxw:()=>CE,q4F:()=>rr,qLn:()=>Nc,qOj:()=>G_,qZA:()=>Mf,rWj:()=>yI,s9C:()=>ev,sBO:()=>ey,s_b:()=>Bm,soG:()=>zm,tb:()=>uw,tp0:()=>A,uIk:()=>lm,vHH:()=>Ie,vpe:()=>pa,wAp:()=>zt,xp6:()=>Og,z2F:()=>Qm,zSh:()=>f_,zs3:()=>Oc});var d=j(7579),G=j(727),F=j(9751),ce=j(6451),pe=j(3099);function ve(s){for(let o in s)if(s[o]===ve)return o;throw Error("Could not find renamed property on target object.")}function xe(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function we(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(we).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function Te(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Y=ve({__forward_ref__:ve});function Q(s){return s.__forward_ref__=Q,s.toString=function(){return we(this())},s}function ie(s){return Qe(s)?s():s}function Qe(s){return"function"==typeof s&&s.hasOwnProperty(Y)&&s.__forward_ref__===Q}function je(s){return s&&!!s.\u0275providers}const ft="https://g.co/ng/security#xss";class Ie extends Error{constructor(o,l){super(function Fe(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function Pe(s){return"string"==typeof s?s:null==s?"":String(s)}function Je(s,o){throw new Ie(-201,!1)}function jt(s,o){null==s&&function Nt(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Dt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Mr(s){return{providers:s.providers||[],imports:s.imports||[]}}function br(s){return Hr(s,oe)||Hr(s,ge)}function Vn(s){return null!==br(s)}function Hr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Nn(s){return s&&(s.hasOwnProperty(se)||s.hasOwnProperty(Ae))?s[se]:null}const oe=ve({\u0275prov:ve}),se=ve({\u0275inj:ve}),ge=ve({ngInjectableDef:ve}),Ae=ve({ngInjectorDef:ve});var be=(()=>((be=be||{})[be.Default=0]="Default",be[be.Host=1]="Host",be[be.Self=2]="Self",be[be.SkipSelf=4]="SkipSelf",be[be.Optional=8]="Optional",be))();let rt;function st(s){const o=rt;return rt=s,o}function Mt(s,o,l){const c=br(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&be.Optional?null:void 0!==o?o:void Je(we(s))}const At=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),wn={},nn="__NG_DI_FLAG__",An="ngTempTokenPath",Gr=/\n/gm,Qr="__source";let rn;function qr(s){const o=rn;return rn=s,o}function Et(s,o=be.Default){if(void 0===rn)throw new Ie(-203,!1);return null===rn?Mt(s,void 0,o):rn.get(s,o&be.Optional?null:void 0,o)}function Xe(s,o=be.Default){return(function _n(){return rt}()||Et)(ie(s),o)}function lt(s,o=be.Default){return Xe(s,Lt(o))}function Lt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Pt(s){const o=[];for(let l=0;l<s.length;l++){const c=ie(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Ie(900,!1);let h,p=be.Default;for(let _=0;_<c.length;_++){const b=c[_],D=J(b);"number"==typeof D?-1===D?h=b.token:p|=D:h=b}o.push(Xe(h,p))}else o.push(Xe(c))}return o}function pn(s,o){return s[nn]=o,s.prototype[nn]=o,s}function J(s){return s[nn]}function q(s){return{toString:s}.toString()}var O=(()=>((O=O||{})[O.OnPush=0]="OnPush",O[O.Default=1]="Default",O))(),Be=(()=>{return(s=Be||(Be={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Be;var s})();const yt={},it=[],Kt=ve({\u0275cmp:ve}),Tt=ve({\u0275dir:ve}),Ln=ve({\u0275pipe:ve}),Er=ve({\u0275mod:ve}),qt=ve({\u0275fac:ve}),zr=ve({__NG_ELEMENT_ID__:ve});let rl=0;function Yt(s){return q(()=>{const l=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===O.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||it,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Be.Emulated,id:"c"+rl++,styles:s.styles||it,_:null,setInput:null,schemas:s.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},p=s.dependencies,_=s.features;return h.inputs=ol(s.inputs,c),h.outputs=ol(s.outputs),_&&_.forEach(b=>b(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(sl).filter(Cr):null,h.pipeDefs=p?()=>("function"==typeof p?p():p).map(kr).filter(Cr):null,h})}function sl(s){return In(s)||gn(s)}function Cr(s){return null!==s}function vo(s){return q(()=>({type:s.type,bootstrap:s.bootstrap||it,declarations:s.declarations||it,imports:s.imports||it,exports:s.exports||it,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function ol(s,o){if(null==s)return yt;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),l[h]=c,o&&(o[h]=p)}return l}const wo=Yt;function zi(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function In(s){return s[Kt]||null}function gn(s){return s[Tt]||null}function kr(s){return s[Ln]||null}function sr(s){const o=In(s)||gn(s)||kr(s);return null!==o&&o.standalone}function Jr(s,o){const l=s[Er]||null;if(!l&&!0===o)throw new Error(`Type ${we(s)} does not have '\u0275mod' property.`);return l}function ui(s){return Array.isArray(s)&&"object"==typeof s[1]}function ci(s){return Array.isArray(s)&&!0===s[1]}function cs(s){return 0!=(4&s.flags)}function Yo(s){return s.componentOffset>-1}function ul(s){return 1==(1&s.flags)}function Ir(s){return null!==s.template}function fd(s){return 0!=(256&s[2])}function Gs(s,o){return s.hasOwnProperty(qt)?s[qt]:null}class xs{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function qs(){return zs}function zs(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ws),xa}function xa(){const s=Ma(this),o=s?.current;if(o){const l=s.previous;if(l===yt)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Ws(s,o,l,c){const h=this.declaredInputs[l],p=Ma(s)||function Ra(s,o){return s[Yi]=o}(s,{previous:yt,current:null}),_=p.current||(p.current={}),b=p.previous,D=b[h];_[h]=new xs(D&&D.currentValue,o,b===yt),s[c]=o}qs.ngInherit=!0;const Yi="__ngSimpleChanges__";function Ma(s){return s[Yi]||null}function Kn(s){for(;Array.isArray(s);)s=s[0];return s}function Ms(s,o){return Kn(o[s])}function Dr(s,o){return Kn(o[s.index])}function ka(s,o){return s.data[o]}function dr(s,o){const l=o[s];return ui(l)?l:l[0]}function Qi(s){return 64==(64&s[2])}function Pi(s,o){return null==o?null:s[o]}function hl(s){s[18]=0}function Oi(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const Jt={lFrame:_d(null),bindingsEnabled:!0};function ru(){return Jt.bindingsEnabled}function Me(){return Jt.lFrame.lView}function vn(){return Jt.lFrame.tView}function nc(s){return Jt.lFrame.contextLView=s,s[8]}function iu(s){return Jt.lFrame.contextLView=null,s}function vr(){let s=pl();for(;null!==s&&64===s.type;)s=s.parent;return s}function pl(){return Jt.lFrame.currentTNode}function Fi(s,o){const l=Jt.lFrame;l.currentTNode=s,l.isParent=o}function Ks(){return Jt.lFrame.isParent}function Li(){return Jt.lFrame.bindingIndex++}function ml(s,o){const l=Jt.lFrame;l.bindingIndex=l.bindingRootIndex=s,ks(o)}function ks(s){Jt.lFrame.currentDirectiveIndex=s}function sc(){return Jt.lFrame.currentQueryIndex}function yl(s){Jt.lFrame.currentQueryIndex=s}function su(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function oc(s,o,l){if(l&be.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||l&be.Host||(h=su(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=Jt.lFrame=yd();return c.currentTNode=o,c.lView=s,!0}function ra(s){const o=yd(),l=s[1];Jt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function yd(){const s=Jt.lFrame,o=null===s?null:s.child;return null===o?_d(s):o}function _d(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function vd(){const s=Jt.lFrame;return Jt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const ou=vd;function ac(){const s=vd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ei(){return Jt.lFrame.selectedIndex}function ps(s){Jt.lFrame.selectedIndex=s}function Rn(){const s=Jt.lFrame;return ka(s.tView,s.selectedIndex)}function ia(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:b,ngAfterViewInit:D,ngAfterViewChecked:x,ngOnDestroy:P}=p;_&&(s.contentHooks||(s.contentHooks=[])).push(-l,_),b&&((s.contentHooks||(s.contentHooks=[])).push(l,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,b)),D&&(s.viewHooks||(s.viewHooks=[])).push(-l,D),x&&((s.viewHooks||(s.viewHooks=[])).push(l,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,x)),null!=P&&(s.destroyHooks||(s.destroyHooks=[])).push(l,P)}}function xo(s,o,l){uu(s,o,3,l)}function gs(s,o,l,c){(3&s[2])===l&&uu(s,o,l,c)}function Ji(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function uu(s,o,l,c){const p=c??-1,_=o.length-1;let b=0;for(let D=void 0!==c?65535&s[18]:0;D<_;D++)if("number"==typeof o[D+1]){if(b=o[D],null!=c&&b>=c)break}else o[D]<0&&(s[18]+=65536),(b<p||-1==p)&&(Fa(s,l,o,D),s[18]=(4294901760&s[18])+D+2),D++}function Fa(s,o,l,c){const h=l[c]<0,p=l[c+1],b=s[h?-l[c]:l[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(b)}finally{}}}else try{p.call(b)}finally{}}class Ps{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function Xn(s,o,l){let c=0;for(;c<l.length;){const h=l[c];if("number"==typeof h){if(0!==h)break;c++;const p=l[c++],_=l[c++],b=l[c++];s.setAttribute(o,_,b,p)}else{const p=h,_=l[++c];Qs(p)?s.setProperty(o,p,_):s.setAttribute(o,p,_),c++}}return c}function Ti(s){return 3===s||4===s||6===s}function Qs(s){return 64===s.charCodeAt(0)}function ms(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?l=h:0===l||cc(s,l,h,null,-1===l||2===l?o[++c]:null)}}return s}function cc(s,o,l,c,h){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const b=s[p++];if("number"==typeof b){if(b===o){_=-1;break}if(b>o){_=p-1;break}}}for(;p<s.length;){const b=s[p];if("number"==typeof b)break;if(b===l){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,l),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function dc(s){return-1!==s}function _l(s){return 32767&s}function sa(s,o){let l=function hc(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let La=!0;function Os(s){const o=La;return La=s,o}let bd=0;const di={};function ko(s,o){const l=fc(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Va(c.data,s),Va(o,null),Va(c.blueprint,null));const h=vl(s,o),p=s.injectorIndex;if(dc(h)){const _=_l(h),b=sa(h,o),D=b[1].data;for(let x=0;x<8;x++)o[p+x]=b[_+x]|D[_+x]}return o[p+8]=h,p}function Va(s,o){s.push(0,0,0,0,0,0,0,0,o)}function fc(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function vl(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=o;for(;null!==h;){if(c=Uh(h),null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Cd(s,o,l){!function Ed(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(zr)&&(c=l[zr]),null==c&&(c=l[zr]=bd++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function Id(s,o,l){if(l&be.Optional||void 0!==s)return s;Je()}function Ba(s,o,l,c){if(l&be.Optional&&void 0===c&&(c=null),!(l&(be.Self|be.Host))){const h=s[9],p=st(void 0);try{return h?h.get(o,c,l&be.Optional):Mt(o,c,l&be.Optional)}finally{st(p)}}return Id(c,0,l)}function Fh(s,o,l,c=be.Default,h){if(null!==s){if(1024&o[2]){const _=function Gp(s,o,l,c,h){let p=s,_=o;for(;null!==p&&null!==_&&1024&_[2]&&!(256&_[2]);){const b=ys(p,_,l,c|be.Self,di);if(b!==di)return b;let D=p.parent;if(!D){const x=_[21];if(x){const P=x.get(l,di,c);if(P!==di)return P}D=Uh(_),_=_[15]}p=D}return h}(s,o,l,c,di);if(_!==di)return _}const p=ys(s,o,l,c,di);if(p!==di)return p}return Ba(o,l,c,h)}function ys(s,o,l,c,h){const p=function Dd(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(zr)?s[zr]:void 0;return"number"==typeof o?o>=0?255&o:Lh:o}(l);if("function"==typeof p){if(!oc(o,s,c))return c&be.Host?Id(h,0,c):Ba(o,l,c,h);try{const _=p(c);if(null!=_||c&be.Optional)return _;Je()}finally{ou()}}else if("number"==typeof p){let _=null,b=fc(s,o),D=-1,x=c&be.Host?o[16][6]:null;for((-1===b||c&be.SkipSelf)&&(D=-1===b?vl(s,o):o[b+8],-1!==D&&Si(c,!1)?(_=o[1],b=_l(D),o=sa(D,o)):b=-1);-1!==b;){const P=o[1];if(gc(p,b,P.data)){const $=pc(b,o,l,_,c,x);if($!==di)return $}D=o[b+8],-1!==D&&Si(c,o[1].data[b+8]===x)&&gc(p,b,o)?(_=P,b=_l(D),o=sa(D,o)):b=-1}}return h}function pc(s,o,l,c,h,p){const _=o[1],b=_.data[s+8],P=wl(b,_,l,null==c?Yo(b)&&La:c!=_&&0!=(3&b.type),h&be.Host&&p===b);return null!==P?_s(o,_,P,b):di}function wl(s,o,l,c,h){const p=s.providerIndexes,_=o.data,b=1048575&p,D=s.directiveStart,P=p>>20,ne=h?b+P:s.directiveEnd;for(let fe=c?b:b+P;fe<ne;fe++){const Re=_[fe];if(fe<D&&l===Re||fe>=D&&Re.type===l)return fe}if(h){const fe=_[D];if(fe&&Ir(fe)&&fe.type===l)return D}return null}function _s(s,o,l,c){let h=s[l];const p=o.data;if(function C(s){return s instanceof Ps}(h)){const _=h;_.resolving&&function Ge(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${s}${l}`)}(function $e(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Pe(s)}(p[l]));const b=Os(_.canSeeViewProviders);_.resolving=!0;const D=_.injectImpl?st(_.injectImpl):null;oc(s,c,be.Default);try{h=s[l]=_.factory(void 0,p,s,c),o.firstCreatePass&&l>=c.directiveStart&&function Ys(s,o,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const _=zs(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,_),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,_)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),p&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,p),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,p))}(l,p[l],o)}finally{null!==D&&st(D),Os(b),_.resolving=!1,ou()}}return h}function gc(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Si(s,o){return!(s&be.Self||s&be.Host&&o)}class No{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return Fh(this._tNode,this._lView,o,Lt(c),l)}}function Lh(){return new No(vr(),Me())}function mc(s){return q(()=>{const o=s.prototype.constructor,l=o[qt]||ja(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[qt]||ja(h);if(p&&p!==l)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function ja(s){return Qe(s)?()=>{const o=ja(ie(s));return o&&o()}:Gs(s)}function Uh(s){const o=s[1],l=o.type;return 2===l?o.declTNode:1===l?s[6]:null}function yc(s){return function du(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const p=l[h];if(Ti(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(p===o)return l[h+1];h+=2}}}return null}(vr(),s)}const bl="__parameters__";function hu(s,o,l){return q(()=>{const c=function Td(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const _=new h(...p);return b.annotation=_,b;function b(D,x,P){const $=D.hasOwnProperty(bl)?D[bl]:Object.defineProperty(D,bl,{value:[]})[bl];for(;$.length<=P;)$.push(null);return($[P]=$[P]||[]).push(_),D}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class bn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Dt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Js(s,o){s.forEach(l=>Array.isArray(l)?Js(l,o):o(l))}function wc(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Cl(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ai(s,o,l){let c=Zr(s,o);return c>=0?s[1|c]=l:(c=~c,function Wy(s,o,l,c){let h=s.length;if(h==o)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function fr(s,o){const l=Zr(s,o);if(l>=0)return s[1|l]}function Zr(s,o){return function Oo(s,o,l){let c=0,h=s.length>>l;for(;h!==c;){const p=c+(h-c>>1),_=s[p<<l];if(o===_)return p<<l;_>o?h=p:c=p+1}return~(h<<l)}(s,o,1)}const Ha=pn(hu("Optional"),8),A=pn(hu("SkipSelf"),4);var Xi=(()=>((Xi=Xi||{})[Xi.Important=1]="Important",Xi[Xi.DashCase=2]="DashCase",Xi))();const Wh=new Map;let Zh=0;const Yh="__ngContext__";function Mi(s,o){ui(o)?(s[Yh]=o[20],function tg(s){Wh.set(s[20],s)}(o)):s[Yh]=o}function He(s,o){return undefined(s,o)}function Rt(s){const o=s[3];return ci(o)?o[3]:o}function es(s){return Ic(s[13])}function Fs(s){return Ic(s[4])}function Ic(s){for(;null!==s&&!ci(s);)s=s[4];return s}function Al(s,o,l,c,h){if(null!=c){let p,_=!1;ci(c)?p=c:ui(c)&&(_=!0,c=c[0]);const b=Kn(c);0===s&&null!==l?null==h?sb(o,l,b):Ml(o,l,b,h||null,!0):1===s&&null!==l?Ml(o,l,b,h||null,!0):2===s?function fg(s,o,l){const c=nf(s,o);c&&function cg(s,o,l,c){s.removeChild(o,l,c)}(s,c,o,l)}(o,b,_):3===s&&o.destroyNode(b),null!=p&&function db(s,o,l,c,h){const p=l[7];p!==Kn(l)&&Al(o,s,c,p,h);for(let b=10;b<l.length;b++){const D=l[b];Ld(D[1],D,s,o,c,p)}}(o,s,p,l,h)}}function Dc(s,o,l){return s.createElement(o,l)}function lg(s,o){const l=s[9],c=l.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Oi(h,-1)),l.splice(c,1)}function Jy(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const h=c[17];null!==h&&h!==s&&lg(h,c),o>0&&(s[l-1][4]=c[4]);const p=Cl(s,10+o);!function Jh(s,o){Ld(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=p[19];null!==_&&_.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Xy(s,o){if(!(128&o[2])){const l=o[11];l.destroyNode&&Ld(s,o,l,3,null,null),function ag(s){let o=s[13];if(!o)return ug(s[1],s);for(;o;){let l=null;if(ui(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)ui(o)&&ug(o[1],o),o=o[3];null===o&&(o=s),ui(o)&&ug(o[1],o),l=o&&o[4]}o=l}}(o)}}function ug(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function CT(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=o[l[c]];if(!(h instanceof Ps)){const p=l[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const b=h[p[_]],D=p[_+1];try{D.call(b)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function ET(s,o){const l=s.cleanup,c=o[7];let h=-1;if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const _=l[p+3];_>=0?c[h=_]():c[h=-_].unsubscribe(),p+=2}else{const _=c[h=l[p+1]];l[p].call(_)}if(null!==c){for(let p=h+1;p<c.length;p++)(0,c[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const l=o[17];if(null!==l&&ci(o[3])){l!==o[3]&&lg(l,o);const c=o[19];null!==c&&c.detachView(s)}!function Kh(s){Wh.delete(s[20])}(o)}}function ib(s,o,l){return function xl(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:p}=s.data[c.directiveStart+h];if(p===Be.None||p===Be.Emulated)return null}return Dr(c,l)}}(s,o.parent,l)}function Ml(s,o,l,c,h){s.insertBefore(o,l,c,h)}function sb(s,o,l){s.appendChild(o,l)}function ob(s,o,l,c,h){null!==c?Ml(s,o,l,c,h):sb(s,o,l)}function nf(s,o){return s.parentNode(o)}let Tc,yn,ub=function lb(s,o,l){return 40&s.type?Dr(s,l):null};function dg(s,o,l,c){const h=ib(s,c,o),p=o[11],b=function ab(s,o,l){return ub(s,o,l)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(l))for(let D=0;D<l.length;D++)ob(p,h,l[D],b,!1);else ob(p,h,l,b,!1)}function sf(s,o){if(null!==o){const l=o.type;if(3&l)return Dr(o,s);if(4&l)return hg(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return sf(s,c);{const h=s[o.index];return ci(h)?hg(-1,h):Kn(h)}}if(32&l)return He(o,s)()||Kn(s[o.index]);{const c=cb(s,o);return null!==c?Array.isArray(c)?c[0]:sf(Rt(s[16]),c):sf(s,o.next)}}return null}function cb(s,o){return null!==o?s[16][6].projection[o.projection]:null}function hg(s,o){const l=10+s+1;if(l<o.length){const c=o[l],h=c[1].firstChild;if(null!==h)return sf(c,h)}return o[7]}function pg(s,o,l,c,h,p,_){for(;null!=l;){const b=c[l.index],D=l.type;if(_&&0===o&&(b&&Mi(Kn(b),c),l.flags|=2),32!=(32&l.flags))if(8&D)pg(s,o,l.child,c,h,p,!1),Al(o,s,h,b,p);else if(32&D){const x=He(l,c);let P;for(;P=x();)Al(o,s,h,P,p);Al(o,s,h,b,p)}else 16&D?t_(s,o,c,l,h,p):Al(o,s,h,b,p);l=_?l.projectionNext:l.next}}function Ld(s,o,l,c,h,p){pg(l,c,s.firstChild,o,h,p,!1)}function t_(s,o,l,c,h,p){const _=l[16],D=_[6].projection[c.projection];if(Array.isArray(D))for(let x=0;x<D.length;x++)Al(o,s,h,D[x],p);else pg(s,o,D,_[3],h,p,!0)}function n_(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function r_(s,o,l){const{mergedAttrs:c,classes:h,styles:p}=l;null!==c&&Xn(s,o,c),null!==h&&n_(s,o,h),null!==p&&function gg(s,o,l){s.setAttribute(o,"style",l)}(s,o,p)}function pb(s){Tc=s}function Xs(s){return function Vi(){if(void 0===yn&&(yn=null,At.trustedTypes))try{yn=At.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return yn}()?.createScriptURL(s)||s}class mb{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ft})`}}function Vo(s){return s instanceof mb?s.changingThisBreaksApplicationSecurity:s}function af(s,o){const l=function _b(s){return s instanceof mb&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see ${ft})`)}return l===o}const Wa=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Qn=(()=>((Qn=Qn||{})[Qn.NONE=0]="NONE",Qn[Qn.HTML=1]="HTML",Qn[Qn.STYLE=2]="STYLE",Qn[Qn.SCRIPT=3]="SCRIPT",Qn[Qn.URL=4]="URL",Qn[Qn.RESOURCE_URL=5]="RESOURCE_URL",Qn))();function o_(s){const o=Rl();return o?o.sanitize(Qn.URL,s)||"":af(s,"URL")?Vo(s):function Vd(s){return(s=String(s)).match(Wa)?s:"unsafe:"+s}(Pe(s))}function jd(s){const o=Rl();if(o)return Xs(o.sanitize(Qn.RESOURCE_URL,s)||"");if(af(s,"ResourceURL"))return Xs(Vo(s));throw new Ie(904,!1)}function Ig(s,o,l){return function FT(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?jd:o_}(o,l)(s)}function Rl(){const s=Me();return s&&s[12]}const Ac=new bn("ENVIRONMENT_INITIALIZER"),Cb=new bn("INJECTOR",-1),Dg=new bn("INJECTOR_DEF_TYPES");class $d{get(o,l=wn){if(l===wn){const c=new Error(`NullInjectorError: No provider for ${we(o)}!`);throw c.name="NullInjectorError",c}return l}}function Tg(...s){return{\u0275providers:Ib(0,s),\u0275fromNgModule:!0}}function Ib(s,...o){const l=[],c=new Set;let h;return Js(o,p=>{const _=p;l_(_,l,[],c)&&(h||(h=[]),h.push(_))}),void 0!==h&&Db(h,l),l}function Db(s,o){for(let l=0;l<s.length;l++){const{providers:h}=s[l];u_(h,p=>{o.push(p)})}}function l_(s,o,l,c){if(!(s=ie(s)))return!1;let h=null,p=Nn(s);const _=!p&&In(s);if(p||_){if(_&&!_.standalone)return!1;h=s}else{const D=s.ngModule;if(p=Nn(D),!p)return!1;h=D}const b=c.has(h);if(_){if(b)return!1;if(c.add(h),_.dependencies){const D="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const x of D)l_(x,o,l,c)}}else{if(!p)return!1;{if(null!=p.imports&&!b){let x;c.add(h);try{Js(p.imports,P=>{l_(P,o,l,c)&&(x||(x=[]),x.push(P))})}finally{}void 0!==x&&Db(x,o)}if(!b){const x=Gs(h)||(()=>new h);o.push({provide:h,useFactory:x,deps:it},{provide:Dg,useValue:h,multi:!0},{provide:Ac,useValue:()=>Xe(h),multi:!0})}const D=p.providers;null==D||b||u_(D,P=>{o.push(P)})}}return h!==s&&void 0!==s.providers}function u_(s,o){for(let l of s)je(l)&&(l=l.\u0275providers),Array.isArray(l)?u_(l,o):o(l)}const c_=ve({provide:String,useValue:ve});function d_(s){return null!==s&&"object"==typeof s&&c_ in s}function _u(s){return"function"==typeof s}const f_=new bn("Set Injector scope."),xc={},Hd={};let pf;function Gd(){return void 0===pf&&(pf=new $d),pf}class Mc{}class Sb extends Mc{get destroyed(){return this._destroyed}constructor(o,l,c,h){super(),this.parent=l,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qd(o,_=>this.processProvider(_)),this.records.set(Cb,Bi(void 0,this)),h.has("environment")&&this.records.set(Mc,Bi(void 0,this));const p=this.records.get(f_);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Dg.multi,it,be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=qr(this),c=st(void 0);try{return o()}finally{qr(l),st(c)}}get(o,l=wn,c=be.Default){this.assertNotDestroyed(),c=Lt(c);const h=qr(this),p=st(void 0);try{if(!(c&be.SkipSelf)){let b=this.records.get(o);if(void 0===b){const D=function m_(s){return"function"==typeof s||"object"==typeof s&&s instanceof bn}(o)&&br(o);b=D&&this.injectableDefInScope(D)?Bi(Ag(o),xc):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(c&be.Self?Gd():this.parent).get(o,l=c&be.Optional&&l===wn?null:l)}catch(_){if("NullInjectorError"===_.name){if((_[An]=_[An]||[]).unshift(we(o)),h)throw _;return function Z(s,o,l,c){const h=s[An];throw o[Qr]&&h.unshift(o[Qr]),s.message=function te(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=we(o);if(Array.isArray(o))h=o.map(we).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let b=o[_];p.push(_+":"+("string"==typeof b?JSON.stringify(b):we(b)))}h=`{${p.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(Gr,"\n  ")}`}("\n"+s.message,h,l,c),s.ngTokenPath=h,s[An]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{st(p),qr(h)}}resolveInjectorInitializers(){const o=qr(this),l=st(void 0);try{const c=this.get(Ac.multi,it,be.Self);for(const h of c)h()}finally{qr(o),st(l)}}toString(){const o=[],l=this.records;for(const c of l.keys())o.push(we(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(o){let l=_u(o=ie(o))?o:ie(o&&o.provide);const c=function VT(s){return d_(s)?Bi(void 0,s.useValue):Bi(Ab(s),xc)}(o);if(_u(o)||!0!==o.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=Bi(void 0,xc,!0),h.factory=()=>Pt(h.multi),this.records.set(l,h)),l=o,h.multi.push(o)}this.records.set(l,c)}hydrate(o,l){return l.value===xc&&(l.value=Hd,l.value=l.factory()),"object"==typeof l.value&&l.value&&function g_(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=ie(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Ag(s){const o=br(s),l=null!==o?o.factory:Gs(s);if(null!==l)return l;if(s instanceof bn)throw new Ie(204,!1);if(s instanceof Function)return function UT(s){const o=s.length;if(o>0)throw function Po(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}(o,"?"),new Ie(204,!1);const l=function Rr(s){const o=s&&(s[oe]||s[ge]);if(o){const l=function ai(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Ie(204,!1)}function Ab(s,o,l){let c;if(_u(s)){const h=ie(s);return Gs(h)||Ag(h)}if(d_(s))c=()=>ie(s.useValue);else if(function h_(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Pt(s.deps||[]));else if(function ff(s){return!(!s||!s.useExisting)}(s))c=()=>Xe(ie(s.useExisting));else{const h=ie(s&&(s.useClass||s.provide));if(!function p_(s){return!!s.deps}(s))return Gs(h)||Ag(h);c=()=>new h(...Pt(s.deps))}return c}function Bi(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function qd(s,o){for(const l of s)Array.isArray(l)?qd(l,o):l&&je(l)?qd(l.\u0275providers,o):o(l)}class gf{}class vu{}class BT{resolveComponentFactory(o){throw function zd(s){const o=Error(`No component factory found for ${we(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Nl=(()=>{class s{}return s.NULL=new BT,s})();function jT(){return Wd(vr(),Me())}function Wd(s,o){return new wu(Dr(s,o))}let wu=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=jT,s})();function mf(s){return s instanceof wu?s.nativeElement:s}class y_{}let xg=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Rc(){const s=Me(),l=dr(vr().index,s);return(ui(l)?l:s)[11]}(),s})(),__=(()=>{class s{}return s.\u0275prov=Dt({token:s,providedIn:"root",factory:()=>null}),s})();class xb{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const rr=new xb("15.1.1"),eo={};function Mg(s){return s.ngOriginalError}class Nc{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Mg(o);for(;l&&Mg(l);)l=Mg(l);return l||null}}function Pl(s){return s instanceof Function?s():s}function b_(s,o,l){let c=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}l=h+1}}const Nb="ng-template";function qT(s,o,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==b_(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Pb(s){return 4===s.type&&s.value!==Nb}function zT(s,o,l){return o===(4!==s.type||l?s.value:Nb)}function WT(s,o,l){let c=4;const h=s.attrs||[],p=function Pg(s){for(let o=0;o<s.length;o++)if(Ti(s[o]))return o;return s.length}(h);let _=!1;for(let b=0;b<o.length;b++){const D=o[b];if("number"!=typeof D){if(!_)if(4&c){if(c=2|1&c,""!==D&&!zT(s,D,l)||""===D&&1===o.length){if(da(c))return!1;_=!0}}else{const x=8&c?D:o[++b];if(8&c&&null!==s.attrs){if(!qT(s.attrs,x,l)){if(da(c))return!1;_=!0}continue}const $=kg(8&c?"class":D,h,Pb(s),l);if(-1===$){if(da(c))return!1;_=!0;continue}if(""!==x){let ne;ne=$>p?"":h[$+1].toLowerCase();const fe=8&c?ne:null;if(fe&&-1!==b_(fe,x,0)||2&c&&x!==ne){if(da(c))return!1;_=!0}}}}else{if(!_&&!da(c)&&!da(D))return!1;if(_&&da(D))continue;_=!1,c=D|1&c}}return da(c)||_}function da(s){return 0==(1&s)}function kg(s,o,l,c){if(null===o)return-1;let h=0;if(c||!l){let p=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)p=!0;else{if(1===_||2===_){let b=o[++h];for(;"string"==typeof b;)b=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=p?1:2}return-1}return function ZT(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function Ng(s,o,l=!1){for(let c=0;c<o.length;c++)if(WT(s,o[c],l))return!0;return!1}function C_(s,o){return s?":not("+o.trim()+")":o}function Fb(s){let o=s[0],l=1,c=2,h="",p=!1;for(;l<s.length;){let _=s[l];if("string"==typeof _)if(2&c){const b=s[++l];h+="["+_+(b.length>0?'="'+b+'"':"")+"]"}else 8&c?h+="."+_:4&c&&(h+=" "+_);else""!==h&&!da(_)&&(o+=C_(p,h),h=""),c=_,p=p||!da(c);l++}return""!==h&&(o+=C_(p,h)),o}const an={};function Og(s){Lb(vn(),Me(),ei()+s,!1)}function Lb(s,o,l,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&xo(o,p,l)}else{const p=s.preOrderHooks;null!==p&&gs(o,p,0,l)}ps(l)}function Ug(s,o=null,l=null,c){const h=Bb(s,o,l,c);return h.resolveInjectorInitializers(),h}function Bb(s,o=null,l=null,c,h=new Set){const p=[l||it,Tg(s)];return c=c||("object"==typeof s?void 0:we(s)),new Sb(p,o||Gd(),c||null,h)}let Oc=(()=>{class s{static create(l,c){if(Array.isArray(l))return Ug({name:""},c,l,"");{const h=l.name??"";return Ug({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=wn,s.NULL=new $d,s.\u0275prov=Dt({token:s,providedIn:"any",factory:()=>Xe(Cb)}),s.__NG_ELEMENT_ID__=-1,s})();function Cu(s,o=be.Default){const l=Me();return null===l?Xe(s,o):Fh(vr(),l,ie(s),o)}function Zb(){throw new Error("invalid")}function Qd(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const p=l[c+1];if(-1!==p){const _=s.data[p];yl(l[c]),_.contentQueries(2,o[p],p)}}}function jg(s,o,l,c,h,p,_,b,D,x,P){const $=o.blueprint.slice();return $[0]=h,$[2]=76|c,(null!==P||s&&1024&s[2])&&($[2]|=1024),hl($),$[3]=$[15]=s,$[8]=l,$[10]=_||s&&s[10],$[11]=b||s&&s[11],$[12]=D||s&&s[12]||null,$[9]=x||s&&s[9]||null,$[6]=p,$[20]=function Yy(){return Zh++}(),$[21]=P,$[16]=2==o.type?s[16]:$,$}function Ll(s,o,l,c,h){let p=s.data[o];if(null===p)p=function $g(s,o,l,c,h){const p=pl(),_=Ks(),D=s.data[o]=function k_(s,o,l,c,h,p){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,l,o,c,h);return null===s.firstChild&&(s.firstChild=D),null!==p&&(_?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D)),D}(s,o,l,c,h),function gl(){return Jt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=l,p.value=c,p.attrs=h;const _=function To(){const s=Jt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Fi(p,!0),p}function _f(s,o,l,c){if(0===l)return-1;const h=o.length;for(let p=0;p<l;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function vf(s,o,l){ra(o);try{const c=s.viewQuery;null!==c&&bf(1,c,l);const h=s.template;null!==h&&Kb(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Qd(s,o),s.staticViewQueries&&bf(2,s.viewQuery,l);const p=s.components;null!==p&&function cS(s,o){for(let l=0;l<o.length;l++)yS(s,o[l])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ac()}}function Fc(s,o,l,c){const h=o[2];if(128!=(128&h)){ra(o);try{hl(o),function Ao(s){return Jt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&Kb(s,o,l,2,c);const _=3==(3&h);if(_){const x=s.preOrderCheckHooks;null!==x&&xo(o,x,null)}else{const x=s.preOrderHooks;null!==x&&gs(o,x,0,null),Ji(o,0)}if(function U_(s){for(let o=es(s);null!==o;o=Fs(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const h=l[c];512&h[2]||Oi(h[3],1),h[2]|=512}}}(o),function mS(s){for(let o=es(s);null!==o;o=Fs(o))for(let l=10;l<o.length;l++){const c=o[l],h=c[1];Qi(c)&&Fc(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Qd(s,o),_){const x=s.contentCheckHooks;null!==x&&xo(o,x)}else{const x=s.contentHooks;null!==x&&gs(o,x,1),Ji(o,1)}!function Iu(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)ps(~h);else{const p=h,_=l[++c],b=l[++c];ml(_,p),b(2,o[p])}}}finally{ps(-1)}}(s,o);const b=s.components;null!==b&&function uS(s,o){for(let l=0;l<o.length;l++)Jg(s,o[l])}(o,b);const D=s.viewQuery;if(null!==D&&bf(2,D,c),_){const x=s.viewCheckHooks;null!==x&&xo(o,x)}else{const x=s.viewHooks;null!==x&&gs(o,x,2),Ji(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Oi(o[3],-1))}finally{ac()}}}function Kb(s,o,l,c,h){const p=ei(),_=2&c;try{ps(-1),_&&o.length>22&&Lb(s,o,22,!1),l(c,h)}finally{ps(p)}}function Du(s,o,l){if(cs(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const _=s.data[p];_.contentQueries&&_.contentQueries(1,l[p],p)}}}function Hg(s,o,l){ru()&&(function P_(s,o,l,c){const h=l.directiveStart,p=l.directiveEnd;Yo(l)&&function eE(s,o,l){const c=Dr(o,s),h=M_(l),p=s[10],_=no(s,jg(s,h,null,l.onPush?32:16,c,o,p,p.createRenderer(c,l),null,null,null));s[o.index]=_}(o,l,s.data[h+l.componentOffset]),s.firstCreatePass||ko(l,o),Mi(c,o);const _=l.initialInputs;for(let b=h;b<p;b++){const D=s.data[b],x=_s(o,s,b,l);Mi(x,o),null!==_&&L_(0,b-h,x,D,0,_),Ir(D)&&(dr(l.index,o)[8]=_s(o,s,b,l))}}(s,o,l,Dr(l,o)),64==(64&l.flags)&&Kg(s,o,l))}function Gg(s,o,l=Dr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],b=-1===_?l(o,s):s[_];s[h++]=b}}}function M_(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Lc(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Lc(s,o,l,c,h,p,_,b,D,x){const P=22+c,$=P+h,ne=function qg(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:an);return l}(P,$),fe="function"==typeof x?x():x;return ne[1]={type:s,blueprint:ne,template:l,queries:null,viewQuery:b,declTNode:o,data:ne.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:$,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:D,consts:fe,incompleteFirstPass:!1}}function zg(s,o,l,c){const h=Xd(o);null===l?h.push(c):(h.push(l),s.firstCreatePass&&nE(s).push(c,h.length-1))}function Yb(s,o,l,c){for(let h in s)if(s.hasOwnProperty(h)){l=null===l?{}:l;const p=s[h];null===c?Jd(l,o,h,p):c.hasOwnProperty(h)&&Jd(l,o,c[h],p)}return l}function Jd(s,o,l,c){s.hasOwnProperty(l)?s[l].push(o,c):s[l]=[o,c]}function to(s,o,l,c,h,p,_,b){const D=Dr(o,l);let P,x=o.inputs;!b&&null!=x&&(P=x[c])?(B_(s,l,P,c,h),Yo(o)&&Wg(l,o.index)):3&o.type&&(c=function hS(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=_?_(h,o.value||"",c):h,p.setProperty(D,c,h))}function Wg(s,o){const l=dr(o,s);16&l[2]||(l[2]|=32)}function Zg(s,o,l,c){let h=!1;if(ru()){const p=null===c?null:{"":-1},_=function Yg(s,o){const l=s.directiveRegistry;let c=null,h=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];if(Ng(o,_.selectors,!1))if(c||(c=[]),Ir(_))if(null!==_.findHostDirectiveDefs){const b=[];h=h||new Map,_.findHostDirectiveDefs(_,b,h),c.unshift(...b,_),Ul(s,o,b.length)}else c.unshift(_),Ul(s,o,0);else h=h||new Map,_.findHostDirectiveDefs?.(_,c,h),c.push(_)}return null===c?null:[c,h]}(s,l);let b,D;null===_?b=D=null:[b,D]=_,null!==b&&(h=!0,Qb(s,o,l,b,p,D)),p&&function F_(s,o,l){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=l[o[h+1]];if(null==p)throw new Ie(-301,!1);c.push(o[h],p)}}}(l,c,p)}return l.mergedAttrs=ms(l.mergedAttrs,l.attrs),h}function Qb(s,o,l,c,h,p){for(let x=0;x<c.length;x++)Cd(ko(l,o),s,c[x].type);!function pS(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}(l,s.data.length,c.length);for(let x=0;x<c.length;x++){const P=c[x];P.providersResolver&&P.providersResolver(P)}let _=!1,b=!1,D=_f(s,o,c.length,null);for(let x=0;x<c.length;x++){const P=c[x];l.mergedAttrs=ms(l.mergedAttrs,P.hostAttrs),Qg(s,l,o,D,P),Xb(D,P,h),null!==P.contentQueries&&(l.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(l.flags|=64);const $=P.type.prototype;!_&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),_=!0),!b&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),b=!0),D++}!function dS(s,o,l){const h=o.directiveEnd,p=s.data,_=o.attrs,b=[];let D=null,x=null;for(let P=o.directiveStart;P<h;P++){const $=p[P],ne=l?l.get($):null,Re=ne?ne.outputs:null;D=Yb($.inputs,P,D,ne?ne.inputs:null),x=Yb($.outputs,P,x,Re);const tt=null===D||null===_||Pb(o)?null:gS(D,P,_);b.push(tt)}null!==D&&(D.hasOwnProperty("class")&&(o.flags|=8),D.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=b,o.inputs=D,o.outputs=x}(s,l,p)}function Kg(s,o,l){const c=l.directiveStart,h=l.directiveEnd,p=l.index,_=function ic(){return Jt.lFrame.currentDirectiveIndex}();try{ps(p);for(let b=c;b<h;b++){const D=s.data[b],x=o[b];ks(b),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&O_(D,x)}}finally{ps(-1),ks(_)}}function O_(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Ul(s,o,l){o.componentOffset=l,(s.components||(s.components=[])).push(o.index)}function Xb(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;Ir(o)&&(l[""]=s)}}function Qg(s,o,l,c,h){s.data[c]=h;const p=h.factory||(h.factory=Gs(h.type)),_=new Ps(p,Ir(h),Cu);s.blueprint[c]=_,l[c]=_,function fS(s,o,l,c,h){const p=h.hostBindings;if(p){let _=s.hostBindingOpCodes;null===_&&(_=s.hostBindingOpCodes=[]);const b=~o.index;(function Jb(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(_)!=b&&_.push(b),_.push(l,c,p)}}(s,o,c,_f(s,l,h.hostVars,an),h)}function Za(s,o,l,c,h,p){const _=Dr(s,o);!function Uc(s,o,l,c,h,p,_){if(null==p)s.removeAttribute(o,h,l);else{const b=null==_?Pe(p):_(p,c||"",h);s.setAttribute(o,h,b,l)}}(o[11],_,p,s.value,l,c,h)}function L_(s,o,l,c,h,p){const _=p[o];if(null!==_){const b=c.setInput;for(let D=0;D<_.length;){const x=_[D++],P=_[D++],$=_[D++];null!==b?c.setInput(l,$,x,P):l[P]=$}}}function gS(s,o,l){let c=null,h=0;for(;h<l.length;){const p=l[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===c&&(c=[]);const _=s[p];for(let b=0;b<_.length;b+=2)if(_[b]===o){c.push(p,_[b+1],l[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function tE(s,o,l,c){return[s,!0,!1,o,null,0,c,l,null,null]}function Jg(s,o){const l=dr(o,s);if(Qi(l)){const c=l[1];48&l[2]?Fc(c,l,c.template,l[8]):l[5]>0&&Xg(l)}}function Xg(s){for(let c=es(s);null!==c;c=Fs(c))for(let h=10;h<c.length;h++){const p=c[h];if(Qi(p))if(512&p[2]){const _=p[1];Fc(_,p,_.template,p[8])}else p[5]>0&&Xg(p)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=dr(l[c],s);Qi(h)&&h[5]>0&&Xg(h)}}function yS(s,o){const l=dr(o,s),c=l[1];(function wf(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),vf(c,l,l[8])}function no(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Vc(s){for(;s;){s[2]|=32;const o=Rt(s);if(fd(s)&&!o)return s;s=o}return null}function em(s,o,l,c=!0){const h=o[10];h.begin&&h.begin();try{Fc(s,o,s.template,l)}catch(_){throw c&&V_(o,_),_}finally{h.end&&h.end()}}function bf(s,o,l){yl(0),o(s,l)}function Xd(s){return s[7]||(s[7]=[])}function nE(s){return s.cleanup||(s.cleanup=[])}function V_(s,o){const l=s[9],c=l?l.get(Nc,null):null;c&&c.handleError(o)}function B_(s,o,l,c,h){for(let p=0;p<l.length;){const _=l[p++],b=l[p++],D=o[_],x=s.data[_];null!==x.setInput?x.setInput(D,h,c,b):D[b]=h}}function Ef(s,o,l){let c=l?s.styles:null,h=l?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const b=o[_];"number"==typeof b?p=b:1==p?h=Te(h,b):2==p&&(c=Te(c,b+": "+o[++_]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}function ts(s,o,l,c,h=!1){for(;null!==l;){const p=o[l.index];if(null!==p&&c.push(Kn(p)),ci(p))for(let b=10;b<p.length;b++){const D=p[b],x=D[1].firstChild;null!==x&&ts(D[1],D,x,c)}const _=l.type;if(8&_)ts(s,o,l.child,c);else if(32&_){const b=He(l,o);let D;for(;D=b();)c.push(D)}else if(16&_){const b=cb(o,l);if(Array.isArray(b))c.push(...b);else{const D=Rt(o[16]);ts(D[1],D,b,c,!0)}}l=h?l.projectionNext:l.next}return c}class eh{get rootNodes(){const o=this._lView,l=o[1];return ts(l,o,l.firstChild,[])}constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ci(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(Jy(o,c),Cl(l,c))}this._attachedToViewContainer=!1}Xy(this._lView[1],this._lView)}onDestroy(o){zg(this._lView[1],this._lView,null,o)}markForCheck(){Vc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){em(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Fd(s,o){Ld(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=o}}class vS extends eh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;em(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class j_ extends Nl{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=In(o);return new th(l,this.ngModule)}}function rE(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class bS{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,c){c=Lt(c);const h=this.injector.get(o,eo,c);return h!==eo||l===eo?h:this.parentInjector.get(o,l,c)}}class th extends vu{get inputs(){return rE(this.componentDef.inputs)}get outputs(){return rE(this.componentDef.outputs)}constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function KT(s){return s.map(Fb).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}create(o,l,c,h){let p=(h=h||this.ngModule)instanceof Mc?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new bS(o,p):o,b=_.get(y_,null);if(null===b)throw new Ie(407,!1);const D=_.get(__,null),x=b.createRenderer(null,this.componentDef),P=this.componentDef.selectors[0][0]||"div",$=c?function R_(s,o,l){return s.selectRootElement(o,l===Be.ShadowDom)}(x,c,this.componentDef.encapsulation):Dc(x,P,function wS(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(P)),ne=this.componentDef.onPush?288:272,fe=Lc(0,null,null,1,0,null,null,null,null,null),Re=jg(null,fe,null,ne,null,null,b,x,D,_,null);let tt,at;ra(Re);try{const xt=this.componentDef;let Wt,qe=null;xt.findHostDirectiveDefs?(Wt=[],qe=new Map,xt.findHostDirectiveDefs(xt,Wt,qe),Wt.push(xt)):Wt=[xt];const en=function iE(s,o){const l=s[1];return s[22]=o,Ll(l,22,2,"#host",null)}(Re,$),wr=function CS(s,o,l,c,h,p,_,b){const D=h[1];!function $_(s,o,l,c){for(const h of s)o.mergedAttrs=ms(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(Ef(o,o.mergedAttrs,!0),null!==l&&r_(c,l,o))}(c,s,o,_);const x=p.createRenderer(o,l),P=jg(h,M_(l),null,l.onPush?32:16,h[s.index],s,p,x,b||null,null,null);return D.firstCreatePass&&Ul(D,s,c.length-1),no(h,P),h[s.index]=P}(en,$,xt,Wt,Re,b,x);at=ka(fe,22),$&&function IS(s,o,l,c){if(c)Xn(s,l,["ng-version",rr.full]);else{const{attrs:h,classes:p}=function YT(s){const o=[],l=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&l.push(p);else{if(!da(h))break;h=p}c++}return{attrs:o,classes:l}}(o.selectors[0]);h&&Xn(s,l,h),p&&p.length>0&&n_(s,l,p.join(" "))}}(x,xt,$,c),void 0!==l&&function H_(s,o,l){const c=s.projection=[];for(let h=0;h<o.length;h++){const p=l[h];c.push(null!=p?Array.from(p):null)}}(at,this.ngContentSelectors,l),tt=function nm(s,o,l,c,h,p){const _=vr(),b=h[1],D=Dr(_,h);Qb(b,h,_,l,null,c);for(let P=0;P<l.length;P++)Mi(_s(h,b,_.directiveStart+P,_),h);Kg(b,h,_),D&&Mi(D,h);const x=_s(h,b,_.directiveStart+_.componentOffset,_);if(s[8]=h[8]=x,null!==p)for(const P of p)P(x,o);return Du(b,_,s),x}(wr,xt,Wt,qe,Re,[DS]),vf(fe,Re,null)}finally{ac()}return new Cf(this.componentType,tt,Wd(at,Re),Re,at)}}class Cf extends gf{constructor(o,l,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=l,this.hostView=this.changeDetectorRef=new vS(h),this.componentType=o}setInput(o,l){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const p=this._rootLView;B_(p[1],p,h,o,l),Wg(p,this._tNode.index)}}get injector(){return new No(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function DS(){const s=vr();ia(Me()[1],s)}function G_(s){let o=function sE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let h;if(Ir(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ie(903,!1);h=o.\u0275dir}if(h){if(l){c.push(h);const _=s;_.inputs=q_(s.inputs),_.declaredInputs=q_(s.declaredInputs),_.outputs=q_(s.outputs);const b=h.hostBindings;b&&z_(s,b);const D=h.viewQuery,x=h.contentQueries;if(D&&TS(s,D),x&&SS(s,x),xe(s.inputs,h.inputs),xe(s.declaredInputs,h.declaredInputs),xe(s.outputs,h.outputs),Ir(h)&&h.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let _=0;_<p.length;_++){const b=p[_];b&&b.ngInherit&&b(s),b===G_&&(l=!1)}}o=Object.getPrototypeOf(o)}!function oE(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=ms(h.hostAttrs,l=ms(l,h.hostAttrs))}}(c)}function q_(s){return s===yt?{}:s===it?[]:s}function TS(s,o){const l=s.viewQuery;s.viewQuery=l?(c,h)=>{o(c,h),l(c,h)}:o}function SS(s,o){const l=s.contentQueries;s.contentQueries=l?(c,h,p)=>{o(c,h,p),l(c,h,p)}:o}function z_(s,o){const l=s.hostBindings;s.hostBindings=l?(c,h)=>{o(c,h),l(c,h)}:o}let sm=null;function Su(){if(!sm){const s=At.Symbol;if(s&&s.iterator)sm=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(sm=c)}}}return sm}function If(s){return!!Df(s)&&(Array.isArray(s)||!(s instanceof Map)&&Su()in s)}function Df(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ns(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function lm(s,o,l,c){const h=Me();return ns(h,Li(),o)&&(vn(),Za(Rn(),h,s,o,l,c)),lm}function $c(s,o,l,c){return ns(s,Li(),l)?o+Pe(l)+c:an}function Sf(s,o,l,c,h,p,_,b){const D=Me(),x=vn(),P=s+22,$=x.firstCreatePass?function Tf(s,o,l,c,h,p,_,b,D){const x=o.consts,P=Ll(o,s,4,_||null,Pi(x,b));Zg(o,l,P,Pi(x,D)),ia(o,P);const $=P.tViews=Lc(2,P,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,P),$.queries=o.queries.embeddedTView(P)),P}(P,x,D,o,l,c,h,p,_):x.data[P];Fi($,!1);const ne=D[11].createComment("");dg(x,D,ne,$),Mi(ne,D),no(D,D[P]=tE(ne,D,ne,$)),ul($)&&Hg(x,D,$),null!=_&&Gg(D,$,b)}function cm(s){return function hs(s,o){return s[o]}(function na(){return Jt.lFrame.contextLView}(),22+s)}function dm(s,o,l){const c=Me();return ns(c,Li(),o)&&to(vn(),Rn(),c,s,o,c[11],l,!1),dm}function hm(s,o,l,c,h){const _=h?"class":"style";B_(s,l,o.inputs[_],_,c)}function xf(s,o,l,c){const h=Me(),p=vn(),_=22+s,b=h[11],D=h[_]=Dc(b,o,function lu(){return Jt.lFrame.currentNamespace}()),x=p.firstCreatePass?function pE(s,o,l,c,h,p,_){const b=o.consts,x=Ll(o,s,2,h,Pi(b,p));return Zg(o,l,x,Pi(b,_)),null!==x.attrs&&Ef(x,x.attrs,!1),null!==x.mergedAttrs&&Ef(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(_,p,h,0,o,l,c):p.data[_];return Fi(x,!0),r_(b,D,x),32!=(32&x.flags)&&dg(p,h,D,x),0===function Io(){return Jt.lFrame.elementDepthCount}()&&Mi(D,h),function nu(){Jt.lFrame.elementDepthCount++}(),ul(x)&&(Hg(p,h,x),Du(p,x,h)),null!==c&&Gg(h,x),xf}function Mf(){let s=vr();Ks()?function Pa(){Jt.lFrame.isParent=!1}():(s=s.parent,Fi(s,!1));const o=s;!function Do(){Jt.lFrame.elementDepthCount--}();const l=vn();return l.firstCreatePass&&(ia(l,s),cs(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ve(s){return 0!=(8&s.flags)}(o)&&hm(l,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function gt(s){return 0!=(16&s.flags)}(o)&&hm(l,o,Me(),o.stylesWithoutHost,!1),Mf}function oo(s,o,l,c){return xf(s,o,l,c),Mf(),oo}function Q_(){return Me()}function J_(s){return!!s&&"function"==typeof s.then}function yE(s){return!!s&&"function"==typeof s.subscribe}const _E=yE;function X_(s,o,l,c){const h=Me(),p=vn(),_=vr();return function wE(s,o,l,c,h,p,_){const b=ul(c),x=s.firstCreatePass&&nE(s),P=o[8],$=Xd(o);let ne=!0;if(3&c.type||_){const tt=Dr(c,o),at=_?_(tt):tt,xt=$.length,Wt=_?en=>_(Kn(en[c.index])):c.index;let qe=null;if(!_&&b&&(qe=function NS(s,o,l,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const _=h[p];if(_===l&&h[p+1]===c){const b=o[7],D=h[p+2];return b.length>D?b[D]:null}"string"==typeof _&&(p+=2)}return null}(s,o,h,c.index)),null!==qe)(qe.__ngLastListenerFn__||qe).__ngNextListenerFn__=p,qe.__ngLastListenerFn__=p,ne=!1;else{p=EE(c,o,P,p,!1);const en=l.listen(at,h,p);$.push(p,en),x&&x.push(h,Wt,xt,xt+1)}}else p=EE(c,o,P,p,!1);const fe=c.outputs;let Re;if(ne&&null!==fe&&(Re=fe[h])){const tt=Re.length;if(tt)for(let at=0;at<tt;at+=2){const wr=o[Re[at]][Re[at+1]].subscribe(p),ni=$.length;$.push(p,wr),x&&x.push(h,c.index,ni,-(ni+1))}}}(p,h,h[11],_,s,o,c),X_}function bE(s,o,l,c){try{return!1!==l(c)}catch(h){return V_(s,h),!1}}function EE(s,o,l,c,h){return function p(_){if(_===Function)return c;Vc(s.componentOffset>-1?dr(s.index,o):o);let D=bE(o,0,c,_),x=p.__ngNextListenerFn__;for(;x;)D=bE(o,0,x,_)&&D,x=x.__ngNextListenerFn__;return h&&!1===D&&(_.preventDefault(),_.returnValue=!1),D}}function CE(s=1){return function wd(s){return(Jt.lFrame.contextLView=function au(s,o){for(;s>0;)o=o[15],s--;return o}(s,Jt.lFrame.contextLView))[8]}(s)}function ev(s,o,l){return tv(s,"",o,"",l),ev}function tv(s,o,l,c,h){const p=Me(),_=$c(p,o,l,c);return _!==an&&to(vn(),Rn(),p,s,_,p[11],h,!1),tv}function pm(s,o){return s<<17|o<<2}function Ru(s){return s>>17&32767}function gm(s){return 2|s}function Gc(s){return(131068&s)>>2}function iv(s,o){return-131069&s|o<<2}function mm(s){return 1|s}function AE(s,o,l,c,h){const p=s[l+1],_=null===o;let b=c?Ru(p):Gc(p),D=!1;for(;0!==b&&(!1===D||_);){const P=s[b+1];jS(s[b],o)&&(D=!0,s[b+1]=c?mm(P):gm(P)),b=c?Ru(P):Gc(P)}D&&(s[l+1]=c?gm(p):mm(p))}function jS(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Zr(s,o)>=0}function zc(s,o){return function Ri(s,o,l,c){const h=Me(),p=vn(),_=function fs(s){const o=Jt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);p.firstUpdatePass&&function PE(s,o,l,c){const h=s.data;if(null===h[l+1]){const p=h[ei()],_=function NE(s,o){return o>=s.expandoStartIndex}(s,l);(function av(s,o){return 0!=(s.flags&(o?8:16))})(p,c)&&null===o&&!_&&(o=!1),o=function OE(s,o,l,c){const h=function Ns(s){const o=Jt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(l=$l(l=Ja(null,s,o,l,c),o.attrs,c),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(l=Ja(h,s,o,l,c),null===p){let D=function YS(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==Gc(c))return s[Ru(c)]}(s,o,c);void 0!==D&&Array.isArray(D)&&(D=Ja(null,s,o,D[1],c),D=$l(D,o.attrs,c),function ym(s,o,l,c){s[Ru(l?o.classBindings:o.styleBindings)]=c}(s,o,c,D))}else p=function ha(s,o,l){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=$l(c,s[p].hostAttrs,l);return $l(c,o.attrs,l)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),l}(h,p,o,c),function VS(s,o,l,c,h,p){let _=p?o.classBindings:o.styleBindings,b=Ru(_),D=Gc(_);s[c]=l;let P,x=!1;if(Array.isArray(l)?(P=l[1],(null===P||Zr(l,P)>0)&&(x=!0)):P=l,h)if(0!==D){const ne=Ru(s[b+1]);s[c+1]=pm(ne,b),0!==ne&&(s[ne+1]=iv(s[ne+1],c)),s[b+1]=function US(s,o){return 131071&s|o<<17}(s[b+1],c)}else s[c+1]=pm(b,0),0!==b&&(s[b+1]=iv(s[b+1],c)),b=c;else s[c+1]=pm(D,0),0===b?b=c:s[D+1]=iv(s[D+1],c),D=c;x&&(s[c+1]=gm(s[c+1])),AE(s,P,c,!0),AE(s,P,c,!1),function BS(s,o,l,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Zr(p,o)>=0&&(l[c+1]=mm(l[c+1]))}(o,P,s,c,p),_=pm(b,D),p?o.classBindings=_:o.styleBindings=_}(h,p,o,l,_,c)}}(p,s,_,c),o!==an&&ns(h,_,o)&&function Xa(s,o,l,c,h,p,_,b){if(!(3&o.type))return;const D=s.data,x=D[b+1],P=function x1(s){return 1==(1&s)}(x)?vm(D,o,l,h,Gc(x),_):void 0;Rf(P)||(Rf(p)||function LS(s){return 2==(2&s)}(x)&&(p=vm(D,null,l,h,b,_)),function hb(s,o,l,c,h){if(o)h?s.addClass(l,c):s.removeClass(l,c);else{let p=-1===c.indexOf("-")?void 0:Xi.DashCase;null==h?s.removeStyle(l,c,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=Xi.Important),s.setStyle(l,c,h,p))}}(c,_,Ms(ei(),l),h,p))}(p,p.data[ei()],h,h[11],s,h[_+1]=function ov(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=we(Vo(s)))),s}(o,l),c,_)}(s,o,null,!0),zc}function Ja(s,o,l,c,h){let p=null;const _=l.directiveEnd;let b=l.directiveStylingLast;for(-1===b?b=l.directiveStart:b++;b<_&&(p=o[b],c=$l(c,p.hostAttrs,h),p!==s);)b++;return null!==s&&(l.directiveStylingLast=b),c}function $l(s,o,l){const c=l?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?h=_:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ai(s,_,!!l||o[++p]))}return void 0===s?null:s}function vm(s,o,l,c,h,p){const _=null===o;let b;for(;h>0;){const D=s[h],x=Array.isArray(D),P=x?D[1]:D,$=null===P;let ne=l[h+1];ne===an&&(ne=$?it:void 0);let fe=$?fr(ne,c):P===c?ne:void 0;if(x&&!Rf(fe)&&(fe=fr(D,c)),Rf(fe)&&(b=fe,_))return b;const Re=s[h+1];h=_?Ru(Re):Gc(Re)}if(null!==o){let D=p?o.residualClasses:o.residualStyles;null!=D&&(b=fr(D,c))}return b}function Rf(s){return void 0!==s}function kf(s,o=""){const l=Me(),c=vn(),h=s+22,p=c.firstCreatePass?Ll(c,h,1,o,null):c.data[h],_=l[h]=function mu(s,o){return s.createText(o)}(l[11],o);dg(c,l,_,p),Fi(p,!1)}function lv(s){return uv("",s,""),lv}function uv(s,o,l){const c=Me(),h=$c(c,s,o,l);return h!==an&&function Bo(s,o,l){const c=Ms(o,s);!function Qh(s,o,l){s.setValue(o,l)}(s[11],c,l)}(c,ei(),h),uv}const Wc=void 0;var uA=["en",[["a","p"],["AM","PM"],Wc],[["AM","PM"],Wc,Wc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wc,"{1} 'at' {0}",Wc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function lA(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let rh={};function Tm(s){const o=function cA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=qE(o);if(l)return l;const c=o.split("-")[0];if(l=qE(c),l)return l;if("en"===c)return uA;throw new Ie(701,!1)}function pv(s){return Tm(s)[zt.PluralCase]}function qE(s){return s in rh||(rh[s]=At.ng&&At.ng.common&&At.ng.common.locales&&At.ng.common.locales[s]),rh[s]}var zt=(()=>((zt=zt||{})[zt.LocaleId=0]="LocaleId",zt[zt.DayPeriodsFormat=1]="DayPeriodsFormat",zt[zt.DayPeriodsStandalone=2]="DayPeriodsStandalone",zt[zt.DaysFormat=3]="DaysFormat",zt[zt.DaysStandalone=4]="DaysStandalone",zt[zt.MonthsFormat=5]="MonthsFormat",zt[zt.MonthsStandalone=6]="MonthsStandalone",zt[zt.Eras=7]="Eras",zt[zt.FirstDayOfWeek=8]="FirstDayOfWeek",zt[zt.WeekendRange=9]="WeekendRange",zt[zt.DateFormat=10]="DateFormat",zt[zt.TimeFormat=11]="TimeFormat",zt[zt.DateTimeFormat=12]="DateTimeFormat",zt[zt.NumberSymbols=13]="NumberSymbols",zt[zt.NumberFormats=14]="NumberFormats",zt[zt.CurrencyCode=15]="CurrencyCode",zt[zt.CurrencySymbol=16]="CurrencySymbol",zt[zt.CurrencyName=17]="CurrencyName",zt[zt.Currencies=18]="Currencies",zt[zt.Directionality=19]="Directionality",zt[zt.PluralCase=20]="PluralCase",zt[zt.ExtraData=21]="ExtraData",zt))();const Zc="en-US";let Sm=Zc;function Lv(s,o,l,c,h){if(s=ie(s),Array.isArray(s))for(let p=0;p<s.length;p++)Lv(s[p],o,l,c,h);else{const p=vn(),_=Me();let b=_u(s)?s:ie(s.provide),D=Ab(s);const x=vr(),P=1048575&x.providerIndexes,$=x.directiveStart,ne=x.providerIndexes>>20;if(_u(s)||!s.multi){const fe=new Ps(D,h,Cu),Re=Uv(b,o,h?P:P+ne,$);-1===Re?(Cd(ko(x,_),p,b),Pm(p,s,o.length),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(fe),_.push(fe)):(l[Re]=fe,_[Re]=fe)}else{const fe=Uv(b,o,P+ne,$),Re=Uv(b,o,P,P+ne),at=Re>=0&&l[Re];if(h&&!at||!h&&!(fe>=0&&l[fe])){Cd(ko(x,_),p,b);const xt=function EA(s,o,l,c,h){const p=new Ps(s,l,Cu);return p.multi=[],p.index=o,p.componentProviders=0,yC(p,h,c&&!l),p}(h?vC:_C,l.length,h,c,D);!h&&at&&(l[Re].providerFactory=xt),Pm(p,s,o.length,0),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(xt),_.push(xt)}else Pm(p,s,fe>-1?fe:Re,yC(l[h?Re:fe],D,!h&&c));!h&&c&&at&&l[Re].componentProviders++}}}function Pm(s,o,l,c){const h=_u(o),p=function Sg(s){return!!s.useClass}(o);if(h||p){const D=(p?ie(o.useClass):o).prototype.ngOnDestroy;if(D){const x=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const P=x.indexOf(l);-1===P?x.push(l,[c,D]):x[P+1].push(c,D)}else x.push(l,D)}}}function yC(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Uv(s,o,l,c){for(let h=l;h<c;h++)if(o[h]===s)return h;return-1}function _C(s,o,l,c){return Om(this.multi,[])}function vC(s,o,l,c){const h=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,b=_s(l,l[1],this.providerFactory.index,c);p=b.slice(0,_),Om(h,p);for(let D=_;D<b.length;D++)p.push(b[D])}else p=[],Om(h,p);return p}function Om(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function wC(s,o=[]){return l=>{l.providersResolver=(c,h)=>function jf(s,o,l){const c=vn();if(c.firstCreatePass){const h=Ir(s);Lv(l,c.data,c.blueprint,h,!0),Lv(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class ih{}class Vv{}function CA(s,o){return new Bv(s,o??null)}class Bv extends ih{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new j_(this);const c=Jr(o);this._bootstrapComponents=Pl(c.bootstrap),this._r3Injector=Bb(o,l,[{provide:ih,useValue:this},{provide:Nl,useValue:this.componentFactoryResolver}],we(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class jv extends Vv{constructor(o){super(),this.moduleType=o}create(o){return new Bv(this.moduleType,o)}}class IA extends ih{constructor(o,l,c){super(),this.componentFactoryResolver=new j_(this),this.instance=null;const h=new Sb([...o,{provide:ih,useValue:this},{provide:Nl,useValue:this.componentFactoryResolver}],l||Gd(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function $v(s,o,l=null){return new IA(s,o,l).injector}let bC=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const c=Ib(0,l.type),h=c.length>0?$v([c],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,h)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Dt({token:s,providedIn:"environment",factory:()=>new s(Xe(Mc))}),s})();function EC(s){s.getStandaloneInjector=o=>o.get(bC).getOrCreateStandaloneInjector(s)}function MC(s,o,l){const c=function Pr(){const s=Jt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}()+s,h=Me();return h[c]===an?function Ka(s,o,l){return s[o]=l}(h,c,l?o.call(l):o()):function jc(s,o){return s[o]}(h,c)}function Um(s){return o=>{setTimeout(s,void 0,o)}}const pa=class OC extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){let h=o,p=l||(()=>null),_=c;if(o&&"object"==typeof o){const D=o;h=D.next?.bind(D),p=D.error?.bind(D),_=D.complete?.bind(D)}this.__isAsync&&(p=Um(p),h&&(h=Um(h)),_&&(_=Um(_)));const b=super.subscribe({next:h,error:p,complete:_});return o instanceof G.w0&&o.add(b),b}};function nN(){return this._results[Su()]()}class yi{get changes(){return this._changes||(this._changes=new pa)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Su(),c=yi.prototype;c[l]||(c[l]=nN)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const h=function hi(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function vc(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(l&&(h=l(h),p=l(p)),p!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Go=(()=>{class s{}return s.__NG_ELEMENT_ID__=FC,s})();const Vm=Go,OA=class extends Vm{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o,l){const c=this._declarationTContainer.tViews,h=jg(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,l||null);h[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(h[19]=_.createEmbeddedView(c)),vf(c,h,o),new eh(h)}};function FC(){return qf(vr(),Me())}function qf(s,o){return 4&s.type?new OA(o,s,Wd(s,o)):null}let Bm=(()=>{class s{}return s.__NG_ELEMENT_ID__=LC,s})();function LC(){return Nu(vr(),Me())}const FA=Bm,Kv=class extends FA{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return Wd(this._hostTNode,this._hostLView)}get injector(){return new No(this._hostTNode,this._hostLView)}get parentInjector(){const o=vl(this._hostTNode,this._hostLView);if(dc(o)){const l=sa(o,this._hostLView),c=_l(o);return new No(l[1].data[c+8],l)}return new No(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=Yv(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){let h,p;"number"==typeof c?h=c:null!=c&&(h=c.index,p=c.injector);const _=o.createEmbeddedView(l||{},p);return this.insert(_,h),_}createComponent(o,l,c,h,p){const _=o&&!function fu(s){return"function"==typeof s}(o);let b;if(_)b=l;else{const $=l||{};b=$.index,c=$.injector,h=$.projectableNodes,p=$.environmentInjector||$.ngModuleRef}const D=_?o:new th(In(o)),x=c||this.parentInjector;if(!p&&null==D.ngModule){const ne=(_?x:this.parentInjector).get(Mc,null);ne&&(p=ne)}const P=D.create(x,h,void 0,p);return this.insert(P.hostView,b),P}insert(o,l){const c=o._lView,h=c[1];if(function Xu(s){return ci(s[3])}(c)){const P=this.indexOf(o);if(-1!==P)this.detach(P);else{const $=c[3],ne=new Kv($,$[6],$[3]);ne.detach(ne.indexOf(o))}}const p=this._adjustIndex(l),_=this._lContainer;!function Qy(s,o,l,c){const h=10+c,p=l.length;c>0&&(l[h-1][4]=o),c<p-10?(o[4]=l[h],wc(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const _=o[17];null!==_&&l!==_&&function ef(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(_,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=64}(h,c,_,p);const b=hg(p,_),D=c[11],x=nf(D,_[7]);return null!==x&&function Xh(s,o,l,c,h,p){c[0]=h,c[6]=o,Ld(s,c,l,1,h,p)}(h,_[6],D,c,x,b),o.attachToViewContainerRef(),wc(oh(_),p,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=Yv(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=Jy(this._lContainer,l);c&&(Cl(oh(this._lContainer),l),Xy(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=Jy(this._lContainer,l);return c&&null!=Cl(oh(this._lContainer),l)?new eh(c):null}_adjustIndex(o,l=0){return o??this.length+l}};function Yv(s){return s[8]}function oh(s){return s[8]||(s[8]=[])}function Nu(s,o){let l;const c=o[s.index];if(ci(c))l=c;else{let h;if(8&s.type)h=Kn(c);else{const p=o[11];h=p.createComment("");const _=Dr(s,o);Ml(p,nf(p,_),h,function IT(s,o){return s.nextSibling(o)}(p,_),!1)}o[s.index]=l=tE(c,o,h,s),no(o,l)}return new Kv(l,s,o)}class En{constructor(o){this.queryList=o,this.matches=null}clone(){return new En(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qc{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let p=0;p<c;p++){const _=l.getByIndex(p);h.push(this.queries[_.indexInDeclarationView].clone())}return new Qc(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==$C(o,l).matches&&this.queries[l].setDirty()}}class UC{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class ql{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==l?l.push(p):l=[p])}return null!==l?new ql(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Qv{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Qv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,l,zf(l,p)),this.matchTNodeWithReadOption(o,l,wl(l,o,p,!1,!1))}else c===Go?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,wl(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===wu||h===Bm||h===Go&&4&l.type)this.addMatch(l.index,-2);else{const p=wl(l,o,h,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function zf(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function LA(s,o,l,c){return-1===l?function Jv(s,o){return 11&s.type?Wd(s,o):4&s.type?qf(s,o):null}(o,s):-2===l?function jm(s,o,l){return l===wu?Wd(o,s):l===Go?qf(o,s):l===Bm?Nu(o,s):void 0}(s,o,c):_s(s,s[1],l,o)}function ah(s,o,l,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,_=l.matches,b=[];for(let D=0;D<_.length;D+=2){const x=_[D];b.push(x<0?null:LA(o,p[x],_[D+1],l.metadata.read))}h.matches=b}return h.matches}function $m(s,o,l,c){const h=s.queries.getByIndex(l),p=h.matches;if(null!==p){const _=ah(s,o,h,l);for(let b=0;b<p.length;b+=2){const D=p[b];if(D>0)c.push(_[b/2]);else{const x=p[b+1],P=o[-D];for(let $=10;$<P.length;$++){const ne=P[$];ne[17]===ne[3]&&$m(ne[1],ne,x,c)}if(null!==P[9]){const $=P[9];for(let ne=0;ne<$.length;ne++){const fe=$[ne];$m(fe[1],fe,x,c)}}}}}return c}function Wf(s){const o=Me(),l=vn(),c=sc();yl(c+1);const h=$C(l,c);if(s.dirty&&function Na(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?$m(l,o,c,[]):ah(l,o,h,c);s.reset(p,mf),s.notifyOnChanges()}return!0}return!1}function VC(s,o,l){const c=vn();c.firstCreatePass&&(jC(c,new UC(s,o,l),-1),2==(2&o)&&(c.staticViewQueries=!0)),Xv(c,Me(),o)}function Hm(s,o,l,c){const h=vn();if(h.firstCreatePass){const p=vr();jC(h,new UC(o,l,c),p.index),function UA(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}Xv(h,Me(),l)}function Zf(){return function BC(s,o){return s[19].queries[o].queryList}(Me(),sc())}function Xv(s,o,l){const c=new yi(4==(4&l));zg(s,o,c,c.destroy),null===o[19]&&(o[19]=new Qc),o[19].queries.push(new En(c))}function jC(s,o,l){null===s.queries&&(s.queries=new ql),s.queries.track(new Qv(o,l))}function $C(s,o){return s.queries.getByIndex(o)}function zl(...s){}const sw=new bn("Application Initializer");let qm=(()=>{class s{constructor(l){this.appInits=l,this.resolve=zl,this.reject=zl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(J_(p))l.push(p);else if(_E(p)){const _=new Promise((b,D)=>{p.subscribe({complete:b,error:D})});l.push(_)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Xe(sw,8))},s.\u0275prov=Dt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Jc=new bn("AppId",{providedIn:"root",factory:function ow(){return`${uh()}${uh()}${uh()}`}});function uh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aw=new bn("Platform Initializer"),lw=new bn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),uw=new bn("appBootstrapListener");let JA=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Dt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const zm=new bn("LocaleId",{providedIn:"root",factory:()=>lt(zm,be.Optional|be.SkipSelf)||function rp(){return typeof $localize<"u"&&$localize.locale||Zc}()}),XA=new bn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class dI{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let hI=(()=>{class s{compileModuleSync(l){return new jv(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),p=Pl(Jr(l).declarations).reduce((_,b)=>{const D=In(b);return D&&_.push(new th(D)),_},[]);return new dI(c,p)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Dt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const pI=(()=>Promise.resolve(0))();function gI(s){typeof Zone>"u"?pI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ma{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pa(!1),this.onMicrotaskEmpty=new pa(!1),this.onStable=new pa(!1),this.onError=new pa(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function cN(){let s=At.requestAnimationFrame,o=At.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function ix(s){const o=()=>{!function rx(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(At,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,sp(s),s.isCheckStableRunning=!0,dw(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),sp(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,p,_,b)=>{try{return lo(s),l.invokeTask(h,p,_,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),hw(s)}},onInvoke:(l,c,h,p,_,b,D)=>{try{return lo(s),l.invoke(h,p,_,b,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),hw(s)}},onHasTask:(l,c,h,p)=>{l.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,sp(s),dw(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,c,h,p)=>(l.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ma.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(ma.isInAngularZone())throw new Ie(909,!1)}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,h){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+h,o,cw,zl,zl);try{return p.runTask(_,l,c)}finally{p.cancelTask(_)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const cw={};function dw(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function sp(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function lo(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function hw(s){s._nesting--,dw(s)}class op{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pa,this.onMicrotaskEmpty=new pa,this.onStable=new pa,this.onError=new pa}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,h){return o.apply(l,c)}}const mI=new bn(""),yI=new bn("");let fw,_I=(()=>{class s{constructor(l,c,h){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,fw||(function sx(s){fw=s}(h),h.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ma.assertNotInAngularZone(),gI(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gI(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(Xe(ma),Xe(ap),Xe(yI))},s.\u0275prov=Dt({token:s,factory:s.\u0275fac}),s})(),ap=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return fw?.findTestabilityInTree(this,l,c)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Dt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),uo=null;const ch=new bn("AllowMultipleToken"),pw=new bn("PlatformDestroyListeners");class ax{constructor(o,l){this.name=o,this.token=l}}function cx(s,o,l=[]){const c=`Platform: ${o}`,h=new bn(c);return(p=[])=>{let _=Vu();if(!_||_.injector.get(ch,!1)){const b=[...l,...p,{provide:h,useValue:!0}];s?s(b):function lx(s){if(uo&&!uo.get(ch,!1))throw new Ie(400,!1);uo=s;const o=s.get(wI);(function vI(s){const o=s.get(aw,null);o&&o.forEach(l=>l())})(s)}(function Ym(s=[],o){return Oc.create({name:o,providers:[{provide:f_,useValue:"platform"},{provide:pw,useValue:new Set([()=>uo=null])},...s]})}(b,c))}return function dx(s){const o=Vu();if(!o)throw new Ie(401,!1);return o}()}}function Vu(){return uo?.get(wI)??null}let wI=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const h=function EI(s,o){let l;return l="noop"===s?new op:("zone.js"===s?void 0:s)||new ma(o),l}(c?.ngZone,function bI(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:ma,useValue:h}];return h.run(()=>{const _=Oc.create({providers:p,parent:this.injector,name:l.moduleType.name}),b=l.create(_),D=b.injector.get(Nc,null);if(!D)throw new Ie(402,!1);return h.runOutsideAngular(()=>{const x=h.onError.subscribe({next:P=>{D.handleError(P)}});b.onDestroy(()=>{Jm(this._modules,b),x.unsubscribe()})}),function CI(s,o,l){try{const c=l();return J_(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(D,h,()=>{const x=b.injector.get(qm);return x.runInitializers(),x.donePromise.then(()=>(function ZE(s){jt(s,"Expected localeId to be defined"),"string"==typeof s&&(Sm=s.toLowerCase().replace(/_/g,"-"))}(b.injector.get(zm,Zc)||Zc),this._moduleDoBootstrap(b),b))})})}bootstrapModule(l,c=[]){const h=II({},c);return function lp(s,o,l){const c=new jv(l);return Promise.resolve(c)}(0,0,l).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(l){const c=l.injector.get(Qm);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Ie(-403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(pw,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Xe(Oc))},s.\u0275prov=Dt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function II(s,o){return Array.isArray(o)?o.reduce(II,s):{...s,...o}}let Qm=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(l,c,h){this._zone=l,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new F.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),_=new F.y(b=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{ma.assertNotInAngularZone(),gI(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{ma.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{D.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ce.T)(p,_.pipe((0,pe.B)()))}bootstrap(l,c){const h=l instanceof vu;if(!this._injector.get(qm).done)throw!h&&sr(l),new Ie(405,false);let _;_=h?l:this._injector.get(Nl).resolveComponentFactory(l),this.componentTypes.push(_.componentType);const b=function ox(s){return s.isBoundToModule}(_)?void 0:this._injector.get(ih),x=_.create(Oc.NULL,[],c||_.selector,b),P=x.location.nativeElement,$=x.injector.get(mI,null);return $?.registerApplication(P),x.onDestroy(()=>{this.detachView(x.hostView),Jm(this.components,x),$?.unregisterApplication(P)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;Jm(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const c=this._injector.get(uw,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Jm(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Ie(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(Xe(ma),Xe(Mc),Xe(Nc))},s.\u0275prov=Dt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Jm(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}function TI(){return!1}let ey=(()=>{class s{}return s.__NG_ELEMENT_ID__=px,s})();function px(s){return function gx(s,o,l){if(Yo(s)&&!l){const c=dr(s.index,o);return new eh(c,c)}return 47&s.type?new eh(o[16],o):null}(vr(),Me(),16==(16&s))}class MI{constructor(){}supports(o){return If(o)}create(o){return new vx(o)}}const RI=(s,o)=>o;class vx{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||RI}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,h=0,p=null;for(;l||c;){const _=!c||l&&l.currentIndex<bw(c,h,p)?l:c,b=bw(_,h,p),D=_.currentIndex;if(_===c)h--,c=c._nextRemoved;else if(l=l._next,null==_.previousIndex)h++;else{p||(p=[]);const x=b-h,P=D-h;if(x!=P){for(let ne=0;ne<x;ne++){const fe=ne<p.length?p[ne]:p[ne]=0,Re=fe+ne;P<=Re&&Re<x&&(p[ne]=fe+1)}p[_.previousIndex]=P-x}}b!==D&&o(_,b,D)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!If(o))throw new Ie(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,_,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)p=o[b],_=this._trackByFn(b,p),null!==l&&Object.is(l.trackById,_)?(c&&(l=this._verifyReinsertion(l,p,_,b)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,_,b),c=!0),l=l._next}else h=0,function W_(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Su()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,b=>{_=this._trackByFn(h,b),null!==l&&Object.is(l.trackById,_)?(c&&(l=this._verifyReinsertion(l,b,_,h)),Object.is(l.item,b)||this._addIdentityChange(l,b)):(l=this._mismatch(l,b,_,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,p,h)):o=this._addAfter(new kI(l,c),p,h),o}_verifyReinsertion(o,l,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new wx),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wx),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class kI{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class NI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class wx{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new NI,this.map.set(l,c)),c.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bw(s,o,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+o+h}class Ew{constructor(){}supports(o){return o instanceof Map||Df(o)}create(){return new bx}}class bx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Df(o)))throw new Ie(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const p=h._prev,_=h._next;return p&&(p._next=_),_&&(_._prev=p),h._next=null,h._prev=null,h}const c=new Ex(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class Ex{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function PI(){return new Cw([new MI])}let Cw=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||PI()),deps:[[s,new A,new Ha]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new Ie(901,!1)}}return s.\u0275prov=Dt({token:s,providedIn:"root",factory:PI}),s})();function OI(){return new iy([new Ew])}let iy=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||OI()),deps:[[s,new A,new Ha]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(c)return c;throw new Ie(901,!1)}}return s.\u0275prov=Dt({token:s,providedIn:"root",factory:OI}),s})();const Dw=cx(null,"core",[]);let Dx=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Xe(Qm))},s.\u0275mod=vo({type:s}),s.\u0275inj=Mr({}),s})();function FI(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},1321:()=>{"use strict";class jt extends Error{constructor(se){super(`No translation found for ${gr(se)}.`),this.parsedMessage=se,this.type="MissingTranslationError"}}const Rr=function(oe,...se){if(Rr.translate){const Ae=Rr.translate(oe,se);oe=Ae[0],se=Ae[1]}let ge=Nn(oe[0],oe.raw[0]);for(let Ae=1;Ae<oe.length;Ae++)ge+=se[Ae-1]+Nn(oe[Ae],oe.raw[Ae]);return ge};function Nn(oe,se){return":"===se.charAt(0)?oe.substring(function vt(oe,se){for(let ge=1,Ae=1;ge<oe.length;ge++,Ae++)if("\\"===se[Ae])Ae++;else if(":"===oe[ge])return ge;throw new Error(`Unterminated $localize metadata block in "${se}".`)}(oe,se)+1):oe}(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)().$localize=Rr},3942:(_t,Ne,j)=>{"use strict";j.d(Ne,{Z:()=>nt});var d=j(2090),G=j(4859),F=j(9681),ce=j(1877);class pe{constructor(Ie,Fe){this._delegate=Ie,this.firebase=Fe,(0,F._addComponent)(Ie,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=Ie.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this._delegate.automaticDataCollectionEnabled=Ie}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ie=>{this._delegate.checkDestroyed(),Ie()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(Ie,Fe=F._DEFAULT_ENTRY_NAME){var Pe;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(Ie);return!$e.isInitialized()&&"EXPLICIT"===(null===(Pe=$e.getComponent())||void 0===Pe?void 0:Pe.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:Fe})}_removeServiceInstance(Ie,Fe=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ie).clearInstance(Fe)}_addComponent(Ie){(0,F._addComponent)(this._delegate,Ie)}_addOrOverwriteComponent(Ie){(0,F._addOrOverwriteComponent)(this._delegate,Ie)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const xe=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Y=function Te(){const ft=function we(ft){const Ie={},Fe={__esModule:!0,initializeApp:function Ge(B,ye={}){const Ce=F.initializeApp(B,ye);if((0,d.r3)(Ie,Ce.name))return Ie[Ce.name];const re=new ft(Ce,Fe);return Ie[Ce.name]=re,re},app:$e,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ue(B){const ye=B.name,Ce=ye.replace("-compat","");if(F._registerComponent(B)&&"PUBLIC"===B.type){const re=(ee=$e())=>{if("function"!=typeof ee[Ce])throw xe.create("invalid-app-argument",{appName:ye});return ee[Ce]()};void 0!==B.serviceProps&&(0,d.ZB)(re,B.serviceProps),Fe[Ce]=re,ft.prototype[Ce]=function(...ee){return this._getService.bind(this,ye).apply(this,B.multipleInstances?ee:[])}}return"PUBLIC"===B.type?Fe[Ce]:null},removeApp:function Pe(B){delete Ie[B]},useAsService:function Je(B,ye){return"serverAuth"===ye?null:ye},modularAPIs:F}};function $e(B){if(!(0,d.r3)(Ie,B=B||F._DEFAULT_ENTRY_NAME))throw xe.create("no-app",{appName:B});return Ie[B]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function Le(){return Object.keys(Ie).map(B=>Ie[B])}}),$e.App=ft,Fe}(pe);return ft.INTERNAL=Object.assign(Object.assign({},ft.INTERNAL),{createFirebaseNamespace:Te,extendNamespace:function Ie(Fe){(0,d.ZB)(ft,Fe)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ft}(),Q=new ce.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){Q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ft=self.firebase.SDK_VERSION;ft&&ft.indexOf("LITE")>=0&&Q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const nt=Y;!function je(ft){(0,F.registerVersion)("@firebase/app-compat","0.2.1",ft)}()},9681:(_t,Ne,j)=>{"use strict";j.r(Ne),j.d(Ne,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Rr,_DEFAULT_ENTRY_NAME:()=>Sn,_addComponent:()=>tn,_addOrOverwriteComponent:()=>Hn,_apps:()=>jt,_clearComponents:()=>Mr,_components:()=>Nt,_getProvider:()=>Dt,_registerComponent:()=>Xt,_removeServiceInstance:()=>gr,deleteApp:()=>se,getApp:()=>Nn,getApps:()=>oe,initializeApp:()=>ai,onLog:()=>be,registerVersion:()=>Ae,setLogLevel:()=>rt});var d=j(5861),G=j(4859),F=j(1877),ce=j(2090),pe=j(8766);class ve{constructor(Oe){this.container=Oe}getPlatformInfoString(){return this.container.getProviders().map(lt=>{if(function xe(Xe){return"VERSION"===Xe.getComponent()?.type}(lt)){const Lt=lt.getImmediate();return`${Lt.library}/${Lt.version}`}return null}).filter(lt=>lt).join(" ")}}const we="@firebase/app",Y=new F.Yd("@firebase/app"),Sn="[DEFAULT]",vt={[we]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},jt=new Map,Nt=new Map;function tn(Xe,Oe){try{Xe.container.addComponent(Oe)}catch(lt){Y.debug(`Component ${Oe.name} failed to register with FirebaseApp ${Xe.name}`,lt)}}function Hn(Xe,Oe){Xe.container.addOrOverwriteComponent(Oe)}function Xt(Xe){const Oe=Xe.name;if(Nt.has(Oe))return Y.debug(`There were multiple attempts to register component ${Oe}.`),!1;Nt.set(Oe,Xe);for(const lt of jt.values())tn(lt,Xe);return!0}function Dt(Xe,Oe){const lt=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return lt&&lt.triggerHeartbeat(),Xe.container.getProvider(Oe)}function gr(Xe,Oe,lt=Sn){Dt(Xe,Oe).clearInstance(lt)}function Mr(){Nt.clear()}const Vn=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Hr{constructor(Oe,lt,Lt){this._isDeleted=!1,this._options=Object.assign({},Oe),this._config=Object.assign({},lt),this._name=lt.name,this._automaticDataCollectionEnabled=lt.automaticDataCollectionEnabled,this._container=Lt,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Oe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Oe){this._isDeleted=Oe}checkDestroyed(){if(this.isDeleted)throw Vn.create("app-deleted",{appName:this._name})}}const Rr="9.16.0";function ai(Xe,Oe={}){let lt=Xe;"object"!=typeof Oe&&(Oe={name:Oe});const Lt=Object.assign({name:Sn,automaticDataCollectionEnabled:!1},Oe),Pt=Lt.name;if("string"!=typeof Pt||!Pt)throw Vn.create("bad-app-name",{appName:String(Pt)});if(lt||(lt=(0,ce.aH)()),!lt)throw Vn.create("no-options");const pn=jt.get(Pt);if(pn){if((0,ce.vZ)(lt,pn.options)&&(0,ce.vZ)(Lt,pn.config))return pn;throw Vn.create("duplicate-app",{appName:Pt})}const J=new G.H0(Pt);for(const te of Nt.values())J.addComponent(te);const Z=new Hr(lt,Lt,J);return jt.set(Pt,Z),Z}function Nn(Xe=Sn){const Oe=jt.get(Xe);if(!Oe&&Xe===Sn)return ai();if(!Oe)throw Vn.create("no-app",{appName:Xe});return Oe}function oe(){return Array.from(jt.values())}function se(Xe){return ge.apply(this,arguments)}function ge(){return(ge=(0,d.Z)(function*(Xe){const Oe=Xe.name;jt.has(Oe)&&(jt.delete(Oe),yield Promise.all(Xe.container.getProviders().map(lt=>lt.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function Ae(Xe,Oe,lt){var Lt;let Pt=null!==(Lt=vt[Xe])&&void 0!==Lt?Lt:Xe;lt&&(Pt+=`-${lt}`);const pn=Pt.match(/\s|\//),J=Oe.match(/\s|\//);if(pn||J){const Z=[`Unable to register library "${Pt}" with version "${Oe}":`];return pn&&Z.push(`library name "${Pt}" contains illegal characters (whitespace or "/")`),pn&&J&&Z.push("and"),J&&Z.push(`version name "${Oe}" contains illegal characters (whitespace or "/")`),void Y.warn(Z.join(" "))}Xt(new G.wA(`${Pt}-version`,()=>({library:Pt,version:Oe}),"VERSION"))}function be(Xe,Oe){if(null!==Xe&&"function"!=typeof Xe)throw Vn.create("invalid-log-argument");(0,F.Am)(Xe,Oe)}function rt(Xe){(0,F.Ub)(Xe)}const Mt="firebase-heartbeat-store";let un=null;function At(){return un||(un=(0,pe.X3)("firebase-heartbeat-database",1,{upgrade:(Xe,Oe)=>{0===Oe&&Xe.createObjectStore(Mt)}}).catch(Xe=>{throw Vn.create("idb-open",{originalErrorMessage:Xe.message})})),un}function ht(){return(ht=(0,d.Z)(function*(Xe){try{return(yield At()).transaction(Mt).objectStore(Mt).get(nn(Xe))}catch(Oe){if(Oe instanceof ce.ZR)Y.warn(Oe.message);else{const lt=Vn.create("idb-get",{originalErrorMessage:Oe?.message});Y.warn(lt.message)}}})).apply(this,arguments)}function Mn(Xe,Oe){return wn.apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(Xe,Oe){try{const Lt=(yield At()).transaction(Mt,"readwrite");return yield Lt.objectStore(Mt).put(Oe,nn(Xe)),Lt.done}catch(lt){if(lt instanceof ce.ZR)Y.warn(lt.message);else{const Lt=Vn.create("idb-set",{originalErrorMessage:lt?.message});Y.warn(Lt.message)}}})).apply(this,arguments)}function nn(Xe){return`${Xe.name}!${Xe.options.appId}`}class Gr{constructor(Oe){this.container=Oe,this._heartbeatsCache=null;const lt=this.container.getProvider("app").getImmediate();this._storage=new rn(lt),this._heartbeatsCachePromise=this._storage.read().then(Lt=>(this._heartbeatsCache=Lt,Lt))}triggerHeartbeat(){var Oe=this;return(0,d.Z)(function*(){const Lt=Oe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pt=Gt();if(null===Oe._heartbeatsCache&&(Oe._heartbeatsCache=yield Oe._heartbeatsCachePromise),Oe._heartbeatsCache.lastSentHeartbeatDate!==Pt&&!Oe._heartbeatsCache.heartbeats.some(pn=>pn.date===Pt))return Oe._heartbeatsCache.heartbeats.push({date:Pt,agent:Lt}),Oe._heartbeatsCache.heartbeats=Oe._heartbeatsCache.heartbeats.filter(pn=>{const J=new Date(pn.date).valueOf();return Date.now()-J<=2592e6}),Oe._storage.overwrite(Oe._heartbeatsCache)})()}getHeartbeatsHeader(){var Oe=this;return(0,d.Z)(function*(){if(null===Oe._heartbeatsCache&&(yield Oe._heartbeatsCachePromise),null===Oe._heartbeatsCache||0===Oe._heartbeatsCache.heartbeats.length)return"";const lt=Gt(),{heartbeatsToSend:Lt,unsentEntries:Pt}=function Qr(Xe,Oe=1024){const lt=[];let Lt=Xe.slice();for(const Pt of Xe){const pn=lt.find(J=>J.agent===Pt.agent);if(pn){if(pn.dates.push(Pt.date),qr(lt)>Oe){pn.dates.pop();break}}else if(lt.push({agent:Pt.agent,dates:[Pt.date]}),qr(lt)>Oe){lt.pop();break}Lt=Lt.slice(1)}return{heartbeatsToSend:lt,unsentEntries:Lt}}(Oe._heartbeatsCache.heartbeats),pn=(0,ce.L)(JSON.stringify({version:2,heartbeats:Lt}));return Oe._heartbeatsCache.lastSentHeartbeatDate=lt,Pt.length>0?(Oe._heartbeatsCache.heartbeats=Pt,yield Oe._storage.overwrite(Oe._heartbeatsCache)):(Oe._heartbeatsCache.heartbeats=[],Oe._storage.overwrite(Oe._heartbeatsCache)),pn})()}}function Gt(){return(new Date).toISOString().substring(0,10)}class rn{constructor(Oe){this.app=Oe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Oe=this;return(0,d.Z)(function*(){return(yield Oe._canUseIndexedDBPromise)&&(yield function ot(Xe){return ht.apply(this,arguments)}(Oe.app))||{heartbeats:[]}})()}overwrite(Oe){var lt=this;return(0,d.Z)(function*(){var Lt;if(yield lt._canUseIndexedDBPromise){const pn=yield lt.read();return Mn(lt.app,{lastSentHeartbeatDate:null!==(Lt=Oe.lastSentHeartbeatDate)&&void 0!==Lt?Lt:pn.lastSentHeartbeatDate,heartbeats:Oe.heartbeats})}})()}add(Oe){var lt=this;return(0,d.Z)(function*(){var Lt;if(yield lt._canUseIndexedDBPromise){const pn=yield lt.read();return Mn(lt.app,{lastSentHeartbeatDate:null!==(Lt=Oe.lastSentHeartbeatDate)&&void 0!==Lt?Lt:pn.lastSentHeartbeatDate,heartbeats:[...pn.heartbeats,...Oe.heartbeats]})}})()}}function qr(Xe){return(0,ce.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function Et(Xe){Xt(new G.wA("platform-logger",Oe=>new ve(Oe),"PRIVATE")),Xt(new G.wA("heartbeat",Oe=>new Gr(Oe),"PRIVATE")),Ae(we,"0.9.1",Xe),Ae(we,"0.9.1","esm2017"),Ae("fire-js","")}("")},4859:(_t,Ne,j)=>{"use strict";j.d(Ne,{H0:()=>we,wA:()=>F,zt:()=>pe});var d=j(5861),G=j(2090);class F{constructor(Y,Q,ie){this.name=Y,this.instanceFactory=Q,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const ce="[DEFAULT]";class pe{constructor(Y,Q){this.name=Y,this.container=Q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const Q=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(Q)){const ie=new G.BH;if(this.instancesDeferred.set(Q,ie),this.isInitialized(Q)||this.shouldAutoInitialize())try{const Qe=this.getOrInitializeService({instanceIdentifier:Q});Qe&&ie.resolve(Qe)}catch{}}return this.instancesDeferred.get(Q).promise}getImmediate(Y){var Q;const ie=this.normalizeInstanceIdentifier(Y?.identifier),Qe=null!==(Q=Y?.optional)&&void 0!==Q&&Q;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(Qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(je){if(Qe)return null;throw je}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if(function xe(Te){return"EAGER"===Te.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[Q,ie]of this.instancesDeferred.entries()){const Qe=this.normalizeInstanceIdentifier(Q);try{const je=this.getOrInitializeService({instanceIdentifier:Qe});ie.resolve(je)}catch{}}}}clearInstance(Y=ce){this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}delete(){var Y=this;return(0,d.Z)(function*(){const Q=Array.from(Y.instances.values());yield Promise.all([...Q.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...Q.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Y=ce){return this.instances.has(Y)}getOptions(Y=ce){return this.instancesOptions.get(Y)||{}}initialize(Y={}){const{options:Q={}}=Y,ie=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Qe=this.getOrInitializeService({instanceIdentifier:ie,options:Q});for(const[je,nt]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(je)&&nt.resolve(Qe);return Qe}onInit(Y,Q){var ie;const Qe=this.normalizeInstanceIdentifier(Q),je=null!==(ie=this.onInitCallbacks.get(Qe))&&void 0!==ie?ie:new Set;je.add(Y),this.onInitCallbacks.set(Qe,je);const nt=this.instances.get(Qe);return nt&&Y(nt,Qe),()=>{je.delete(Y)}}invokeOnInitCallbacks(Y,Q){const ie=this.onInitCallbacks.get(Q);if(ie)for(const Qe of ie)try{Qe(Y,Q)}catch{}}getOrInitializeService({instanceIdentifier:Y,options:Q={}}){let ie=this.instances.get(Y);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(Te=Y,Te===ce?void 0:Te),options:Q}),this.instances.set(Y,ie),this.instancesOptions.set(Y,Q),this.invokeOnInitCallbacks(ie,Y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Y,ie)}catch{}var Te;return ie||null}normalizeInstanceIdentifier(Y=ce){return this.component?this.component.multipleInstances?Y:ce:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class we{constructor(Y){this.name=Y,this.providers=new Map}addComponent(Y){const Q=this.getProvider(Y.name);if(Q.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);Q.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const Q=new pe(Y,this);return this.providers.set(Y,Q),Q}getProviders(){return Array.from(this.providers.values())}}},1877:(_t,Ne,j)=>{"use strict";j.d(Ne,{Am:()=>Te,Ub:()=>we,Yd:()=>xe,in:()=>G});const d=[];var G=(()=>{return(Y=G||(G={}))[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",G;var Y})();const F={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},ce=G.INFO,pe={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},ve=(Y,Q,...ie)=>{if(Q<Y.logLevel)return;const Qe=(new Date).toISOString(),je=pe[Q];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${Q})`);console[je](`[${Qe}]  ${Y.name}:`,...ie)};class xe{constructor(Q){this.name=Q,this._logLevel=ce,this._logHandler=ve,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(Q){if(!(Q in G))throw new TypeError(`Invalid value "${Q}" assigned to \`logLevel\``);this._logLevel=Q}setLogLevel(Q){this._logLevel="string"==typeof Q?F[Q]:Q}get logHandler(){return this._logHandler}set logHandler(Q){if("function"!=typeof Q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Q}get userLogHandler(){return this._userLogHandler}set userLogHandler(Q){this._userLogHandler=Q}debug(...Q){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...Q),this._logHandler(this,G.DEBUG,...Q)}log(...Q){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...Q),this._logHandler(this,G.VERBOSE,...Q)}info(...Q){this._userLogHandler&&this._userLogHandler(this,G.INFO,...Q),this._logHandler(this,G.INFO,...Q)}warn(...Q){this._userLogHandler&&this._userLogHandler(this,G.WARN,...Q),this._logHandler(this,G.WARN,...Q)}error(...Q){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...Q),this._logHandler(this,G.ERROR,...Q)}}function we(Y){d.forEach(Q=>{Q.setLogLevel(Y)})}function Te(Y,Q){for(const ie of d){let Qe=null;Q&&Q.level&&(Qe=F[Q.level]),ie.userLogHandler=null===Y?null:(je,nt,...ft)=>{const Ie=ft.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch{return null}}).filter(Fe=>Fe).join(" ");nt>=(Qe??je.logLevel)&&Y({level:G[nt].toLowerCase(),message:Ie,args:ft,type:je.name})}}}},259:(_t,Ne,j)=>{"use strict";j.d(Ne,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=j(9681);(0,d.registerVersion)("firebase","9.16.0","app")},9260:(_t,Ne,j)=>{"use strict";j.d(Ne,{Z:()=>d.Z});var d=j(3942);d.Z.registerVersion("firebase","9.16.0","app-compat")},9568:(_t,Ne,j)=>{"use strict";j.r(Ne);var d=j(5861),G=j(3942),F=j(1808),ce=j(2090),xe=(j(9681),j(1877),j(4859));function we(){return window}function Q(){return(Q=(0,d.Z)(function*(q,O,H){var _e;const{BuildInfo:Be}=we();(0,F.ap)(O.sessionId,"AuthEvent did not contain a session ID");const yt=yield Fe(O.sessionId),it={};return(0,F.aq)()?it.ibi=Be.packageName:(0,F.ar)()?it.apn=Be.packageName:(0,F.as)(q,"operation-not-supported-in-this-environment"),Be.displayName&&(it.appDisplayName=Be.displayName),it.sessionId=yt,(0,F.at)(q,H,O.type,void 0,null!==(_e=O.eventId)&&void 0!==_e?_e:void 0,it)})).apply(this,arguments)}function Qe(){return(Qe=(0,d.Z)(function*(q){const{BuildInfo:O}=we(),H={};(0,F.aq)()?H.iosBundleId=O.packageName:(0,F.ar)()?H.androidPackageName=O.packageName:(0,F.as)(q,"operation-not-supported-in-this-environment"),yield(0,F.au)(q,H)})).apply(this,arguments)}function ft(){return(ft=(0,d.Z)(function*(q,O,H){const{cordova:_e}=we();let Be=()=>{};try{yield new Promise((yt,it)=>{let Kt=null;function Tt(){var qt;yt();const zr=null===(qt=_e.plugins.browsertab)||void 0===qt?void 0:qt.close;"function"==typeof zr&&zr(),"function"==typeof H?.close&&H.close()}function Ln(){Kt||(Kt=window.setTimeout(()=>{it((0,F.aw)(q,"redirect-cancelled-by-user"))},2e3))}function Er(){"visible"===document?.visibilityState&&Ln()}O.addPassiveListener(Tt),document.addEventListener("resume",Ln,!1),(0,F.ar)()&&document.addEventListener("visibilitychange",Er,!1),Be=()=>{O.removePassiveListener(Tt),document.removeEventListener("resume",Ln,!1),document.removeEventListener("visibilitychange",Er,!1),Kt&&window.clearTimeout(Kt)}})}finally{Be()}})).apply(this,arguments)}function Fe(q){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,d.Z)(function*(q){const O=$e(q),H=yield crypto.subtle.digest("SHA-256",O);return Array.from(new Uint8Array(H)).map(Be=>Be.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $e(q){if((0,F.ap)(/[0-9a-zA-Z]+/.test(q),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(q);const O=new ArrayBuffer(q.length),H=new Uint8Array(O);for(let _e=0;_e<q.length;_e++)H[_e]=q.charCodeAt(_e);return H}class Le extends F.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(O=>{this.resolveInialized=O})}addPassiveListener(O){this.passiveListeners.add(O)}removePassiveListener(O){this.passiveListeners.delete(O)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(O){return this.resolveInialized(),this.passiveListeners.forEach(H=>H(O)),super.onEvent(O)}initialized(){var O=this;return(0,d.Z)(function*(){yield O.initPromise})()}}function B(q){return ye.apply(this,arguments)}function ye(){return(ye=(0,d.Z)(function*(q){const O=yield ee()._get(ue(q));return O&&(yield ee()._remove(ue(q))),O})).apply(this,arguments)}function re(){const q=[],O="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let H=0;H<20;H++){const _e=Math.floor(Math.random()*O.length);q.push(O.charAt(_e))}return q.join("")}function ee(){return(0,F.az)(F.b)}function ue(q){return(0,F.aA)("authEvent",q.config.apiKey,q.name)}function ze(q){if(!q?.includes("?"))return{};const[O,...H]=q.split("?");return(0,ce.zd)(H.join("?"))}const Sn=class fn{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aB,this._overrideRedirectResult=F.aC}_initialize(O){var H=this;return(0,d.Z)(function*(){const _e=O._key();let Be=H.eventManagers.get(_e);return Be||(Be=new Le(O),H.eventManagers.set(_e,Be),H.attachCallbackListeners(O,Be)),Be})()}_openPopup(O){(0,F.as)(O,"operation-not-supported-in-this-environment")}_openRedirect(O,H,_e,Be){var yt=this;return(0,d.Z)(function*(){!function Ie(q){var O,H,_e,Be,yt,it,Kt,Tt,Ln,Er;const qt=we();(0,F.ax)("function"==typeof(null===(O=qt?.universalLinks)||void 0===O?void 0:O.subscribe),q,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.ax)(typeof(null===(H=qt?.BuildInfo)||void 0===H?void 0:H.packageName)<"u",q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.ax)("function"==typeof(null===(yt=null===(Be=null===(_e=qt?.cordova)||void 0===_e?void 0:_e.plugins)||void 0===Be?void 0:Be.browsertab)||void 0===yt?void 0:yt.openUrl),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.ax)("function"==typeof(null===(Tt=null===(Kt=null===(it=qt?.cordova)||void 0===it?void 0:it.plugins)||void 0===Kt?void 0:Kt.browsertab)||void 0===Tt?void 0:Tt.isAvailable),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.ax)("function"==typeof(null===(Er=null===(Ln=qt?.cordova)||void 0===Ln?void 0:Ln.InAppBrowser)||void 0===Er?void 0:Er.open),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(O);const it=yield yt._initialize(O);yield it.initialized(),it.resetRedirect(),(0,F.aD)(),yield yt._originValidation(O);const Kt=function Ue(q,O,H=null){return{type:O,eventId:H,urlResponse:null,sessionId:re(),postBody:null,tenantId:q.tenantId,error:(0,F.aw)(q,"no-auth-event")}}(O,_e,Be);yield function Je(q,O){return ee()._set(ue(q),O)}(O,Kt);const Tt=yield function Y(q,O,H){return Q.apply(this,arguments)}(O,Kt,H),Ln=yield function je(q){const{cordova:O}=we();return new Promise(H=>{O.plugins.browsertab.isAvailable(_e=>{let Be=null;_e?O.plugins.browsertab.openUrl(q):Be=O.InAppBrowser.open(q,(0,F.av)()?"_blank":"_system","location=yes"),H(Be)})})}(Tt);return function nt(q,O,H){return ft.apply(this,arguments)}(O,it,Ln)})()}_isIframeWebStorageSupported(O,H){throw new Error("Method not implemented.")}_originValidation(O){const H=O._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function ie(q){return Qe.apply(this,arguments)}(O)),this.originValidationPromises[H]}attachCallbackListeners(O,H){const{universalLinks:_e,handleOpenURL:Be,BuildInfo:yt}=we(),it=setTimeout((0,d.Z)(function*(){yield B(O),H.onEvent(vt())}),500),Kt=function(){var Er=(0,d.Z)(function*(qt){clearTimeout(it);const zr=yield B(O);let rl=null;zr&&qt?.url&&(rl=function Ce(q,O){var H,_e;const Be=function Ke(q){const O=ze(q),H=O.link?decodeURIComponent(O.link):void 0,_e=ze(H).link,Be=O.deep_link_id?decodeURIComponent(O.deep_link_id):void 0;return ze(Be).link||Be||_e||H||q}(O);if(Be.includes("/__/auth/callback")){const yt=ze(Be),it=yt.firebaseError?function he(q){try{return JSON.parse(q)}catch{return null}}(decodeURIComponent(yt.firebaseError)):null,Kt=null===(_e=null===(H=it?.code)||void 0===H?void 0:H.split("auth/"))||void 0===_e?void 0:_e[1],Tt=Kt?(0,F.aw)(Kt):null;return Tt?{type:q.type,eventId:q.eventId,tenantId:q.tenantId,error:Tt,urlResponse:null,sessionId:null,postBody:null}:{type:q.type,eventId:q.eventId,tenantId:q.tenantId,sessionId:q.sessionId,urlResponse:Be,postBody:null}}return null}(zr,qt.url)),H.onEvent(rl||vt())});return function(zr){return Er.apply(this,arguments)}}();typeof _e<"u"&&"function"==typeof _e.subscribe&&_e.subscribe(null,Kt);const Tt=Be,Ln=`${yt.packageName.toLowerCase()}://`;we().handleOpenURL=function(){var Er=(0,d.Z)(function*(qt){if(qt.toLowerCase().startsWith(Ln)&&Kt({url:qt}),"function"==typeof Tt)try{Tt(qt)}catch(zr){console.error(zr)}});return function(qt){return Er.apply(this,arguments)}}()}};function vt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.aw)("no-auth-event")}}function Xt(){var q;return(null===(q=self?.location)||void 0===q?void 0:q.protocol)||null}function gr(q=(0,ce.z$)()){return!("file:"!==Xt()&&"ionic:"!==Xt()&&"capacitor:"!==Xt()||!q.toLowerCase().match(/iphone|ipad|ipod|android/))}function Rr(){try{const q=self.localStorage,O=F.aI();if(q)return q.setItem(O,"1"),q.removeItem(O),!function Hr(q=(0,ce.z$)()){return function br(){return(0,ce.w1)()&&11===document?.documentMode}()||function Vn(q=(0,ce.z$)()){return/Edge\/\d+/.test(q)}(q)}()||(0,ce.hl)()}catch{return ai()&&(0,ce.hl)()}return!1}function ai(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Nn(){return(function Dt(){return"http:"===Xt()||"https:"===Xt()}()||(0,ce.ru)()||gr())&&!function Mr(){return(0,ce.b$)()||(0,ce.UG)()}()&&Rr()&&!ai()}function oe(){return gr()&&typeof document<"u"}function ge(){return(ge=(0,d.Z)(function*(){return!!oe()&&new Promise(q=>{const O=setTimeout(()=>{q(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(O),q(!0)})})})).apply(this,arguments)}const be={LOCAL:"local",NONE:"none",SESSION:"session"},rt=F.ax,_n="persistence";function Mt(q){return un.apply(this,arguments)}function un(){return(un=(0,d.Z)(function*(q){yield q._initializationPromise;const O=ot(),H=F.aA(_n,q.config.apiKey,q.name);O&&O.setItem(H,q._getPersistence())})).apply(this,arguments)}function ot(){var q;try{return(null===(q=function Ae(){return typeof window<"u"?window:null}())||void 0===q?void 0:q.sessionStorage)||null}catch{return null}}const ht=F.ax;class Mn{constructor(){this.browserResolver=F.az(F.k),this.cordovaResolver=F.az(Sn),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aB,this._overrideRedirectResult=F.aC}_initialize(O){var H=this;return(0,d.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize(O)})()}_openPopup(O,H,_e,Be){var yt=this;return(0,d.Z)(function*(){return yield yt.selectUnderlyingResolver(),yt.assertedUnderlyingResolver._openPopup(O,H,_e,Be)})()}_openRedirect(O,H,_e,Be){var yt=this;return(0,d.Z)(function*(){return yield yt.selectUnderlyingResolver(),yt.assertedUnderlyingResolver._openRedirect(O,H,_e,Be)})()}_isIframeWebStorageSupported(O,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported(O,H)}_originValidation(O){return this.assertedUnderlyingResolver._originValidation(O)}get _shouldInitProactively(){return oe()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ht(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var O=this;return(0,d.Z)(function*(){if(O.underlyingResolver)return;const H=yield function se(){return ge.apply(this,arguments)}();O.underlyingResolver=H?O.cordovaResolver:O.browserResolver})()}}function wn(q){return q.unwrap()}function An(q){return Gr(q)}function Gr(q){const{_tokenResponse:O}=q instanceof ce.ZR?q.customData:q;if(!O)return null;if(!(q instanceof ce.ZR)&&"temporaryProof"in O&&"phoneNumber"in O)return F.P.credentialFromResult(q);const H=O.providerId;if(!H||H===F.o.PASSWORD)return null;let _e;switch(H){case F.o.GOOGLE:_e=F.Q;break;case F.o.FACEBOOK:_e=F.N;break;case F.o.GITHUB:_e=F.T;break;case F.o.TWITTER:_e=F.W;break;default:const{oauthIdToken:Be,oauthAccessToken:yt,oauthTokenSecret:it,pendingToken:Kt,nonce:Tt}=O;return yt||it||Be||Kt?Kt?H.startsWith("saml.")?F.aL._create(H,Kt):F.J._fromParams({providerId:H,signInMethod:H,pendingToken:Kt,idToken:Be,accessToken:yt}):new F.U(H).credential({idToken:Be,accessToken:yt,rawNonce:Tt}):null}return q instanceof ce.ZR?_e.credentialFromError(q):_e.credentialFromResult(q)}function Gt(q,O){return O.catch(H=>{throw H instanceof ce.ZR&&function Bn(q,O){var H;const _e=null===(H=O.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===O?.code)O.resolver=new qr(q,F.an(q,O));else if(_e){const Be=Gr(O),yt=O;Be&&(yt.credential=Be,yt.tenantId=_e.tenantId||void 0,yt.email=_e.email||void 0,yt.phoneNumber=_e.phoneNumber||void 0)}}(q,H),H}).then(H=>{const Be=H.user;return{operationType:H.operationType,credential:An(H),additionalUserInfo:F.al(H),user:Et.getOrCreate(Be)}})}function Qr(q,O){return rn.apply(this,arguments)}function rn(){return(rn=(0,d.Z)(function*(q,O){const H=yield O;return{verificationId:H.verificationId,confirm:_e=>Gt(q,H.confirm(_e))}})).apply(this,arguments)}class qr{constructor(O,H){this.resolver=H,this.auth=function nn(q){return q.wrapped()}(O)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(O){return Gt(wn(this.auth),this.resolver.resolveSignIn(O))}}class Et{constructor(O){this._delegate=O,this.multiFactor=F.ao(O)}static getOrCreate(O){return Et.USER_MAP.has(O)||Et.USER_MAP.set(O,new Et(O)),Et.USER_MAP.get(O)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(O){return this._delegate.getIdTokenResult(O)}getIdToken(O){return this._delegate.getIdToken(O)}linkAndRetrieveDataWithCredential(O){return this.linkWithCredential(O)}linkWithCredential(O){var H=this;return(0,d.Z)(function*(){return Gt(H.auth,F.Z(H._delegate,O))})()}linkWithPhoneNumber(O,H){var _e=this;return(0,d.Z)(function*(){return Qr(_e.auth,F.l(_e._delegate,O,H))})()}linkWithPopup(O){var H=this;return(0,d.Z)(function*(){return Gt(H.auth,F.d(H._delegate,O,Mn))})()}linkWithRedirect(O){var H=this;return(0,d.Z)(function*(){return yield Mt(F.aE(H.auth)),F.g(H._delegate,O,Mn)})()}reauthenticateAndRetrieveDataWithCredential(O){return this.reauthenticateWithCredential(O)}reauthenticateWithCredential(O){var H=this;return(0,d.Z)(function*(){return Gt(H.auth,F._(H._delegate,O))})()}reauthenticateWithPhoneNumber(O,H){return Qr(this.auth,F.r(this._delegate,O,H))}reauthenticateWithPopup(O){return Gt(this.auth,F.e(this._delegate,O,Mn))}reauthenticateWithRedirect(O){var H=this;return(0,d.Z)(function*(){return yield Mt(F.aE(H.auth)),F.h(H._delegate,O,Mn)})()}sendEmailVerification(O){return F.ab(this._delegate,O)}unlink(O){var H=this;return(0,d.Z)(function*(){return yield F.ak(H._delegate,O),H})()}updateEmail(O){return F.ag(this._delegate,O)}updatePassword(O){return F.ah(this._delegate,O)}updatePhoneNumber(O){return F.u(this._delegate,O)}updateProfile(O){return F.af(this._delegate,O)}verifyBeforeUpdateEmail(O,H){return F.ac(this._delegate,O,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Et.USER_MAP=new WeakMap;const Xe=F.ax;let Oe=(()=>{class q{constructor(H,_e){if(this.app=H,_e.isInitialized())return this._delegate=_e.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Be}=H.options;Xe(Be,"invalid-api-key",{appName:H.name}),Xe(Be,"invalid-api-key",{appName:H.name});const yt=typeof window<"u"?Mn:void 0;this._delegate=_e.initialize({options:{persistence:Lt(Be,H.name),popupRedirectResolver:yt}}),this._delegate._updateErrorMap(F.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Et.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,_e){F.G(this._delegate,H,_e)}applyActionCode(H){return F.a2(this._delegate,H)}checkActionCode(H){return F.a3(this._delegate,H)}confirmPasswordReset(H,_e){return F.a1(this._delegate,H,_e)}createUserWithEmailAndPassword(H,_e){var Be=this;return(0,d.Z)(function*(){return Gt(Be._delegate,F.a5(Be._delegate,H,_e))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return F.aa(this._delegate,H)}isSignInWithEmailLink(H){return F.a8(this._delegate,H)}getRedirectResult(){var H=this;return(0,d.Z)(function*(){Xe(Nn(),H._delegate,"operation-not-supported-in-this-environment");const _e=yield F.j(H._delegate,Mn);return _e?Gt(H._delegate,Promise.resolve(_e)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function jt(q,O){(0,F.aE)(q)._logFramework(O)}(this._delegate,H)}onAuthStateChanged(H,_e,Be){const{next:yt,error:it,complete:Kt}=lt(H,_e,Be);return this._delegate.onAuthStateChanged(yt,it,Kt)}onIdTokenChanged(H,_e,Be){const{next:yt,error:it,complete:Kt}=lt(H,_e,Be);return this._delegate.onIdTokenChanged(yt,it,Kt)}sendSignInLinkToEmail(H,_e){return F.a7(this._delegate,H,_e)}sendPasswordResetEmail(H,_e){return F.a0(this._delegate,H,_e||void 0)}setPersistence(H){var _e=this;return(0,d.Z)(function*(){let Be;switch(function st(q,O){rt(Object.values(be).includes(O),q,"invalid-persistence-type"),(0,ce.b$)()?rt(O!==be.SESSION,q,"unsupported-persistence-type"):(0,ce.UG)()?rt(O===be.NONE,q,"unsupported-persistence-type"):ai()?rt(O===be.NONE||O===be.LOCAL&&(0,ce.hl)(),q,"unsupported-persistence-type"):rt(O===be.NONE||Rr(),q,"unsupported-persistence-type")}(_e._delegate,H),H){case be.SESSION:Be=F.a;break;case be.LOCAL:Be=(yield F.az(F.i)._isAvailable())?F.i:F.b;break;case be.NONE:Be=F.L;break;default:return F.as("argument-error",{appName:_e._delegate.name})}return _e._delegate.setPersistence(Be)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return Gt(this._delegate,F.X(this._delegate))}signInWithCredential(H){return Gt(this._delegate,F.Y(this._delegate,H))}signInWithCustomToken(H){return Gt(this._delegate,F.$(this._delegate,H))}signInWithEmailAndPassword(H,_e){return Gt(this._delegate,F.a6(this._delegate,H,_e))}signInWithEmailLink(H,_e){return Gt(this._delegate,F.a9(this._delegate,H,_e))}signInWithPhoneNumber(H,_e){return Qr(this._delegate,F.s(this._delegate,H,_e))}signInWithPopup(H){var _e=this;return(0,d.Z)(function*(){return Xe(Nn(),_e._delegate,"operation-not-supported-in-this-environment"),Gt(_e._delegate,F.c(_e._delegate,H,Mn))})()}signInWithRedirect(H){var _e=this;return(0,d.Z)(function*(){return Xe(Nn(),_e._delegate,"operation-not-supported-in-this-environment"),yield Mt(_e._delegate),F.f(_e._delegate,H,Mn)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return F.a4(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return q.Persistence=be,q})();function lt(q,O,H){let _e=q;"function"!=typeof q&&({next:_e,error:O,complete:H}=q);const Be=_e;return{next:it=>Be(it&&Et.getOrCreate(it)),error:O,complete:H}}function Lt(q,O){const H=function At(q,O){const H=ot();if(!H)return[];const _e=F.aA(_n,q,O);switch(H.getItem(_e)){case be.NONE:return[F.L];case be.LOCAL:return[F.i,F.a];case be.SESSION:return[F.a];default:return[]}}(q,O);if(typeof self<"u"&&!H.includes(F.i)&&H.push(F.i),typeof window<"u")for(const _e of[F.b,F.a])H.includes(_e)||H.push(_e);return H.includes(F.L)||H.push(F.L),H}class Pt{constructor(){this.providerId="phone",this._delegate=new F.P(wn(G.Z.auth()))}static credential(O,H){return F.P.credential(O,H)}verifyPhoneNumber(O,H){return this._delegate.verifyPhoneNumber(O,H)}unwrap(){return this._delegate}}Pt.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,Pt.PROVIDER_ID=F.P.PROVIDER_ID;const pn=F.ax;class J{constructor(O,H,_e=G.Z.app()){var Be;pn(null===(Be=_e.options)||void 0===Be?void 0:Be.apiKey,"invalid-api-key",{appName:_e.name}),this._delegate=new F.R(O,H,_e.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function te(q){q.INTERNAL.registerComponent(new xe.wA("auth-compat",O=>{const H=O.getProvider("app-compat").getImmediate(),_e=O.getProvider("auth");return new Oe(H,_e)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.M,FacebookAuthProvider:F.N,GithubAuthProvider:F.T,GoogleAuthProvider:F.Q,OAuthProvider:F.U,SAMLAuthProvider:F.V,PhoneAuthProvider:Pt,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:J,TwitterAuthProvider:F.W,Auth:Oe,AuthCredential:F.H,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),q.registerVersion("@firebase/auth-compat","0.3.1")}(G.Z)},8766:(_t,Ne,j)=>{"use strict";j.d(Ne,{Lj:()=>Ge,X3:()=>$e});var d=j(5861);let F,ce;const xe=new WeakMap,we=new WeakMap,Te=new WeakMap,Y=new WeakMap,Q=new WeakMap;let je={get(ye,Ce,re){if(ye instanceof IDBTransaction){if("done"===Ce)return we.get(ye);if("objectStoreNames"===Ce)return ye.objectStoreNames||Te.get(ye);if("store"===Ce)return re.objectStoreNames[1]?void 0:re.objectStore(re.objectStoreNames[0])}return Fe(ye[Ce])},set:(ye,Ce,re)=>(ye[Ce]=re,!0),has:(ye,Ce)=>ye instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in ye};function Ie(ye){return"function"==typeof ye?function ft(ye){return ye!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ye)?function(...Ce){return ye.apply(Pe(this),Ce),Fe(xe.get(this))}:function(...Ce){return Fe(ye.apply(Pe(this),Ce))}:function(Ce,...re){const ee=ye.call(Pe(this),Ce,...re);return Te.set(ee,Ce.sort?Ce.sort():[Ce]),Fe(ee)}}(ye):(ye instanceof IDBTransaction&&function Qe(ye){if(we.has(ye))return;const Ce=new Promise((re,ee)=>{const ue=()=>{ye.removeEventListener("complete",he),ye.removeEventListener("error",Ke),ye.removeEventListener("abort",Ke)},he=()=>{re(),ue()},Ke=()=>{ee(ye.error||new DOMException("AbortError","AbortError")),ue()};ye.addEventListener("complete",he),ye.addEventListener("error",Ke),ye.addEventListener("abort",Ke)});we.set(ye,Ce)}(ye),((ye,Ce)=>Ce.some(re=>ye instanceof re))(ye,function pe(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ye,je):ye)}function Fe(ye){if(ye instanceof IDBRequest)return function ie(ye){const Ce=new Promise((re,ee)=>{const ue=()=>{ye.removeEventListener("success",he),ye.removeEventListener("error",Ke)},he=()=>{re(Fe(ye.result)),ue()},Ke=()=>{ee(ye.error),ue()};ye.addEventListener("success",he),ye.addEventListener("error",Ke)});return Ce.then(re=>{re instanceof IDBCursor&&xe.set(re,ye)}).catch(()=>{}),Q.set(Ce,ye),Ce}(ye);if(Y.has(ye))return Y.get(ye);const Ce=Ie(ye);return Ce!==ye&&(Y.set(ye,Ce),Q.set(Ce,ye)),Ce}const Pe=ye=>Q.get(ye);function $e(ye,Ce,{blocked:re,upgrade:ee,blocking:ue,terminated:he}={}){const Ke=indexedDB.open(ye,Ce),ze=Fe(Ke);return ee&&Ke.addEventListener("upgradeneeded",bt=>{ee(Fe(Ke.result),bt.oldVersion,bt.newVersion,Fe(Ke.transaction))}),re&&Ke.addEventListener("blocked",()=>re()),ze.then(bt=>{he&&bt.addEventListener("close",()=>he()),ue&&bt.addEventListener("versionchange",()=>ue())}).catch(()=>{}),ze}function Ge(ye,{blocked:Ce}={}){const re=indexedDB.deleteDatabase(ye);return Ce&&re.addEventListener("blocked",()=>Ce()),Fe(re).then(()=>{})}const Le=["get","getKey","getAll","getAllKeys","count"],Ue=["put","add","delete","clear"],Je=new Map;function B(ye,Ce){if(!(ye instanceof IDBDatabase)||Ce in ye||"string"!=typeof Ce)return;if(Je.get(Ce))return Je.get(Ce);const re=Ce.replace(/FromIndex$/,""),ee=Ce!==re,ue=Ue.includes(re);if(!(re in(ee?IDBIndex:IDBObjectStore).prototype)||!ue&&!Le.includes(re))return;const he=function(){var Ke=(0,d.Z)(function*(ze,...bt){const fn=this.transaction(ze,ue?"readwrite":"readonly");let Sn=fn.store;return ee&&(Sn=Sn.index(bt.shift())),(yield Promise.all([Sn[re](...bt),ue&&fn.done]))[0]});return function(bt){return Ke.apply(this,arguments)}}();return Je.set(Ce,he),he}!function nt(ye){je=ye(je)}(ye=>({...ye,get:(Ce,re,ee)=>B(Ce,re)||ye.get(Ce,re,ee),has:(Ce,re)=>!!B(Ce,re)||ye.has(Ce,re)}))},5861:(_t,Ne,j)=>{"use strict";function d(F,ce,pe,ve,xe,we,Te){try{var Y=F[we](Te),Q=Y.value}catch(ie){return void pe(ie)}Y.done?ce(Q):Promise.resolve(Q).then(ve,xe)}function G(F){return function(){var ce=this,pe=arguments;return new Promise(function(ve,xe){var we=F.apply(ce,pe);function Te(Q){d(we,ve,xe,Te,Y,"next",Q)}function Y(Q){d(we,ve,xe,Te,Y,"throw",Q)}Te(void 0)})}}j.d(Ne,{Z:()=>G})}},_t=>{var Ne=d=>_t(_t.s=d);Ne(1321),Ne(3064)}]);